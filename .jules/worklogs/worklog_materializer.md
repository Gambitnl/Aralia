## 2024-05-23 - NPC Visual Spec Gap **Learning:** Found that `NPC` type lacked structured visual data (unlike `PlayerCharacter`), relying on implied visuals from text. Defined `NPCVisualSpec` to bridge this, enabling both static assets and AI generation prompts. **Action:** Always check core entity types for explicit visual contracts; if missing, define a spec that supports both manual paths and generative prompts.
## 2024-05-23 - Visual Spec Integration **Learning:** Integrated `NPCVisualSpec` directly into the `NPC` interface to allow fallback resolution in the visual pipeline. This decouples visual data from game logic and enables seamless fallbacks. **Action:** Ensure all entity types (Items, Spells, etc.) have an optional `visual` property that links to their respective spec.
## 2024-05-23 - Class Visual System **Learning:** Found duplicated hardcoded switch statements for class icons in multiple components. Created a centralized `ClassVisualSpec` and registry in `src/types/visuals.ts` to standardize icons, colors, and descriptions. **Action:** Prefer central registries for entity visuals (classes, races, schools) over component-level logic to ensure consistency and ease of updates.
## 2025-12-23 - Race Visual Spec Gap **Learning:** Found that `Race` type relied on a legacy `imageUrl` string. Defined `RaceVisualSpec` to standardize asset definitions and enable AI generation. **Action:** Always look for scalar visual properties (like strings) that should be structured specs.
## 2025-05-23 - Spell Visual Specs **Learning:** Spells lacked a visual specification beyond icons. Designed `SpellEffectVisualSpec` to define projectiles, impacts, and casting animations. **Action:** Ensure all new effect systems include a visual property.
