## 2024-05-24 - [Refactoring Visual Logic] **Learning:** Using inline 'onError' handlers that manually append DOM nodes is a React anti-pattern that bypasses the virtual DOM. **Action:** Always wrap such logic in a dedicated sub-component that manages the error state (e.g., 'imageError') via 'useState', ensuring the UI updates predictably within the React lifecycle.

## 2024-05-25 - [Type-Safe Test Mocks] **Learning:** Tests relying on `any` casts to bypass type checks (e.g., `class: 'Wizard' as any`) obscure interface mismatches and accumulate technical debt. **Action:** Use shared factory functions (like `createMockCombatState` or `createMockCombatCharacter`) or define minimal compliant objects (like `mockWizardClass`) within the test file to enforce type safety without creating comprehensive manual mocks.
