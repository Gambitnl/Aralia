
## 2024-05-21 - HP Pool Allocation Gap **Learning:** Spells like Sleep and Color Spray use a "resource pool allocation" targeting logic that doesn't exist in the current `AreaTargeting` system. They require rolling dice to determine a pool, sorting targets by a property (HP), and iteratively applying effects until the pool is exhausted. **Action:** Introduced `TargetAllocation` interface to `src/types/spells.ts` and created `TargetAllocator` service to handle this logic. Future complex targeting (like Chain Lightning's "nearest" logic) should follow this pattern.
