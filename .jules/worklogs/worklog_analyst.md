## 2024-05-21 - HP Pool Allocation Gap **Learning:** Spells like Sleep and Color Spray use a "resource pool allocation" targeting logic that doesn't exist in the current `AreaTargeting` system. They require rolling dice to determine a pool, sorting targets by a property (HP), and iteratively applying effects until the pool is exhausted. **Action:** Introduced `TargetAllocation` interface to `src/types/spells.ts` and created `TargetAllocator` service to handle this logic. Future complex targeting (like Chain Lightning's "nearest" logic) should follow this pattern.

## 2024-10-24 - Object Targeting Gap **Learning:** The current targeting system (`TargetResolver`) is strictly `CombatCharacter`-based. Spells like *Animate Dead* or *Catapult* that target items/objects cannot be implemented without extending `validTargets` to support `Item` validation and introducing an `ObjectTargeting` service. **Action:** Created `ObjectTargeting` framework to allow validating `Item` targets against filters like `objectType: "corpse"`. Future spells targeting items should use `ObjectTargeting.isValidObjectTarget` instead of shoehorning items into `CombatCharacter` types.
