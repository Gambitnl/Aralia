(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();String.prototype.replaceAll===void 0&&(String.prototype.replaceAll=function(e,n){return Object.prototype.toString.call(e).toLowerCase()==="[object regexp]"?this.replace(e,n):this.replace(new RegExp(e,"g"),n)});Array.prototype.flat===void 0&&(Array.prototype.flat=function(e){return this.reduce((n,t)=>Array.isArray(t)?n.concat(t.flat(e)):n.concat(t),[])});Array.prototype.at===void 0&&(Array.prototype.at=function(e){if(e<0&&(e+=this.length),!(e<0||e>=this.length))return this[e]});ReadableStream.prototype[Symbol.asyncIterator]===void 0&&(ReadableStream.prototype[Symbol.asyncIterator]=async function*(){const e=this.getReader();try{for(;;){const{done:n,value:t}=await e.read();if(n)return;yield t}}finally{e.releaseLock()}});const L=(e,n=0)=>{const t=10**n;return Math.round(e*t)/t},Pe=(e,n,t)=>Math.min(Math.max(e,n),t),gn=e=>Pe(e,0,100),dr=(e,n,t)=>Pe((e-n)/(t-n),0,1),ja=(e,n,t)=>e+(n-e)*t,gr=e=>e[e.length-1],jf=e=>[...new Set(e)],Up=e=>{const n=u=>u,t=u=>u.map(n),a=u=>Object.fromEntries(Object.entries(u).map(([l,c])=>[l,r(c)])),r=u=>u instanceof Object?(o.get(u.constructor)||n)(u):u,i=u=>[...u.entries()].map(([l,c])=>[l,r(c)]),o=new Map([[Int8Array,t],[Uint8Array,t],[Uint8ClampedArray,t],[Int16Array,t],[Uint16Array,t],[Int32Array,t],[Uint32Array,t],[Float32Array,t],[Float64Array,t],[BigInt64Array,t],[BigUint64Array,t],[Map,u=>new Map(i(u))],[WeakMap,u=>new WeakMap(i(u))],[Array,u=>u.map(r)],[Set,u=>[...u.values()].map(r)],[Date,u=>new Date(u.getTime())],[Object,a]]);return r(e)},Yf=e=>(console.assert(Number.isInteger(e)&&e>=0&&e<=Rn.UINT32_MAX,`Array maxValue must be an integer between 0 and ${Rn.UINT32_MAX}, got ${e}`),e<=Rn.UINT8_MAX?Uint8Array:e<=Rn.UINT16_MAX?Uint16Array:(e<=Rn.UINT32_MAX,Uint32Array)),So=({maxValue:e,length:n,from:t})=>{const a=Yf(e);return t?a.from(t):new a(n)},Rn={INT8_MAX:127,UINT8_MAX:255,UINT16_MAX:65535,UINT32_MAX:4294967295};function ke(e,n){return e==null||n==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function Vf(e,n){return e==null||n==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function _o(e){let n,t,a;e.length!==2?(n=ke,t=(u,l)=>ke(e(u),l),a=(u,l)=>e(u)-l):(n=e===ke||e===Vf?e:jp,t=e,a=e);function r(u,l,c=0,h=u.length){if(c<h){if(n(l,l)!==0)return h;do{const f=c+h>>>1;t(u[f],l)<0?c=f+1:h=f}while(c<h)}return c}function i(u,l,c=0,h=u.length){if(c<h){if(n(l,l)!==0)return h;do{const f=c+h>>>1;t(u[f],l)<=0?c=f+1:h=f}while(c<h)}return c}function o(u,l,c=0,h=u.length){const f=r(u,l,c,h-1);return f>c&&a(u[f-1],l)>-a(u[f],l)?f-1:f}return{left:r,center:o,right:i}}function jp(){return 0}function Ni(e){return e===null?NaN:+e}function*Yp(e,n){if(n===void 0)for(let t of e)t!=null&&(t=+t)>=t&&(yield t);else{let t=-1;for(let a of e)(a=n(a,++t,e))!=null&&(a=+a)>=a&&(yield a)}}const Wf=_o(ke),ht=Wf.right,Vp=Wf.left,Wp=_o(Ni).center;function Zp(e,n){if(!((n=+n)>=0))throw new RangeError("invalid r");let t=e.length;if(!((t=Math.floor(t))>=0))throw new RangeError("invalid length");if(!t||!n)return e;const a=Zu(n),r=e.slice();return a(e,r,0,t,1),a(r,e,0,t,1),a(e,r,0,t,1),e}const Zf=Xf(Zu),Xp=Xf(Qp);function Xf(e){return function(n,t,a=t){if(!((t=+t)>=0))throw new RangeError("invalid rx");if(!((a=+a)>=0))throw new RangeError("invalid ry");let{data:r,width:i,height:o}=n;if(!((i=Math.floor(i))>=0))throw new RangeError("invalid width");if(!((o=Math.floor(o!==void 0?o:r.length/i))>=0))throw new RangeError("invalid height");if(!i||!o||!t&&!a)return n;const u=t&&e(t),l=a&&e(a),c=r.slice();return u&&l?(Wt(u,c,r,i,o),Wt(u,r,c,i,o),Wt(u,c,r,i,o),Zt(l,r,c,i,o),Zt(l,c,r,i,o),Zt(l,r,c,i,o)):u?(Wt(u,r,c,i,o),Wt(u,c,r,i,o),Wt(u,r,c,i,o)):l&&(Zt(l,r,c,i,o),Zt(l,c,r,i,o),Zt(l,r,c,i,o)),n}}function Wt(e,n,t,a,r){for(let i=0,o=a*r;i<o;)e(n,t,i,i+=a,1)}function Zt(e,n,t,a,r){for(let i=0,o=a*r;i<a;++i)e(n,t,i,i+o,a)}function Qp(e){const n=Zu(e);return(t,a,r,i,o)=>{r<<=2,i<<=2,o<<=2,n(t,a,r+0,i+0,o),n(t,a,r+1,i+1,o),n(t,a,r+2,i+2,o),n(t,a,r+3,i+3,o)}}function Zu(e){const n=Math.floor(e);if(n===e)return Jp(e);const t=e-n,a=2*e+1;return(r,i,o,u,l)=>{if(!((u-=l)>=o))return;let c=n*i[o];const h=l*n,f=h+l;for(let s=o,d=o+h;s<d;s+=l)c+=i[Math.min(u,s)];for(let s=o,d=u;s<=d;s+=l)c+=i[Math.min(u,s+h)],r[s]=(c+t*(i[Math.max(o,s-f)]+i[Math.min(u,s+f)]))/a,c-=i[Math.max(o,s-h)]}}function Jp(e){const n=2*e+1;return(t,a,r,i,o)=>{if(!((i-=o)>=r))return;let u=e*a[r];const l=o*e;for(let c=r,h=r+l;c<h;c+=o)u+=a[Math.min(i,c)];for(let c=r,h=i;c<=h;c+=o)u+=a[Math.min(i,c+l)],t[c]=u/n,u-=a[Math.max(r,c-l)]}}function Ao(e,n){let t=0;if(n===void 0)for(let a of e)a!=null&&(a=+a)>=a&&++t;else{let a=-1;for(let r of e)(r=n(r,++a,e))!=null&&(r=+r)>=r&&++t}return t}function e1(e){return e.length|0}function n1(e){return!(e>0)}function t1(e){return typeof e!="object"||"length"in e?e:Array.from(e)}function a1(e){return n=>e(...n)}function r1(...e){const n=typeof e[e.length-1]=="function"&&a1(e.pop());e=e.map(t1);const t=e.map(e1),a=e.length-1,r=new Array(a+1).fill(0),i=[];if(a<0||t.some(n1))return i;for(;;){i.push(r.map((u,l)=>e[l][u]));let o=a;for(;++r[o]===t[o];){if(o===0)return n?i.map(n):i;r[o--]=0}}}function i1(e,n){var t=0,a=0;return Float64Array.from(e,n===void 0?r=>t+=+r||0:r=>t+=+n(r,a++,e)||0)}function Qf(e,n){let t=0,a,r=0,i=0;if(n===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(a=o-r,r+=a/++t,i+=a*(o-r));else{let o=-1;for(let u of e)(u=n(u,++o,e))!=null&&(u=+u)>=u&&(a=u-r,r+=a/++t,i+=a*(u-r))}if(t>1)return i/(t-1)}function Jf(e,n){const t=Qf(e,n);return t&&Math.sqrt(t)}function Tt(e,n){let t,a;if(n===void 0)for(const r of e)r!=null&&(t===void 0?r>=r&&(t=a=r):(t>r&&(t=r),a<r&&(a=r)));else{let r=-1;for(let i of e)(i=n(i,++r,e))!=null&&(t===void 0?i>=i&&(t=a=i):(t>i&&(t=i),a<i&&(a=i)))}return[t,a]}class ze{constructor(){this._partials=new Float64Array(32),this._n=0}add(n){const t=this._partials;let a=0;for(let r=0;r<this._n&&r<32;r++){const i=t[r],o=n+i,u=Math.abs(n)<Math.abs(i)?n-(o-i):i-(o-n);u&&(t[a++]=u),n=o}return t[a]=n,this._n=a+1,this}valueOf(){const n=this._partials;let t=this._n,a,r,i,o=0;if(t>0){for(o=n[--t];t>0&&(a=o,r=n[--t],o=a+r,i=r-(o-a),!i););t>0&&(i<0&&n[t-1]<0||i>0&&n[t-1]>0)&&(r=i*2,a=o+r,r==a-o&&(o=a))}return o}}function o1(e,n){const t=new ze;if(n===void 0)for(let a of e)(a=+a)&&t.add(a);else{let a=-1;for(let r of e)(r=+n(r,++a,e))&&t.add(r)}return+t}function s1(e,n){const t=new ze;let a=-1;return Float64Array.from(e,n===void 0?r=>t.add(+r||0):r=>t.add(+n(r,++a,e)||0))}class mr extends Map{constructor(n,t=td){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),n!=null)for(const[a,r]of n)this.set(a,r)}get(n){return super.get(Qs(this,n))}has(n){return super.has(Qs(this,n))}set(n,t){return super.set(ed(this,n),t)}delete(n){return super.delete(nd(this,n))}}class Rt extends Set{constructor(n,t=td){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),n!=null)for(const a of n)this.add(a)}has(n){return super.has(Qs(this,n))}add(n){return super.add(ed(this,n))}delete(n){return super.delete(nd(this,n))}}function Qs({_intern:e,_key:n},t){const a=n(t);return e.has(a)?e.get(a):t}function ed({_intern:e,_key:n},t){const a=n(t);return e.has(a)?e.get(a):(e.set(a,t),t)}function nd({_intern:e,_key:n},t){const a=n(t);return e.has(a)&&(t=e.get(a),e.delete(a)),t}function td(e){return e!==null&&typeof e=="object"?e.valueOf():e}function ga(e){return e}function ad(e,...n){return Ba(e,ga,ga,n)}function rd(e,...n){return Ba(e,Array.from,ga,n)}function id(e,n){for(let t=1,a=n.length;t<a;++t)e=e.flatMap(r=>r.pop().map(([i,o])=>[...r,i,o]));return e}function u1(e,...n){return id(rd(e,...n),n)}function l1(e,n,...t){return id(sd(e,n,...t),t)}function od(e,n,...t){return Ba(e,ga,n,t)}function sd(e,n,...t){return Ba(e,Array.from,n,t)}function c1(e,...n){return Ba(e,ga,ud,n)}function h1(e,...n){return Ba(e,Array.from,ud,n)}function ud(e){if(e.length!==1)throw new Error("duplicate key");return e[0]}function Ba(e,n,t,a){return(function r(i,o){if(o>=a.length)return t(i);const u=new mr,l=a[o++];let c=-1;for(const h of i){const f=l(h,++c,i),s=u.get(f);s?s.push(h):u.set(f,[h])}for(const[h,f]of u)u.set(h,r(f,o));return n(u)})(e,0)}function ld(e,n){return Array.from(n,t=>e[t])}function Js(e,...n){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[t]=n;if(t&&t.length!==2||n.length>1){const a=Uint32Array.from(e,(r,i)=>i);return n.length>1?(n=n.map(r=>e.map(r)),a.sort((r,i)=>{for(const o of n){const u=ma(o[r],o[i]);if(u)return u}})):(t=e.map(t),a.sort((r,i)=>ma(t[r],t[i]))),ld(e,a)}return e.sort(Xu(t))}function Xu(e=ke){if(e===ke)return ma;if(typeof e!="function")throw new TypeError("compare is not a function");return(n,t)=>{const a=e(n,t);return a||a===0?a:(e(t,t)===0)-(e(n,n)===0)}}function ma(e,n){return(e==null||!(e>=e))-(n==null||!(n>=n))||(e<n?-1:e>n?1:0)}function f1(e,n,t){return(n.length!==2?Js(od(e,n,t),(([a,r],[i,o])=>ke(r,o)||ke(a,i))):Js(ad(e,t),(([a,r],[i,o])=>n(r,o)||ke(a,i)))).map(([a])=>a)}var d1=Array.prototype,g1=d1.slice;function ds(e){return()=>e}const m1=Math.sqrt(50),p1=Math.sqrt(10),y1=Math.sqrt(2);function Ri(e,n,t){const a=(n-e)/Math.max(0,t),r=Math.floor(Math.log10(a)),i=a/Math.pow(10,r),o=i>=m1?10:i>=p1?5:i>=y1?2:1;let u,l,c;return r<0?(c=Math.pow(10,-r)/o,u=Math.round(e*c),l=Math.round(n*c),u/c<e&&++u,l/c>n&&--l,c=-c):(c=Math.pow(10,r)*o,u=Math.round(e/c),l=Math.round(n/c),u*c<e&&++u,l*c>n&&--l),l<u&&.5<=t&&t<2?Ri(e,n,t*2):[u,l,c]}function Bt(e,n,t){if(n=+n,e=+e,t=+t,!(t>0))return[];if(e===n)return[e];const a=n<e,[r,i,o]=a?Ri(n,e,t):Ri(e,n,t);if(!(i>=r))return[];const u=i-r+1,l=new Array(u);if(a)if(o<0)for(let c=0;c<u;++c)l[c]=(i-c)/-o;else for(let c=0;c<u;++c)l[c]=(i-c)*o;else if(o<0)for(let c=0;c<u;++c)l[c]=(r+c)/-o;else for(let c=0;c<u;++c)l[c]=(r+c)*o;return l}function Pt(e,n,t){return n=+n,e=+e,t=+t,Ri(e,n,t)[2]}function Bi(e,n,t){n=+n,e=+e,t=+t;const a=n<e,r=a?Pt(n,e,t):Pt(e,n,t);return(a?-1:1)*(r<0?1/-r:r)}function Qu(e,n,t){let a;for(;;){const r=Pt(e,n,t);if(r===a||r===0||!isFinite(r))return[e,n];r>0?(e=Math.floor(e/r)*r,n=Math.ceil(n/r)*r):r<0&&(e=Math.ceil(e*r)/r,n=Math.floor(n*r)/r),a=r}}function Ju(e){return Math.max(1,Math.ceil(Math.log(Ao(e))/Math.LN2)+1)}function kc(){var e=ga,n=Tt,t=Ju;function a(r){Array.isArray(r)||(r=Array.from(r));var i,o=r.length,u,l,c=new Array(o);for(i=0;i<o;++i)c[i]=e(r[i],i,r);var h=n(c),f=h[0],s=h[1],d=t(c,f,s);if(!Array.isArray(d)){const v=s,b=+d;if(n===Tt&&([f,s]=Qu(f,s,b)),d=Bt(f,s,b),d[0]<=f&&(l=Pt(f,s,b)),d[d.length-1]>=s)if(v>=s&&n===Tt){const w=Pt(f,s,b);isFinite(w)&&(w>0?s=(Math.floor(s/w)+1)*w:w<0&&(s=(Math.ceil(s*-w)+1)/-w))}else d.pop()}for(var g=d.length,p=0,m=g;d[p]<=f;)++p;for(;d[m-1]>s;)--m;(p||m<g)&&(d=d.slice(p,m),g=m-p);var y=new Array(g+1),k;for(i=0;i<=g;++i)k=y[i]=[],k.x0=i>0?d[i-1]:f,k.x1=i<g?d[i]:s;if(isFinite(l)){if(l>0)for(i=0;i<o;++i)(u=c[i])!=null&&f<=u&&u<=s&&y[Math.min(g,Math.floor((u-f)/l))].push(r[i]);else if(l<0){for(i=0;i<o;++i)if((u=c[i])!=null&&f<=u&&u<=s){const v=Math.floor((f-u)*l);y[Math.min(g,v+(d[v]<=u))].push(r[i])}}}else for(i=0;i<o;++i)(u=c[i])!=null&&f<=u&&u<=s&&y[ht(d,u,0,g)].push(r[i]);return y}return a.value=function(r){return arguments.length?(e=typeof r=="function"?r:ds(r),a):e},a.domain=function(r){return arguments.length?(n=typeof r=="function"?r:ds([r[0],r[1]]),a):n},a.thresholds=function(r){return arguments.length?(t=typeof r=="function"?r:ds(Array.isArray(r)?g1.call(r):r),a):t},a}function vn(e,n){let t;if(n===void 0)for(const a of e)a!=null&&(t<a||t===void 0&&a>=a)&&(t=a);else{let a=-1;for(let r of e)(r=n(r,++a,e))!=null&&(t<r||t===void 0&&r>=r)&&(t=r)}return t}function el(e,n){let t,a=-1,r=-1;if(n===void 0)for(const i of e)++r,i!=null&&(t<i||t===void 0&&i>=i)&&(t=i,a=r);else for(let i of e)(i=n(i,++r,e))!=null&&(t<i||t===void 0&&i>=i)&&(t=i,a=r);return a}function An(e,n){let t;if(n===void 0)for(const a of e)a!=null&&(t>a||t===void 0&&a>=a)&&(t=a);else{let a=-1;for(let r of e)(r=n(r,++a,e))!=null&&(t>r||t===void 0&&r>=r)&&(t=r)}return t}function nl(e,n){let t,a=-1,r=-1;if(n===void 0)for(const i of e)++r,i!=null&&(t>i||t===void 0&&i>=i)&&(t=i,a=r);else for(let i of e)(i=n(i,++r,e))!=null&&(t>i||t===void 0&&i>=i)&&(t=i,a=r);return a}function xo(e,n,t=0,a=1/0,r){if(n=Math.floor(n),t=Math.floor(Math.max(0,t)),a=Math.floor(Math.min(e.length-1,a)),!(t<=n&&n<=a))return e;for(r=r===void 0?ma:Xu(r);a>t;){if(a-t>600){const l=a-t+1,c=n-t+1,h=Math.log(l),f=.5*Math.exp(2*h/3),s=.5*Math.sqrt(h*f*(l-f)/l)*(c-l/2<0?-1:1),d=Math.max(t,Math.floor(n-c*f/l+s)),g=Math.min(a,Math.floor(n+(l-c)*f/l+s));xo(e,n,d,g,r)}const i=e[n];let o=t,u=a;for(Ka(e,t,n),r(e[a],i)>0&&Ka(e,t,a);o<u;){for(Ka(e,o,u),++o,--u;r(e[o],i)<0;)++o;for(;r(e[u],i)>0;)--u}r(e[t],i)===0?Ka(e,t,u):(++u,Ka(e,u,a)),u<=n&&(t=u+1),n<=u&&(a=u-1)}return e}function Ka(e,n,t){const a=e[n];e[n]=e[t],e[t]=a}function cd(e,n=ke){let t,a=!1;if(n.length===1){let r;for(const i of e){const o=n(i);(a?ke(o,r)>0:ke(o,o)===0)&&(t=i,r=o,a=!0)}}else for(const r of e)(a?n(r,t)>0:n(r,r)===0)&&(t=r,a=!0);return t}function pr(e,n,t){if(e=Float64Array.from(Yp(e,t)),!(!(a=e.length)||isNaN(n=+n))){if(n<=0||a<2)return An(e);if(n>=1)return vn(e);var a,r=(a-1)*n,i=Math.floor(r),o=vn(xo(e,i).subarray(0,i+1)),u=An(e.subarray(i+1));return o+(u-o)*(r-i)}}function hd(e,n,t=Ni){if(!(!(a=e.length)||isNaN(n=+n))){if(n<=0||a<2)return+t(e[0],0,e);if(n>=1)return+t(e[a-1],a-1,e);var a,r=(a-1)*n,i=Math.floor(r),o=+t(e[i],i,e),u=+t(e[i+1],i+1,e);return o+(u-o)*(r-i)}}function fd(e,n,t=Ni){if(!isNaN(n=+n)){if(a=Float64Array.from(e,(u,l)=>Ni(t(e[l],l,e))),n<=0)return nl(a);if(n>=1)return el(a);var a,r=Uint32Array.from(e,(u,l)=>l),i=a.length-1,o=Math.floor(i*n);return xo(r,o,0,i,(u,l)=>ma(a[u],a[l])),o=cd(r.subarray(0,o+1),u=>a[u]),o>=0?o:-1}}function b1(e,n,t){const a=Ao(e),r=pr(e,.75)-pr(e,.25);return a&&r?Math.ceil((t-n)/(2*r*Math.pow(a,-1/3))):1}function v1(e,n,t){const a=Ao(e),r=Jf(e);return a&&r?Math.ceil((t-n)*Math.cbrt(a)/(3.49*r)):1}function ft(e,n){let t=0,a=0;if(n===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(++t,a+=r);else{let r=-1;for(let i of e)(i=n(i,++r,e))!=null&&(i=+i)>=i&&(++t,a+=i)}if(t)return a/t}function dd(e,n){return pr(e,.5,n)}function k1(e,n){return fd(e,.5,n)}function*w1(e){for(const n of e)yield*n}function tl(e){return Array.from(w1(e))}function M1(e,n){const t=new mr;if(n===void 0)for(let i of e)i!=null&&i>=i&&t.set(i,(t.get(i)||0)+1);else{let i=-1;for(let o of e)(o=n(o,++i,e))!=null&&o>=o&&t.set(o,(t.get(o)||0)+1)}let a,r=0;for(const[i,o]of t)o>r&&(r=o,a=i);return a}function S1(e,n=_1){const t=[];let a,r=!1;for(const i of e)r&&t.push(n(a,i)),a=i,r=!0;return t}function _1(e,n){return[e,n]}function Oe(e,n,t){e=+e,n=+n,t=(r=arguments.length)<2?(n=e,e=0,1):r<3?1:+t;for(var a=-1,r=Math.max(0,Math.ceil((n-e)/t))|0,i=new Array(r);++a<r;)i[a]=e+a*t;return i}function A1(e,n=ke){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let t=Array.from(e);const a=new Float64Array(t.length);n.length!==2&&(t=t.map(n),n=ke);const r=(u,l)=>n(t[u],t[l]);let i,o;return e=Uint32Array.from(t,(u,l)=>l),e.sort(n===ke?(u,l)=>ma(t[u],t[l]):Xu(r)),e.forEach((u,l)=>{const c=r(u,i===void 0?u:i);c>=0?((i===void 0||c>0)&&(i=u,o=l),a[u]=o):a[u]=NaN}),a}function x1(e,n=ke){let t,a=!1;if(n.length===1){let r;for(const i of e){const o=n(i);(a?ke(o,r)<0:ke(o,o)===0)&&(t=i,r=o,a=!0)}}else for(const r of e)(a?n(r,t)<0:n(r,r)===0)&&(t=r,a=!0);return t}function pa(e,n=ke){if(n.length===1)return nl(e,n);let t,a=-1,r=-1;for(const i of e)++r,(a<0?n(i,i)===0:n(i,t)<0)&&(t=i,a=r);return a}function T1(e,n=ke){if(n.length===1)return el(e,n);let t,a=-1,r=-1;for(const i of e)++r,(a<0?n(i,i)===0:n(i,t)>0)&&(t=i,a=r);return a}function z1(e,n){const t=pa(e,n);return t<0?void 0:t}const C1=al(Math.random);function al(e){return function(t,a=0,r=t.length){let i=r-(a=+a);for(;i;){const o=e()*i--|0,u=t[i+a];t[i+a]=t[o+a],t[o+a]=u}return t}}function Pi(e,n){let t=0;if(n===void 0)for(let a of e)(a=+a)&&(t+=a);else{let a=-1;for(let r of e)(r=+n(r,++a,e))&&(t+=r)}return t}function gd(e){if(!(i=e.length))return[];for(var n=-1,t=An(e,E1),a=new Array(t);++n<t;)for(var r=-1,i,o=a[n]=new Array(i);++r<i;)o[r]=e[r][n];return a}function E1(e){return e.length}function N1(){return gd(arguments)}function R1(e,n){if(typeof n!="function")throw new TypeError("test is not a function");let t=-1;for(const a of e)if(!n(a,++t,e))return!1;return!0}function B1(e,n){if(typeof n!="function")throw new TypeError("test is not a function");let t=-1;for(const a of e)if(n(a,++t,e))return!0;return!1}function P1(e,n){if(typeof n!="function")throw new TypeError("test is not a function");const t=[];let a=-1;for(const r of e)n(r,++a,e)&&t.push(r);return t}function I1(e,n){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");if(typeof n!="function")throw new TypeError("mapper is not a function");return Array.from(e,(t,a)=>n(t,a,e))}function $1(e,n,t){if(typeof n!="function")throw new TypeError("reducer is not a function");const a=e[Symbol.iterator]();let r,i,o=-1;if(arguments.length<3){if({done:r,value:t}=a.next(),r)return;++o}for(;{done:r,value:i}=a.next(),!r;)t=n(t,i,++o,e);return t}function L1(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}function K1(e,...n){e=new Rt(e);for(const t of n)for(const a of t)e.delete(a);return e}function D1(e,n){const t=n[Symbol.iterator](),a=new Rt;for(const r of e){if(a.has(r))return!1;let i,o;for(;({value:i,done:o}=t.next())&&!o;){if(Object.is(r,i))return!1;a.add(i)}}return!0}function H1(e,...n){e=new Rt(e),n=n.map(O1);e:for(const t of e)for(const a of n)if(!a.has(t)){e.delete(t);continue e}return e}function O1(e){return e instanceof Rt?e:new Rt(e)}function md(e,n){const t=e[Symbol.iterator](),a=new Set;for(const r of n){const i=wc(r);if(a.has(i))continue;let o,u;for(;{value:o,done:u}=t.next();){if(u)return!1;const l=wc(o);if(a.add(l),Object.is(i,l))break}}return!0}function wc(e){return e!==null&&typeof e=="object"?e.valueOf():e}function G1(e,n){return md(n,e)}function q1(...e){const n=new Rt;for(const t of e)for(const a of t)n.add(a);return n}function F1(e){return e}var bi=1,vi=2,eu=3,Ya=4,Mc=1e-6;function U1(e){return"translate("+e+",0)"}function j1(e){return"translate(0,"+e+")"}function Y1(e){return n=>+e(n)}function V1(e,n){return n=Math.max(0,e.bandwidth()-n*2)/2,e.round()&&(n=Math.round(n)),t=>+e(t)+n}function W1(){return!this.__axis}function To(e,n){var t=[],a=null,r=null,i=6,o=6,u=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=e===bi||e===Ya?-1:1,h=e===Ya||e===vi?"x":"y",f=e===bi||e===eu?U1:j1;function s(d){var g=a??(n.ticks?n.ticks.apply(n,t):n.domain()),p=r??(n.tickFormat?n.tickFormat.apply(n,t):F1),m=Math.max(i,0)+u,y=n.range(),k=+y[0]+l,v=+y[y.length-1]+l,b=(n.bandwidth?V1:Y1)(n.copy(),l),w=d.selection?d.selection():d,M=w.selectAll(".domain").data([null]),x=w.selectAll(".tick").data(g,n).order(),S=x.exit(),T=x.enter().append("g").attr("class","tick"),_=x.select("line"),A=x.select("text");M=M.merge(M.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),x=x.merge(T),_=_.merge(T.append("line").attr("stroke","currentColor").attr(h+"2",c*i)),A=A.merge(T.append("text").attr("fill","currentColor").attr(h,c*m).attr("dy",e===bi?"0em":e===eu?"0.71em":"0.32em")),d!==w&&(M=M.transition(d),x=x.transition(d),_=_.transition(d),A=A.transition(d),S=S.transition(d).attr("opacity",Mc).attr("transform",function(R){return isFinite(R=b(R))?f(R+l):this.getAttribute("transform")}),T.attr("opacity",Mc).attr("transform",function(R){var N=this.parentNode.__axis;return f((N&&isFinite(N=N(R))?N:b(R))+l)})),S.remove(),M.attr("d",e===Ya||e===vi?o?"M"+c*o+","+k+"H"+l+"V"+v+"H"+c*o:"M"+l+","+k+"V"+v:o?"M"+k+","+c*o+"V"+l+"H"+v+"V"+c*o:"M"+k+","+l+"H"+v),x.attr("opacity",1).attr("transform",function(R){return f(b(R)+l)}),_.attr(h+"2",c*i),A.attr(h,c*m).text(p),w.filter(W1).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===vi?"start":e===Ya?"end":"middle"),w.each(function(){this.__axis=b})}return s.scale=function(d){return arguments.length?(n=d,s):n},s.ticks=function(){return t=Array.from(arguments),s},s.tickArguments=function(d){return arguments.length?(t=d==null?[]:Array.from(d),s):t.slice()},s.tickValues=function(d){return arguments.length?(a=d==null?null:Array.from(d),s):a&&a.slice()},s.tickFormat=function(d){return arguments.length?(r=d,s):r},s.tickSize=function(d){return arguments.length?(i=o=+d,s):i},s.tickSizeInner=function(d){return arguments.length?(i=+d,s):i},s.tickSizeOuter=function(d){return arguments.length?(o=+d,s):o},s.tickPadding=function(d){return arguments.length?(u=+d,s):u},s.offset=function(d){return arguments.length?(l=+d,s):l},s}function Z1(e){return To(bi,e)}function X1(e){return To(vi,e)}function Q1(e){return To(eu,e)}function J1(e){return To(Ya,e)}var ey={value:()=>{}};function qt(){for(var e=0,n=arguments.length,t={},a;e<n;++e){if(!(a=arguments[e]+"")||a in t||/[\s.]/.test(a))throw new Error("illegal type: "+a);t[a]=[]}return new ki(t)}function ki(e){this._=e}function ny(e,n){return e.trim().split(/^|\s+/).map(function(t){var a="",r=t.indexOf(".");if(r>=0&&(a=t.slice(r+1),t=t.slice(0,r)),t&&!n.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:a}})}ki.prototype=qt.prototype={constructor:ki,on:function(e,n){var t=this._,a=ny(e+"",t),r,i=-1,o=a.length;if(arguments.length<2){for(;++i<o;)if((r=(e=a[i]).type)&&(r=ty(t[r],e.name)))return r;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++i<o;)if(r=(e=a[i]).type)t[r]=Sc(t[r],e.name,n);else if(n==null)for(r in t)t[r]=Sc(t[r],e.name,null);return this},copy:function(){var e={},n=this._;for(var t in n)e[t]=n[t].slice();return new ki(e)},call:function(e,n){if((r=arguments.length-2)>0)for(var t=new Array(r),a=0,r,i;a<r;++a)t[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],a=0,r=i.length;a<r;++a)i[a].value.apply(n,t)},apply:function(e,n,t){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(n,t)}};function ty(e,n){for(var t=0,a=e.length,r;t<a;++t)if((r=e[t]).name===n)return r.value}function Sc(e,n,t){for(var a=0,r=e.length;a<r;++a)if(e[a].name===n){e[a]=ey,e=e.slice(0,a).concat(e.slice(a+1));break}return t!=null&&e.push({name:n,value:t}),e}var nu="http://www.w3.org/1999/xhtml";const tu={svg:"http://www.w3.org/2000/svg",xhtml:nu,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Br(e){var n=e+="",t=n.indexOf(":");return t>=0&&(n=e.slice(0,t))!=="xmlns"&&(e=e.slice(t+1)),tu.hasOwnProperty(n)?{space:tu[n],local:e}:e}function ay(e){return function(){var n=this.ownerDocument,t=this.namespaceURI;return t===nu&&n.documentElement.namespaceURI===nu?n.createElement(e):n.createElementNS(t,e)}}function ry(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function zo(e){var n=Br(e);return(n.local?ry:ay)(n)}function iy(){}function Co(e){return e==null?iy:function(){return this.querySelector(e)}}function oy(e){typeof e!="function"&&(e=Co(e));for(var n=this._groups,t=n.length,a=new Array(t),r=0;r<t;++r)for(var i=n[r],o=i.length,u=a[r]=new Array(o),l,c,h=0;h<o;++h)(l=i[h])&&(c=e.call(l,l.__data__,h,i))&&("__data__"in l&&(c.__data__=l.__data__),u[h]=c);return new Qe(a,this._parents)}function pd(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function sy(){return[]}function rl(e){return e==null?sy:function(){return this.querySelectorAll(e)}}function uy(e){return function(){return pd(e.apply(this,arguments))}}function ly(e){typeof e=="function"?e=uy(e):e=rl(e);for(var n=this._groups,t=n.length,a=[],r=[],i=0;i<t;++i)for(var o=n[i],u=o.length,l,c=0;c<u;++c)(l=o[c])&&(a.push(e.call(l,l.__data__,c,o)),r.push(l));return new Qe(a,r)}function il(e){return function(){return this.matches(e)}}function yd(e){return function(n){return n.matches(e)}}var cy=Array.prototype.find;function hy(e){return function(){return cy.call(this.children,e)}}function fy(){return this.firstElementChild}function dy(e){return this.select(e==null?fy:hy(typeof e=="function"?e:yd(e)))}var gy=Array.prototype.filter;function my(){return Array.from(this.children)}function py(e){return function(){return gy.call(this.children,e)}}function yy(e){return this.selectAll(e==null?my:py(typeof e=="function"?e:yd(e)))}function by(e){typeof e!="function"&&(e=il(e));for(var n=this._groups,t=n.length,a=new Array(t),r=0;r<t;++r)for(var i=n[r],o=i.length,u=a[r]=[],l,c=0;c<o;++c)(l=i[c])&&e.call(l,l.__data__,c,i)&&u.push(l);return new Qe(a,this._parents)}function bd(e){return new Array(e.length)}function vy(){return new Qe(this._enter||this._groups.map(bd),this._parents)}function Ii(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}Ii.prototype={constructor:Ii,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function ky(e){return function(){return e}}function wy(e,n,t,a,r,i){for(var o=0,u,l=n.length,c=i.length;o<c;++o)(u=n[o])?(u.__data__=i[o],a[o]=u):t[o]=new Ii(e,i[o]);for(;o<l;++o)(u=n[o])&&(r[o]=u)}function My(e,n,t,a,r,i,o){var u,l,c=new Map,h=n.length,f=i.length,s=new Array(h),d;for(u=0;u<h;++u)(l=n[u])&&(s[u]=d=o.call(l,l.__data__,u,n)+"",c.has(d)?r[u]=l:c.set(d,l));for(u=0;u<f;++u)d=o.call(e,i[u],u,i)+"",(l=c.get(d))?(a[u]=l,l.__data__=i[u],c.delete(d)):t[u]=new Ii(e,i[u]);for(u=0;u<h;++u)(l=n[u])&&c.get(s[u])===l&&(r[u]=l)}function Sy(e){return e.__data__}function _y(e,n){if(!arguments.length)return Array.from(this,Sy);var t=n?My:wy,a=this._parents,r=this._groups;typeof e!="function"&&(e=ky(e));for(var i=r.length,o=new Array(i),u=new Array(i),l=new Array(i),c=0;c<i;++c){var h=a[c],f=r[c],s=f.length,d=Ay(e.call(h,h&&h.__data__,c,a)),g=d.length,p=u[c]=new Array(g),m=o[c]=new Array(g),y=l[c]=new Array(s);t(h,f,p,m,y,d,n);for(var k=0,v=0,b,w;k<g;++k)if(b=p[k]){for(k>=v&&(v=k+1);!(w=m[v])&&++v<g;);b._next=w||null}}return o=new Qe(o,a),o._enter=u,o._exit=l,o}function Ay(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function xy(){return new Qe(this._exit||this._groups.map(bd),this._parents)}function Ty(e,n,t){var a=this.enter(),r=this,i=this.exit();return typeof e=="function"?(a=e(a),a&&(a=a.selection())):a=a.append(e+""),n!=null&&(r=n(r),r&&(r=r.selection())),t==null?i.remove():t(i),a&&r?a.merge(r).order():r}function zy(e){for(var n=e.selection?e.selection():e,t=this._groups,a=n._groups,r=t.length,i=a.length,o=Math.min(r,i),u=new Array(r),l=0;l<o;++l)for(var c=t[l],h=a[l],f=c.length,s=u[l]=new Array(f),d,g=0;g<f;++g)(d=c[g]||h[g])&&(s[g]=d);for(;l<r;++l)u[l]=t[l];return new Qe(u,this._parents)}function Cy(){for(var e=this._groups,n=-1,t=e.length;++n<t;)for(var a=e[n],r=a.length-1,i=a[r],o;--r>=0;)(o=a[r])&&(i&&o.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(o,i),i=o);return this}function Ey(e){e||(e=Ny);function n(f,s){return f&&s?e(f.__data__,s.__data__):!f-!s}for(var t=this._groups,a=t.length,r=new Array(a),i=0;i<a;++i){for(var o=t[i],u=o.length,l=r[i]=new Array(u),c,h=0;h<u;++h)(c=o[h])&&(l[h]=c);l.sort(n)}return new Qe(r,this._parents).order()}function Ny(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function Ry(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function By(){return Array.from(this)}function Py(){for(var e=this._groups,n=0,t=e.length;n<t;++n)for(var a=e[n],r=0,i=a.length;r<i;++r){var o=a[r];if(o)return o}return null}function Iy(){let e=0;for(const n of this)++e;return e}function $y(){return!this.node()}function Ly(e){for(var n=this._groups,t=0,a=n.length;t<a;++t)for(var r=n[t],i=0,o=r.length,u;i<o;++i)(u=r[i])&&e.call(u,u.__data__,i,r);return this}function Ky(e){return function(){this.removeAttribute(e)}}function Dy(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Hy(e,n){return function(){this.setAttribute(e,n)}}function Oy(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function Gy(e,n){return function(){var t=n.apply(this,arguments);t==null?this.removeAttribute(e):this.setAttribute(e,t)}}function qy(e,n){return function(){var t=n.apply(this,arguments);t==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}}function Fy(e,n){var t=Br(e);if(arguments.length<2){var a=this.node();return t.local?a.getAttributeNS(t.space,t.local):a.getAttribute(t)}return this.each((n==null?t.local?Dy:Ky:typeof n=="function"?t.local?qy:Gy:t.local?Oy:Hy)(t,n))}function ol(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Uy(e){return function(){this.style.removeProperty(e)}}function jy(e,n,t){return function(){this.style.setProperty(e,n,t)}}function Yy(e,n,t){return function(){var a=n.apply(this,arguments);a==null?this.style.removeProperty(e):this.style.setProperty(e,a,t)}}function Vy(e,n,t){return arguments.length>1?this.each((n==null?Uy:typeof n=="function"?Yy:jy)(e,n,t??"")):It(this.node(),e)}function It(e,n){return e.style.getPropertyValue(n)||ol(e).getComputedStyle(e,null).getPropertyValue(n)}function Wy(e){return function(){delete this[e]}}function Zy(e,n){return function(){this[e]=n}}function Xy(e,n){return function(){var t=n.apply(this,arguments);t==null?delete this[e]:this[e]=t}}function Qy(e,n){return arguments.length>1?this.each((n==null?Wy:typeof n=="function"?Xy:Zy)(e,n)):this.node()[e]}function vd(e){return e.trim().split(/^|\s+/)}function sl(e){return e.classList||new kd(e)}function kd(e){this._node=e,this._names=vd(e.getAttribute("class")||"")}kd.prototype={add:function(e){var n=this._names.indexOf(e);n<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function wd(e,n){for(var t=sl(e),a=-1,r=n.length;++a<r;)t.add(n[a])}function Md(e,n){for(var t=sl(e),a=-1,r=n.length;++a<r;)t.remove(n[a])}function Jy(e){return function(){wd(this,e)}}function eb(e){return function(){Md(this,e)}}function nb(e,n){return function(){(n.apply(this,arguments)?wd:Md)(this,e)}}function tb(e,n){var t=vd(e+"");if(arguments.length<2){for(var a=sl(this.node()),r=-1,i=t.length;++r<i;)if(!a.contains(t[r]))return!1;return!0}return this.each((typeof n=="function"?nb:n?Jy:eb)(t,n))}function ab(){this.textContent=""}function rb(e){return function(){this.textContent=e}}function ib(e){return function(){var n=e.apply(this,arguments);this.textContent=n??""}}function ob(e){return arguments.length?this.each(e==null?ab:(typeof e=="function"?ib:rb)(e)):this.node().textContent}function sb(){this.innerHTML=""}function ub(e){return function(){this.innerHTML=e}}function lb(e){return function(){var n=e.apply(this,arguments);this.innerHTML=n??""}}function cb(e){return arguments.length?this.each(e==null?sb:(typeof e=="function"?lb:ub)(e)):this.node().innerHTML}function hb(){this.nextSibling&&this.parentNode.appendChild(this)}function fb(){return this.each(hb)}function db(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function gb(){return this.each(db)}function mb(e){var n=typeof e=="function"?e:zo(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function pb(){return null}function yb(e,n){var t=typeof e=="function"?e:zo(e),a=n==null?pb:typeof n=="function"?n:Co(n);return this.select(function(){return this.insertBefore(t.apply(this,arguments),a.apply(this,arguments)||null)})}function bb(){var e=this.parentNode;e&&e.removeChild(this)}function vb(){return this.each(bb)}function kb(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function wb(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function Mb(e){return this.select(e?wb:kb)}function Sb(e){return arguments.length?this.property("__data__",e):this.node().__data__}function _b(e){return function(n){e.call(this,n,this.__data__)}}function Ab(e){return e.trim().split(/^|\s+/).map(function(n){var t="",a=n.indexOf(".");return a>=0&&(t=n.slice(a+1),n=n.slice(0,a)),{type:n,name:t}})}function xb(e){return function(){var n=this.__on;if(n){for(var t=0,a=-1,r=n.length,i;t<r;++t)i=n[t],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):n[++a]=i;++a?n.length=a:delete this.__on}}}function Tb(e,n,t){return function(){var a=this.__on,r,i=_b(n);if(a){for(var o=0,u=a.length;o<u;++o)if((r=a[o]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=t),r.value=n;return}}this.addEventListener(e.type,i,t),r={type:e.type,name:e.name,value:n,listener:i,options:t},a?a.push(r):this.__on=[r]}}function zb(e,n,t){var a=Ab(e+""),r,i=a.length,o;if(arguments.length<2){var u=this.node().__on;if(u){for(var l=0,c=u.length,h;l<c;++l)for(r=0,h=u[l];r<i;++r)if((o=a[r]).type===h.type&&o.name===h.name)return h.value}return}for(u=n?Tb:xb,r=0;r<i;++r)this.each(u(a[r],n,t));return this}function Sd(e,n,t){var a=ol(e),r=a.CustomEvent;typeof r=="function"?r=new r(n,t):(r=a.document.createEvent("Event"),t?(r.initEvent(n,t.bubbles,t.cancelable),r.detail=t.detail):r.initEvent(n,!1,!1)),e.dispatchEvent(r)}function Cb(e,n){return function(){return Sd(this,e,n)}}function Eb(e,n){return function(){return Sd(this,e,n.apply(this,arguments))}}function Nb(e,n){return this.each((typeof n=="function"?Eb:Cb)(e,n))}function*Rb(){for(var e=this._groups,n=0,t=e.length;n<t;++n)for(var a=e[n],r=0,i=a.length,o;r<i;++r)(o=a[r])&&(yield o)}var ul=[null];function Qe(e,n){this._groups=e,this._parents=n}function Ft(){return new Qe([[document.documentElement]],ul)}function Bb(){return this}Qe.prototype=Ft.prototype={constructor:Qe,select:oy,selectAll:ly,selectChild:dy,selectChildren:yy,filter:by,data:_y,enter:vy,exit:xy,join:Ty,merge:zy,selection:Bb,order:Cy,sort:Ey,call:Ry,nodes:By,node:Py,size:Iy,empty:$y,each:Ly,attr:Fy,style:Vy,property:Qy,classed:tb,text:ob,html:cb,raise:fb,lower:gb,append:mb,insert:yb,remove:vb,clone:Mb,datum:Sb,on:zb,dispatch:Nb,[Symbol.iterator]:Rb};function _e(e){return typeof e=="string"?new Qe([[document.querySelector(e)]],[document.documentElement]):new Qe([[e]],ul)}function Pb(e){return _e(zo(e).call(document.documentElement))}var Ib=0;function _d(){return new au}function au(){this._="@"+(++Ib).toString(36)}au.prototype=_d.prototype={constructor:au,get:function(e){for(var n=this._;!(n in e);)if(!(e=e.parentNode))return;return e[n]},set:function(e,n){return e[this._]=n},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};function Ad(e){let n;for(;n=e.sourceEvent;)e=n;return e}function cn(e,n){if(e=Ad(e),n===void 0&&(n=e.currentTarget),n){var t=n.ownerSVGElement||n;if(t.createSVGPoint){var a=t.createSVGPoint();return a.x=e.clientX,a.y=e.clientY,a=a.matrixTransform(n.getScreenCTM().inverse()),[a.x,a.y]}if(n.getBoundingClientRect){var r=n.getBoundingClientRect();return[e.clientX-r.left-n.clientLeft,e.clientY-r.top-n.clientTop]}}return[e.pageX,e.pageY]}function $b(e,n){return e.target&&(e=Ad(e),n===void 0&&(n=e.currentTarget),e=e.touches||[e]),Array.from(e,t=>cn(t,n))}function Lb(e){return typeof e=="string"?new Qe([document.querySelectorAll(e)],[document.documentElement]):new Qe([pd(e)],ul)}const Kb={passive:!1},yr={capture:!0,passive:!1};function gs(e){e.stopImmediatePropagation()}function la(e){e.preventDefault(),e.stopImmediatePropagation()}function Eo(e){var n=e.document.documentElement,t=_e(e).on("dragstart.drag",la,yr);"onselectstart"in n?t.on("selectstart.drag",la,yr):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function No(e,n){var t=e.document.documentElement,a=_e(e).on("dragstart.drag",null);n&&(a.on("click.drag",la,yr),setTimeout(function(){a.on("click.drag",null)},0)),"onselectstart"in t?a.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}const Xr=e=>()=>e;function ru(e,{sourceEvent:n,subject:t,target:a,identifier:r,active:i,x:o,y:u,dx:l,dy:c,dispatch:h}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:t,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:u,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:h}})}ru.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Db(e){return!e.ctrlKey&&!e.button}function Hb(){return this.parentNode}function Ob(e,n){return n??{x:e.x,y:e.y}}function Gb(){return navigator.maxTouchPoints||"ontouchstart"in this}function qb(){var e=Db,n=Hb,t=Ob,a=Gb,r={},i=qt("start","drag","end"),o=0,u,l,c,h,f=0;function s(b){b.on("mousedown.drag",d).filter(a).on("touchstart.drag",m).on("touchmove.drag",y,Kb).on("touchend.drag touchcancel.drag",k).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(b,w){if(!(h||!e.call(this,b,w))){var M=v(this,n.call(this,b,w),b,w,"mouse");M&&(_e(b.view).on("mousemove.drag",g,yr).on("mouseup.drag",p,yr),Eo(b.view),gs(b),c=!1,u=b.clientX,l=b.clientY,M("start",b))}}function g(b){if(la(b),!c){var w=b.clientX-u,M=b.clientY-l;c=w*w+M*M>f}r.mouse("drag",b)}function p(b){_e(b.view).on("mousemove.drag mouseup.drag",null),No(b.view,c),la(b),r.mouse("end",b)}function m(b,w){if(e.call(this,b,w)){var M=b.changedTouches,x=n.call(this,b,w),S=M.length,T,_;for(T=0;T<S;++T)(_=v(this,x,b,w,M[T].identifier,M[T]))&&(gs(b),_("start",b,M[T]))}}function y(b){var w=b.changedTouches,M=w.length,x,S;for(x=0;x<M;++x)(S=r[w[x].identifier])&&(la(b),S("drag",b,w[x]))}function k(b){var w=b.changedTouches,M=w.length,x,S;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),x=0;x<M;++x)(S=r[w[x].identifier])&&(gs(b),S("end",b,w[x]))}function v(b,w,M,x,S,T){var _=i.copy(),A=cn(T||M,w),R,N,z;if((z=t.call(b,new ru("beforestart",{sourceEvent:M,target:s,identifier:S,active:o,x:A[0],y:A[1],dx:0,dy:0,dispatch:_}),x))!=null)return R=z.x-A[0]||0,N=z.y-A[1]||0,function E(C,B,I){var P=A,D;switch(C){case"start":r[S]=E,D=o++;break;case"end":delete r[S],--o;case"drag":A=cn(I||B,w),D=o;break}_.call(C,b,new ru(C,{sourceEvent:B,subject:z,target:s,identifier:S,active:D,x:A[0]+R,y:A[1]+N,dx:A[0]-P[0],dy:A[1]-P[1],dispatch:_}),x)}}return s.filter=function(b){return arguments.length?(e=typeof b=="function"?b:Xr(!!b),s):e},s.container=function(b){return arguments.length?(n=typeof b=="function"?b:Xr(b),s):n},s.subject=function(b){return arguments.length?(t=typeof b=="function"?b:Xr(b),s):t},s.touchable=function(b){return arguments.length?(a=typeof b=="function"?b:Xr(!!b),s):a},s.on=function(){var b=i.on.apply(i,arguments);return b===i?s:b},s.clickDistance=function(b){return arguments.length?(f=(b=+b)*b,s):Math.sqrt(f)},s}function Pa(e,n,t){e.prototype=n.prototype=t,t.constructor=e}function Pr(e,n){var t=Object.create(e.prototype);for(var a in n)t[a]=n[a];return t}function yt(){}var $t=.7,ya=1/$t,ca="\\s*([+-]?\\d+)\\s*",br="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ln="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Fb=/^#([0-9a-f]{3,8})$/,Ub=new RegExp(`^rgb\\(${ca},${ca},${ca}\\)$`),jb=new RegExp(`^rgb\\(${Ln},${Ln},${Ln}\\)$`),Yb=new RegExp(`^rgba\\(${ca},${ca},${ca},${br}\\)$`),Vb=new RegExp(`^rgba\\(${Ln},${Ln},${Ln},${br}\\)$`),Wb=new RegExp(`^hsl\\(${br},${Ln},${Ln}\\)$`),Zb=new RegExp(`^hsla\\(${br},${Ln},${Ln},${br}\\)$`),_c={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Pa(yt,Ge,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ac,formatHex:Ac,formatHex8:Xb,formatHsl:Qb,formatRgb:xc,toString:xc});function Ac(){return this.rgb().formatHex()}function Xb(){return this.rgb().formatHex8()}function Qb(){return xd(this).formatHsl()}function xc(){return this.rgb().formatRgb()}function Ge(e){var n,t;return e=(e+"").trim().toLowerCase(),(n=Fb.exec(e))?(t=n[1].length,n=parseInt(n[1],16),t===6?Tc(n):t===3?new Ce(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):t===8?Qr(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):t===4?Qr(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=Ub.exec(e))?new Ce(n[1],n[2],n[3],1):(n=jb.exec(e))?new Ce(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=Yb.exec(e))?Qr(n[1],n[2],n[3],n[4]):(n=Vb.exec(e))?Qr(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=Wb.exec(e))?Ec(n[1],n[2]/100,n[3]/100,1):(n=Zb.exec(e))?Ec(n[1],n[2]/100,n[3]/100,n[4]):_c.hasOwnProperty(e)?Tc(_c[e]):e==="transparent"?new Ce(NaN,NaN,NaN,0):null}function Tc(e){return new Ce(e>>16&255,e>>8&255,e&255,1)}function Qr(e,n,t,a){return a<=0&&(e=n=t=NaN),new Ce(e,n,t,a)}function ll(e){return e instanceof yt||(e=Ge(e)),e?(e=e.rgb(),new Ce(e.r,e.g,e.b,e.opacity)):new Ce}function ba(e,n,t,a){return arguments.length===1?ll(e):new Ce(e,n,t,a??1)}function Ce(e,n,t,a){this.r=+e,this.g=+n,this.b=+t,this.opacity=+a}Pa(Ce,ba,Pr(yt,{brighter(e){return e=e==null?ya:Math.pow(ya,e),new Ce(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?$t:Math.pow($t,e),new Ce(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ce(zt(this.r),zt(this.g),zt(this.b),$i(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:zc,formatHex:zc,formatHex8:Jb,formatRgb:Cc,toString:Cc}));function zc(){return`#${At(this.r)}${At(this.g)}${At(this.b)}`}function Jb(){return`#${At(this.r)}${At(this.g)}${At(this.b)}${At((isNaN(this.opacity)?1:this.opacity)*255)}`}function Cc(){const e=$i(this.opacity);return`${e===1?"rgb(":"rgba("}${zt(this.r)}, ${zt(this.g)}, ${zt(this.b)}${e===1?")":`, ${e})`}`}function $i(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function zt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function At(e){return e=zt(e),(e<16?"0":"")+e.toString(16)}function Ec(e,n,t,a){return a<=0?e=n=t=NaN:t<=0||t>=1?e=n=NaN:n<=0&&(e=NaN),new Mn(e,n,t,a)}function xd(e){if(e instanceof Mn)return new Mn(e.h,e.s,e.l,e.opacity);if(e instanceof yt||(e=Ge(e)),!e)return new Mn;if(e instanceof Mn)return e;e=e.rgb();var n=e.r/255,t=e.g/255,a=e.b/255,r=Math.min(n,t,a),i=Math.max(n,t,a),o=NaN,u=i-r,l=(i+r)/2;return u?(n===i?o=(t-a)/u+(t<a)*6:t===i?o=(a-n)/u+2:o=(n-t)/u+4,u/=l<.5?i+r:2-i-r,o*=60):u=l>0&&l<1?0:o,new Mn(o,u,l,e.opacity)}function Li(e,n,t,a){return arguments.length===1?xd(e):new Mn(e,n,t,a??1)}function Mn(e,n,t,a){this.h=+e,this.s=+n,this.l=+t,this.opacity=+a}Pa(Mn,Li,Pr(yt,{brighter(e){return e=e==null?ya:Math.pow(ya,e),new Mn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?$t:Math.pow($t,e),new Mn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,t=this.l,a=t+(t<.5?t:1-t)*n,r=2*t-a;return new Ce(ms(e>=240?e-240:e+120,r,a),ms(e,r,a),ms(e<120?e+240:e-120,r,a),this.opacity)},clamp(){return new Mn(Nc(this.h),Jr(this.s),Jr(this.l),$i(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=$i(this.opacity);return`${e===1?"hsl(":"hsla("}${Nc(this.h)}, ${Jr(this.s)*100}%, ${Jr(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Nc(e){return e=(e||0)%360,e<0?e+360:e}function Jr(e){return Math.max(0,Math.min(1,e||0))}function ms(e,n,t){return(e<60?n+(t-n)*e/60:e<180?t:e<240?n+(t-n)*(240-e)/60:n)*255}const Td=Math.PI/180,zd=180/Math.PI,Ki=18,Cd=.96422,Ed=1,Nd=.82521,Rd=4/29,ha=6/29,Bd=3*ha*ha,e2=ha*ha*ha;function Pd(e){if(e instanceof xn)return new xn(e.l,e.a,e.b,e.opacity);if(e instanceof In)return $d(e);e instanceof Ce||(e=ll(e));var n=vs(e.r),t=vs(e.g),a=vs(e.b),r=ps((.2225045*n+.7168786*t+.0606169*a)/Ed),i,o;return n===t&&t===a?i=o=r:(i=ps((.4360747*n+.3850649*t+.1430804*a)/Cd),o=ps((.0139322*n+.0971045*t+.7141733*a)/Nd)),new xn(116*r-16,500*(i-r),200*(r-o),e.opacity)}function n2(e,n){return new xn(e,0,0,n??1)}function Di(e,n,t,a){return arguments.length===1?Pd(e):new xn(e,n,t,a??1)}function xn(e,n,t,a){this.l=+e,this.a=+n,this.b=+t,this.opacity=+a}Pa(xn,Di,Pr(yt,{brighter(e){return new xn(this.l+Ki*(e??1),this.a,this.b,this.opacity)},darker(e){return new xn(this.l-Ki*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,n=isNaN(this.a)?e:e+this.a/500,t=isNaN(this.b)?e:e-this.b/200;return n=Cd*ys(n),e=Ed*ys(e),t=Nd*ys(t),new Ce(bs(3.1338561*n-1.6168667*e-.4906146*t),bs(-.9787684*n+1.9161415*e+.033454*t),bs(.0719453*n-.2289914*e+1.4052427*t),this.opacity)}}));function ps(e){return e>e2?Math.pow(e,1/3):e/Bd+Rd}function ys(e){return e>ha?e*e*e:Bd*(e-Rd)}function bs(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function vs(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Id(e){if(e instanceof In)return new In(e.h,e.c,e.l,e.opacity);if(e instanceof xn||(e=Pd(e)),e.a===0&&e.b===0)return new In(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var n=Math.atan2(e.b,e.a)*zd;return new In(n<0?n+360:n,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function t2(e,n,t,a){return arguments.length===1?Id(e):new In(t,n,e,a??1)}function Hi(e,n,t,a){return arguments.length===1?Id(e):new In(e,n,t,a??1)}function In(e,n,t,a){this.h=+e,this.c=+n,this.l=+t,this.opacity=+a}function $d(e){if(isNaN(e.h))return new xn(e.l,0,0,e.opacity);var n=e.h*Td;return new xn(e.l,Math.cos(n)*e.c,Math.sin(n)*e.c,e.opacity)}Pa(In,Hi,Pr(yt,{brighter(e){return new In(this.h,this.c,this.l+Ki*(e??1),this.opacity)},darker(e){return new In(this.h,this.c,this.l-Ki*(e??1),this.opacity)},rgb(){return $d(this).rgb()}}));var Ld=-.14861,cl=1.78277,hl=-.29227,Ro=-.90649,vr=1.97294,Rc=vr*Ro,Bc=vr*cl,Pc=cl*hl-Ro*Ld;function a2(e){if(e instanceof Ct)return new Ct(e.h,e.s,e.l,e.opacity);e instanceof Ce||(e=ll(e));var n=e.r/255,t=e.g/255,a=e.b/255,r=(Pc*a+Rc*n-Bc*t)/(Pc+Rc-Bc),i=a-r,o=(vr*(t-r)-hl*i)/Ro,u=Math.sqrt(o*o+i*i)/(vr*r*(1-r)),l=u?Math.atan2(o,i)*zd-120:NaN;return new Ct(l<0?l+360:l,u,r,e.opacity)}function Tn(e,n,t,a){return arguments.length===1?a2(e):new Ct(e,n,t,a??1)}function Ct(e,n,t,a){this.h=+e,this.s=+n,this.l=+t,this.opacity=+a}Pa(Ct,Tn,Pr(yt,{brighter(e){return e=e==null?ya:Math.pow(ya,e),new Ct(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?$t:Math.pow($t,e),new Ct(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*Td,n=+this.l,t=isNaN(this.s)?0:this.s*n*(1-n),a=Math.cos(e),r=Math.sin(e);return new Ce(255*(n+t*(Ld*a+cl*r)),255*(n+t*(hl*a+Ro*r)),255*(n+t*(vr*a)),this.opacity)}}));function Kd(e,n,t,a,r){var i=e*e,o=i*e;return((1-3*e+3*i-o)*n+(4-6*i+3*o)*t+(1+3*e+3*i-3*o)*a+o*r)/6}function Dd(e){var n=e.length-1;return function(t){var a=t<=0?t=0:t>=1?(t=1,n-1):Math.floor(t*n),r=e[a],i=e[a+1],o=a>0?e[a-1]:2*r-i,u=a<n-1?e[a+2]:2*i-r;return Kd((t-a/n)*n,o,r,i,u)}}function Hd(e){var n=e.length;return function(t){var a=Math.floor(((t%=1)<0?++t:t)*n),r=e[(a+n-1)%n],i=e[a%n],o=e[(a+1)%n],u=e[(a+2)%n];return Kd((t-a/n)*n,r,i,o,u)}}const Bo=e=>()=>e;function Od(e,n){return function(t){return e+t*n}}function r2(e,n,t){return e=Math.pow(e,t),n=Math.pow(n,t)-e,t=1/t,function(a){return Math.pow(e+a*n,t)}}function Po(e,n){var t=n-e;return t?Od(e,t>180||t<-180?t-360*Math.round(t/360):t):Bo(isNaN(e)?n:e)}function i2(e){return(e=+e)==1?Ee:function(n,t){return t-n?r2(n,t,e):Bo(isNaN(n)?t:n)}}function Ee(e,n){var t=n-e;return t?Od(e,t):Bo(isNaN(e)?n:e)}const kr=(function e(n){var t=i2(n);function a(r,i){var o=t((r=ba(r)).r,(i=ba(i)).r),u=t(r.g,i.g),l=t(r.b,i.b),c=Ee(r.opacity,i.opacity);return function(h){return r.r=o(h),r.g=u(h),r.b=l(h),r.opacity=c(h),r+""}}return a.gamma=e,a})(1);function Gd(e){return function(n){var t=n.length,a=new Array(t),r=new Array(t),i=new Array(t),o,u;for(o=0;o<t;++o)u=ba(n[o]),a[o]=u.r||0,r[o]=u.g||0,i[o]=u.b||0;return a=e(a),r=e(r),i=e(i),u.opacity=1,function(l){return u.r=a(l),u.g=r(l),u.b=i(l),u+""}}}var qd=Gd(Dd),o2=Gd(Hd);function fl(e,n){n||(n=[]);var t=e?Math.min(n.length,e.length):0,a=n.slice(),r;return function(i){for(r=0;r<t;++r)a[r]=e[r]*(1-i)+n[r]*i;return a}}function Fd(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function s2(e,n){return(Fd(n)?fl:Ud)(e,n)}function Ud(e,n){var t=n?n.length:0,a=e?Math.min(t,e.length):0,r=new Array(a),i=new Array(t),o;for(o=0;o<a;++o)r[o]=tt(e[o],n[o]);for(;o<t;++o)i[o]=n[o];return function(u){for(o=0;o<a;++o)i[o]=r[o](u);return i}}function jd(e,n){var t=new Date;return e=+e,n=+n,function(a){return t.setTime(e*(1-a)+n*a),t}}function mn(e,n){return e=+e,n=+n,function(t){return e*(1-t)+n*t}}function Yd(e,n){var t={},a={},r;(e===null||typeof e!="object")&&(e={}),(n===null||typeof n!="object")&&(n={});for(r in n)r in e?t[r]=tt(e[r],n[r]):a[r]=n[r];return function(i){for(r in t)a[r]=t[r](i);return a}}var iu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ks=new RegExp(iu.source,"g");function u2(e){return function(){return e}}function l2(e){return function(n){return e(n)+""}}function dl(e,n){var t=iu.lastIndex=ks.lastIndex=0,a,r,i,o=-1,u=[],l=[];for(e=e+"",n=n+"";(a=iu.exec(e))&&(r=ks.exec(n));)(i=r.index)>t&&(i=n.slice(t,i),u[o]?u[o]+=i:u[++o]=i),(a=a[0])===(r=r[0])?u[o]?u[o]+=r:u[++o]=r:(u[++o]=null,l.push({i:o,x:mn(a,r)})),t=ks.lastIndex;return t<n.length&&(i=n.slice(t),u[o]?u[o]+=i:u[++o]=i),u.length<2?l[0]?l2(l[0].x):u2(n):(n=l.length,function(c){for(var h=0,f;h<n;++h)u[(f=l[h]).i]=f.x(c);return u.join("")})}function tt(e,n){var t=typeof n,a;return n==null||t==="boolean"?Bo(n):(t==="number"?mn:t==="string"?(a=Ge(n))?(n=a,kr):dl:n instanceof Ge?kr:n instanceof Date?jd:Fd(n)?fl:Array.isArray(n)?Ud:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?Yd:mn)(e,n)}function c2(e){var n=e.length;return function(t){return e[Math.max(0,Math.min(n-1,Math.floor(t*n)))]}}function h2(e,n){var t=Po(+e,+n);return function(a){var r=t(a);return r-360*Math.floor(r/360)}}function Io(e,n){return e=+e,n=+n,function(t){return Math.round(e*(1-t)+n*t)}}var Ic=180/Math.PI,ou={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Vd(e,n,t,a,r,i){var o,u,l;return(o=Math.sqrt(e*e+n*n))&&(e/=o,n/=o),(l=e*t+n*a)&&(t-=e*l,a-=n*l),(u=Math.sqrt(t*t+a*a))&&(t/=u,a/=u,l/=u),e*a<n*t&&(e=-e,n=-n,l=-l,o=-o),{translateX:r,translateY:i,rotate:Math.atan2(n,e)*Ic,skewX:Math.atan(l)*Ic,scaleX:o,scaleY:u}}var ei;function f2(e){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?ou:Vd(n.a,n.b,n.c,n.d,n.e,n.f)}function d2(e){return e==null||(ei||(ei=document.createElementNS("http://www.w3.org/2000/svg","g")),ei.setAttribute("transform",e),!(e=ei.transform.baseVal.consolidate()))?ou:(e=e.matrix,Vd(e.a,e.b,e.c,e.d,e.e,e.f))}function Wd(e,n,t,a){function r(c){return c.length?c.pop()+" ":""}function i(c,h,f,s,d,g){if(c!==f||h!==s){var p=d.push("translate(",null,n,null,t);g.push({i:p-4,x:mn(c,f)},{i:p-2,x:mn(h,s)})}else(f||s)&&d.push("translate("+f+n+s+t)}function o(c,h,f,s){c!==h?(c-h>180?h+=360:h-c>180&&(c+=360),s.push({i:f.push(r(f)+"rotate(",null,a)-2,x:mn(c,h)})):h&&f.push(r(f)+"rotate("+h+a)}function u(c,h,f,s){c!==h?s.push({i:f.push(r(f)+"skewX(",null,a)-2,x:mn(c,h)}):h&&f.push(r(f)+"skewX("+h+a)}function l(c,h,f,s,d,g){if(c!==f||h!==s){var p=d.push(r(d)+"scale(",null,",",null,")");g.push({i:p-4,x:mn(c,f)},{i:p-2,x:mn(h,s)})}else(f!==1||s!==1)&&d.push(r(d)+"scale("+f+","+s+")")}return function(c,h){var f=[],s=[];return c=e(c),h=e(h),i(c.translateX,c.translateY,h.translateX,h.translateY,f,s),o(c.rotate,h.rotate,f,s),u(c.skewX,h.skewX,f,s),l(c.scaleX,c.scaleY,h.scaleX,h.scaleY,f,s),c=h=null,function(d){for(var g=-1,p=s.length,m;++g<p;)f[(m=s[g]).i]=m.x(d);return f.join("")}}}var Zd=Wd(f2,"px, ","px)","deg)"),Xd=Wd(d2,", ",")",")"),g2=1e-12;function $c(e){return((e=Math.exp(e))+1/e)/2}function m2(e){return((e=Math.exp(e))-1/e)/2}function p2(e){return((e=Math.exp(2*e))-1)/(e+1)}const Qd=(function e(n,t,a){function r(i,o){var u=i[0],l=i[1],c=i[2],h=o[0],f=o[1],s=o[2],d=h-u,g=f-l,p=d*d+g*g,m,y;if(p<g2)y=Math.log(s/c)/n,m=function(x){return[u+x*d,l+x*g,c*Math.exp(n*x*y)]};else{var k=Math.sqrt(p),v=(s*s-c*c+a*p)/(2*c*t*k),b=(s*s-c*c-a*p)/(2*s*t*k),w=Math.log(Math.sqrt(v*v+1)-v),M=Math.log(Math.sqrt(b*b+1)-b);y=(M-w)/n,m=function(x){var S=x*y,T=$c(w),_=c/(t*k)*(T*p2(n*S+w)-m2(w));return[u+_*d,l+_*g,c*T/$c(n*S+w)]}}return m.duration=y*1e3*n/Math.SQRT2,m}return r.rho=function(i){var o=Math.max(.001,+i),u=o*o,l=u*u;return e(o,u,l)},r})(Math.SQRT2,2,4);function Jd(e){return function(n,t){var a=e((n=Li(n)).h,(t=Li(t)).h),r=Ee(n.s,t.s),i=Ee(n.l,t.l),o=Ee(n.opacity,t.opacity);return function(u){return n.h=a(u),n.s=r(u),n.l=i(u),n.opacity=o(u),n+""}}}const y2=Jd(Po);var b2=Jd(Ee);function v2(e,n){var t=Ee((e=Di(e)).l,(n=Di(n)).l),a=Ee(e.a,n.a),r=Ee(e.b,n.b),i=Ee(e.opacity,n.opacity);return function(o){return e.l=t(o),e.a=a(o),e.b=r(o),e.opacity=i(o),e+""}}function eg(e){return function(n,t){var a=e((n=Hi(n)).h,(t=Hi(t)).h),r=Ee(n.c,t.c),i=Ee(n.l,t.l),o=Ee(n.opacity,t.opacity);return function(u){return n.h=a(u),n.c=r(u),n.l=i(u),n.opacity=o(u),n+""}}}const k2=eg(Po);var w2=eg(Ee);function ng(e){return(function n(t){t=+t;function a(r,i){var o=e((r=Tn(r)).h,(i=Tn(i)).h),u=Ee(r.s,i.s),l=Ee(r.l,i.l),c=Ee(r.opacity,i.opacity);return function(h){return r.h=o(h),r.s=u(h),r.l=l(Math.pow(h,t)),r.opacity=c(h),r+""}}return a.gamma=n,a})(1)}const M2=ng(Po);var $o=ng(Ee);function tg(e,n){n===void 0&&(n=e,e=tt);for(var t=0,a=n.length-1,r=n[0],i=new Array(a<0?0:a);t<a;)i[t]=e(r,r=n[++t]);return function(o){var u=Math.max(0,Math.min(a-1,Math.floor(o*=a)));return i[u](o-u)}}function S2(e,n){for(var t=new Array(n),a=0;a<n;++a)t[a]=e(a/(n-1));return t}var va=0,Va=0,Da=0,ag=1e3,Oi,Wa,Gi=0,Lt=0,Lo=0,wr=typeof performance=="object"&&performance.now?performance:Date,rg=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Ir(){return Lt||(rg(_2),Lt=wr.now()+Lo)}function _2(){Lt=0}function Mr(){this._call=this._time=this._next=null}Mr.prototype=Ko.prototype={constructor:Mr,restart:function(e,n,t){if(typeof e!="function")throw new TypeError("callback is not a function");t=(t==null?Ir():+t)+(n==null?0:+n),!this._next&&Wa!==this&&(Wa?Wa._next=this:Oi=this,Wa=this),this._call=e,this._time=t,su()},stop:function(){this._call&&(this._call=null,this._time=1/0,su())}};function Ko(e,n,t){var a=new Mr;return a.restart(e,n,t),a}function ig(){Ir(),++va;for(var e=Oi,n;e;)(n=Lt-e._time)>=0&&e._call.call(void 0,n),e=e._next;--va}function Lc(){Lt=(Gi=wr.now())+Lo,va=Va=0;try{ig()}finally{va=0,x2(),Lt=0}}function A2(){var e=wr.now(),n=e-Gi;n>ag&&(Lo-=n,Gi=e)}function x2(){for(var e,n=Oi,t,a=1/0;n;)n._call?(a>n._time&&(a=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Oi=t);Wa=e,su(a)}function su(e){if(!va){Va&&(Va=clearTimeout(Va));var n=e-Lt;n>24?(e<1/0&&(Va=setTimeout(Lc,e-wr.now()-Lo)),Da&&(Da=clearInterval(Da))):(Da||(Gi=wr.now(),Da=setInterval(A2,ag)),va=1,rg(Lc))}}function qi(e,n,t){var a=new Mr;return n=n==null?0:+n,a.restart(r=>{a.stop(),e(r+n)},n,t),a}function T2(e,n,t){var a=new Mr,r=n;return n==null?(a.restart(e,n,t),a):(a._restart=a.restart,a.restart=function(i,o,u){o=+o,u=u==null?Ir():+u,a._restart(function l(c){c+=r,a._restart(l,r+=o,u),i(c)},o,u)},a.restart(e,n,t),a)}var z2=qt("start","end","cancel","interrupt"),C2=[],og=0,uu=1,lu=2,wi=3,Kc=4,cu=5,Mi=6;function Do(e,n,t,a,r,i){var o=e.__transition;if(!o)e.__transition={};else if(t in o)return;E2(e,t,{name:n,index:a,group:r,on:z2,tween:C2,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:og})}function gl(e,n){var t=Cn(e,n);if(t.state>og)throw new Error("too late; already scheduled");return t}function Gn(e,n){var t=Cn(e,n);if(t.state>wi)throw new Error("too late; already running");return t}function Cn(e,n){var t=e.__transition;if(!t||!(t=t[n]))throw new Error("transition not found");return t}function E2(e,n,t){var a=e.__transition,r;a[n]=t,t.timer=Ko(i,0,t.time);function i(c){t.state=uu,t.timer.restart(o,t.delay,t.time),t.delay<=c&&o(c-t.delay)}function o(c){var h,f,s,d;if(t.state!==uu)return l();for(h in a)if(d=a[h],d.name===t.name){if(d.state===wi)return qi(o);d.state===Kc?(d.state=Mi,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete a[h]):+h<n&&(d.state=Mi,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete a[h])}if(qi(function(){t.state===wi&&(t.state=Kc,t.timer.restart(u,t.delay,t.time),u(c))}),t.state=lu,t.on.call("start",e,e.__data__,t.index,t.group),t.state===lu){for(t.state=wi,r=new Array(s=t.tween.length),h=0,f=-1;h<s;++h)(d=t.tween[h].value.call(e,e.__data__,t.index,t.group))&&(r[++f]=d);r.length=f+1}}function u(c){for(var h=c<t.duration?t.ease.call(null,c/t.duration):(t.timer.restart(l),t.state=cu,1),f=-1,s=r.length;++f<s;)r[f].call(e,h);t.state===cu&&(t.on.call("end",e,e.__data__,t.index,t.group),l())}function l(){t.state=Mi,t.timer.stop(),delete a[n];for(var c in a)return;delete e.__transition}}function Et(e,n){var t=e.__transition,a,r,i=!0,o;if(t){n=n==null?null:n+"";for(o in t){if((a=t[o]).name!==n){i=!1;continue}r=a.state>lu&&a.state<cu,a.state=Mi,a.timer.stop(),a.on.call(r?"interrupt":"cancel",e,e.__data__,a.index,a.group),delete t[o]}i&&delete e.__transition}}function N2(e){return this.each(function(){Et(this,e)})}function R2(e,n){var t,a;return function(){var r=Gn(this,e),i=r.tween;if(i!==t){a=t=i;for(var o=0,u=a.length;o<u;++o)if(a[o].name===n){a=a.slice(),a.splice(o,1);break}}r.tween=a}}function B2(e,n,t){var a,r;if(typeof t!="function")throw new Error;return function(){var i=Gn(this,e),o=i.tween;if(o!==a){r=(a=o).slice();for(var u={name:n,value:t},l=0,c=r.length;l<c;++l)if(r[l].name===n){r[l]=u;break}l===c&&r.push(u)}i.tween=r}}function P2(e,n){var t=this._id;if(e+="",arguments.length<2){for(var a=Cn(this.node(),t).tween,r=0,i=a.length,o;r<i;++r)if((o=a[r]).name===e)return o.value;return null}return this.each((n==null?R2:B2)(t,e,n))}function ml(e,n,t){var a=e._id;return e.each(function(){var r=Gn(this,a);(r.value||(r.value={}))[n]=t.apply(this,arguments)}),function(r){return Cn(r,a).value[n]}}function sg(e,n){var t;return(typeof n=="number"?mn:n instanceof Ge?kr:(t=Ge(n))?(n=t,kr):dl)(e,n)}function I2(e){return function(){this.removeAttribute(e)}}function $2(e){return function(){this.removeAttributeNS(e.space,e.local)}}function L2(e,n,t){var a,r=t+"",i;return function(){var o=this.getAttribute(e);return o===r?null:o===a?i:i=n(a=o,t)}}function K2(e,n,t){var a,r=t+"",i;return function(){var o=this.getAttributeNS(e.space,e.local);return o===r?null:o===a?i:i=n(a=o,t)}}function D2(e,n,t){var a,r,i;return function(){var o,u=t(this),l;return u==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=u+"",o===l?null:o===a&&l===r?i:(r=l,i=n(a=o,u)))}}function H2(e,n,t){var a,r,i;return function(){var o,u=t(this),l;return u==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=u+"",o===l?null:o===a&&l===r?i:(r=l,i=n(a=o,u)))}}function O2(e,n){var t=Br(e),a=t==="transform"?Xd:sg;return this.attrTween(e,typeof n=="function"?(t.local?H2:D2)(t,a,ml(this,"attr."+e,n)):n==null?(t.local?$2:I2)(t):(t.local?K2:L2)(t,a,n))}function G2(e,n){return function(t){this.setAttribute(e,n.call(this,t))}}function q2(e,n){return function(t){this.setAttributeNS(e.space,e.local,n.call(this,t))}}function F2(e,n){var t,a;function r(){var i=n.apply(this,arguments);return i!==a&&(t=(a=i)&&q2(e,i)),t}return r._value=n,r}function U2(e,n){var t,a;function r(){var i=n.apply(this,arguments);return i!==a&&(t=(a=i)&&G2(e,i)),t}return r._value=n,r}function j2(e,n){var t="attr."+e;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(n==null)return this.tween(t,null);if(typeof n!="function")throw new Error;var a=Br(e);return this.tween(t,(a.local?F2:U2)(a,n))}function Y2(e,n){return function(){gl(this,e).delay=+n.apply(this,arguments)}}function V2(e,n){return n=+n,function(){gl(this,e).delay=n}}function W2(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?Y2:V2)(n,e)):Cn(this.node(),n).delay}function Z2(e,n){return function(){Gn(this,e).duration=+n.apply(this,arguments)}}function X2(e,n){return n=+n,function(){Gn(this,e).duration=n}}function Q2(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?Z2:X2)(n,e)):Cn(this.node(),n).duration}function J2(e,n){if(typeof n!="function")throw new Error;return function(){Gn(this,e).ease=n}}function ev(e){var n=this._id;return arguments.length?this.each(J2(n,e)):Cn(this.node(),n).ease}function nv(e,n){return function(){var t=n.apply(this,arguments);if(typeof t!="function")throw new Error;Gn(this,e).ease=t}}function tv(e){if(typeof e!="function")throw new Error;return this.each(nv(this._id,e))}function av(e){typeof e!="function"&&(e=il(e));for(var n=this._groups,t=n.length,a=new Array(t),r=0;r<t;++r)for(var i=n[r],o=i.length,u=a[r]=[],l,c=0;c<o;++c)(l=i[c])&&e.call(l,l.__data__,c,i)&&u.push(l);return new Kn(a,this._parents,this._name,this._id)}function rv(e){if(e._id!==this._id)throw new Error;for(var n=this._groups,t=e._groups,a=n.length,r=t.length,i=Math.min(a,r),o=new Array(a),u=0;u<i;++u)for(var l=n[u],c=t[u],h=l.length,f=o[u]=new Array(h),s,d=0;d<h;++d)(s=l[d]||c[d])&&(f[d]=s);for(;u<a;++u)o[u]=n[u];return new Kn(o,this._parents,this._name,this._id)}function iv(e){return(e+"").trim().split(/^|\s+/).every(function(n){var t=n.indexOf(".");return t>=0&&(n=n.slice(0,t)),!n||n==="start"})}function ov(e,n,t){var a,r,i=iv(n)?gl:Gn;return function(){var o=i(this,e),u=o.on;u!==a&&(r=(a=u).copy()).on(n,t),o.on=r}}function sv(e,n){var t=this._id;return arguments.length<2?Cn(this.node(),t).on.on(e):this.each(ov(t,e,n))}function uv(e){return function(){var n=this.parentNode;for(var t in this.__transition)if(+t!==e)return;n&&n.removeChild(this)}}function lv(){return this.on("end.remove",uv(this._id))}function cv(e){var n=this._name,t=this._id;typeof e!="function"&&(e=Co(e));for(var a=this._groups,r=a.length,i=new Array(r),o=0;o<r;++o)for(var u=a[o],l=u.length,c=i[o]=new Array(l),h,f,s=0;s<l;++s)(h=u[s])&&(f=e.call(h,h.__data__,s,u))&&("__data__"in h&&(f.__data__=h.__data__),c[s]=f,Do(c[s],n,t,s,c,Cn(h,t)));return new Kn(i,this._parents,n,t)}function hv(e){var n=this._name,t=this._id;typeof e!="function"&&(e=rl(e));for(var a=this._groups,r=a.length,i=[],o=[],u=0;u<r;++u)for(var l=a[u],c=l.length,h,f=0;f<c;++f)if(h=l[f]){for(var s=e.call(h,h.__data__,f,l),d,g=Cn(h,t),p=0,m=s.length;p<m;++p)(d=s[p])&&Do(d,n,t,p,s,g);i.push(s),o.push(h)}return new Kn(i,o,n,t)}var fv=Ft.prototype.constructor;function dv(){return new fv(this._groups,this._parents)}function gv(e,n){var t,a,r;return function(){var i=It(this,e),o=(this.style.removeProperty(e),It(this,e));return i===o?null:i===t&&o===a?r:r=n(t=i,a=o)}}function ug(e){return function(){this.style.removeProperty(e)}}function mv(e,n,t){var a,r=t+"",i;return function(){var o=It(this,e);return o===r?null:o===a?i:i=n(a=o,t)}}function pv(e,n,t){var a,r,i;return function(){var o=It(this,e),u=t(this),l=u+"";return u==null&&(l=u=(this.style.removeProperty(e),It(this,e))),o===l?null:o===a&&l===r?i:(r=l,i=n(a=o,u))}}function yv(e,n){var t,a,r,i="style."+n,o="end."+i,u;return function(){var l=Gn(this,e),c=l.on,h=l.value[i]==null?u||(u=ug(n)):void 0;(c!==t||r!==h)&&(a=(t=c).copy()).on(o,r=h),l.on=a}}function bv(e,n,t){var a=(e+="")=="transform"?Zd:sg;return n==null?this.styleTween(e,gv(e,a)).on("end.style."+e,ug(e)):typeof n=="function"?this.styleTween(e,pv(e,a,ml(this,"style."+e,n))).each(yv(this._id,e)):this.styleTween(e,mv(e,a,n),t).on("end.style."+e,null)}function vv(e,n,t){return function(a){this.style.setProperty(e,n.call(this,a),t)}}function kv(e,n,t){var a,r;function i(){var o=n.apply(this,arguments);return o!==r&&(a=(r=o)&&vv(e,o,t)),a}return i._value=n,i}function wv(e,n,t){var a="style."+(e+="");if(arguments.length<2)return(a=this.tween(a))&&a._value;if(n==null)return this.tween(a,null);if(typeof n!="function")throw new Error;return this.tween(a,kv(e,n,t??""))}function Mv(e){return function(){this.textContent=e}}function Sv(e){return function(){var n=e(this);this.textContent=n??""}}function _v(e){return this.tween("text",typeof e=="function"?Sv(ml(this,"text",e)):Mv(e==null?"":e+""))}function Av(e){return function(n){this.textContent=e.call(this,n)}}function xv(e){var n,t;function a(){var r=e.apply(this,arguments);return r!==t&&(n=(t=r)&&Av(r)),n}return a._value=e,a}function Tv(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,xv(e))}function zv(){for(var e=this._name,n=this._id,t=lg(),a=this._groups,r=a.length,i=0;i<r;++i)for(var o=a[i],u=o.length,l,c=0;c<u;++c)if(l=o[c]){var h=Cn(l,n);Do(l,e,t,c,o,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new Kn(a,this._parents,e,t)}function Cv(){var e,n,t=this,a=t._id,r=t.size();return new Promise(function(i,o){var u={value:o},l={value:function(){--r===0&&i()}};t.each(function(){var c=Gn(this,a),h=c.on;h!==e&&(n=(e=h).copy(),n._.cancel.push(u),n._.interrupt.push(u),n._.end.push(l)),c.on=n}),r===0&&i()})}var Ev=0;function Kn(e,n,t,a){this._groups=e,this._parents=n,this._name=t,this._id=a}function pl(e){return Ft().transition(e)}function lg(){return++Ev}var Fn=Ft.prototype;Kn.prototype=pl.prototype={constructor:Kn,select:cv,selectAll:hv,selectChild:Fn.selectChild,selectChildren:Fn.selectChildren,filter:av,merge:rv,selection:dv,transition:zv,call:Fn.call,nodes:Fn.nodes,node:Fn.node,size:Fn.size,empty:Fn.empty,each:Fn.each,on:sv,attr:O2,attrTween:j2,style:bv,styleTween:wv,text:_v,textTween:Tv,remove:lv,tween:P2,delay:W2,duration:Q2,ease:ev,easeVarying:tv,end:Cv,[Symbol.iterator]:Fn[Symbol.iterator]};const Nv=e=>+e;function Rv(e){return e*e}function Bv(e){return e*(2-e)}function Dc(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}function Pv(e){return e*e*e}function Iv(e){return--e*e*e+1}function hu(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var yl=3,$v=(function e(n){n=+n;function t(a){return Math.pow(a,n)}return t.exponent=e,t})(yl),Lv=(function e(n){n=+n;function t(a){return 1-Math.pow(1-a,n)}return t.exponent=e,t})(yl),Hc=(function e(n){n=+n;function t(a){return((a*=2)<=1?Math.pow(a,n):2-Math.pow(2-a,n))/2}return t.exponent=e,t})(yl),cg=Math.PI,hg=cg/2;function Kv(e){return+e==1?1:1-Math.cos(e*hg)}function Dv(e){return Math.sin(e*hg)}function fu(e){return(1-Math.cos(cg*e))/2}function dt(e){return(Math.pow(2,-10*e)-.0009765625)*1.0009775171065494}function Hv(e){return dt(1-+e)}function Ov(e){return 1-dt(e)}function Oc(e){return((e*=2)<=1?dt(1-e):2-dt(e-1))/2}function Gv(e){return 1-Math.sqrt(1-e*e)}function qv(e){return Math.sqrt(1- --e*e)}function Gc(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}var du=4/11,Fv=6/11,Uv=8/11,jv=3/4,Yv=9/11,Vv=10/11,Wv=15/16,Zv=21/22,Xv=63/64,ni=1/du/du;function Qv(e){return 1-Sr(1-e)}function Sr(e){return(e=+e)<du?ni*e*e:e<Uv?ni*(e-=Fv)*e+jv:e<Vv?ni*(e-=Yv)*e+Wv:ni*(e-=Zv)*e+Xv}function Jv(e){return((e*=2)<=1?1-Sr(1-e):Sr(e-1)+1)/2}var bl=1.70158,ek=(function e(n){n=+n;function t(a){return(a=+a)*a*(n*(a-1)+a)}return t.overshoot=e,t})(bl),nk=(function e(n){n=+n;function t(a){return--a*a*((a+1)*n+a)+1}return t.overshoot=e,t})(bl),qc=(function e(n){n=+n;function t(a){return((a*=2)<1?a*a*((n+1)*a-n):(a-=2)*a*((n+1)*a+n)+2)/2}return t.overshoot=e,t})(bl),ka=2*Math.PI,vl=1,kl=.3,tk=(function e(n,t){var a=Math.asin(1/(n=Math.max(1,n)))*(t/=ka);function r(i){return n*dt(- --i)*Math.sin((a-i)/t)}return r.amplitude=function(i){return e(i,t*ka)},r.period=function(i){return e(n,i)},r})(vl,kl),Fc=(function e(n,t){var a=Math.asin(1/(n=Math.max(1,n)))*(t/=ka);function r(i){return 1-n*dt(i=+i)*Math.sin((i+a)/t)}return r.amplitude=function(i){return e(i,t*ka)},r.period=function(i){return e(n,i)},r})(vl,kl),ak=(function e(n,t){var a=Math.asin(1/(n=Math.max(1,n)))*(t/=ka);function r(i){return((i=i*2-1)<0?n*dt(-i)*Math.sin((a-i)/t):2-n*dt(i)*Math.sin((a+i)/t))/2}return r.amplitude=function(i){return e(i,t*ka)},r.period=function(i){return e(n,i)},r})(vl,kl),rk={time:null,delay:0,duration:250,ease:hu};function ik(e,n){for(var t;!(t=e.__transition)||!(t=t[n]);)if(!(e=e.parentNode))throw new Error(`transition ${n} not found`);return t}function ok(e){var n,t;e instanceof Kn?(n=e._id,e=e._name):(n=lg(),(t=rk).time=Ir(),e=e==null?null:e+"");for(var a=this._groups,r=a.length,i=0;i<r;++i)for(var o=a[i],u=o.length,l,c=0;c<u;++c)(l=o[c])&&Do(l,e,n,c,o,t||ik(l,n));return new Kn(a,this._parents,e,n)}Ft.prototype.interrupt=N2;Ft.prototype.transition=ok;var sk=[null];function uk(e,n){var t=e.__transition,a,r;if(t){n=n==null?null:n+"";for(r in t)if((a=t[r]).state>uu&&a.name===n)return new Kn([[e]],sk,n,+r)}return null}const ws=e=>()=>e;function lk(e,{sourceEvent:n,target:t,selection:a,mode:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:t,enumerable:!0,configurable:!0},selection:{value:a,enumerable:!0,configurable:!0},mode:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function ck(e){e.stopImmediatePropagation()}function Ms(e){e.preventDefault(),e.stopImmediatePropagation()}var Uc={name:"drag"},Ss={name:"space"},Xt={name:"handle"},Qt={name:"center"};const{abs:jc,max:$e,min:Le}=Math;function Yc(e){return[+e[0],+e[1]]}function gu(e){return[Yc(e[0]),Yc(e[1])]}var Si={name:"x",handles:["w","e"].map(_r),input:function(e,n){return e==null?null:[[+e[0],n[0][1]],[+e[1],n[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},_i={name:"y",handles:["n","s"].map(_r),input:function(e,n){return e==null?null:[[n[0][0],+e[0]],[n[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},hk={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(_r),input:function(e){return e==null?null:gu(e)},output:function(e){return e}},Un={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Vc={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Wc={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},fk={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},dk={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function _r(e){return{type:e}}function gk(e){return!e.ctrlKey&&!e.button}function mk(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function pk(){return navigator.maxTouchPoints||"ontouchstart"in this}function _s(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function yk(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function bk(e){var n=e.__brush;return n?n.dim.output(n.selection):null}function vk(){return wl(Si)}function kk(){return wl(_i)}function wk(){return wl(hk)}function wl(e){var n=mk,t=gk,a=pk,r=!0,i=qt("start","brush","end"),o=6,u;function l(m){var y=m.property("__brush",p).selectAll(".overlay").data([_r("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Un.overlay).merge(y).each(function(){var v=_s(this).extent;_e(this).attr("x",v[0][0]).attr("y",v[0][1]).attr("width",v[1][0]-v[0][0]).attr("height",v[1][1]-v[0][1])}),m.selectAll(".selection").data([_r("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Un.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var k=m.selectAll(".handle").data(e.handles,function(v){return v.type});k.exit().remove(),k.enter().append("rect").attr("class",function(v){return"handle handle--"+v.type}).attr("cursor",function(v){return Un[v.type]}),m.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",s).filter(a).on("touchstart.brush",s).on("touchmove.brush",d).on("touchend.brush touchcancel.brush",g).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}l.move=function(m,y,k){m.tween?m.on("start.brush",function(v){h(this,arguments).beforestart().start(v)}).on("interrupt.brush end.brush",function(v){h(this,arguments).end(v)}).tween("brush",function(){var v=this,b=v.__brush,w=h(v,arguments),M=b.selection,x=e.input(typeof y=="function"?y.apply(this,arguments):y,b.extent),S=tt(M,x);function T(_){b.selection=_===1&&x===null?null:S(_),c.call(v),w.brush()}return M!==null&&x!==null?T:T(1)}):m.each(function(){var v=this,b=arguments,w=v.__brush,M=e.input(typeof y=="function"?y.apply(v,b):y,w.extent),x=h(v,b).beforestart();Et(v),w.selection=M===null?null:M,c.call(v),x.start(k).brush(k).end(k)})},l.clear=function(m,y){l.move(m,null,y)};function c(){var m=_e(this),y=_s(this).selection;y?(m.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),m.selectAll(".handle").style("display",null).attr("x",function(k){return k.type[k.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(k){return k.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(k){return k.type==="n"||k.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(k){return k.type==="e"||k.type==="w"?y[1][1]-y[0][1]+o:o})):m.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function h(m,y,k){var v=m.__brush.emitter;return v&&(!k||!v.clean)?v:new f(m,y,k)}function f(m,y,k){this.that=m,this.args=y,this.state=m.__brush,this.active=0,this.clean=k}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(m,y){return this.starting?(this.starting=!1,this.emit("start",m,y)):this.emit("brush",m),this},brush:function(m,y){return this.emit("brush",m,y),this},end:function(m,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",m,y)),this},emit:function(m,y,k){var v=_e(this.that).datum();i.call(m,this.that,new lk(m,{sourceEvent:y,target:l,selection:e.output(this.state.selection),mode:k,dispatch:i}),v)}};function s(m){if(u&&!m.touches||!t.apply(this,arguments))return;var y=this,k=m.target.__data__.type,v=(r&&m.metaKey?k="overlay":k)==="selection"?Uc:r&&m.altKey?Qt:Xt,b=e===_i?null:fk[k],w=e===Si?null:dk[k],M=_s(y),x=M.extent,S=M.selection,T=x[0][0],_,A,R=x[0][1],N,z,E=x[1][0],C,B,I=x[1][1],P,D,H=0,G=0,W,Q=b&&w&&r&&m.shiftKey,q,ce,ee=Array.from(m.touches||[m],Z=>{const me=Z.identifier;return Z=cn(Z,y),Z.point0=Z.slice(),Z.identifier=me,Z});Et(y);var he=h(y,arguments,!0).beforestart();if(k==="overlay"){S&&(W=!0);const Z=[ee[0],ee[1]||ee[0]];M.selection=S=[[_=e===_i?T:Le(Z[0][0],Z[1][0]),N=e===Si?R:Le(Z[0][1],Z[1][1])],[C=e===_i?E:$e(Z[0][0],Z[1][0]),P=e===Si?I:$e(Z[0][1],Z[1][1])]],ee.length>1&&ye(m)}else _=S[0][0],N=S[0][1],C=S[1][0],P=S[1][1];A=_,z=N,B=C,D=P;var O=_e(y).attr("pointer-events","none"),Y=O.selectAll(".overlay").attr("cursor",Un[k]);if(m.touches)he.moved=K,he.ended=se;else{var ne=_e(m.view).on("mousemove.brush",K,!0).on("mouseup.brush",se,!0);r&&ne.on("keydown.brush",Be,!0).on("keyup.brush",we,!0),Eo(m.view)}c.call(y),he.start(m,v.name);function K(Z){for(const me of Z.changedTouches||[Z])for(const rt of ee)rt.identifier===me.identifier&&(rt.cur=cn(me,y));if(Q&&!q&&!ce&&ee.length===1){const me=ee[0];jc(me.cur[0]-me[0])>jc(me.cur[1]-me[1])?ce=!0:q=!0}for(const me of ee)me.cur&&(me[0]=me.cur[0],me[1]=me.cur[1]);W=!0,Ms(Z),ye(Z)}function ye(Z){const me=ee[0],rt=me.point0;var sn;switch(H=me[0]-rt[0],G=me[1]-rt[1],v){case Ss:case Uc:{b&&(H=$e(T-_,Le(E-C,H)),A=_+H,B=C+H),w&&(G=$e(R-N,Le(I-P,G)),z=N+G,D=P+G);break}case Xt:{ee[1]?(b&&(A=$e(T,Le(E,ee[0][0])),B=$e(T,Le(E,ee[1][0])),b=1),w&&(z=$e(R,Le(I,ee[0][1])),D=$e(R,Le(I,ee[1][1])),w=1)):(b<0?(H=$e(T-_,Le(E-_,H)),A=_+H,B=C):b>0&&(H=$e(T-C,Le(E-C,H)),A=_,B=C+H),w<0?(G=$e(R-N,Le(I-N,G)),z=N+G,D=P):w>0&&(G=$e(R-P,Le(I-P,G)),z=N,D=P+G));break}case Qt:{b&&(A=$e(T,Le(E,_-H*b)),B=$e(T,Le(E,C+H*b))),w&&(z=$e(R,Le(I,N-G*w)),D=$e(R,Le(I,P+G*w)));break}}B<A&&(b*=-1,sn=_,_=C,C=sn,sn=A,A=B,B=sn,k in Vc&&Y.attr("cursor",Un[k=Vc[k]])),D<z&&(w*=-1,sn=N,N=P,P=sn,sn=z,z=D,D=sn,k in Wc&&Y.attr("cursor",Un[k=Wc[k]])),M.selection&&(S=M.selection),q&&(A=S[0][0],B=S[1][0]),ce&&(z=S[0][1],D=S[1][1]),(S[0][0]!==A||S[0][1]!==z||S[1][0]!==B||S[1][1]!==D)&&(M.selection=[[A,z],[B,D]],c.call(y),he.brush(Z,v.name))}function se(Z){if(ck(Z),Z.touches){if(Z.touches.length)return;u&&clearTimeout(u),u=setTimeout(function(){u=null},500)}else No(Z.view,W),ne.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);O.attr("pointer-events","all"),Y.attr("cursor",Un.overlay),M.selection&&(S=M.selection),yk(S)&&(M.selection=null,c.call(y)),he.end(Z,v.name)}function Be(Z){switch(Z.keyCode){case 16:{Q=b&&w;break}case 18:{v===Xt&&(b&&(C=B-H*b,_=A+H*b),w&&(P=D-G*w,N=z+G*w),v=Qt,ye(Z));break}case 32:{(v===Xt||v===Qt)&&(b<0?C=B-H:b>0&&(_=A-H),w<0?P=D-G:w>0&&(N=z-G),v=Ss,Y.attr("cursor",Un.selection),ye(Z));break}default:return}Ms(Z)}function we(Z){switch(Z.keyCode){case 16:{Q&&(q=ce=Q=!1,ye(Z));break}case 18:{v===Qt&&(b<0?C=B:b>0&&(_=A),w<0?P=D:w>0&&(N=z),v=Xt,ye(Z));break}case 32:{v===Ss&&(Z.altKey?(b&&(C=B-H*b,_=A+H*b),w&&(P=D-G*w,N=z+G*w),v=Qt):(b<0?C=B:b>0&&(_=A),w<0?P=D:w>0&&(N=z),v=Xt),Y.attr("cursor",Un[k]),ye(Z));break}default:return}Ms(Z)}}function d(m){h(this,arguments).moved(m)}function g(m){h(this,arguments).ended(m)}function p(){var m=this.__brush||{selection:null};return m.extent=gu(n.apply(this,arguments)),m.dim=e,m}return l.extent=function(m){return arguments.length?(n=typeof m=="function"?m:ws(gu(m)),l):n},l.filter=function(m){return arguments.length?(t=typeof m=="function"?m:ws(!!m),l):t},l.touchable=function(m){return arguments.length?(a=typeof m=="function"?m:ws(!!m),l):a},l.handleSize=function(m){return arguments.length?(o=+m,l):o},l.keyModifiers=function(m){return arguments.length?(r=!!m,l):r},l.on=function(){var m=i.on.apply(i,arguments);return m===i?l:m},l}var Zc=Math.abs,Jt=Math.cos,ea=Math.sin,fg=Math.PI,ti=fg/2,Xc=fg*2,Qc=Math.max,As=1e-12;function xs(e,n){return Array.from({length:n-e},(t,a)=>e+a)}function Mk(e){return function(n,t){return e(n.source.value+n.target.value,t.source.value+t.target.value)}}function Sk(){return Ml(!1,!1)}function _k(){return Ml(!1,!0)}function Ak(){return Ml(!0,!1)}function Ml(e,n){var t=0,a=null,r=null,i=null;function o(u){var l=u.length,c=new Array(l),h=xs(0,l),f=new Array(l*l),s=new Array(l),d=0,g;u=Float64Array.from({length:l*l},n?(p,m)=>u[m%l][m/l|0]:(p,m)=>u[m/l|0][m%l]);for(let p=0;p<l;++p){let m=0;for(let y=0;y<l;++y)m+=u[p*l+y]+e*u[y*l+p];d+=c[p]=m}d=Qc(0,Xc-t*l)/d,g=d?t:Xc/l;{let p=0;a&&h.sort((m,y)=>a(c[m],c[y]));for(const m of h){const y=p;if(e){const k=xs(~l+1,l).filter(v=>v<0?u[~v*l+m]:u[m*l+v]);r&&k.sort((v,b)=>r(v<0?-u[~v*l+m]:u[m*l+v],b<0?-u[~b*l+m]:u[m*l+b]));for(const v of k)if(v<0){const b=f[~v*l+m]||(f[~v*l+m]={source:null,target:null});b.target={index:m,startAngle:p,endAngle:p+=u[~v*l+m]*d,value:u[~v*l+m]}}else{const b=f[m*l+v]||(f[m*l+v]={source:null,target:null});b.source={index:m,startAngle:p,endAngle:p+=u[m*l+v]*d,value:u[m*l+v]}}s[m]={index:m,startAngle:y,endAngle:p,value:c[m]}}else{const k=xs(0,l).filter(v=>u[m*l+v]||u[v*l+m]);r&&k.sort((v,b)=>r(u[m*l+v],u[m*l+b]));for(const v of k){let b;if(m<v?(b=f[m*l+v]||(f[m*l+v]={source:null,target:null}),b.source={index:m,startAngle:p,endAngle:p+=u[m*l+v]*d,value:u[m*l+v]}):(b=f[v*l+m]||(f[v*l+m]={source:null,target:null}),b.target={index:m,startAngle:p,endAngle:p+=u[m*l+v]*d,value:u[m*l+v]},m===v&&(b.source=b.target)),b.source&&b.target&&b.source.value<b.target.value){const w=b.source;b.source=b.target,b.target=w}}s[m]={index:m,startAngle:y,endAngle:p,value:c[m]}}p+=g}}return f=Object.values(f),f.groups=s,i?f.sort(i):f}return o.padAngle=function(u){return arguments.length?(t=Qc(0,u),o):t},o.sortGroups=function(u){return arguments.length?(a=u,o):a},o.sortSubgroups=function(u){return arguments.length?(r=u,o):r},o.sortChords=function(u){return arguments.length?(u==null?i=null:(i=Mk(u))._=u,o):i&&i._},o}const mu=Math.PI,pu=2*mu,Mt=1e-6,xk=pu-Mt;function dg(e){this._+=e[0];for(let n=1,t=e.length;n<t;++n)this._+=arguments[n]+e[n]}function Tk(e){let n=Math.floor(e);if(!(n>=0))throw new Error(`invalid digits: ${e}`);if(n>15)return dg;const t=10**n;return function(a){this._+=a[0];for(let r=1,i=a.length;r<i;++r)this._+=Math.round(arguments[r]*t)/t+a[r]}}let $r=class{constructor(n){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=n==null?dg:Tk(n)}moveTo(n,t){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(n,t){this._append`L${this._x1=+n},${this._y1=+t}`}quadraticCurveTo(n,t,a,r){this._append`Q${+n},${+t},${this._x1=+a},${this._y1=+r}`}bezierCurveTo(n,t,a,r,i,o){this._append`C${+n},${+t},${+a},${+r},${this._x1=+i},${this._y1=+o}`}arcTo(n,t,a,r,i){if(n=+n,t=+t,a=+a,r=+r,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,u=this._y1,l=a-n,c=r-t,h=o-n,f=u-t,s=h*h+f*f;if(this._x1===null)this._append`M${this._x1=n},${this._y1=t}`;else if(s>Mt)if(!(Math.abs(f*l-c*h)>Mt)||!i)this._append`L${this._x1=n},${this._y1=t}`;else{let d=a-o,g=r-u,p=l*l+c*c,m=d*d+g*g,y=Math.sqrt(p),k=Math.sqrt(s),v=i*Math.tan((mu-Math.acos((p+s-m)/(2*y*k)))/2),b=v/k,w=v/y;Math.abs(b-1)>Mt&&this._append`L${n+b*h},${t+b*f}`,this._append`A${i},${i},0,0,${+(f*d>h*g)},${this._x1=n+w*l},${this._y1=t+w*c}`}}arc(n,t,a,r,i,o){if(n=+n,t=+t,a=+a,o=!!o,a<0)throw new Error(`negative radius: ${a}`);let u=a*Math.cos(r),l=a*Math.sin(r),c=n+u,h=t+l,f=1^o,s=o?r-i:i-r;this._x1===null?this._append`M${c},${h}`:(Math.abs(this._x1-c)>Mt||Math.abs(this._y1-h)>Mt)&&this._append`L${c},${h}`,a&&(s<0&&(s=s%pu+pu),s>xk?this._append`A${a},${a},0,1,${f},${n-u},${t-l}A${a},${a},0,1,${f},${this._x1=c},${this._y1=h}`:s>Mt&&this._append`A${a},${a},0,${+(s>=mu)},${f},${this._x1=n+a*Math.cos(i)},${this._y1=t+a*Math.sin(i)}`)}rect(n,t,a,r){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+t}h${a=+a}v${+r}h${-a}Z`}toString(){return this._}};function Sl(){return new $r}Sl.prototype=$r.prototype;function zk(e=3){return new $r(+e)}var Ck=Array.prototype.slice;function kt(e){return function(){return e}}function Ek(e){return e.source}function Nk(e){return e.target}function Jc(e){return e.radius}function Rk(e){return e.startAngle}function Bk(e){return e.endAngle}function Pk(){return 0}function Ik(){return 10}function gg(e){var n=Ek,t=Nk,a=Jc,r=Jc,i=Rk,o=Bk,u=Pk,l=null;function c(){var h,f=n.apply(this,arguments),s=t.apply(this,arguments),d=u.apply(this,arguments)/2,g=Ck.call(arguments),p=+a.apply(this,(g[0]=f,g)),m=i.apply(this,g)-ti,y=o.apply(this,g)-ti,k=+r.apply(this,(g[0]=s,g)),v=i.apply(this,g)-ti,b=o.apply(this,g)-ti;if(l||(l=h=Sl()),d>As&&(Zc(y-m)>d*2+As?y>m?(m+=d,y-=d):(m-=d,y+=d):m=y=(m+y)/2,Zc(b-v)>d*2+As?b>v?(v+=d,b-=d):(v-=d,b+=d):v=b=(v+b)/2),l.moveTo(p*Jt(m),p*ea(m)),l.arc(0,0,p,m,y),m!==v||y!==b)if(e){var w=+e.apply(this,arguments),M=k-w,x=(v+b)/2;l.quadraticCurveTo(0,0,M*Jt(v),M*ea(v)),l.lineTo(k*Jt(x),k*ea(x)),l.lineTo(M*Jt(b),M*ea(b))}else l.quadraticCurveTo(0,0,k*Jt(v),k*ea(v)),l.arc(0,0,k,v,b);if(l.quadraticCurveTo(0,0,p*Jt(m),p*ea(m)),l.closePath(),h)return l=null,h+""||null}return e&&(c.headRadius=function(h){return arguments.length?(e=typeof h=="function"?h:kt(+h),c):e}),c.radius=function(h){return arguments.length?(a=r=typeof h=="function"?h:kt(+h),c):a},c.sourceRadius=function(h){return arguments.length?(a=typeof h=="function"?h:kt(+h),c):a},c.targetRadius=function(h){return arguments.length?(r=typeof h=="function"?h:kt(+h),c):r},c.startAngle=function(h){return arguments.length?(i=typeof h=="function"?h:kt(+h),c):i},c.endAngle=function(h){return arguments.length?(o=typeof h=="function"?h:kt(+h),c):o},c.padAngle=function(h){return arguments.length?(u=typeof h=="function"?h:kt(+h),c):u},c.source=function(h){return arguments.length?(n=h,c):n},c.target=function(h){return arguments.length?(t=h,c):t},c.context=function(h){return arguments.length?(l=h??null,c):l},c}function $k(){return gg()}function Lk(){return gg(Ik)}var Kk=Array.prototype,mg=Kk.slice;function Dk(e,n){return e-n}function Hk(e){for(var n=0,t=e.length,a=e[t-1][1]*e[0][0]-e[t-1][0]*e[0][1];++n<t;)a+=e[n-1][1]*e[n][0]-e[n-1][0]*e[n][1];return a}const it=e=>()=>e;function Ok(e,n){for(var t=-1,a=n.length,r;++t<a;)if(r=Gk(e,n[t]))return r;return 0}function Gk(e,n){for(var t=n[0],a=n[1],r=-1,i=0,o=e.length,u=o-1;i<o;u=i++){var l=e[i],c=l[0],h=l[1],f=e[u],s=f[0],d=f[1];if(qk(l,f,n))return 0;h>a!=d>a&&t<(s-c)*(a-h)/(d-h)+c&&(r=-r)}return r}function qk(e,n,t){var a;return Fk(e,n,t)&&Uk(e[a=+(e[0]===n[0])],t[a],n[a])}function Fk(e,n,t){return(n[0]-e[0])*(t[1]-e[1])===(t[0]-e[0])*(n[1]-e[1])}function Uk(e,n,t){return e<=n&&n<=t||t<=n&&n<=e}function jk(){}var jn=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function yu(){var e=1,n=1,t=Ju,a=l;function r(c){var h=t(c);if(Array.isArray(h))h=h.slice().sort(Dk);else{const f=Tt(c,Yk);for(h=Bt(...Qu(f[0],f[1],h),h);h[h.length-1]>=f[1];)h.pop();for(;h[1]<f[0];)h.shift()}return h.map(f=>i(c,f))}function i(c,h){const f=h==null?NaN:+h;if(isNaN(f))throw new Error(`invalid value: ${h}`);var s=[],d=[];return o(c,f,function(g){a(g,c,f),Hk(g)>0?s.push([g]):d.push(g)}),d.forEach(function(g){for(var p=0,m=s.length,y;p<m;++p)if(Ok((y=s[p])[0],g)!==-1){y.push(g);return}}),{type:"MultiPolygon",value:h,coordinates:s}}function o(c,h,f){var s=new Array,d=new Array,g,p,m,y,k,v;for(g=p=-1,y=wt(c[0],h),jn[y<<1].forEach(b);++g<e-1;)m=y,y=wt(c[g+1],h),jn[m|y<<1].forEach(b);for(jn[y<<0].forEach(b);++p<n-1;){for(g=-1,y=wt(c[p*e+e],h),k=wt(c[p*e],h),jn[y<<1|k<<2].forEach(b);++g<e-1;)m=y,y=wt(c[p*e+e+g+1],h),v=k,k=wt(c[p*e+g+1],h),jn[m|y<<1|k<<2|v<<3].forEach(b);jn[y|k<<3].forEach(b)}for(g=-1,k=c[p*e]>=h,jn[k<<2].forEach(b);++g<e-1;)v=k,k=wt(c[p*e+g+1],h),jn[k<<2|v<<3].forEach(b);jn[k<<3].forEach(b);function b(w){var M=[w[0][0]+g,w[0][1]+p],x=[w[1][0]+g,w[1][1]+p],S=u(M),T=u(x),_,A;(_=d[S])?(A=s[T])?(delete d[_.end],delete s[A.start],_===A?(_.ring.push(x),f(_.ring)):s[_.start]=d[A.end]={start:_.start,end:A.end,ring:_.ring.concat(A.ring)}):(delete d[_.end],_.ring.push(x),d[_.end=T]=_):(_=s[T])?(A=d[S])?(delete s[_.start],delete d[A.end],_===A?(_.ring.push(x),f(_.ring)):s[A.start]=d[_.end]={start:A.start,end:_.end,ring:A.ring.concat(_.ring)}):(delete s[_.start],_.ring.unshift(M),s[_.start=S]=_):s[S]=d[T]={start:S,end:T,ring:[M,x]}}}function u(c){return c[0]*2+c[1]*(e+1)*4}function l(c,h,f){c.forEach(function(s){var d=s[0],g=s[1],p=d|0,m=g|0,y=Ts(h[m*e+p]);d>0&&d<e&&p===d&&(s[0]=eh(d,Ts(h[m*e+p-1]),y,f)),g>0&&g<n&&m===g&&(s[1]=eh(g,Ts(h[(m-1)*e+p]),y,f))})}return r.contour=i,r.size=function(c){if(!arguments.length)return[e,n];var h=Math.floor(c[0]),f=Math.floor(c[1]);if(!(h>=0&&f>=0))throw new Error("invalid size");return e=h,n=f,r},r.thresholds=function(c){return arguments.length?(t=typeof c=="function"?c:Array.isArray(c)?it(mg.call(c)):it(c),r):t},r.smooth=function(c){return arguments.length?(a=c?l:jk,r):a===l},r}function Yk(e){return isFinite(e)?e:NaN}function wt(e,n){return e==null?!1:+e>=n}function Ts(e){return e==null||isNaN(e=+e)?-1/0:e}function eh(e,n,t,a){const r=a-n,i=t-n,o=isFinite(r)||isFinite(i)?r/i:Math.sign(r)/Math.sign(i);return isNaN(o)?e:e+o-.5}function Vk(e){return e[0]}function Wk(e){return e[1]}function Zk(){return 1}function Xk(){var e=Vk,n=Wk,t=Zk,a=960,r=500,i=20,o=2,u=i*3,l=a+u*2>>o,c=r+u*2>>o,h=it(20);function f(k){var v=new Float32Array(l*c),b=Math.pow(2,-o),w=-1;for(const N of k){var M=(e(N,++w,k)+u)*b,x=(n(N,w,k)+u)*b,S=+t(N,w,k);if(S&&M>=0&&M<l&&x>=0&&x<c){var T=Math.floor(M),_=Math.floor(x),A=M-T-.5,R=x-_-.5;v[T+_*l]+=(1-A)*(1-R)*S,v[T+1+_*l]+=A*(1-R)*S,v[T+1+(_+1)*l]+=A*R*S,v[T+(_+1)*l]+=(1-A)*R*S}}return Zf({data:v,width:l,height:c},i*b),v}function s(k){var v=f(k),b=h(v),w=Math.pow(2,2*o);return Array.isArray(b)||(b=Bt(Number.MIN_VALUE,vn(v)/w,b)),yu().size([l,c]).thresholds(b.map(M=>M*w))(v).map((M,x)=>(M.value=+b[x],d(M)))}s.contours=function(k){var v=f(k),b=yu().size([l,c]),w=Math.pow(2,2*o),M=x=>{x=+x;var S=d(b.contour(v,x*w));return S.value=x,S};return Object.defineProperty(M,"max",{get:()=>vn(v)/w}),M};function d(k){return k.coordinates.forEach(g),k}function g(k){k.forEach(p)}function p(k){k.forEach(m)}function m(k){k[0]=k[0]*Math.pow(2,o)-u,k[1]=k[1]*Math.pow(2,o)-u}function y(){return u=i*3,l=a+u*2>>o,c=r+u*2>>o,s}return s.x=function(k){return arguments.length?(e=typeof k=="function"?k:it(+k),s):e},s.y=function(k){return arguments.length?(n=typeof k=="function"?k:it(+k),s):n},s.weight=function(k){return arguments.length?(t=typeof k=="function"?k:it(+k),s):t},s.size=function(k){if(!arguments.length)return[a,r];var v=+k[0],b=+k[1];if(!(v>=0&&b>=0))throw new Error("invalid size");return a=v,r=b,y()},s.cellSize=function(k){if(!arguments.length)return 1<<o;if(!((k=+k)>=1))throw new Error("invalid cell size");return o=Math.floor(Math.log(k)/Math.LN2),y()},s.thresholds=function(k){return arguments.length?(h=typeof k=="function"?k:Array.isArray(k)?it(mg.call(k)):it(k),s):h},s.bandwidth=function(k){if(!arguments.length)return Math.sqrt(i*(i+1));if(!((k=+k)>=0))throw new Error("invalid bandwidth");return i=(Math.sqrt(4*k*k+1)-1)/2,y()},s}const Jn=11102230246251565e-32,Ke=134217729,Qk=(3+8*Jn)*Jn;function zs(e,n,t,a,r){let i,o,u,l,c=n[0],h=a[0],f=0,s=0;h>c==h>-c?(i=c,c=n[++f]):(i=h,h=a[++s]);let d=0;if(f<e&&s<t)for(h>c==h>-c?(o=c+i,u=i-(o-c),c=n[++f]):(o=h+i,u=i-(o-h),h=a[++s]),i=o,u!==0&&(r[d++]=u);f<e&&s<t;)h>c==h>-c?(o=i+c,l=o-i,u=i-(o-l)+(c-l),c=n[++f]):(o=i+h,l=o-i,u=i-(o-l)+(h-l),h=a[++s]),i=o,u!==0&&(r[d++]=u);for(;f<e;)o=i+c,l=o-i,u=i-(o-l)+(c-l),c=n[++f],i=o,u!==0&&(r[d++]=u);for(;s<t;)o=i+h,l=o-i,u=i-(o-l)+(h-l),h=a[++s],i=o,u!==0&&(r[d++]=u);return(i!==0||d===0)&&(r[d++]=i),d}function Jk(e,n){let t=n[0];for(let a=1;a<e;a++)t+=n[a];return t}function Lr(e){return new Float64Array(e)}const ew=(3+16*Jn)*Jn,nw=(2+12*Jn)*Jn,tw=(9+64*Jn)*Jn*Jn,na=Lr(4),nh=Lr(8),th=Lr(12),ah=Lr(16),qe=Lr(4);function aw(e,n,t,a,r,i,o){let u,l,c,h,f,s,d,g,p,m,y,k,v,b,w,M,x,S;const T=e-r,_=t-r,A=n-i,R=a-i;b=T*R,s=Ke*T,d=s-(s-T),g=T-d,s=Ke*R,p=s-(s-R),m=R-p,w=g*m-(b-d*p-g*p-d*m),M=A*_,s=Ke*A,d=s-(s-A),g=A-d,s=Ke*_,p=s-(s-_),m=_-p,x=g*m-(M-d*p-g*p-d*m),y=w-x,f=w-y,na[0]=w-(y+f)+(f-x),k=b+y,f=k-b,v=b-(k-f)+(y-f),y=v-M,f=v-y,na[1]=v-(y+f)+(f-M),S=k+y,f=S-k,na[2]=k-(S-f)+(y-f),na[3]=S;let N=Jk(4,na),z=nw*o;if(N>=z||-N>=z||(f=e-T,u=e-(T+f)+(f-r),f=t-_,c=t-(_+f)+(f-r),f=n-A,l=n-(A+f)+(f-i),f=a-R,h=a-(R+f)+(f-i),u===0&&l===0&&c===0&&h===0)||(z=tw*o+Qk*Math.abs(N),N+=T*h+R*u-(A*c+_*l),N>=z||-N>=z))return N;b=u*R,s=Ke*u,d=s-(s-u),g=u-d,s=Ke*R,p=s-(s-R),m=R-p,w=g*m-(b-d*p-g*p-d*m),M=l*_,s=Ke*l,d=s-(s-l),g=l-d,s=Ke*_,p=s-(s-_),m=_-p,x=g*m-(M-d*p-g*p-d*m),y=w-x,f=w-y,qe[0]=w-(y+f)+(f-x),k=b+y,f=k-b,v=b-(k-f)+(y-f),y=v-M,f=v-y,qe[1]=v-(y+f)+(f-M),S=k+y,f=S-k,qe[2]=k-(S-f)+(y-f),qe[3]=S;const E=zs(4,na,4,qe,nh);b=T*h,s=Ke*T,d=s-(s-T),g=T-d,s=Ke*h,p=s-(s-h),m=h-p,w=g*m-(b-d*p-g*p-d*m),M=A*c,s=Ke*A,d=s-(s-A),g=A-d,s=Ke*c,p=s-(s-c),m=c-p,x=g*m-(M-d*p-g*p-d*m),y=w-x,f=w-y,qe[0]=w-(y+f)+(f-x),k=b+y,f=k-b,v=b-(k-f)+(y-f),y=v-M,f=v-y,qe[1]=v-(y+f)+(f-M),S=k+y,f=S-k,qe[2]=k-(S-f)+(y-f),qe[3]=S;const C=zs(E,nh,4,qe,th);b=u*h,s=Ke*u,d=s-(s-u),g=u-d,s=Ke*h,p=s-(s-h),m=h-p,w=g*m-(b-d*p-g*p-d*m),M=l*c,s=Ke*l,d=s-(s-l),g=l-d,s=Ke*c,p=s-(s-c),m=c-p,x=g*m-(M-d*p-g*p-d*m),y=w-x,f=w-y,qe[0]=w-(y+f)+(f-x),k=b+y,f=k-b,v=b-(k-f)+(y-f),y=v-M,f=v-y,qe[1]=v-(y+f)+(f-M),S=k+y,f=S-k,qe[2]=k-(S-f)+(y-f),qe[3]=S;const B=zs(C,th,4,qe,ah);return ah[B-1]}function ai(e,n,t,a,r,i){const o=(n-i)*(t-r),u=(e-r)*(a-i),l=o-u,c=Math.abs(o+u);return Math.abs(l)>=ew*c?l:-aw(e,n,t,a,r,i,c)}const rh=Math.pow(2,-52),ri=new Uint32Array(512);class wa{static from(n,t=uw,a=lw){const r=n.length,i=new Float64Array(r*2);for(let o=0;o<r;o++){const u=n[o];i[2*o]=t(u),i[2*o+1]=a(u)}return new wa(i)}constructor(n){const t=n.length>>1;if(t>0&&typeof n[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=n;const a=Math.max(2*t-5,0);this._triangles=new Uint32Array(a*3),this._halfedges=new Int32Array(a*3),this._hashSize=Math.ceil(Math.sqrt(t)),this._hullPrev=new Uint32Array(t),this._hullNext=new Uint32Array(t),this._hullTri=new Uint32Array(t),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(t),this._dists=new Float64Array(t),this.update()}update(){const{coords:n,_hullPrev:t,_hullNext:a,_hullTri:r,_hullHash:i}=this,o=n.length>>1;let u=1/0,l=1/0,c=-1/0,h=-1/0;for(let T=0;T<o;T++){const _=n[2*T],A=n[2*T+1];_<u&&(u=_),A<l&&(l=A),_>c&&(c=_),A>h&&(h=A),this._ids[T]=T}const f=(u+c)/2,s=(l+h)/2;let d,g,p;for(let T=0,_=1/0;T<o;T++){const A=Cs(f,s,n[2*T],n[2*T+1]);A<_&&(d=T,_=A)}const m=n[2*d],y=n[2*d+1];for(let T=0,_=1/0;T<o;T++){if(T===d)continue;const A=Cs(m,y,n[2*T],n[2*T+1]);A<_&&A>0&&(g=T,_=A)}let k=n[2*g],v=n[2*g+1],b=1/0;for(let T=0;T<o;T++){if(T===d||T===g)continue;const _=ow(m,y,k,v,n[2*T],n[2*T+1]);_<b&&(p=T,b=_)}let w=n[2*p],M=n[2*p+1];if(b===1/0){for(let A=0;A<o;A++)this._dists[A]=n[2*A]-n[0]||n[2*A+1]-n[1];oa(this._ids,this._dists,0,o-1);const T=new Uint32Array(o);let _=0;for(let A=0,R=-1/0;A<o;A++){const N=this._ids[A],z=this._dists[N];z>R&&(T[_++]=N,R=z)}this.hull=T.subarray(0,_),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(ai(m,y,k,v,w,M)<0){const T=g,_=k,A=v;g=p,k=w,v=M,p=T,w=_,M=A}const x=sw(m,y,k,v,w,M);this._cx=x.x,this._cy=x.y;for(let T=0;T<o;T++)this._dists[T]=Cs(n[2*T],n[2*T+1],x.x,x.y);oa(this._ids,this._dists,0,o-1),this._hullStart=d;let S=3;a[d]=t[p]=g,a[g]=t[d]=p,a[p]=t[g]=d,r[d]=0,r[g]=1,r[p]=2,i.fill(-1),i[this._hashKey(m,y)]=d,i[this._hashKey(k,v)]=g,i[this._hashKey(w,M)]=p,this.trianglesLen=0,this._addTriangle(d,g,p,-1,-1,-1);for(let T=0,_,A;T<this._ids.length;T++){const R=this._ids[T],N=n[2*R],z=n[2*R+1];if(T>0&&Math.abs(N-_)<=rh&&Math.abs(z-A)<=rh||(_=N,A=z,R===d||R===g||R===p))continue;let E=0;for(let D=0,H=this._hashKey(N,z);D<this._hashSize&&(E=i[(H+D)%this._hashSize],!(E!==-1&&E!==a[E]));D++);E=t[E];let C=E,B;for(;B=a[C],ai(N,z,n[2*C],n[2*C+1],n[2*B],n[2*B+1])>=0;)if(C=B,C===E){C=-1;break}if(C===-1)continue;let I=this._addTriangle(C,R,a[C],-1,-1,r[C]);r[R]=this._legalize(I+2),r[C]=I,S++;let P=a[C];for(;B=a[P],ai(N,z,n[2*P],n[2*P+1],n[2*B],n[2*B+1])<0;)I=this._addTriangle(P,R,B,r[R],-1,r[P]),r[R]=this._legalize(I+2),a[P]=P,S--,P=B;if(C===E)for(;B=t[C],ai(N,z,n[2*B],n[2*B+1],n[2*C],n[2*C+1])<0;)I=this._addTriangle(B,R,C,-1,r[C],r[B]),this._legalize(I+2),r[B]=I,a[C]=C,S--,C=B;this._hullStart=t[R]=C,a[C]=t[P]=R,a[R]=P,i[this._hashKey(N,z)]=R,i[this._hashKey(n[2*C],n[2*C+1])]=C}this.hull=new Uint32Array(S);for(let T=0,_=this._hullStart;T<S;T++)this.hull[T]=_,_=a[_];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(n,t){return Math.floor(rw(n-this._cx,t-this._cy)*this._hashSize)%this._hashSize}_legalize(n){const{_triangles:t,_halfedges:a,coords:r}=this;let i=0,o=0;for(;;){const u=a[n],l=n-n%3;if(o=l+(n+2)%3,u===-1){if(i===0)break;n=ri[--i];continue}const c=u-u%3,h=l+(n+1)%3,f=c+(u+2)%3,s=t[o],d=t[n],g=t[h],p=t[f];if(iw(r[2*s],r[2*s+1],r[2*d],r[2*d+1],r[2*g],r[2*g+1],r[2*p],r[2*p+1])){t[n]=p,t[u]=s;const y=a[f];if(y===-1){let v=this._hullStart;do{if(this._hullTri[v]===f){this._hullTri[v]=n;break}v=this._hullPrev[v]}while(v!==this._hullStart)}this._link(n,y),this._link(u,a[o]),this._link(o,f);const k=c+(u+1)%3;i<ri.length&&(ri[i++]=k)}else{if(i===0)break;n=ri[--i]}}return o}_link(n,t){this._halfedges[n]=t,t!==-1&&(this._halfedges[t]=n)}_addTriangle(n,t,a,r,i,o){const u=this.trianglesLen;return this._triangles[u]=n,this._triangles[u+1]=t,this._triangles[u+2]=a,this._link(u,r),this._link(u+1,i),this._link(u+2,o),this.trianglesLen+=3,u}}function rw(e,n){const t=e/(Math.abs(e)+Math.abs(n));return(n>0?3-t:1+t)/4}function Cs(e,n,t,a){const r=e-t,i=n-a;return r*r+i*i}function iw(e,n,t,a,r,i,o,u){const l=e-o,c=n-u,h=t-o,f=a-u,s=r-o,d=i-u,g=l*l+c*c,p=h*h+f*f,m=s*s+d*d;return l*(f*m-p*d)-c*(h*m-p*s)+g*(h*d-f*s)<0}function ow(e,n,t,a,r,i){const o=t-e,u=a-n,l=r-e,c=i-n,h=o*o+u*u,f=l*l+c*c,s=.5/(o*c-u*l),d=(c*h-u*f)*s,g=(o*f-l*h)*s;return d*d+g*g}function sw(e,n,t,a,r,i){const o=t-e,u=a-n,l=r-e,c=i-n,h=o*o+u*u,f=l*l+c*c,s=.5/(o*c-u*l),d=e+(c*h-u*f)*s,g=n+(o*f-l*h)*s;return{x:d,y:g}}function oa(e,n,t,a){if(a-t<=20)for(let r=t+1;r<=a;r++){const i=e[r],o=n[i];let u=r-1;for(;u>=t&&n[e[u]]>o;)e[u+1]=e[u--];e[u+1]=i}else{const r=t+a>>1;let i=t+1,o=a;Ha(e,r,i),n[e[t]]>n[e[a]]&&Ha(e,t,a),n[e[i]]>n[e[a]]&&Ha(e,i,a),n[e[t]]>n[e[i]]&&Ha(e,t,i);const u=e[i],l=n[u];for(;;){do i++;while(n[e[i]]<l);do o--;while(n[e[o]]>l);if(o<i)break;Ha(e,i,o)}e[t+1]=e[o],e[o]=u,a-i+1>=o-t?(oa(e,n,i,a),oa(e,n,t,o-1)):(oa(e,n,t,o-1),oa(e,n,i,a))}}function Ha(e,n,t){const a=e[n];e[n]=e[t],e[t]=a}function uw(e){return e[0]}function lw(e){return e[1]}const ih=1e-6;class xt{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(n,t){this._+=`M${this._x0=this._x1=+n},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(n,t){this._+=`L${this._x1=+n},${this._y1=+t}`}arc(n,t,a){n=+n,t=+t,a=+a;const r=n+a,i=t;if(a<0)throw new Error("negative radius");this._x1===null?this._+=`M${r},${i}`:(Math.abs(this._x1-r)>ih||Math.abs(this._y1-i)>ih)&&(this._+="L"+r+","+i),a&&(this._+=`A${a},${a},0,1,1,${n-a},${t}A${a},${a},0,1,1,${this._x1=r},${this._y1=i}`)}rect(n,t,a,r){this._+=`M${this._x0=this._x1=+n},${this._y0=this._y1=+t}h${+a}v${+r}h${-a}Z`}value(){return this._||null}}class bu{constructor(){this._=[]}moveTo(n,t){this._.push([n,t])}closePath(){this._.push(this._[0].slice())}lineTo(n,t){this._.push([n,t])}value(){return this._.length?this._:null}}let pg=class{constructor(n,[t,a,r,i]=[0,0,960,500]){if(!((r=+r)>=(t=+t))||!((i=+i)>=(a=+a)))throw new Error("invalid bounds");this.delaunay=n,this._circumcenters=new Float64Array(n.points.length*2),this.vectors=new Float64Array(n.points.length*2),this.xmax=r,this.xmin=t,this.ymax=i,this.ymin=a,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:n,hull:t,triangles:a},vectors:r}=this;let i,o;const u=this.circumcenters=this._circumcenters.subarray(0,a.length/3*2);for(let p=0,m=0,y=a.length,k,v;p<y;p+=3,m+=2){const b=a[p]*2,w=a[p+1]*2,M=a[p+2]*2,x=n[b],S=n[b+1],T=n[w],_=n[w+1],A=n[M],R=n[M+1],N=T-x,z=_-S,E=A-x,C=R-S,B=(N*C-z*E)*2;if(Math.abs(B)<1e-9){if(i===void 0){i=o=0;for(const P of t)i+=n[P*2],o+=n[P*2+1];i/=t.length,o/=t.length}const I=1e9*Math.sign((i-x)*C-(o-S)*E);k=(x+A)/2-I*C,v=(S+R)/2+I*E}else{const I=1/B,P=N*N+z*z,D=E*E+C*C;k=x+(C*P-z*D)*I,v=S+(N*D-E*P)*I}u[m]=k,u[m+1]=v}let l=t[t.length-1],c,h=l*4,f,s=n[2*l],d,g=n[2*l+1];r.fill(0);for(let p=0;p<t.length;++p)l=t[p],c=h,f=s,d=g,h=l*4,s=n[2*l],g=n[2*l+1],r[c+2]=r[h]=d-g,r[c+3]=r[h+1]=s-f}render(n){const t=n==null?n=new xt:void 0,{delaunay:{halfedges:a,inedges:r,hull:i},circumcenters:o,vectors:u}=this;if(i.length<=1)return null;for(let h=0,f=a.length;h<f;++h){const s=a[h];if(s<h)continue;const d=Math.floor(h/3)*2,g=Math.floor(s/3)*2,p=o[d],m=o[d+1],y=o[g],k=o[g+1];this._renderSegment(p,m,y,k,n)}let l,c=i[i.length-1];for(let h=0;h<i.length;++h){l=c,c=i[h];const f=Math.floor(r[c]/3)*2,s=o[f],d=o[f+1],g=l*4,p=this._project(s,d,u[g+2],u[g+3]);p&&this._renderSegment(s,d,p[0],p[1],n)}return t&&t.value()}renderBounds(n){const t=n==null?n=new xt:void 0;return n.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),t&&t.value()}renderCell(n,t){const a=t==null?t=new xt:void 0,r=this._clip(n);if(r===null||!r.length)return;t.moveTo(r[0],r[1]);let i=r.length;for(;r[0]===r[i-2]&&r[1]===r[i-1]&&i>1;)i-=2;for(let o=2;o<i;o+=2)(r[o]!==r[o-2]||r[o+1]!==r[o-1])&&t.lineTo(r[o],r[o+1]);return t.closePath(),a&&a.value()}*cellPolygons(){const{delaunay:{points:n}}=this;for(let t=0,a=n.length/2;t<a;++t){const r=this.cellPolygon(t);r&&(r.index=t,yield r)}}cellPolygon(n){const t=new bu;return this.renderCell(n,t),t.value()}_renderSegment(n,t,a,r,i){let o;const u=this._regioncode(n,t),l=this._regioncode(a,r);u===0&&l===0?(i.moveTo(n,t),i.lineTo(a,r)):(o=this._clipSegment(n,t,a,r,u,l))&&(i.moveTo(o[0],o[1]),i.lineTo(o[2],o[3]))}contains(n,t,a){return t=+t,t!==t||(a=+a,a!==a)?!1:this.delaunay._step(n,t,a)===n}*neighbors(n){const t=this._clip(n);if(t)for(const a of this.delaunay.neighbors(n)){const r=this._clip(a);if(r){e:for(let i=0,o=t.length;i<o;i+=2)for(let u=0,l=r.length;u<l;u+=2)if(t[i]===r[u]&&t[i+1]===r[u+1]&&t[(i+2)%o]===r[(u+l-2)%l]&&t[(i+3)%o]===r[(u+l-1)%l]){yield a;break e}}}}_cell(n){const{circumcenters:t,delaunay:{inedges:a,halfedges:r,triangles:i}}=this,o=a[n];if(o===-1)return null;const u=[];let l=o;do{const c=Math.floor(l/3);if(u.push(t[c*2],t[c*2+1]),l=l%3===2?l-2:l+1,i[l]!==n)break;l=r[l]}while(l!==o&&l!==-1);return u}_clip(n){if(n===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const t=this._cell(n);if(t===null)return null;const{vectors:a}=this,r=n*4;return this._simplify(a[r]||a[r+1]?this._clipInfinite(n,t,a[r],a[r+1],a[r+2],a[r+3]):this._clipFinite(n,t))}_clipFinite(n,t){const a=t.length;let r=null,i,o,u=t[a-2],l=t[a-1],c,h=this._regioncode(u,l),f,s=0;for(let d=0;d<a;d+=2)if(i=u,o=l,u=t[d],l=t[d+1],c=h,h=this._regioncode(u,l),c===0&&h===0)f=s,s=0,r?r.push(u,l):r=[u,l];else{let g,p,m,y,k;if(c===0){if((g=this._clipSegment(i,o,u,l,c,h))===null)continue;[p,m,y,k]=g}else{if((g=this._clipSegment(u,l,i,o,h,c))===null)continue;[y,k,p,m]=g,f=s,s=this._edgecode(p,m),f&&s&&this._edge(n,f,s,r,r.length),r?r.push(p,m):r=[p,m]}f=s,s=this._edgecode(y,k),f&&s&&this._edge(n,f,s,r,r.length),r?r.push(y,k):r=[y,k]}if(r)f=s,s=this._edgecode(r[0],r[1]),f&&s&&this._edge(n,f,s,r,r.length);else if(this.contains(n,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(n,t,a,r,i,o){const u=i<o;for(u&&([n,t,a,r,i,o]=[a,r,n,t,o,i]);;){if(i===0&&o===0)return u?[a,r,n,t]:[n,t,a,r];if(i&o)return null;let l,c,h=i||o;h&8?(l=n+(a-n)*(this.ymax-t)/(r-t),c=this.ymax):h&4?(l=n+(a-n)*(this.ymin-t)/(r-t),c=this.ymin):h&2?(c=t+(r-t)*(this.xmax-n)/(a-n),l=this.xmax):(c=t+(r-t)*(this.xmin-n)/(a-n),l=this.xmin),i?(n=l,t=c,i=this._regioncode(n,t)):(a=l,r=c,o=this._regioncode(a,r))}}_clipInfinite(n,t,a,r,i,o){let u=Array.from(t),l;if((l=this._project(u[0],u[1],a,r))&&u.unshift(l[0],l[1]),(l=this._project(u[u.length-2],u[u.length-1],i,o))&&u.push(l[0],l[1]),u=this._clipFinite(n,u))for(let c=0,h=u.length,f,s=this._edgecode(u[h-2],u[h-1]);c<h;c+=2)f=s,s=this._edgecode(u[c],u[c+1]),f&&s&&(c=this._edge(n,f,s,u,c),h=u.length);else this.contains(n,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(u=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return u}_edge(n,t,a,r,i){for(;t!==a;){let o,u;switch(t){case 5:t=4;continue;case 4:t=6,o=this.xmax,u=this.ymin;break;case 6:t=2;continue;case 2:t=10,o=this.xmax,u=this.ymax;break;case 10:t=8;continue;case 8:t=9,o=this.xmin,u=this.ymax;break;case 9:t=1;continue;case 1:t=5,o=this.xmin,u=this.ymin;break}(r[i]!==o||r[i+1]!==u)&&this.contains(n,o,u)&&(r.splice(i,0,o,u),i+=2)}return i}_project(n,t,a,r){let i=1/0,o,u,l;if(r<0){if(t<=this.ymin)return null;(o=(this.ymin-t)/r)<i&&(l=this.ymin,u=n+(i=o)*a)}else if(r>0){if(t>=this.ymax)return null;(o=(this.ymax-t)/r)<i&&(l=this.ymax,u=n+(i=o)*a)}if(a>0){if(n>=this.xmax)return null;(o=(this.xmax-n)/a)<i&&(u=this.xmax,l=t+(i=o)*r)}else if(a<0){if(n<=this.xmin)return null;(o=(this.xmin-n)/a)<i&&(u=this.xmin,l=t+(i=o)*r)}return[u,l]}_edgecode(n,t){return(n===this.xmin?1:n===this.xmax?2:0)|(t===this.ymin?4:t===this.ymax?8:0)}_regioncode(n,t){return(n<this.xmin?1:n>this.xmax?2:0)|(t<this.ymin?4:t>this.ymax?8:0)}_simplify(n){if(n&&n.length>4){for(let t=0;t<n.length;t+=2){const a=(t+2)%n.length,r=(t+4)%n.length;(n[t]===n[a]&&n[a]===n[r]||n[t+1]===n[a+1]&&n[a+1]===n[r+1])&&(n.splice(a,2),t-=2)}n.length||(n=null)}return n}};const cw=2*Math.PI,ta=Math.pow;function hw(e){return e[0]}function fw(e){return e[1]}function dw(e){const{triangles:n,coords:t}=e;for(let a=0;a<n.length;a+=3){const r=2*n[a],i=2*n[a+1],o=2*n[a+2];if((t[o]-t[r])*(t[i+1]-t[r+1])-(t[i]-t[r])*(t[o+1]-t[r+1])>1e-10)return!1}return!0}function gw(e,n,t){return[e+Math.sin(e+n)*t,n+Math.cos(e-n)*t]}class _l{static from(n,t=hw,a=fw,r){return new _l("length"in n?mw(n,t,a,r):Float64Array.from(pw(n,t,a,r)))}constructor(n){this._delaunator=new wa(n),this.inedges=new Int32Array(n.length/2),this._hullIndex=new Int32Array(n.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const n=this._delaunator,t=this.points;if(n.hull&&n.hull.length>2&&dw(n)){this.collinear=Int32Array.from({length:t.length/2},(s,d)=>d).sort((s,d)=>t[2*s]-t[2*d]||t[2*s+1]-t[2*d+1]);const l=this.collinear[0],c=this.collinear[this.collinear.length-1],h=[t[2*l],t[2*l+1],t[2*c],t[2*c+1]],f=1e-8*Math.hypot(h[3]-h[1],h[2]-h[0]);for(let s=0,d=t.length/2;s<d;++s){const g=gw(t[2*s],t[2*s+1],f);t[2*s]=g[0],t[2*s+1]=g[1]}this._delaunator=new wa(t)}else delete this.collinear;const a=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,i=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),u=this._hullIndex.fill(-1);for(let l=0,c=a.length;l<c;++l){const h=i[l%3===2?l-2:l+1];(a[l]===-1||o[h]===-1)&&(o[h]=l)}for(let l=0,c=r.length;l<c;++l)u[r[l]]=l;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],o[r[0]]=1,r.length===2&&(o[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(n){return new pg(this,n)}*neighbors(n){const{inedges:t,hull:a,_hullIndex:r,halfedges:i,triangles:o,collinear:u}=this;if(u){const f=u.indexOf(n);f>0&&(yield u[f-1]),f<u.length-1&&(yield u[f+1]);return}const l=t[n];if(l===-1)return;let c=l,h=-1;do{if(yield h=o[c],c=c%3===2?c-2:c+1,o[c]!==n)return;if(c=i[c],c===-1){const f=a[(r[n]+1)%a.length];f!==h&&(yield f);return}}while(c!==l)}find(n,t,a=0){if(n=+n,n!==n||(t=+t,t!==t))return-1;const r=a;let i;for(;(i=this._step(a,n,t))>=0&&i!==a&&i!==r;)a=i;return i}_step(n,t,a){const{inedges:r,hull:i,_hullIndex:o,halfedges:u,triangles:l,points:c}=this;if(r[n]===-1||!c.length)return(n+1)%(c.length>>1);let h=n,f=ta(t-c[n*2],2)+ta(a-c[n*2+1],2);const s=r[n];let d=s;do{let g=l[d];const p=ta(t-c[g*2],2)+ta(a-c[g*2+1],2);if(p<f&&(f=p,h=g),d=d%3===2?d-2:d+1,l[d]!==n)break;if(d=u[d],d===-1){if(d=i[(o[n]+1)%i.length],d!==g&&ta(t-c[d*2],2)+ta(a-c[d*2+1],2)<f)return d;break}}while(d!==s);return h}render(n){const t=n==null?n=new xt:void 0,{points:a,halfedges:r,triangles:i}=this;for(let o=0,u=r.length;o<u;++o){const l=r[o];if(l<o)continue;const c=i[o]*2,h=i[l]*2;n.moveTo(a[c],a[c+1]),n.lineTo(a[h],a[h+1])}return this.renderHull(n),t&&t.value()}renderPoints(n,t){t===void 0&&(!n||typeof n.moveTo!="function")&&(t=n,n=null),t=t==null?2:+t;const a=n==null?n=new xt:void 0,{points:r}=this;for(let i=0,o=r.length;i<o;i+=2){const u=r[i],l=r[i+1];n.moveTo(u+t,l),n.arc(u,l,t,0,cw)}return a&&a.value()}renderHull(n){const t=n==null?n=new xt:void 0,{hull:a,points:r}=this,i=a[0]*2,o=a.length;n.moveTo(r[i],r[i+1]);for(let u=1;u<o;++u){const l=2*a[u];n.lineTo(r[l],r[l+1])}return n.closePath(),t&&t.value()}hullPolygon(){const n=new bu;return this.renderHull(n),n.value()}renderTriangle(n,t){const a=t==null?t=new xt:void 0,{points:r,triangles:i}=this,o=i[n*=3]*2,u=i[n+1]*2,l=i[n+2]*2;return t.moveTo(r[o],r[o+1]),t.lineTo(r[u],r[u+1]),t.lineTo(r[l],r[l+1]),t.closePath(),a&&a.value()}*trianglePolygons(){const{triangles:n}=this;for(let t=0,a=n.length/3;t<a;++t)yield this.trianglePolygon(t)}trianglePolygon(n){const t=new bu;return this.renderTriangle(n,t),t.value()}}function mw(e,n,t,a){const r=e.length,i=new Float64Array(r*2);for(let o=0;o<r;++o){const u=e[o];i[o*2]=n.call(a,u,o,e),i[o*2+1]=t.call(a,u,o,e)}return i}function*pw(e,n,t,a){let r=0;for(const i of e)yield n.call(a,i,r,e),yield t.call(a,i,r,e),++r}var oh={},Es={},Ns=34,Oa=10,Rs=13;function yg(e){return new Function("d","return {"+e.map(function(n,t){return JSON.stringify(n)+": d["+t+'] || ""'}).join(",")+"}")}function yw(e,n){var t=yg(e);return function(a,r){return n(t(a),r,e)}}function sh(e){var n=Object.create(null),t=[];return e.forEach(function(a){for(var r in a)r in n||t.push(n[r]=r)}),t}function an(e,n){var t=e+"",a=t.length;return a<n?new Array(n-a+1).join(0)+t:t}function bw(e){return e<0?"-"+an(-e,6):e>9999?"+"+an(e,6):an(e,4)}function vw(e){var n=e.getUTCHours(),t=e.getUTCMinutes(),a=e.getUTCSeconds(),r=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":bw(e.getUTCFullYear())+"-"+an(e.getUTCMonth()+1,2)+"-"+an(e.getUTCDate(),2)+(r?"T"+an(n,2)+":"+an(t,2)+":"+an(a,2)+"."+an(r,3)+"Z":a?"T"+an(n,2)+":"+an(t,2)+":"+an(a,2)+"Z":t||n?"T"+an(n,2)+":"+an(t,2)+"Z":"")}function Ho(e){var n=new RegExp('["'+e+`
\r]`),t=e.charCodeAt(0);function a(f,s){var d,g,p=r(f,function(m,y){if(d)return d(m,y-1);g=m,d=s?yw(m,s):yg(m)});return p.columns=g||[],p}function r(f,s){var d=[],g=f.length,p=0,m=0,y,k=g<=0,v=!1;f.charCodeAt(g-1)===Oa&&--g,f.charCodeAt(g-1)===Rs&&--g;function b(){if(k)return Es;if(v)return v=!1,oh;var M,x=p,S;if(f.charCodeAt(x)===Ns){for(;p++<g&&f.charCodeAt(p)!==Ns||f.charCodeAt(++p)===Ns;);return(M=p)>=g?k=!0:(S=f.charCodeAt(p++))===Oa?v=!0:S===Rs&&(v=!0,f.charCodeAt(p)===Oa&&++p),f.slice(x+1,M-1).replace(/""/g,'"')}for(;p<g;){if((S=f.charCodeAt(M=p++))===Oa)v=!0;else if(S===Rs)v=!0,f.charCodeAt(p)===Oa&&++p;else if(S!==t)continue;return f.slice(x,M)}return k=!0,f.slice(x,g)}for(;(y=b())!==Es;){for(var w=[];y!==oh&&y!==Es;)w.push(y),y=b();s&&(w=s(w,m++))==null||d.push(w)}return d}function i(f,s){return f.map(function(d){return s.map(function(g){return h(d[g])}).join(e)})}function o(f,s){return s==null&&(s=sh(f)),[s.map(h).join(e)].concat(i(f,s)).join(`
`)}function u(f,s){return s==null&&(s=sh(f)),i(f,s).join(`
`)}function l(f){return f.map(c).join(`
`)}function c(f){return f.map(h).join(e)}function h(f){return f==null?"":f instanceof Date?vw(f):n.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:a,parseRows:r,format:o,formatBody:u,formatRows:l,formatRow:c,formatValue:h}}var Ut=Ho(","),bg=Ut.parse,kw=Ut.parseRows,ww=Ut.format,Mw=Ut.formatBody,Sw=Ut.formatRows,_w=Ut.formatRow,Aw=Ut.formatValue,jt=Ho("	"),vg=jt.parse,xw=jt.parseRows,Tw=jt.format,zw=jt.formatBody,Cw=jt.formatRows,Ew=jt.formatRow,Nw=jt.formatValue;function Rw(e){for(var n in e){var t=e[n].trim(),a,r;if(!t)t=null;else if(t==="true")t=!0;else if(t==="false")t=!1;else if(t==="NaN")t=NaN;else if(!isNaN(a=+t))t=a;else if(r=t.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))Bw&&r[4]&&!r[7]&&(t=t.replace(/-/g,"/").replace(/T/," ")),t=new Date(t);else continue;e[n]=t}return e}const Bw=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function Pw(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.blob()}function Iw(e,n){return fetch(e,n).then(Pw)}function $w(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.arrayBuffer()}function Lw(e,n){return fetch(e,n).then($w)}function Kw(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function Oo(e,n){return fetch(e,n).then(Kw)}function kg(e){return function(n,t,a){return arguments.length===2&&typeof t=="function"&&(a=t,t=void 0),Oo(n,t).then(function(r){return e(r,a)})}}function Dw(e,n,t,a){arguments.length===3&&typeof t=="function"&&(a=t,t=void 0);var r=Ho(e);return Oo(n,t).then(function(i){return r.parse(i,a)})}var Hw=kg(bg),Ow=kg(vg);function Gw(e,n){return new Promise(function(t,a){var r=new Image;for(var i in n)r[i]=n[i];r.onerror=a,r.onload=function(){t(r)},r.src=e})}function qw(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);if(!(e.status===204||e.status===205))return e.json()}function Fw(e,n){return fetch(e,n).then(qw)}function Al(e){return(n,t)=>Oo(n,t).then(a=>new DOMParser().parseFromString(a,e))}const Uw=Al("application/xml");var jw=Al("text/html"),Yw=Al("image/svg+xml");function Vw(e,n){var t,a=1;e==null&&(e=0),n==null&&(n=0);function r(){var i,o=t.length,u,l=0,c=0;for(i=0;i<o;++i)u=t[i],l+=u.x,c+=u.y;for(l=(l/o-e)*a,c=(c/o-n)*a,i=0;i<o;++i)u=t[i],u.x-=l,u.y-=c}return r.initialize=function(i){t=i},r.x=function(i){return arguments.length?(e=+i,r):e},r.y=function(i){return arguments.length?(n=+i,r):n},r.strength=function(i){return arguments.length?(a=+i,r):a},r}function Ww(e){const n=+this._x.call(null,e),t=+this._y.call(null,e);return wg(this.cover(n,t),n,t,e)}function wg(e,n,t,a){if(isNaN(n)||isNaN(t))return e;var r,i=e._root,o={data:a},u=e._x0,l=e._y0,c=e._x1,h=e._y1,f,s,d,g,p,m,y,k;if(!i)return e._root=o,e;for(;i.length;)if((p=n>=(f=(u+c)/2))?u=f:c=f,(m=t>=(s=(l+h)/2))?l=s:h=s,r=i,!(i=i[y=m<<1|p]))return r[y]=o,e;if(d=+e._x.call(null,i.data),g=+e._y.call(null,i.data),n===d&&t===g)return o.next=i,r?r[y]=o:e._root=o,e;do r=r?r[y]=new Array(4):e._root=new Array(4),(p=n>=(f=(u+c)/2))?u=f:c=f,(m=t>=(s=(l+h)/2))?l=s:h=s;while((y=m<<1|p)===(k=(g>=s)<<1|d>=f));return r[k]=i,r[y]=o,e}function Zw(e){var n,t,a=e.length,r,i,o=new Array(a),u=new Array(a),l=1/0,c=1/0,h=-1/0,f=-1/0;for(t=0;t<a;++t)isNaN(r=+this._x.call(null,n=e[t]))||isNaN(i=+this._y.call(null,n))||(o[t]=r,u[t]=i,r<l&&(l=r),r>h&&(h=r),i<c&&(c=i),i>f&&(f=i));if(l>h||c>f)return this;for(this.cover(l,c).cover(h,f),t=0;t<a;++t)wg(this,o[t],u[t],e[t]);return this}function Xw(e,n){if(isNaN(e=+e)||isNaN(n=+n))return this;var t=this._x0,a=this._y0,r=this._x1,i=this._y1;if(isNaN(t))r=(t=Math.floor(e))+1,i=(a=Math.floor(n))+1;else{for(var o=r-t||1,u=this._root,l,c;t>e||e>=r||a>n||n>=i;)switch(c=(n<a)<<1|e<t,l=new Array(4),l[c]=u,u=l,o*=2,c){case 0:r=t+o,i=a+o;break;case 1:t=r-o,i=a+o;break;case 2:r=t+o,a=i-o;break;case 3:t=r-o,a=i-o;break}this._root&&this._root.length&&(this._root=u)}return this._x0=t,this._y0=a,this._x1=r,this._y1=i,this}function Qw(){var e=[];return this.visit(function(n){if(!n.length)do e.push(n.data);while(n=n.next)}),e}function Jw(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function We(e,n,t,a,r){this.node=e,this.x0=n,this.y0=t,this.x1=a,this.y1=r}function eM(e,n,t){var a,r=this._x0,i=this._y0,o,u,l,c,h=this._x1,f=this._y1,s=[],d=this._root,g,p;for(d&&s.push(new We(d,r,i,h,f)),t==null?t=1/0:(r=e-t,i=n-t,h=e+t,f=n+t,t*=t);g=s.pop();)if(!(!(d=g.node)||(o=g.x0)>h||(u=g.y0)>f||(l=g.x1)<r||(c=g.y1)<i))if(d.length){var m=(o+l)/2,y=(u+c)/2;s.push(new We(d[3],m,y,l,c),new We(d[2],o,y,m,c),new We(d[1],m,u,l,y),new We(d[0],o,u,m,y)),(p=(n>=y)<<1|e>=m)&&(g=s[s.length-1],s[s.length-1]=s[s.length-1-p],s[s.length-1-p]=g)}else{var k=e-+this._x.call(null,d.data),v=n-+this._y.call(null,d.data),b=k*k+v*v;if(b<t){var w=Math.sqrt(t=b);r=e-w,i=n-w,h=e+w,f=n+w,a=d.data}}return a}function nM(e){if(isNaN(h=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var n,t=this._root,a,r,i,o=this._x0,u=this._y0,l=this._x1,c=this._y1,h,f,s,d,g,p,m,y;if(!t)return this;if(t.length)for(;;){if((g=h>=(s=(o+l)/2))?o=s:l=s,(p=f>=(d=(u+c)/2))?u=d:c=d,n=t,!(t=t[m=p<<1|g]))return this;if(!t.length)break;(n[m+1&3]||n[m+2&3]||n[m+3&3])&&(a=n,y=m)}for(;t.data!==e;)if(r=t,!(t=t.next))return this;return(i=t.next)&&delete t.next,r?(i?r.next=i:delete r.next,this):n?(i?n[m]=i:delete n[m],(t=n[0]||n[1]||n[2]||n[3])&&t===(n[3]||n[2]||n[1]||n[0])&&!t.length&&(a?a[y]=t:this._root=t),this):(this._root=i,this)}function tM(e){for(var n=0,t=e.length;n<t;++n)this.remove(e[n]);return this}function aM(){return this._root}function rM(){var e=0;return this.visit(function(n){if(!n.length)do++e;while(n=n.next)}),e}function iM(e){var n=[],t,a=this._root,r,i,o,u,l;for(a&&n.push(new We(a,this._x0,this._y0,this._x1,this._y1));t=n.pop();)if(!e(a=t.node,i=t.x0,o=t.y0,u=t.x1,l=t.y1)&&a.length){var c=(i+u)/2,h=(o+l)/2;(r=a[3])&&n.push(new We(r,c,h,u,l)),(r=a[2])&&n.push(new We(r,i,h,c,l)),(r=a[1])&&n.push(new We(r,c,o,u,h)),(r=a[0])&&n.push(new We(r,i,o,c,h))}return this}function oM(e){var n=[],t=[],a;for(this._root&&n.push(new We(this._root,this._x0,this._y0,this._x1,this._y1));a=n.pop();){var r=a.node;if(r.length){var i,o=a.x0,u=a.y0,l=a.x1,c=a.y1,h=(o+l)/2,f=(u+c)/2;(i=r[0])&&n.push(new We(i,o,u,h,f)),(i=r[1])&&n.push(new We(i,h,u,l,f)),(i=r[2])&&n.push(new We(i,o,f,h,c)),(i=r[3])&&n.push(new We(i,h,f,l,c))}t.push(a)}for(;a=t.pop();)e(a.node,a.x0,a.y0,a.x1,a.y1);return this}function sM(e){return e[0]}function uM(e){return arguments.length?(this._x=e,this):this._x}function lM(e){return e[1]}function cM(e){return arguments.length?(this._y=e,this):this._y}function gt(e,n,t){var a=new xl(n??sM,t??lM,NaN,NaN,NaN,NaN);return e==null?a:a.addAll(e)}function xl(e,n,t,a,r,i){this._x=e,this._y=n,this._x0=t,this._y0=a,this._x1=r,this._y1=i,this._root=void 0}function uh(e){for(var n={data:e.data},t=n;e=e.next;)t=t.next={data:e.data};return n}var tn=gt.prototype=xl.prototype;tn.copy=function(){var e=new xl(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root,t,a;if(!n)return e;if(!n.length)return e._root=uh(n),e;for(t=[{source:n,target:e._root=new Array(4)}];n=t.pop();)for(var r=0;r<4;++r)(a=n.source[r])&&(a.length?t.push({source:a,target:n.target[r]=new Array(4)}):n.target[r]=uh(a));return e};tn.add=Ww;tn.addAll=Zw;tn.cover=Xw;tn.data=Qw;tn.extent=Jw;tn.find=eM;tn.remove=nM;tn.removeAll=tM;tn.root=aM;tn.size=rM;tn.visit=iM;tn.visitAfter=oM;tn.x=uM;tn.y=cM;function Te(e){return function(){return e}}function st(e){return(e()-.5)*1e-6}function hM(e){return e.x+e.vx}function fM(e){return e.y+e.vy}function Mg(e){var n,t,a,r=1,i=1;typeof e!="function"&&(e=Te(e==null?1:+e));function o(){for(var c,h=n.length,f,s,d,g,p,m,y=0;y<i;++y)for(f=gt(n,hM,fM).visitAfter(u),c=0;c<h;++c)s=n[c],p=t[s.index],m=p*p,d=s.x+s.vx,g=s.y+s.vy,f.visit(k);function k(v,b,w,M,x){var S=v.data,T=v.r,_=p+T;if(S){if(S.index>s.index){var A=d-S.x-S.vx,R=g-S.y-S.vy,N=A*A+R*R;N<_*_&&(A===0&&(A=st(a),N+=A*A),R===0&&(R=st(a),N+=R*R),N=(_-(N=Math.sqrt(N)))/N*r,s.vx+=(A*=N)*(_=(T*=T)/(m+T)),s.vy+=(R*=N)*_,S.vx-=A*(_=1-_),S.vy-=R*_)}return}return b>d+_||M<d-_||w>g+_||x<g-_}}function u(c){if(c.data)return c.r=t[c.data.index];for(var h=c.r=0;h<4;++h)c[h]&&c[h].r>c.r&&(c.r=c[h].r)}function l(){if(n){var c,h=n.length,f;for(t=new Array(h),c=0;c<h;++c)f=n[c],t[f.index]=+e(f,c,n)}}return o.initialize=function(c,h){n=c,a=h,l()},o.iterations=function(c){return arguments.length?(i=+c,o):i},o.strength=function(c){return arguments.length?(r=+c,o):r},o.radius=function(c){return arguments.length?(e=typeof c=="function"?c:Te(+c),l(),o):e},o}function dM(e){return e.index}function lh(e,n){var t=e.get(n);if(!t)throw new Error("node not found: "+n);return t}function gM(e){var n=dM,t=f,a,r=Te(30),i,o,u,l,c,h=1;e==null&&(e=[]);function f(m){return 1/Math.min(u[m.source.index],u[m.target.index])}function s(m){for(var y=0,k=e.length;y<h;++y)for(var v=0,b,w,M,x,S,T,_;v<k;++v)b=e[v],w=b.source,M=b.target,x=M.x+M.vx-w.x-w.vx||st(c),S=M.y+M.vy-w.y-w.vy||st(c),T=Math.sqrt(x*x+S*S),T=(T-i[v])/T*m*a[v],x*=T,S*=T,M.vx-=x*(_=l[v]),M.vy-=S*_,w.vx+=x*(_=1-_),w.vy+=S*_}function d(){if(o){var m,y=o.length,k=e.length,v=new Map(o.map((w,M)=>[n(w,M,o),w])),b;for(m=0,u=new Array(y);m<k;++m)b=e[m],b.index=m,typeof b.source!="object"&&(b.source=lh(v,b.source)),typeof b.target!="object"&&(b.target=lh(v,b.target)),u[b.source.index]=(u[b.source.index]||0)+1,u[b.target.index]=(u[b.target.index]||0)+1;for(m=0,l=new Array(k);m<k;++m)b=e[m],l[m]=u[b.source.index]/(u[b.source.index]+u[b.target.index]);a=new Array(k),g(),i=new Array(k),p()}}function g(){if(o)for(var m=0,y=e.length;m<y;++m)a[m]=+t(e[m],m,e)}function p(){if(o)for(var m=0,y=e.length;m<y;++m)i[m]=+r(e[m],m,e)}return s.initialize=function(m,y){o=m,c=y,d()},s.links=function(m){return arguments.length?(e=m,d(),s):e},s.id=function(m){return arguments.length?(n=m,s):n},s.iterations=function(m){return arguments.length?(h=+m,s):h},s.strength=function(m){return arguments.length?(t=typeof m=="function"?m:Te(+m),g(),s):t},s.distance=function(m){return arguments.length?(r=typeof m=="function"?m:Te(+m),p(),s):r},s}const mM=1664525,pM=1013904223,ch=4294967296;function yM(){let e=1;return()=>(e=(mM*e+pM)%ch)/ch}function bM(e){return e.x}function vM(e){return e.y}var kM=10,wM=Math.PI*(3-Math.sqrt(5));function Sg(e){var n,t=1,a=.001,r=1-Math.pow(a,1/300),i=0,o=.6,u=new Map,l=Ko(f),c=qt("tick","end"),h=yM();e==null&&(e=[]);function f(){s(),c.call("tick",n),t<a&&(l.stop(),c.call("end",n))}function s(p){var m,y=e.length,k;p===void 0&&(p=1);for(var v=0;v<p;++v)for(t+=(i-t)*r,u.forEach(function(b){b(t)}),m=0;m<y;++m)k=e[m],k.fx==null?k.x+=k.vx*=o:(k.x=k.fx,k.vx=0),k.fy==null?k.y+=k.vy*=o:(k.y=k.fy,k.vy=0);return n}function d(){for(var p=0,m=e.length,y;p<m;++p){if(y=e[p],y.index=p,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var k=kM*Math.sqrt(.5+p),v=p*wM;y.x=k*Math.cos(v),y.y=k*Math.sin(v)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function g(p){return p.initialize&&p.initialize(e,h),p}return d(),n={tick:s,restart:function(){return l.restart(f),n},stop:function(){return l.stop(),n},nodes:function(p){return arguments.length?(e=p,d(),u.forEach(g),n):e},alpha:function(p){return arguments.length?(t=+p,n):t},alphaMin:function(p){return arguments.length?(a=+p,n):a},alphaDecay:function(p){return arguments.length?(r=+p,n):+r},alphaTarget:function(p){return arguments.length?(i=+p,n):i},velocityDecay:function(p){return arguments.length?(o=1-p,n):1-o},randomSource:function(p){return arguments.length?(h=p,u.forEach(g),n):h},force:function(p,m){return arguments.length>1?(m==null?u.delete(p):u.set(p,g(m)),n):u.get(p)},find:function(p,m,y){var k=0,v=e.length,b,w,M,x,S;for(y==null?y=1/0:y*=y,k=0;k<v;++k)x=e[k],b=p-x.x,w=m-x.y,M=b*b+w*w,M<y&&(S=x,y=M);return S},on:function(p,m){return arguments.length>1?(c.on(p,m),n):c.on(p)}}}function MM(){var e,n,t,a,r=Te(-30),i,o=1,u=1/0,l=.81;function c(d){var g,p=e.length,m=gt(e,bM,vM).visitAfter(f);for(a=d,g=0;g<p;++g)n=e[g],m.visit(s)}function h(){if(e){var d,g=e.length,p;for(i=new Array(g),d=0;d<g;++d)p=e[d],i[p.index]=+r(p,d,e)}}function f(d){var g=0,p,m,y=0,k,v,b;if(d.length){for(k=v=b=0;b<4;++b)(p=d[b])&&(m=Math.abs(p.value))&&(g+=p.value,y+=m,k+=m*p.x,v+=m*p.y);d.x=k/y,d.y=v/y}else{p=d,p.x=p.data.x,p.y=p.data.y;do g+=i[p.data.index];while(p=p.next)}d.value=g}function s(d,g,p,m){if(!d.value)return!0;var y=d.x-n.x,k=d.y-n.y,v=m-g,b=y*y+k*k;if(v*v/l<b)return b<u&&(y===0&&(y=st(t),b+=y*y),k===0&&(k=st(t),b+=k*k),b<o&&(b=Math.sqrt(o*b)),n.vx+=y*d.value*a/b,n.vy+=k*d.value*a/b),!0;if(d.length||b>=u)return;(d.data!==n||d.next)&&(y===0&&(y=st(t),b+=y*y),k===0&&(k=st(t),b+=k*k),b<o&&(b=Math.sqrt(o*b)));do d.data!==n&&(v=i[d.data.index]*a/b,n.vx+=y*v,n.vy+=k*v);while(d=d.next)}return c.initialize=function(d,g){e=d,t=g,h()},c.strength=function(d){return arguments.length?(r=typeof d=="function"?d:Te(+d),h(),c):r},c.distanceMin=function(d){return arguments.length?(o=d*d,c):Math.sqrt(o)},c.distanceMax=function(d){return arguments.length?(u=d*d,c):Math.sqrt(u)},c.theta=function(d){return arguments.length?(l=d*d,c):Math.sqrt(l)},c}function SM(e,n,t){var a,r=Te(.1),i,o;typeof e!="function"&&(e=Te(+e)),n==null&&(n=0),t==null&&(t=0);function u(c){for(var h=0,f=a.length;h<f;++h){var s=a[h],d=s.x-n||1e-6,g=s.y-t||1e-6,p=Math.sqrt(d*d+g*g),m=(o[h]-p)*i[h]*c/p;s.vx+=d*m,s.vy+=g*m}}function l(){if(a){var c,h=a.length;for(i=new Array(h),o=new Array(h),c=0;c<h;++c)o[c]=+e(a[c],c,a),i[c]=isNaN(o[c])?0:+r(a[c],c,a)}}return u.initialize=function(c){a=c,l()},u.strength=function(c){return arguments.length?(r=typeof c=="function"?c:Te(+c),l(),u):r},u.radius=function(c){return arguments.length?(e=typeof c=="function"?c:Te(+c),l(),u):e},u.x=function(c){return arguments.length?(n=+c,u):n},u.y=function(c){return arguments.length?(t=+c,u):t},u}function _M(e){var n=Te(.1),t,a,r;typeof e!="function"&&(e=Te(e==null?0:+e));function i(u){for(var l=0,c=t.length,h;l<c;++l)h=t[l],h.vx+=(r[l]-h.x)*a[l]*u}function o(){if(t){var u,l=t.length;for(a=new Array(l),r=new Array(l),u=0;u<l;++u)a[u]=isNaN(r[u]=+e(t[u],u,t))?0:+n(t[u],u,t)}}return i.initialize=function(u){t=u,o()},i.strength=function(u){return arguments.length?(n=typeof u=="function"?u:Te(+u),o(),i):n},i.x=function(u){return arguments.length?(e=typeof u=="function"?u:Te(+u),o(),i):e},i}function AM(e){var n=Te(.1),t,a,r;typeof e!="function"&&(e=Te(e==null?0:+e));function i(u){for(var l=0,c=t.length,h;l<c;++l)h=t[l],h.vy+=(r[l]-h.y)*a[l]*u}function o(){if(t){var u,l=t.length;for(a=new Array(l),r=new Array(l),u=0;u<l;++u)a[u]=isNaN(r[u]=+e(t[u],u,t))?0:+n(t[u],u,t)}}return i.initialize=function(u){t=u,o()},i.strength=function(u){return arguments.length?(n=typeof u=="function"?u:Te(+u),o(),i):n},i.y=function(u){return arguments.length?(e=typeof u=="function"?u:Te(+u),o(),i):e},i}function xM(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Fi(e,n){if((t=(e=n?e.toExponential(n-1):e.toExponential()).indexOf("e"))<0)return null;var t,a=e.slice(0,t);return[a.length>1?a[0]+a.slice(2):a,+e.slice(t+1)]}function Ma(e){return e=Fi(Math.abs(e)),e?e[1]:NaN}function TM(e,n){return function(t,a){for(var r=t.length,i=[],o=0,u=e[0],l=0;r>0&&u>0&&(l+u+1>a&&(u=Math.max(1,a-l)),i.push(t.substring(r-=u,r+u)),!((l+=u+1)>a));)u=e[o=(o+1)%e.length];return i.reverse().join(n)}}function zM(e){return function(n){return n.replace(/[0-9]/g,function(t){return e[+t]})}}var CM=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Sa(e){if(!(n=CM.exec(e)))throw new Error("invalid format: "+e);var n;return new Go({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}Sa.prototype=Go.prototype;function Go(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Go.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function EM(e){e:for(var n=e.length,t=1,a=-1,r;t<n;++t)switch(e[t]){case".":a=r=t;break;case"0":a===0&&(a=t),r=t;break;default:if(!+e[t])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(r+1):e}var _g;function NM(e,n){var t=Fi(e,n);if(!t)return e+"";var a=t[0],r=t[1],i=r-(_g=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=a.length;return i===o?a:i>o?a+new Array(i-o+1).join("0"):i>0?a.slice(0,i)+"."+a.slice(i):"0."+new Array(1-i).join("0")+Fi(e,Math.max(0,n+i-1))[0]}function hh(e,n){var t=Fi(e,n);if(!t)return e+"";var a=t[0],r=t[1];return r<0?"0."+new Array(-r).join("0")+a:a.length>r+1?a.slice(0,r+1)+"."+a.slice(r+1):a+new Array(r-a.length+2).join("0")}const fh={"%":(e,n)=>(e*100).toFixed(n),b:e=>Math.round(e).toString(2),c:e=>e+"",d:xM,e:(e,n)=>e.toExponential(n),f:(e,n)=>e.toFixed(n),g:(e,n)=>e.toPrecision(n),o:e=>Math.round(e).toString(8),p:(e,n)=>hh(e*100,n),r:hh,s:NM,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function dh(e){return e}var gh=Array.prototype.map,mh=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Ag(e){var n=e.grouping===void 0||e.thousands===void 0?dh:TM(gh.call(e.grouping,Number),e.thousands+""),t=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?dh:zM(gh.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function c(f){f=Sa(f);var s=f.fill,d=f.align,g=f.sign,p=f.symbol,m=f.zero,y=f.width,k=f.comma,v=f.precision,b=f.trim,w=f.type;w==="n"?(k=!0,w="g"):fh[w]||(v===void 0&&(v=12),b=!0,w="g"),(m||s==="0"&&d==="=")&&(m=!0,s="0",d="=");var M=p==="$"?t:p==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",x=p==="$"?a:/[%p]/.test(w)?o:"",S=fh[w],T=/[defgprs%]/.test(w);v=v===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function _(A){var R=M,N=x,z,E,C;if(w==="c")N=S(A)+N,A="";else{A=+A;var B=A<0||1/A<0;if(A=isNaN(A)?l:S(Math.abs(A),v),b&&(A=EM(A)),B&&+A==0&&g!=="+"&&(B=!1),R=(B?g==="("?g:u:g==="-"||g==="("?"":g)+R,N=(w==="s"?mh[8+_g/3]:"")+N+(B&&g==="("?")":""),T){for(z=-1,E=A.length;++z<E;)if(C=A.charCodeAt(z),48>C||C>57){N=(C===46?r+A.slice(z+1):A.slice(z))+N,A=A.slice(0,z);break}}}k&&!m&&(A=n(A,1/0));var I=R.length+A.length+N.length,P=I<y?new Array(y-I+1).join(s):"";switch(k&&m&&(A=n(P+A,P.length?y-N.length:1/0),P=""),d){case"<":A=R+A+N+P;break;case"=":A=R+P+A+N;break;case"^":A=P.slice(0,I=P.length>>1)+R+A+N+P.slice(I);break;default:A=P+R+A+N;break}return i(A)}return _.toString=function(){return f+""},_}function h(f,s){var d=c((f=Sa(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(Ma(s)/3)))*3,p=Math.pow(10,-g),m=mh[8+g/3];return function(y){return d(p*y)+m}}return{format:c,formatPrefix:h}}var ii,qo,Tl;xg({thousands:",",grouping:[3],currency:["$",""]});function xg(e){return ii=Ag(e),qo=ii.format,Tl=ii.formatPrefix,ii}function Tg(e){return Math.max(0,-Ma(Math.abs(e)))}function zg(e,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ma(n)/3)))*3-Ma(Math.abs(e)))}function Cg(e,n){return e=Math.abs(e),n=Math.abs(n)-e,Math.max(0,Ma(n)-Ma(e))+1}var X=1e-6,Ar=1e-12,re=Math.PI,Se=re/2,Ui=re/4,Je=re*2,de=180/re,J=re/180,ie=Math.abs,Ia=Math.atan,en=Math.atan2,U=Math.cos,oi=Math.ceil,Eg=Math.exp,vu=Math.hypot,ji=Math.log,Bs=Math.pow,F=Math.sin,yn=Math.sign||function(e){return e>0?1:e<0?-1:0},Ne=Math.sqrt,zl=Math.tan;function Ng(e){return e>1?0:e<-1?re:Math.acos(e)}function nn(e){return e>1?Se:e<-1?-Se:Math.asin(e)}function ph(e){return(e=F(e/2))*e}function ve(){}function Yi(e,n){e&&bh.hasOwnProperty(e.type)&&bh[e.type](e,n)}var yh={Feature:function(e,n){Yi(e.geometry,n)},FeatureCollection:function(e,n){for(var t=e.features,a=-1,r=t.length;++a<r;)Yi(t[a].geometry,n)}},bh={Sphere:function(e,n){n.sphere()},Point:function(e,n){e=e.coordinates,n.point(e[0],e[1],e[2])},MultiPoint:function(e,n){for(var t=e.coordinates,a=-1,r=t.length;++a<r;)e=t[a],n.point(e[0],e[1],e[2])},LineString:function(e,n){ku(e.coordinates,n,0)},MultiLineString:function(e,n){for(var t=e.coordinates,a=-1,r=t.length;++a<r;)ku(t[a],n,0)},Polygon:function(e,n){vh(e.coordinates,n)},MultiPolygon:function(e,n){for(var t=e.coordinates,a=-1,r=t.length;++a<r;)vh(t[a],n)},GeometryCollection:function(e,n){for(var t=e.geometries,a=-1,r=t.length;++a<r;)Yi(t[a],n)}};function ku(e,n,t){var a=-1,r=e.length-t,i;for(n.lineStart();++a<r;)i=e[a],n.point(i[0],i[1],i[2]);n.lineEnd()}function vh(e,n){var t=-1,a=e.length;for(n.polygonStart();++t<a;)ku(e[t],n,1);n.polygonEnd()}function Sn(e,n){e&&yh.hasOwnProperty(e.type)?yh[e.type](e,n):Yi(e,n)}var Vi=new ze,Wi=new ze,Rg,Bg,wu,Mu,Su,Dn={point:ve,lineStart:ve,lineEnd:ve,polygonStart:function(){Vi=new ze,Dn.lineStart=RM,Dn.lineEnd=BM},polygonEnd:function(){var e=+Vi;Wi.add(e<0?Je+e:e),this.lineStart=this.lineEnd=this.point=ve},sphere:function(){Wi.add(Je)}};function RM(){Dn.point=PM}function BM(){Pg(Rg,Bg)}function PM(e,n){Dn.point=Pg,Rg=e,Bg=n,e*=J,n*=J,wu=e,Mu=U(n=n/2+Ui),Su=F(n)}function Pg(e,n){e*=J,n*=J,n=n/2+Ui;var t=e-wu,a=t>=0?1:-1,r=a*t,i=U(n),o=F(n),u=Su*o,l=Mu*i+u*U(r),c=u*a*F(r);Vi.add(en(c,l)),wu=e,Mu=i,Su=o}function IM(e){return Wi=new ze,Sn(e,Dn),Wi*2}function Zi(e){return[en(e[1],e[0]),nn(e[2])]}function Kt(e){var n=e[0],t=e[1],a=U(t);return[a*U(n),a*F(n),F(t)]}function si(e,n){return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]}function _a(e,n){return[e[1]*n[2]-e[2]*n[1],e[2]*n[0]-e[0]*n[2],e[0]*n[1]-e[1]*n[0]]}function Ps(e,n){e[0]+=n[0],e[1]+=n[1],e[2]+=n[2]}function ui(e,n){return[e[0]*n,e[1]*n,e[2]*n]}function Xi(e){var n=Ne(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=n,e[1]/=n,e[2]/=n}var be,on,Me,hn,St,Ig,$g,fa,or,ot,et,Vn={point:_u,lineStart:kh,lineEnd:wh,polygonStart:function(){Vn.point=Kg,Vn.lineStart=$M,Vn.lineEnd=LM,or=new ze,Dn.polygonStart()},polygonEnd:function(){Dn.polygonEnd(),Vn.point=_u,Vn.lineStart=kh,Vn.lineEnd=wh,Vi<0?(be=-(Me=180),on=-(hn=90)):or>X?hn=90:or<-X&&(on=-90),et[0]=be,et[1]=Me},sphere:function(){be=-(Me=180),on=-(hn=90)}};function _u(e,n){ot.push(et=[be=e,Me=e]),n<on&&(on=n),n>hn&&(hn=n)}function Lg(e,n){var t=Kt([e*J,n*J]);if(fa){var a=_a(fa,t),r=[a[1],-a[0],0],i=_a(r,a);Xi(i),i=Zi(i);var o=e-St,u=o>0?1:-1,l=i[0]*de*u,c,h=ie(o)>180;h^(u*St<l&&l<u*e)?(c=i[1]*de,c>hn&&(hn=c)):(l=(l+360)%360-180,h^(u*St<l&&l<u*e)?(c=-i[1]*de,c<on&&(on=c)):(n<on&&(on=n),n>hn&&(hn=n))),h?e<St?ln(be,e)>ln(be,Me)&&(Me=e):ln(e,Me)>ln(be,Me)&&(be=e):Me>=be?(e<be&&(be=e),e>Me&&(Me=e)):e>St?ln(be,e)>ln(be,Me)&&(Me=e):ln(e,Me)>ln(be,Me)&&(be=e)}else ot.push(et=[be=e,Me=e]);n<on&&(on=n),n>hn&&(hn=n),fa=t,St=e}function kh(){Vn.point=Lg}function wh(){et[0]=be,et[1]=Me,Vn.point=_u,fa=null}function Kg(e,n){if(fa){var t=e-St;or.add(ie(t)>180?t+(t>0?360:-360):t)}else Ig=e,$g=n;Dn.point(e,n),Lg(e,n)}function $M(){Dn.lineStart()}function LM(){Kg(Ig,$g),Dn.lineEnd(),ie(or)>X&&(be=-(Me=180)),et[0]=be,et[1]=Me,fa=null}function ln(e,n){return(n-=e)<0?n+360:n}function KM(e,n){return e[0]-n[0]}function Mh(e,n){return e[0]<=e[1]?e[0]<=n&&n<=e[1]:n<e[0]||e[1]<n}function DM(e){var n,t,a,r,i,o,u;if(hn=Me=-(be=on=1/0),ot=[],Sn(e,Vn),t=ot.length){for(ot.sort(KM),n=1,a=ot[0],i=[a];n<t;++n)r=ot[n],Mh(a,r[0])||Mh(a,r[1])?(ln(a[0],r[1])>ln(a[0],a[1])&&(a[1]=r[1]),ln(r[0],a[1])>ln(a[0],a[1])&&(a[0]=r[0])):i.push(a=r);for(o=-1/0,t=i.length-1,n=0,a=i[t];n<=t;a=r,++n)r=i[n],(u=ln(a[1],r[0]))>o&&(o=u,be=r[0],Me=a[1])}return ot=et=null,be===1/0||on===1/0?[[NaN,NaN],[NaN,NaN]]:[[be,on],[Me,hn]]}var Za,Qi,Ji,eo,no,to,ao,ro,Au,xu,Tu,Dg,Hg,Ue,je,Ye,_n={sphere:ve,point:Cl,lineStart:Sh,lineEnd:_h,polygonStart:function(){_n.lineStart=GM,_n.lineEnd=qM},polygonEnd:function(){_n.lineStart=Sh,_n.lineEnd=_h}};function Cl(e,n){e*=J,n*=J;var t=U(n);Kr(t*U(e),t*F(e),F(n))}function Kr(e,n,t){++Za,Ji+=(e-Ji)/Za,eo+=(n-eo)/Za,no+=(t-no)/Za}function Sh(){_n.point=HM}function HM(e,n){e*=J,n*=J;var t=U(n);Ue=t*U(e),je=t*F(e),Ye=F(n),_n.point=OM,Kr(Ue,je,Ye)}function OM(e,n){e*=J,n*=J;var t=U(n),a=t*U(e),r=t*F(e),i=F(n),o=en(Ne((o=je*i-Ye*r)*o+(o=Ye*a-Ue*i)*o+(o=Ue*r-je*a)*o),Ue*a+je*r+Ye*i);Qi+=o,to+=o*(Ue+(Ue=a)),ao+=o*(je+(je=r)),ro+=o*(Ye+(Ye=i)),Kr(Ue,je,Ye)}function _h(){_n.point=Cl}function GM(){_n.point=FM}function qM(){Og(Dg,Hg),_n.point=Cl}function FM(e,n){Dg=e,Hg=n,e*=J,n*=J,_n.point=Og;var t=U(n);Ue=t*U(e),je=t*F(e),Ye=F(n),Kr(Ue,je,Ye)}function Og(e,n){e*=J,n*=J;var t=U(n),a=t*U(e),r=t*F(e),i=F(n),o=je*i-Ye*r,u=Ye*a-Ue*i,l=Ue*r-je*a,c=vu(o,u,l),h=nn(c),f=c&&-h/c;Au.add(f*o),xu.add(f*u),Tu.add(f*l),Qi+=h,to+=h*(Ue+(Ue=a)),ao+=h*(je+(je=r)),ro+=h*(Ye+(Ye=i)),Kr(Ue,je,Ye)}function UM(e){Za=Qi=Ji=eo=no=to=ao=ro=0,Au=new ze,xu=new ze,Tu=new ze,Sn(e,_n);var n=+Au,t=+xu,a=+Tu,r=vu(n,t,a);return r<Ar&&(n=to,t=ao,a=ro,Qi<X&&(n=Ji,t=eo,a=no),r=vu(n,t,a),r<Ar)?[NaN,NaN]:[en(t,n)*de,nn(a/r)*de]}function aa(e){return function(){return e}}function zu(e,n){function t(a,r){return a=e(a,r),n(a[0],a[1])}return e.invert&&n.invert&&(t.invert=function(a,r){return a=n.invert(a,r),a&&e.invert(a[0],a[1])}),t}function Cu(e,n){return ie(e)>re&&(e-=Math.round(e/Je)*Je),[e,n]}Cu.invert=Cu;function El(e,n,t){return(e%=Je)?n||t?zu(xh(e),Th(n,t)):xh(e):n||t?Th(n,t):Cu}function Ah(e){return function(n,t){return n+=e,ie(n)>re&&(n-=Math.round(n/Je)*Je),[n,t]}}function xh(e){var n=Ah(e);return n.invert=Ah(-e),n}function Th(e,n){var t=U(e),a=F(e),r=U(n),i=F(n);function o(u,l){var c=U(l),h=U(u)*c,f=F(u)*c,s=F(l),d=s*t+h*a;return[en(f*r-d*i,h*t-s*a),nn(d*r+f*i)]}return o.invert=function(u,l){var c=U(l),h=U(u)*c,f=F(u)*c,s=F(l),d=s*r-f*i;return[en(f*r+s*i,h*t+d*a),nn(d*t-h*a)]},o}function Gg(e){e=El(e[0]*J,e[1]*J,e.length>2?e[2]*J:0);function n(t){return t=e(t[0]*J,t[1]*J),t[0]*=de,t[1]*=de,t}return n.invert=function(t){return t=e.invert(t[0]*J,t[1]*J),t[0]*=de,t[1]*=de,t},n}function qg(e,n,t,a,r,i){if(t){var o=U(n),u=F(n),l=a*t;r==null?(r=n+a*Je,i=n-l/2):(r=zh(o,r),i=zh(o,i),(a>0?r<i:r>i)&&(r+=a*Je));for(var c,h=r;a>0?h>i:h<i;h-=l)c=Zi([o,-u*U(h),-u*F(h)]),e.point(c[0],c[1])}}function zh(e,n){n=Kt(n),n[0]-=e,Xi(n);var t=Ng(-n[1]);return((-n[2]<0?-t:t)+Je-X)%Je}function jM(){var e=aa([0,0]),n=aa(90),t=aa(2),a,r,i={point:o};function o(l,c){a.push(l=r(l,c)),l[0]*=de,l[1]*=de}function u(){var l=e.apply(this,arguments),c=n.apply(this,arguments)*J,h=t.apply(this,arguments)*J;return a=[],r=El(-l[0]*J,-l[1]*J,0).invert,qg(i,c,h,1),l={type:"Polygon",coordinates:[a]},a=r=null,l}return u.center=function(l){return arguments.length?(e=typeof l=="function"?l:aa([+l[0],+l[1]]),u):e},u.radius=function(l){return arguments.length?(n=typeof l=="function"?l:aa(+l),u):n},u.precision=function(l){return arguments.length?(t=typeof l=="function"?l:aa(+l),u):t},u}function Fg(){var e=[],n;return{point:function(t,a,r){n.push([t,a,r])},lineStart:function(){e.push(n=[])},lineEnd:ve,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var t=e;return e=[],n=null,t}}}function Ai(e,n){return ie(e[0]-n[0])<X&&ie(e[1]-n[1])<X}function li(e,n,t,a){this.x=e,this.z=n,this.o=t,this.e=a,this.v=!1,this.n=this.p=null}function Ug(e,n,t,a,r){var i=[],o=[],u,l;if(e.forEach(function(g){if(!((p=g.length-1)<=0)){var p,m=g[0],y=g[p],k;if(Ai(m,y)){if(!m[2]&&!y[2]){for(r.lineStart(),u=0;u<p;++u)r.point((m=g[u])[0],m[1]);r.lineEnd();return}y[0]+=2*X}i.push(k=new li(m,g,null,!0)),o.push(k.o=new li(m,null,k,!1)),i.push(k=new li(y,g,null,!1)),o.push(k.o=new li(y,null,k,!0))}}),!!i.length){for(o.sort(n),Ch(i),Ch(o),u=0,l=o.length;u<l;++u)o[u].e=t=!t;for(var c=i[0],h,f;;){for(var s=c,d=!0;s.v;)if((s=s.n)===c)return;h=s.z,r.lineStart();do{if(s.v=s.o.v=!0,s.e){if(d)for(u=0,l=h.length;u<l;++u)r.point((f=h[u])[0],f[1]);else a(s.x,s.n.x,1,r);s=s.n}else{if(d)for(h=s.p.z,u=h.length-1;u>=0;--u)r.point((f=h[u])[0],f[1]);else a(s.x,s.p.x,-1,r);s=s.p}s=s.o,h=s.z,d=!d}while(!s.v);r.lineEnd()}}}function Ch(e){if(n=e.length){for(var n,t=0,a=e[0],r;++t<n;)a.n=r=e[t],r.p=a,a=r;a.n=r=e[0],r.p=a}}function Is(e){return ie(e[0])<=re?e[0]:yn(e[0])*((ie(e[0])+re)%Je-re)}function jg(e,n){var t=Is(n),a=n[1],r=F(a),i=[F(t),-U(t),0],o=0,u=0,l=new ze;r===1?a=Se+X:r===-1&&(a=-Se-X);for(var c=0,h=e.length;c<h;++c)if(s=(f=e[c]).length)for(var f,s,d=f[s-1],g=Is(d),p=d[1]/2+Ui,m=F(p),y=U(p),k=0;k<s;++k,g=b,m=M,y=x,d=v){var v=f[k],b=Is(v),w=v[1]/2+Ui,M=F(w),x=U(w),S=b-g,T=S>=0?1:-1,_=T*S,A=_>re,R=m*M;if(l.add(en(R*T*F(_),y*x+R*U(_))),o+=A?S+T*Je:S,A^g>=t^b>=t){var N=_a(Kt(d),Kt(v));Xi(N);var z=_a(i,N);Xi(z);var E=(A^S>=0?-1:1)*nn(z[2]);(a>E||a===E&&(N[0]||N[1]))&&(u+=A^S>=0?1:-1)}}return(o<-X||o<X&&l<-Ar)^u&1}function Yg(e,n,t,a){return function(r){var i=n(r),o=Fg(),u=n(o),l=!1,c,h,f,s={point:d,lineStart:p,lineEnd:m,polygonStart:function(){s.point=y,s.lineStart=k,s.lineEnd=v,h=[],c=[]},polygonEnd:function(){s.point=d,s.lineStart=p,s.lineEnd=m,h=tl(h);var b=jg(c,a);h.length?(l||(r.polygonStart(),l=!0),Ug(h,VM,b,t,r)):b&&(l||(r.polygonStart(),l=!0),r.lineStart(),t(null,null,1,r),r.lineEnd()),l&&(r.polygonEnd(),l=!1),h=c=null},sphere:function(){r.polygonStart(),r.lineStart(),t(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function d(b,w){e(b,w)&&r.point(b,w)}function g(b,w){i.point(b,w)}function p(){s.point=g,i.lineStart()}function m(){s.point=d,i.lineEnd()}function y(b,w){f.push([b,w]),u.point(b,w)}function k(){u.lineStart(),f=[]}function v(){y(f[0][0],f[0][1]),u.lineEnd();var b=u.clean(),w=o.result(),M,x=w.length,S,T,_;if(f.pop(),c.push(f),f=null,!!x){if(b&1){if(T=w[0],(S=T.length-1)>0){for(l||(r.polygonStart(),l=!0),r.lineStart(),M=0;M<S;++M)r.point((_=T[M])[0],_[1]);r.lineEnd()}return}x>1&&b&2&&w.push(w.pop().concat(w.shift())),h.push(w.filter(YM))}}return s}}function YM(e){return e.length>1}function VM(e,n){return((e=e.x)[0]<0?e[1]-Se-X:Se-e[1])-((n=n.x)[0]<0?n[1]-Se-X:Se-n[1])}const Eu=Yg(function(){return!0},WM,XM,[-re,-Se]);function WM(e){var n=NaN,t=NaN,a=NaN,r;return{lineStart:function(){e.lineStart(),r=1},point:function(i,o){var u=i>0?re:-re,l=ie(i-n);ie(l-re)<X?(e.point(n,t=(t+o)/2>0?Se:-Se),e.point(a,t),e.lineEnd(),e.lineStart(),e.point(u,t),e.point(i,t),r=0):a!==u&&l>=re&&(ie(n-a)<X&&(n-=a*X),ie(i-u)<X&&(i-=u*X),t=ZM(n,t,i,o),e.point(a,t),e.lineEnd(),e.lineStart(),e.point(u,t),r=0),e.point(n=i,t=o),a=u},lineEnd:function(){e.lineEnd(),n=t=NaN},clean:function(){return 2-r}}}function ZM(e,n,t,a){var r,i,o=F(e-t);return ie(o)>X?Ia((F(n)*(i=U(a))*F(t)-F(a)*(r=U(n))*F(e))/(r*i*o)):(n+a)/2}function XM(e,n,t,a){var r;if(e==null)r=t*Se,a.point(-re,r),a.point(0,r),a.point(re,r),a.point(re,0),a.point(re,-r),a.point(0,-r),a.point(-re,-r),a.point(-re,0),a.point(-re,r);else if(ie(e[0]-n[0])>X){var i=e[0]<n[0]?re:-re;r=t*i/2,a.point(-i,r),a.point(0,r),a.point(i,r)}else a.point(n[0],n[1])}function Vg(e){var n=U(e),t=2*J,a=n>0,r=ie(n)>X;function i(h,f,s,d){qg(d,e,t,s,h,f)}function o(h,f){return U(h)*U(f)>n}function u(h){var f,s,d,g,p;return{lineStart:function(){g=d=!1,p=1},point:function(m,y){var k=[m,y],v,b=o(m,y),w=a?b?0:c(m,y):b?c(m+(m<0?re:-re),y):0;if(!f&&(g=d=b)&&h.lineStart(),b!==d&&(v=l(f,k),(!v||Ai(f,v)||Ai(k,v))&&(k[2]=1)),b!==d)p=0,b?(h.lineStart(),v=l(k,f),h.point(v[0],v[1])):(v=l(f,k),h.point(v[0],v[1],2),h.lineEnd()),f=v;else if(r&&f&&a^b){var M;!(w&s)&&(M=l(k,f,!0))&&(p=0,a?(h.lineStart(),h.point(M[0][0],M[0][1]),h.point(M[1][0],M[1][1]),h.lineEnd()):(h.point(M[1][0],M[1][1]),h.lineEnd(),h.lineStart(),h.point(M[0][0],M[0][1],3)))}b&&(!f||!Ai(f,k))&&h.point(k[0],k[1]),f=k,d=b,s=w},lineEnd:function(){d&&h.lineEnd(),f=null},clean:function(){return p|(g&&d)<<1}}}function l(h,f,s){var d=Kt(h),g=Kt(f),p=[1,0,0],m=_a(d,g),y=si(m,m),k=m[0],v=y-k*k;if(!v)return!s&&h;var b=n*y/v,w=-n*k/v,M=_a(p,m),x=ui(p,b),S=ui(m,w);Ps(x,S);var T=M,_=si(x,T),A=si(T,T),R=_*_-A*(si(x,x)-1);if(!(R<0)){var N=Ne(R),z=ui(T,(-_-N)/A);if(Ps(z,x),z=Zi(z),!s)return z;var E=h[0],C=f[0],B=h[1],I=f[1],P;C<E&&(P=E,E=C,C=P);var D=C-E,H=ie(D-re)<X,G=H||D<X;if(!H&&I<B&&(P=B,B=I,I=P),G?H?B+I>0^z[1]<(ie(z[0]-E)<X?B:I):B<=z[1]&&z[1]<=I:D>re^(E<=z[0]&&z[0]<=C)){var W=ui(T,(-_+N)/A);return Ps(W,x),[z,Zi(W)]}}}function c(h,f){var s=a?e:re-e,d=0;return h<-s?d|=1:h>s&&(d|=2),f<-s?d|=4:f>s&&(d|=8),d}return Yg(o,u,i,a?[0,-e]:[-re,e-re])}function QM(e,n,t,a,r,i){var o=e[0],u=e[1],l=n[0],c=n[1],h=0,f=1,s=l-o,d=c-u,g;if(g=t-o,!(!s&&g>0)){if(g/=s,s<0){if(g<h)return;g<f&&(f=g)}else if(s>0){if(g>f)return;g>h&&(h=g)}if(g=r-o,!(!s&&g<0)){if(g/=s,s<0){if(g>f)return;g>h&&(h=g)}else if(s>0){if(g<h)return;g<f&&(f=g)}if(g=a-u,!(!d&&g>0)){if(g/=d,d<0){if(g<h)return;g<f&&(f=g)}else if(d>0){if(g>f)return;g>h&&(h=g)}if(g=i-u,!(!d&&g<0)){if(g/=d,d<0){if(g>f)return;g>h&&(h=g)}else if(d>0){if(g<h)return;g<f&&(f=g)}return h>0&&(e[0]=o+h*s,e[1]=u+h*d),f<1&&(n[0]=o+f*s,n[1]=u+f*d),!0}}}}}var Xa=1e9,ci=-Xa;function Fo(e,n,t,a){function r(c,h){return e<=c&&c<=t&&n<=h&&h<=a}function i(c,h,f,s){var d=0,g=0;if(c==null||(d=o(c,f))!==(g=o(h,f))||l(c,h)<0^f>0)do s.point(d===0||d===3?e:t,d>1?a:n);while((d=(d+f+4)%4)!==g);else s.point(h[0],h[1])}function o(c,h){return ie(c[0]-e)<X?h>0?0:3:ie(c[0]-t)<X?h>0?2:1:ie(c[1]-n)<X?h>0?1:0:h>0?3:2}function u(c,h){return l(c.x,h.x)}function l(c,h){var f=o(c,1),s=o(h,1);return f!==s?f-s:f===0?h[1]-c[1]:f===1?c[0]-h[0]:f===2?c[1]-h[1]:h[0]-c[0]}return function(c){var h=c,f=Fg(),s,d,g,p,m,y,k,v,b,w,M,x={point:S,lineStart:R,lineEnd:N,polygonStart:_,polygonEnd:A};function S(E,C){r(E,C)&&h.point(E,C)}function T(){for(var E=0,C=0,B=d.length;C<B;++C)for(var I=d[C],P=1,D=I.length,H=I[0],G,W,Q=H[0],q=H[1];P<D;++P)G=Q,W=q,H=I[P],Q=H[0],q=H[1],W<=a?q>a&&(Q-G)*(a-W)>(q-W)*(e-G)&&++E:q<=a&&(Q-G)*(a-W)<(q-W)*(e-G)&&--E;return E}function _(){h=f,s=[],d=[],M=!0}function A(){var E=T(),C=M&&E,B=(s=tl(s)).length;(C||B)&&(c.polygonStart(),C&&(c.lineStart(),i(null,null,1,c),c.lineEnd()),B&&Ug(s,u,E,i,c),c.polygonEnd()),h=c,s=d=g=null}function R(){x.point=z,d&&d.push(g=[]),w=!0,b=!1,k=v=NaN}function N(){s&&(z(p,m),y&&b&&f.rejoin(),s.push(f.result())),x.point=S,b&&h.lineEnd()}function z(E,C){var B=r(E,C);if(d&&g.push([E,C]),w)p=E,m=C,y=B,w=!1,B&&(h.lineStart(),h.point(E,C));else if(B&&b)h.point(E,C);else{var I=[k=Math.max(ci,Math.min(Xa,k)),v=Math.max(ci,Math.min(Xa,v))],P=[E=Math.max(ci,Math.min(Xa,E)),C=Math.max(ci,Math.min(Xa,C))];QM(I,P,e,n,t,a)?(b||(h.lineStart(),h.point(I[0],I[1])),h.point(P[0],P[1]),B||h.lineEnd(),M=!1):B&&(h.lineStart(),h.point(E,C),M=!1)}k=E,v=C,b=B}return x}}function JM(){var e=0,n=0,t=960,a=500,r,i,o;return o={stream:function(u){return r&&i===u?r:r=Fo(e,n,t,a)(i=u)},extent:function(u){return arguments.length?(e=+u[0][0],n=+u[0][1],t=+u[1][0],a=+u[1][1],r=i=null,o):[[e,n],[t,a]]}}}var Nu,Ru,xi,Ti,Aa={sphere:ve,point:ve,lineStart:eS,lineEnd:ve,polygonStart:ve,polygonEnd:ve};function eS(){Aa.point=tS,Aa.lineEnd=nS}function nS(){Aa.point=Aa.lineEnd=ve}function tS(e,n){e*=J,n*=J,Ru=e,xi=F(n),Ti=U(n),Aa.point=aS}function aS(e,n){e*=J,n*=J;var t=F(n),a=U(n),r=ie(e-Ru),i=U(r),o=F(r),u=a*o,l=Ti*t-xi*a*i,c=xi*t+Ti*a*i;Nu.add(en(Ne(u*u+l*l),c)),Ru=e,xi=t,Ti=a}function Wg(e){return Nu=new ze,Sn(e,Aa),+Nu}var Bu=[null,null],rS={type:"LineString",coordinates:Bu};function io(e,n){return Bu[0]=e,Bu[1]=n,Wg(rS)}var Eh={Feature:function(e,n){return oo(e.geometry,n)},FeatureCollection:function(e,n){for(var t=e.features,a=-1,r=t.length;++a<r;)if(oo(t[a].geometry,n))return!0;return!1}},Nh={Sphere:function(){return!0},Point:function(e,n){return Rh(e.coordinates,n)},MultiPoint:function(e,n){for(var t=e.coordinates,a=-1,r=t.length;++a<r;)if(Rh(t[a],n))return!0;return!1},LineString:function(e,n){return Bh(e.coordinates,n)},MultiLineString:function(e,n){for(var t=e.coordinates,a=-1,r=t.length;++a<r;)if(Bh(t[a],n))return!0;return!1},Polygon:function(e,n){return Ph(e.coordinates,n)},MultiPolygon:function(e,n){for(var t=e.coordinates,a=-1,r=t.length;++a<r;)if(Ph(t[a],n))return!0;return!1},GeometryCollection:function(e,n){for(var t=e.geometries,a=-1,r=t.length;++a<r;)if(oo(t[a],n))return!0;return!1}};function oo(e,n){return e&&Nh.hasOwnProperty(e.type)?Nh[e.type](e,n):!1}function Rh(e,n){return io(e,n)===0}function Bh(e,n){for(var t,a,r,i=0,o=e.length;i<o;i++){if(a=io(e[i],n),a===0||i>0&&(r=io(e[i],e[i-1]),r>0&&t<=r&&a<=r&&(t+a-r)*(1-Math.pow((t-a)/r,2))<Ar*r))return!0;t=a}return!1}function Ph(e,n){return!!jg(e.map(iS),Zg(n))}function iS(e){return e=e.map(Zg),e.pop(),e}function Zg(e){return[e[0]*J,e[1]*J]}function oS(e,n){return(e&&Eh.hasOwnProperty(e.type)?Eh[e.type]:oo)(e,n)}function Ih(e,n,t){var a=Oe(e,n-X,t).concat(n);return function(r){return a.map(function(i){return[r,i]})}}function $h(e,n,t){var a=Oe(e,n-X,t).concat(n);return function(r){return a.map(function(i){return[i,r]})}}function Xg(){var e,n,t,a,r,i,o,u,l=10,c=l,h=90,f=360,s,d,g,p,m=2.5;function y(){return{type:"MultiLineString",coordinates:k()}}function k(){return Oe(oi(a/h)*h,t,h).map(g).concat(Oe(oi(u/f)*f,o,f).map(p)).concat(Oe(oi(n/l)*l,e,l).filter(function(v){return ie(v%h)>X}).map(s)).concat(Oe(oi(i/c)*c,r,c).filter(function(v){return ie(v%f)>X}).map(d))}return y.lines=function(){return k().map(function(v){return{type:"LineString",coordinates:v}})},y.outline=function(){return{type:"Polygon",coordinates:[g(a).concat(p(o).slice(1),g(t).reverse().slice(1),p(u).reverse().slice(1))]}},y.extent=function(v){return arguments.length?y.extentMajor(v).extentMinor(v):y.extentMinor()},y.extentMajor=function(v){return arguments.length?(a=+v[0][0],t=+v[1][0],u=+v[0][1],o=+v[1][1],a>t&&(v=a,a=t,t=v),u>o&&(v=u,u=o,o=v),y.precision(m)):[[a,u],[t,o]]},y.extentMinor=function(v){return arguments.length?(n=+v[0][0],e=+v[1][0],i=+v[0][1],r=+v[1][1],n>e&&(v=n,n=e,e=v),i>r&&(v=i,i=r,r=v),y.precision(m)):[[n,i],[e,r]]},y.step=function(v){return arguments.length?y.stepMajor(v).stepMinor(v):y.stepMinor()},y.stepMajor=function(v){return arguments.length?(h=+v[0],f=+v[1],y):[h,f]},y.stepMinor=function(v){return arguments.length?(l=+v[0],c=+v[1],y):[l,c]},y.precision=function(v){return arguments.length?(m=+v,s=Ih(i,r,90),d=$h(n,e,m),g=Ih(u,o,90),p=$h(a,t,m),y):m},y.extentMajor([[-180,-90+X],[180,90-X]]).extentMinor([[-180,-80-X],[180,80+X]])}function sS(){return Xg()()}function uS(e,n){var t=e[0]*J,a=e[1]*J,r=n[0]*J,i=n[1]*J,o=U(a),u=F(a),l=U(i),c=F(i),h=o*U(t),f=o*F(t),s=l*U(r),d=l*F(r),g=2*nn(Ne(ph(i-a)+o*l*ph(r-t))),p=F(g),m=g?function(y){var k=F(y*=g)/p,v=F(g-y)/p,b=v*h+k*s,w=v*f+k*d,M=v*u+k*c;return[en(w,b)*de,en(M,Ne(b*b+w*w))*de]}:function(){return[t*de,a*de]};return m.distance=g,m}const xr=e=>e;var $s=new ze,Pu=new ze,Qg,Jg,Iu,$u,Wn={point:ve,lineStart:ve,lineEnd:ve,polygonStart:function(){Wn.lineStart=lS,Wn.lineEnd=hS},polygonEnd:function(){Wn.lineStart=Wn.lineEnd=Wn.point=ve,$s.add(ie(Pu)),Pu=new ze},result:function(){var e=$s/2;return $s=new ze,e}};function lS(){Wn.point=cS}function cS(e,n){Wn.point=e0,Qg=Iu=e,Jg=$u=n}function e0(e,n){Pu.add($u*e-Iu*n),Iu=e,$u=n}function hS(){e0(Qg,Jg)}var xa=1/0,so=xa,Tr=-xa,uo=Tr,lo={point:fS,lineStart:ve,lineEnd:ve,polygonStart:ve,polygonEnd:ve,result:function(){var e=[[xa,so],[Tr,uo]];return Tr=uo=-(so=xa=1/0),e}};function fS(e,n){e<xa&&(xa=e),e>Tr&&(Tr=e),n<so&&(so=n),n>uo&&(uo=n)}var Lu=0,Ku=0,Qa=0,co=0,ho=0,sa=0,Du=0,Hu=0,Ja=0,n0,t0,Bn,Pn,pn={point:Dt,lineStart:Lh,lineEnd:Kh,polygonStart:function(){pn.lineStart=mS,pn.lineEnd=pS},polygonEnd:function(){pn.point=Dt,pn.lineStart=Lh,pn.lineEnd=Kh},result:function(){var e=Ja?[Du/Ja,Hu/Ja]:sa?[co/sa,ho/sa]:Qa?[Lu/Qa,Ku/Qa]:[NaN,NaN];return Lu=Ku=Qa=co=ho=sa=Du=Hu=Ja=0,e}};function Dt(e,n){Lu+=e,Ku+=n,++Qa}function Lh(){pn.point=dS}function dS(e,n){pn.point=gS,Dt(Bn=e,Pn=n)}function gS(e,n){var t=e-Bn,a=n-Pn,r=Ne(t*t+a*a);co+=r*(Bn+e)/2,ho+=r*(Pn+n)/2,sa+=r,Dt(Bn=e,Pn=n)}function Kh(){pn.point=Dt}function mS(){pn.point=yS}function pS(){a0(n0,t0)}function yS(e,n){pn.point=a0,Dt(n0=Bn=e,t0=Pn=n)}function a0(e,n){var t=e-Bn,a=n-Pn,r=Ne(t*t+a*a);co+=r*(Bn+e)/2,ho+=r*(Pn+n)/2,sa+=r,r=Pn*e-Bn*n,Du+=r*(Bn+e),Hu+=r*(Pn+n),Ja+=r*3,Dt(Bn=e,Pn=n)}function r0(e){this._context=e}r0.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,n){switch(this._point){case 0:{this._context.moveTo(e,n),this._point=1;break}case 1:{this._context.lineTo(e,n);break}default:{this._context.moveTo(e+this._radius,n),this._context.arc(e,n,this._radius,0,Je);break}}},result:ve};var Ou=new ze,Ls,i0,o0,er,nr,zr={point:ve,lineStart:function(){zr.point=bS},lineEnd:function(){Ls&&s0(i0,o0),zr.point=ve},polygonStart:function(){Ls=!0},polygonEnd:function(){Ls=null},result:function(){var e=+Ou;return Ou=new ze,e}};function bS(e,n){zr.point=s0,i0=er=e,o0=nr=n}function s0(e,n){er-=e,nr-=n,Ou.add(Ne(er*er+nr*nr)),er=e,nr=n}let Dh,fo,Hh,Oh;class Gh{constructor(n){this._append=n==null?u0:vS(n),this._radius=4.5,this._=""}pointRadius(n){return this._radius=+n,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(n,t){switch(this._point){case 0:{this._append`M${n},${t}`,this._point=1;break}case 1:{this._append`L${n},${t}`;break}default:{if(this._append`M${n},${t}`,this._radius!==Hh||this._append!==fo){const a=this._radius,r=this._;this._="",this._append`m0,${a}a${a},${a} 0 1,1 0,${-2*a}a${a},${a} 0 1,1 0,${2*a}z`,Hh=a,fo=this._append,Oh=this._,this._=r}this._+=Oh;break}}}result(){const n=this._;return this._="",n.length?n:null}}function u0(e){let n=1;this._+=e[0];for(const t=e.length;n<t;++n)this._+=arguments[n]+e[n]}function vS(e){const n=Math.floor(e);if(!(n>=0))throw new RangeError(`invalid digits: ${e}`);if(n>15)return u0;if(n!==Dh){const t=10**n;Dh=n,fo=function(r){let i=1;this._+=r[0];for(const o=r.length;i<o;++i)this._+=Math.round(arguments[i]*t)/t+r[i]}}return fo}function kS(e,n){let t=3,a=4.5,r,i;function o(u){return u&&(typeof a=="function"&&i.pointRadius(+a.apply(this,arguments)),Sn(u,r(i))),i.result()}return o.area=function(u){return Sn(u,r(Wn)),Wn.result()},o.measure=function(u){return Sn(u,r(zr)),zr.result()},o.bounds=function(u){return Sn(u,r(lo)),lo.result()},o.centroid=function(u){return Sn(u,r(pn)),pn.result()},o.projection=function(u){return arguments.length?(r=u==null?(e=null,xr):(e=u).stream,o):e},o.context=function(u){return arguments.length?(i=u==null?(n=null,new Gh(t)):new r0(n=u),typeof a!="function"&&i.pointRadius(a),o):n},o.pointRadius=function(u){return arguments.length?(a=typeof u=="function"?u:(i.pointRadius(+u),+u),o):a},o.digits=function(u){if(!arguments.length)return t;if(u==null)t=null;else{const l=Math.floor(u);if(!(l>=0))throw new RangeError(`invalid digits: ${u}`);t=l}return n===null&&(i=new Gh(t)),o},o.projection(e).digits(t).context(n)}function wS(e){return{stream:Dr(e)}}function Dr(e){return function(n){var t=new Gu;for(var a in e)t[a]=e[a];return t.stream=n,t}}function Gu(){}Gu.prototype={constructor:Gu,point:function(e,n){this.stream.point(e,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Nl(e,n,t){var a=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),a!=null&&e.clipExtent(null),Sn(t,e.stream(lo)),n(lo.result()),a!=null&&e.clipExtent(a),e}function Uo(e,n,t){return Nl(e,function(a){var r=n[1][0]-n[0][0],i=n[1][1]-n[0][1],o=Math.min(r/(a[1][0]-a[0][0]),i/(a[1][1]-a[0][1])),u=+n[0][0]+(r-o*(a[1][0]+a[0][0]))/2,l=+n[0][1]+(i-o*(a[1][1]+a[0][1]))/2;e.scale(150*o).translate([u,l])},t)}function Rl(e,n,t){return Uo(e,[[0,0],n],t)}function Bl(e,n,t){return Nl(e,function(a){var r=+n,i=r/(a[1][0]-a[0][0]),o=(r-i*(a[1][0]+a[0][0]))/2,u=-i*a[0][1];e.scale(150*i).translate([o,u])},t)}function Pl(e,n,t){return Nl(e,function(a){var r=+n,i=r/(a[1][1]-a[0][1]),o=-i*a[0][0],u=(r-i*(a[1][1]+a[0][1]))/2;e.scale(150*i).translate([o,u])},t)}var qh=16,MS=U(30*J);function Fh(e,n){return+n?_S(e,n):SS(e)}function SS(e){return Dr({point:function(n,t){n=e(n,t),this.stream.point(n[0],n[1])}})}function _S(e,n){function t(a,r,i,o,u,l,c,h,f,s,d,g,p,m){var y=c-a,k=h-r,v=y*y+k*k;if(v>4*n&&p--){var b=o+s,w=u+d,M=l+g,x=Ne(b*b+w*w+M*M),S=nn(M/=x),T=ie(ie(M)-1)<X||ie(i-f)<X?(i+f)/2:en(w,b),_=e(T,S),A=_[0],R=_[1],N=A-a,z=R-r,E=k*N-y*z;(E*E/v>n||ie((y*N+k*z)/v-.5)>.3||o*s+u*d+l*g<MS)&&(t(a,r,i,o,u,l,A,R,T,b/=x,w/=x,M,p,m),m.point(A,R),t(A,R,T,b,w,M,c,h,f,s,d,g,p,m))}}return function(a){var r,i,o,u,l,c,h,f,s,d,g,p,m={point:y,lineStart:k,lineEnd:b,polygonStart:function(){a.polygonStart(),m.lineStart=w},polygonEnd:function(){a.polygonEnd(),m.lineStart=k}};function y(S,T){S=e(S,T),a.point(S[0],S[1])}function k(){f=NaN,m.point=v,a.lineStart()}function v(S,T){var _=Kt([S,T]),A=e(S,T);t(f,s,h,d,g,p,f=A[0],s=A[1],h=S,d=_[0],g=_[1],p=_[2],qh,a),a.point(f,s)}function b(){m.point=y,a.lineEnd()}function w(){k(),m.point=M,m.lineEnd=x}function M(S,T){v(r=S,T),i=f,o=s,u=d,l=g,c=p,m.point=v}function x(){t(f,s,h,d,g,p,i,o,r,u,l,c,qh,a),m.lineEnd=b,b()}return m}}var AS=Dr({point:function(e,n){this.stream.point(e*J,n*J)}});function xS(e){return Dr({point:function(n,t){var a=e(n,t);return this.stream.point(a[0],a[1])}})}function TS(e,n,t,a,r){function i(o,u){return o*=a,u*=r,[n+e*o,t-e*u]}return i.invert=function(o,u){return[(o-n)/e*a,(t-u)/e*r]},i}function Uh(e,n,t,a,r,i){if(!i)return TS(e,n,t,a,r);var o=U(i),u=F(i),l=o*e,c=u*e,h=o/e,f=u/e,s=(u*t-o*n)/e,d=(u*n+o*t)/e;function g(p,m){return p*=a,m*=r,[l*p-c*m+n,t-c*p-l*m]}return g.invert=function(p,m){return[a*(h*p-f*m+s),r*(d-f*p-h*m)]},g}function qn(e){return Il(function(){return e})()}function Il(e){var n,t=150,a=480,r=250,i=0,o=0,u=0,l=0,c=0,h,f=0,s=1,d=1,g=null,p=Eu,m=null,y,k,v,b=xr,w=.5,M,x,S,T,_;function A(E){return S(E[0]*J,E[1]*J)}function R(E){return E=S.invert(E[0],E[1]),E&&[E[0]*de,E[1]*de]}A.stream=function(E){return T&&_===E?T:T=AS(xS(h)(p(M(b(_=E)))))},A.preclip=function(E){return arguments.length?(p=E,g=void 0,z()):p},A.postclip=function(E){return arguments.length?(b=E,m=y=k=v=null,z()):b},A.clipAngle=function(E){return arguments.length?(p=+E?Vg(g=E*J):(g=null,Eu),z()):g*de},A.clipExtent=function(E){return arguments.length?(b=E==null?(m=y=k=v=null,xr):Fo(m=+E[0][0],y=+E[0][1],k=+E[1][0],v=+E[1][1]),z()):m==null?null:[[m,y],[k,v]]},A.scale=function(E){return arguments.length?(t=+E,N()):t},A.translate=function(E){return arguments.length?(a=+E[0],r=+E[1],N()):[a,r]},A.center=function(E){return arguments.length?(i=E[0]%360*J,o=E[1]%360*J,N()):[i*de,o*de]},A.rotate=function(E){return arguments.length?(u=E[0]%360*J,l=E[1]%360*J,c=E.length>2?E[2]%360*J:0,N()):[u*de,l*de,c*de]},A.angle=function(E){return arguments.length?(f=E%360*J,N()):f*de},A.reflectX=function(E){return arguments.length?(s=E?-1:1,N()):s<0},A.reflectY=function(E){return arguments.length?(d=E?-1:1,N()):d<0},A.precision=function(E){return arguments.length?(M=Fh(x,w=E*E),z()):Ne(w)},A.fitExtent=function(E,C){return Uo(A,E,C)},A.fitSize=function(E,C){return Rl(A,E,C)},A.fitWidth=function(E,C){return Bl(A,E,C)},A.fitHeight=function(E,C){return Pl(A,E,C)};function N(){var E=Uh(t,0,0,s,d,f).apply(null,n(i,o)),C=Uh(t,a-E[0],r-E[1],s,d,f);return h=El(u,l,c),x=zu(n,C),S=zu(h,x),M=Fh(x,w),z()}function z(){return T=_=null,A}return function(){return n=e.apply(this,arguments),A.invert=n.invert&&R,N()}}function $l(e){var n=0,t=re/3,a=Il(e),r=a(n,t);return r.parallels=function(i){return arguments.length?a(n=i[0]*J,t=i[1]*J):[n*de,t*de]},r}function zS(e){var n=U(e);function t(a,r){return[a*n,F(r)/n]}return t.invert=function(a,r){return[a/n,nn(r*n)]},t}function l0(e,n){var t=F(e),a=(t+F(n))/2;if(ie(a)<X)return zS(e);var r=1+t*(2*a-t),i=Ne(r)/a;function o(u,l){var c=Ne(r-2*a*F(l))/a;return[c*F(u*=a),i-c*U(u)]}return o.invert=function(u,l){var c=i-l,h=en(u,ie(c))*yn(c);return c*a<0&&(h-=re*yn(u)*yn(c)),[h/a,nn((r-(u*u+c*c)*a*a)/(2*a))]},o}function go(){return $l(l0).scale(155.424).center([0,33.6442])}function c0(){return go().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function CS(e){var n=e.length;return{point:function(t,a){for(var r=-1;++r<n;)e[r].point(t,a)},sphere:function(){for(var t=-1;++t<n;)e[t].sphere()},lineStart:function(){for(var t=-1;++t<n;)e[t].lineStart()},lineEnd:function(){for(var t=-1;++t<n;)e[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<n;)e[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<n;)e[t].polygonEnd()}}}function ES(){var e,n,t=c0(),a,r=go().rotate([154,0]).center([-2,58.5]).parallels([55,65]),i,o=go().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u,l,c={point:function(s,d){l=[s,d]}};function h(s){var d=s[0],g=s[1];return l=null,a.point(d,g),l||(i.point(d,g),l)||(u.point(d,g),l)}h.invert=function(s){var d=t.scale(),g=t.translate(),p=(s[0]-g[0])/d,m=(s[1]-g[1])/d;return(m>=.12&&m<.234&&p>=-.425&&p<-.214?r:m>=.166&&m<.234&&p>=-.214&&p<-.115?o:t).invert(s)},h.stream=function(s){return e&&n===s?e:e=CS([t.stream(n=s),r.stream(s),o.stream(s)])},h.precision=function(s){return arguments.length?(t.precision(s),r.precision(s),o.precision(s),f()):t.precision()},h.scale=function(s){return arguments.length?(t.scale(s),r.scale(s*.35),o.scale(s),h.translate(t.translate())):t.scale()},h.translate=function(s){if(!arguments.length)return t.translate();var d=t.scale(),g=+s[0],p=+s[1];return a=t.translate(s).clipExtent([[g-.455*d,p-.238*d],[g+.455*d,p+.238*d]]).stream(c),i=r.translate([g-.307*d,p+.201*d]).clipExtent([[g-.425*d+X,p+.12*d+X],[g-.214*d-X,p+.234*d-X]]).stream(c),u=o.translate([g-.205*d,p+.212*d]).clipExtent([[g-.214*d+X,p+.166*d+X],[g-.115*d-X,p+.234*d-X]]).stream(c),f()},h.fitExtent=function(s,d){return Uo(h,s,d)},h.fitSize=function(s,d){return Rl(h,s,d)},h.fitWidth=function(s,d){return Bl(h,s,d)},h.fitHeight=function(s,d){return Pl(h,s,d)};function f(){return e=n=null,h}return h.scale(1070)}function h0(e){return function(n,t){var a=U(n),r=U(t),i=e(a*r);return i===1/0?[2,0]:[i*r*F(n),i*F(t)]}}function Hr(e){return function(n,t){var a=Ne(n*n+t*t),r=e(a),i=F(r),o=U(r);return[en(n*i,a*o),nn(a&&t*i/a)]}}var Ll=h0(function(e){return Ne(2/(1+e))});Ll.invert=Hr(function(e){return 2*nn(e/2)});function NS(){return qn(Ll).scale(124.75).clipAngle(180-.001)}var Kl=h0(function(e){return(e=Ng(e))&&e/F(e)});Kl.invert=Hr(function(e){return e});function RS(){return qn(Kl).scale(79.4188).clipAngle(180-.001)}function Or(e,n){return[e,ji(zl((Se+n)/2))]}Or.invert=function(e,n){return[e,2*Ia(Eg(n))-Se]};function BS(){return f0(Or).scale(961/Je)}function f0(e){var n=qn(e),t=n.center,a=n.scale,r=n.translate,i=n.clipExtent,o=null,u,l,c;n.scale=function(f){return arguments.length?(a(f),h()):a()},n.translate=function(f){return arguments.length?(r(f),h()):r()},n.center=function(f){return arguments.length?(t(f),h()):t()},n.clipExtent=function(f){return arguments.length?(f==null?o=u=l=c=null:(o=+f[0][0],u=+f[0][1],l=+f[1][0],c=+f[1][1]),h()):o==null?null:[[o,u],[l,c]]};function h(){var f=re*a(),s=n(Gg(n.rotate()).invert([0,0]));return i(o==null?[[s[0]-f,s[1]-f],[s[0]+f,s[1]+f]]:e===Or?[[Math.max(s[0]-f,o),u],[Math.min(s[0]+f,l),c]]:[[o,Math.max(s[1]-f,u)],[l,Math.min(s[1]+f,c)]])}return h()}function hi(e){return zl((Se+e)/2)}function d0(e,n){var t=U(e),a=e===n?F(e):ji(t/U(n))/ji(hi(n)/hi(e)),r=t*Bs(hi(e),a)/a;if(!a)return Or;function i(o,u){r>0?u<-Se+X&&(u=-Se+X):u>Se-X&&(u=Se-X);var l=r/Bs(hi(u),a);return[l*F(a*o),r-l*U(a*o)]}return i.invert=function(o,u){var l=r-u,c=yn(a)*Ne(o*o+l*l),h=en(o,ie(l))*yn(l);return l*a<0&&(h-=re*yn(o)*yn(l)),[h/a,2*Ia(Bs(r/c,1/a))-Se]},i}function PS(){return $l(d0).scale(109.5).parallels([30,30])}function Cr(e,n){return[e,n]}Cr.invert=Cr;function IS(){return qn(Cr).scale(152.63)}function g0(e,n){var t=U(e),a=e===n?F(e):(t-U(n))/(n-e),r=t/a+e;if(ie(a)<X)return Cr;function i(o,u){var l=r-u,c=a*o;return[l*F(c),r-l*U(c)]}return i.invert=function(o,u){var l=r-u,c=en(o,ie(l))*yn(l);return l*a<0&&(c-=re*yn(o)*yn(l)),[c/a,r-yn(a)*Ne(o*o+l*l)]},i}function $S(){return $l(g0).scale(131.154).center([0,13.9389])}var sr=1.340264,ur=-.081106,lr=893e-6,cr=.003796,mo=Ne(3)/2,LS=12;function Dl(e,n){var t=nn(mo*F(n)),a=t*t,r=a*a*a;return[e*U(t)/(mo*(sr+3*ur*a+r*(7*lr+9*cr*a))),t*(sr+ur*a+r*(lr+cr*a))]}Dl.invert=function(e,n){for(var t=n,a=t*t,r=a*a*a,i=0,o,u,l;i<LS&&(u=t*(sr+ur*a+r*(lr+cr*a))-n,l=sr+3*ur*a+r*(7*lr+9*cr*a),t-=o=u/l,a=t*t,r=a*a*a,!(ie(o)<Ar));++i);return[mo*e*(sr+3*ur*a+r*(7*lr+9*cr*a))/U(t),nn(F(t)/mo)]};function KS(){return qn(Dl).scale(177.158)}function Hl(e,n){var t=U(n),a=U(e)*t;return[t*F(e)/a,F(n)/a]}Hl.invert=Hr(Ia);function DS(){return qn(Hl).scale(144.049).clipAngle(60)}function HS(){var e=1,n=0,t=0,a=1,r=1,i=0,o,u,l=null,c,h,f,s=1,d=1,g=Dr({point:function(b,w){var M=v([b,w]);this.stream.point(M[0],M[1])}}),p=xr,m,y;function k(){return s=e*a,d=e*r,m=y=null,v}function v(b){var w=b[0]*s,M=b[1]*d;if(i){var x=M*o-w*u;w=w*o+M*u,M=x}return[w+n,M+t]}return v.invert=function(b){var w=b[0]-n,M=b[1]-t;if(i){var x=M*o+w*u;w=w*o-M*u,M=x}return[w/s,M/d]},v.stream=function(b){return m&&y===b?m:m=g(p(y=b))},v.postclip=function(b){return arguments.length?(p=b,l=c=h=f=null,k()):p},v.clipExtent=function(b){return arguments.length?(p=b==null?(l=c=h=f=null,xr):Fo(l=+b[0][0],c=+b[0][1],h=+b[1][0],f=+b[1][1]),k()):l==null?null:[[l,c],[h,f]]},v.scale=function(b){return arguments.length?(e=+b,k()):e},v.translate=function(b){return arguments.length?(n=+b[0],t=+b[1],k()):[n,t]},v.angle=function(b){return arguments.length?(i=b%360*J,u=F(i),o=U(i),k()):i*de},v.reflectX=function(b){return arguments.length?(a=b?-1:1,k()):a<0},v.reflectY=function(b){return arguments.length?(r=b?-1:1,k()):r<0},v.fitExtent=function(b,w){return Uo(v,b,w)},v.fitSize=function(b,w){return Rl(v,b,w)},v.fitWidth=function(b,w){return Bl(v,b,w)},v.fitHeight=function(b,w){return Pl(v,b,w)},v}function Ol(e,n){var t=n*n,a=t*t;return[e*(.8707-.131979*t+a*(-.013791+a*(.003971*t-.001529*a))),n*(1.007226+t*(.015085+a*(-.044475+.028874*t-.005916*a)))]}Ol.invert=function(e,n){var t=n,a=25,r;do{var i=t*t,o=i*i;t-=r=(t*(1.007226+i*(.015085+o*(-.044475+.028874*i-.005916*o)))-n)/(1.007226+i*(.015085*3+o*(-.044475*7+.028874*9*i-.005916*11*o)))}while(ie(r)>X&&--a>0);return[e/(.8707+(i=t*t)*(-.131979+i*(-.013791+i*i*i*(.003971-.001529*i)))),t]};function OS(){return qn(Ol).scale(175.295)}function Gl(e,n){return[U(n)*F(e),F(n)]}Gl.invert=Hr(nn);function GS(){return qn(Gl).scale(249.5).clipAngle(90+X)}function ql(e,n){var t=U(n),a=1+U(e)*t;return[t*F(e)/a,F(n)/a]}ql.invert=Hr(function(e){return 2*Ia(e)});function qS(){return qn(ql).scale(250).clipAngle(142)}function Fl(e,n){return[ji(zl((Se+n)/2)),-e]}Fl.invert=function(e,n){return[-n,2*Ia(Eg(e))-Se]};function FS(){var e=f0(Fl),n=e.center,t=e.rotate;return e.center=function(a){return arguments.length?n([-a[1],a[0]]):(a=n(),[a[1],-a[0]])},e.rotate=function(a){return arguments.length?t([a[0],a[1],a.length>2?a[2]+90:90]):(a=t(),[a[0],a[1],a[2]-90])},t([0,0,90]).scale(159.155)}function US(e,n){return e.parent===n.parent?1:2}function jS(e){return e.reduce(YS,0)/e.length}function YS(e,n){return e+n.x}function VS(e){return 1+e.reduce(WS,0)}function WS(e,n){return Math.max(e,n.y)}function ZS(e){for(var n;n=e.children;)e=n[0];return e}function XS(e){for(var n;n=e.children;)e=n[n.length-1];return e}function QS(){var e=US,n=1,t=1,a=!1;function r(i){var o,u=0;i.eachAfter(function(s){var d=s.children;d?(s.x=jS(d),s.y=VS(d)):(s.x=o?u+=e(s,o):0,s.y=0,o=s)});var l=ZS(i),c=XS(i),h=l.x-e(l,c)/2,f=c.x+e(c,l)/2;return i.eachAfter(a?function(s){s.x=(s.x-i.x)*n,s.y=(i.y-s.y)*t}:function(s){s.x=(s.x-h)/(f-h)*n,s.y=(1-(i.y?s.y/i.y:1))*t})}return r.separation=function(i){return arguments.length?(e=i,r):e},r.size=function(i){return arguments.length?(a=!1,n=+i[0],t=+i[1],r):a?null:[n,t]},r.nodeSize=function(i){return arguments.length?(a=!0,n=+i[0],t=+i[1],r):a?[n,t]:null},r}function JS(e){var n=0,t=e.children,a=t&&t.length;if(!a)n=1;else for(;--a>=0;)n+=t[a].value;e.value=n}function e_(){return this.eachAfter(JS)}function n_(e,n){let t=-1;for(const a of this)e.call(n,a,++t,this);return this}function t_(e,n){for(var t=this,a=[t],r,i,o=-1;t=a.pop();)if(e.call(n,t,++o,this),r=t.children)for(i=r.length-1;i>=0;--i)a.push(r[i]);return this}function a_(e,n){for(var t=this,a=[t],r=[],i,o,u,l=-1;t=a.pop();)if(r.push(t),i=t.children)for(o=0,u=i.length;o<u;++o)a.push(i[o]);for(;t=r.pop();)e.call(n,t,++l,this);return this}function r_(e,n){let t=-1;for(const a of this)if(e.call(n,a,++t,this))return a}function i_(e){return this.eachAfter(function(n){for(var t=+e(n.data)||0,a=n.children,r=a&&a.length;--r>=0;)t+=a[r].value;n.value=t})}function o_(e){return this.eachBefore(function(n){n.children&&n.children.sort(e)})}function s_(e){for(var n=this,t=u_(n,e),a=[n];n!==t;)n=n.parent,a.push(n);for(var r=a.length;e!==t;)a.splice(r,0,e),e=e.parent;return a}function u_(e,n){if(e===n)return e;var t=e.ancestors(),a=n.ancestors(),r=null;for(e=t.pop(),n=a.pop();e===n;)r=e,e=t.pop(),n=a.pop();return r}function l_(){for(var e=this,n=[e];e=e.parent;)n.push(e);return n}function c_(){return Array.from(this)}function h_(){var e=[];return this.eachBefore(function(n){n.children||e.push(n)}),e}function f_(){var e=this,n=[];return e.each(function(t){t!==e&&n.push({source:t.parent,target:t})}),n}function*d_(){var e=this,n,t=[e],a,r,i;do for(n=t.reverse(),t=[];e=n.pop();)if(yield e,a=e.children)for(r=0,i=a.length;r<i;++r)t.push(a[r]);while(t.length)}function Ul(e,n){e instanceof Map?(e=[void 0,e],n===void 0&&(n=p_)):n===void 0&&(n=m_);for(var t=new Ht(e),a,r=[t],i,o,u,l;a=r.pop();)if((o=n(a.data))&&(l=(o=Array.from(o)).length))for(a.children=o,u=l-1;u>=0;--u)r.push(i=o[u]=new Ht(o[u])),i.parent=a,i.depth=a.depth+1;return t.eachBefore(m0)}function g_(){return Ul(this).eachBefore(y_)}function m_(e){return e.children}function p_(e){return Array.isArray(e)?e[1]:null}function y_(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function m0(e){var n=0;do e.height=n;while((e=e.parent)&&e.height<++n)}function Ht(e){this.data=e,this.depth=this.height=0,this.parent=null}Ht.prototype=Ul.prototype={constructor:Ht,count:e_,each:n_,eachAfter:a_,eachBefore:t_,find:r_,sum:i_,sort:o_,path:s_,ancestors:l_,descendants:c_,leaves:h_,links:f_,copy:g_,[Symbol.iterator]:d_};function zi(e){return e==null?null:p0(e)}function p0(e){if(typeof e!="function")throw new Error;return e}function _t(){return 0}function ia(e){return function(){return e}}const b_=1664525,v_=1013904223,jh=4294967296;function jl(){let e=1;return()=>(e=(b_*e+v_)%jh)/jh}function k_(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function w_(e,n){let t=e.length,a,r;for(;t;)r=n()*t--|0,a=e[t],e[t]=e[r],e[r]=a;return e}function M_(e){return y0(e,jl())}function y0(e,n){for(var t=0,a=(e=w_(Array.from(e),n)).length,r=[],i,o;t<a;)i=e[t],o&&b0(o,i)?++t:(o=__(r=S_(r,i)),t=0);return o}function S_(e,n){var t,a;if(Ks(n,e))return[n];for(t=0;t<e.length;++t)if(fi(n,e[t])&&Ks(tr(e[t],n),e))return[e[t],n];for(t=0;t<e.length-1;++t)for(a=t+1;a<e.length;++a)if(fi(tr(e[t],e[a]),n)&&fi(tr(e[t],n),e[a])&&fi(tr(e[a],n),e[t])&&Ks(v0(e[t],e[a],n),e))return[e[t],e[a],n];throw new Error}function fi(e,n){var t=e.r-n.r,a=n.x-e.x,r=n.y-e.y;return t<0||t*t<a*a+r*r}function b0(e,n){var t=e.r-n.r+Math.max(e.r,n.r,1)*1e-9,a=n.x-e.x,r=n.y-e.y;return t>0&&t*t>a*a+r*r}function Ks(e,n){for(var t=0;t<n.length;++t)if(!b0(e,n[t]))return!1;return!0}function __(e){switch(e.length){case 1:return A_(e[0]);case 2:return tr(e[0],e[1]);case 3:return v0(e[0],e[1],e[2])}}function A_(e){return{x:e.x,y:e.y,r:e.r}}function tr(e,n){var t=e.x,a=e.y,r=e.r,i=n.x,o=n.y,u=n.r,l=i-t,c=o-a,h=u-r,f=Math.sqrt(l*l+c*c);return{x:(t+i+l/f*h)/2,y:(a+o+c/f*h)/2,r:(f+r+u)/2}}function v0(e,n,t){var a=e.x,r=e.y,i=e.r,o=n.x,u=n.y,l=n.r,c=t.x,h=t.y,f=t.r,s=a-o,d=a-c,g=r-u,p=r-h,m=l-i,y=f-i,k=a*a+r*r-i*i,v=k-o*o-u*u+l*l,b=k-c*c-h*h+f*f,w=d*g-s*p,M=(g*b-p*v)/(w*2)-a,x=(p*m-g*y)/w,S=(d*v-s*b)/(w*2)-r,T=(s*y-d*m)/w,_=x*x+T*T-1,A=2*(i+M*x+S*T),R=M*M+S*S-i*i,N=-(Math.abs(_)>1e-6?(A+Math.sqrt(A*A-4*_*R))/(2*_):R/A);return{x:a+M+x*N,y:r+S+T*N,r:N}}function Yh(e,n,t){var a=e.x-n.x,r,i,o=e.y-n.y,u,l,c=a*a+o*o;c?(i=n.r+t.r,i*=i,l=e.r+t.r,l*=l,i>l?(r=(c+l-i)/(2*c),u=Math.sqrt(Math.max(0,l/c-r*r)),t.x=e.x-r*a-u*o,t.y=e.y-r*o+u*a):(r=(c+i-l)/(2*c),u=Math.sqrt(Math.max(0,i/c-r*r)),t.x=n.x+r*a-u*o,t.y=n.y+r*o+u*a)):(t.x=n.x+t.r,t.y=n.y)}function Vh(e,n){var t=e.r+n.r-1e-6,a=n.x-e.x,r=n.y-e.y;return t>0&&t*t>a*a+r*r}function Wh(e){var n=e._,t=e.next._,a=n.r+t.r,r=(n.x*t.r+t.x*n.r)/a,i=(n.y*t.r+t.y*n.r)/a;return r*r+i*i}function di(e){this._=e,this.next=null,this.previous=null}function k0(e,n){if(!(i=(e=k_(e)).length))return 0;var t,a,r,i,o,u,l,c,h,f,s;if(t=e[0],t.x=0,t.y=0,!(i>1))return t.r;if(a=e[1],t.x=-a.r,a.x=t.r,a.y=0,!(i>2))return t.r+a.r;Yh(a,t,r=e[2]),t=new di(t),a=new di(a),r=new di(r),t.next=r.previous=a,a.next=t.previous=r,r.next=a.previous=t;e:for(l=3;l<i;++l){Yh(t._,a._,r=e[l]),r=new di(r),c=a.next,h=t.previous,f=a._.r,s=t._.r;do if(f<=s){if(Vh(c._,r._)){a=c,t.next=a,a.previous=t,--l;continue e}f+=c._.r,c=c.next}else{if(Vh(h._,r._)){t=h,t.next=a,a.previous=t,--l;continue e}s+=h._.r,h=h.previous}while(c!==h.next);for(r.previous=t,r.next=a,t.next=a.previous=a=r,o=Wh(t);(r=r.next)!==a;)(u=Wh(r))<o&&(t=r,o=u);a=t.next}for(t=[a._],r=a;(r=r.next)!==a;)t.push(r._);for(r=y0(t,n),l=0;l<i;++l)t=e[l],t.x-=r.x,t.y-=r.y;return r.r}function x_(e){return k0(e,jl()),e}function T_(e){return Math.sqrt(e.value)}function z_(){var e=null,n=1,t=1,a=_t;function r(i){const o=jl();return i.x=n/2,i.y=t/2,e?i.eachBefore(Zh(e)).eachAfter(Ds(a,.5,o)).eachBefore(Xh(1)):i.eachBefore(Zh(T_)).eachAfter(Ds(_t,1,o)).eachAfter(Ds(a,i.r/Math.min(n,t),o)).eachBefore(Xh(Math.min(n,t)/(2*i.r))),i}return r.radius=function(i){return arguments.length?(e=zi(i),r):e},r.size=function(i){return arguments.length?(n=+i[0],t=+i[1],r):[n,t]},r.padding=function(i){return arguments.length?(a=typeof i=="function"?i:ia(+i),r):a},r}function Zh(e){return function(n){n.children||(n.r=Math.max(0,+e(n)||0))}}function Ds(e,n,t){return function(a){if(r=a.children){var r,i,o=r.length,u=e(a)*n||0,l;if(u)for(i=0;i<o;++i)r[i].r+=u;if(l=k0(r,t),u)for(i=0;i<o;++i)r[i].r-=u;a.r=l+u}}}function Xh(e){return function(n){var t=n.parent;n.r*=e,t&&(n.x=t.x+e*n.x,n.y=t.y+e*n.y)}}function w0(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function Gr(e,n,t,a,r){for(var i=e.children,o,u=-1,l=i.length,c=e.value&&(a-n)/e.value;++u<l;)o=i[u],o.y0=t,o.y1=r,o.x0=n,o.x1=n+=o.value*c}function C_(){var e=1,n=1,t=0,a=!1;function r(o){var u=o.height+1;return o.x0=o.y0=t,o.x1=e,o.y1=n/u,o.eachBefore(i(n,u)),a&&o.eachBefore(w0),o}function i(o,u){return function(l){l.children&&Gr(l,l.x0,o*(l.depth+1)/u,l.x1,o*(l.depth+2)/u);var c=l.x0,h=l.y0,f=l.x1-t,s=l.y1-t;f<c&&(c=f=(c+f)/2),s<h&&(h=s=(h+s)/2),l.x0=c,l.y0=h,l.x1=f,l.y1=s}}return r.round=function(o){return arguments.length?(a=!!o,r):a},r.size=function(o){return arguments.length?(e=+o[0],n=+o[1],r):[e,n]},r.padding=function(o){return arguments.length?(t=+o,r):t},r}var E_={depth:-1},Qh={},Hs={};function N_(e){return e.id}function R_(e){return e.parentId}function B_(){var e=N_,n=R_,t;function a(r){var i=Array.from(r),o=e,u=n,l,c,h,f,s,d,g,p,m=new Map;if(t!=null){const y=i.map((b,w)=>P_(t(b,w,r))),k=y.map(Jh),v=new Set(y).add("");for(const b of k)v.has(b)||(v.add(b),y.push(b),k.push(Jh(b)),i.push(Hs));o=(b,w)=>y[w],u=(b,w)=>k[w]}for(h=0,l=i.length;h<l;++h)c=i[h],d=i[h]=new Ht(c),(g=o(c,h,r))!=null&&(g+="")&&(p=d.id=g,m.set(p,m.has(p)?Qh:d)),(g=u(c,h,r))!=null&&(g+="")&&(d.parent=g);for(h=0;h<l;++h)if(d=i[h],g=d.parent){if(s=m.get(g),!s)throw new Error("missing: "+g);if(s===Qh)throw new Error("ambiguous: "+g);s.children?s.children.push(d):s.children=[d],d.parent=s}else{if(f)throw new Error("multiple roots");f=d}if(!f)throw new Error("no root");if(t!=null){for(;f.data===Hs&&f.children.length===1;)f=f.children[0],--l;for(let y=i.length-1;y>=0&&(d=i[y],d.data===Hs);--y)d.data=null}if(f.parent=E_,f.eachBefore(function(y){y.depth=y.parent.depth+1,--l}).eachBefore(m0),f.parent=null,l>0)throw new Error("cycle");return f}return a.id=function(r){return arguments.length?(e=zi(r),a):e},a.parentId=function(r){return arguments.length?(n=zi(r),a):n},a.path=function(r){return arguments.length?(t=zi(r),a):t},a}function P_(e){e=`${e}`;let n=e.length;return qu(e,n-1)&&!qu(e,n-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function Jh(e){let n=e.length;if(n<2)return"";for(;--n>1&&!qu(e,n););return e.slice(0,n)}function qu(e,n){if(e[n]==="/"){let t=0;for(;n>0&&e[--n]==="\\";)++t;if((t&1)===0)return!0}return!1}function I_(e,n){return e.parent===n.parent?1:2}function Os(e){var n=e.children;return n?n[0]:e.t}function Gs(e){var n=e.children;return n?n[n.length-1]:e.t}function $_(e,n,t){var a=t/(n.i-e.i);n.c-=a,n.s+=t,e.c+=a,n.z+=t,n.m+=t}function L_(e){for(var n=0,t=0,a=e.children,r=a.length,i;--r>=0;)i=a[r],i.z+=n,i.m+=n,n+=i.s+(t+=i.c)}function K_(e,n,t){return e.a.parent===n.parent?e.a:t}function Ci(e,n){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=n}Ci.prototype=Object.create(Ht.prototype);function D_(e){for(var n=new Ci(e,0),t,a=[n],r,i,o,u;t=a.pop();)if(i=t._.children)for(t.children=new Array(u=i.length),o=u-1;o>=0;--o)a.push(r=t.children[o]=new Ci(i[o],o)),r.parent=t;return(n.parent=new Ci(null,0)).children=[n],n}function H_(){var e=I_,n=1,t=1,a=null;function r(c){var h=D_(c);if(h.eachAfter(i),h.parent.m=-h.z,h.eachBefore(o),a)c.eachBefore(l);else{var f=c,s=c,d=c;c.eachBefore(function(k){k.x<f.x&&(f=k),k.x>s.x&&(s=k),k.depth>d.depth&&(d=k)});var g=f===s?1:e(f,s)/2,p=g-f.x,m=n/(s.x+g+p),y=t/(d.depth||1);c.eachBefore(function(k){k.x=(k.x+p)*m,k.y=k.depth*y})}return c}function i(c){var h=c.children,f=c.parent.children,s=c.i?f[c.i-1]:null;if(h){L_(c);var d=(h[0].z+h[h.length-1].z)/2;s?(c.z=s.z+e(c._,s._),c.m=c.z-d):c.z=d}else s&&(c.z=s.z+e(c._,s._));c.parent.A=u(c,s,c.parent.A||f[0])}function o(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function u(c,h,f){if(h){for(var s=c,d=c,g=h,p=s.parent.children[0],m=s.m,y=d.m,k=g.m,v=p.m,b;g=Gs(g),s=Os(s),g&&s;)p=Os(p),d=Gs(d),d.a=c,b=g.z+k-s.z-m+e(g._,s._),b>0&&($_(K_(g,c,f),c,b),m+=b,y+=b),k+=g.m,m+=s.m,v+=p.m,y+=d.m;g&&!Gs(d)&&(d.t=g,d.m+=k-y),s&&!Os(p)&&(p.t=s,p.m+=m-v,f=c)}return f}function l(c){c.x*=n,c.y=c.depth*t}return r.separation=function(c){return arguments.length?(e=c,r):e},r.size=function(c){return arguments.length?(a=!1,n=+c[0],t=+c[1],r):a?null:[n,t]},r.nodeSize=function(c){return arguments.length?(a=!0,n=+c[0],t=+c[1],r):a?[n,t]:null},r}function jo(e,n,t,a,r){for(var i=e.children,o,u=-1,l=i.length,c=e.value&&(r-t)/e.value;++u<l;)o=i[u],o.x0=n,o.x1=a,o.y0=t,o.y1=t+=o.value*c}var M0=(1+Math.sqrt(5))/2;function S0(e,n,t,a,r,i){for(var o=[],u=n.children,l,c,h=0,f=0,s=u.length,d,g,p=n.value,m,y,k,v,b,w,M;h<s;){d=r-t,g=i-a;do m=u[f++].value;while(!m&&f<s);for(y=k=m,w=Math.max(g/d,d/g)/(p*e),M=m*m*w,b=Math.max(k/M,M/y);f<s;++f){if(m+=c=u[f].value,c<y&&(y=c),c>k&&(k=c),M=m*m*w,v=Math.max(k/M,M/y),v>b){m-=c;break}b=v}o.push(l={value:m,dice:d<g,children:u.slice(h,f)}),l.dice?Gr(l,t,a,r,p?a+=g*m/p:i):jo(l,t,a,p?t+=d*m/p:r,i),p-=m,h=f}return o}const _0=(function e(n){function t(a,r,i,o,u){S0(n,a,r,i,o,u)}return t.ratio=function(a){return e((a=+a)>1?a:1)},t})(M0);function O_(){var e=_0,n=!1,t=1,a=1,r=[0],i=_t,o=_t,u=_t,l=_t,c=_t;function h(s){return s.x0=s.y0=0,s.x1=t,s.y1=a,s.eachBefore(f),r=[0],n&&s.eachBefore(w0),s}function f(s){var d=r[s.depth],g=s.x0+d,p=s.y0+d,m=s.x1-d,y=s.y1-d;m<g&&(g=m=(g+m)/2),y<p&&(p=y=(p+y)/2),s.x0=g,s.y0=p,s.x1=m,s.y1=y,s.children&&(d=r[s.depth+1]=i(s)/2,g+=c(s)-d,p+=o(s)-d,m-=u(s)-d,y-=l(s)-d,m<g&&(g=m=(g+m)/2),y<p&&(p=y=(p+y)/2),e(s,g,p,m,y))}return h.round=function(s){return arguments.length?(n=!!s,h):n},h.size=function(s){return arguments.length?(t=+s[0],a=+s[1],h):[t,a]},h.tile=function(s){return arguments.length?(e=p0(s),h):e},h.padding=function(s){return arguments.length?h.paddingInner(s).paddingOuter(s):h.paddingInner()},h.paddingInner=function(s){return arguments.length?(i=typeof s=="function"?s:ia(+s),h):i},h.paddingOuter=function(s){return arguments.length?h.paddingTop(s).paddingRight(s).paddingBottom(s).paddingLeft(s):h.paddingTop()},h.paddingTop=function(s){return arguments.length?(o=typeof s=="function"?s:ia(+s),h):o},h.paddingRight=function(s){return arguments.length?(u=typeof s=="function"?s:ia(+s),h):u},h.paddingBottom=function(s){return arguments.length?(l=typeof s=="function"?s:ia(+s),h):l},h.paddingLeft=function(s){return arguments.length?(c=typeof s=="function"?s:ia(+s),h):c},h}function G_(e,n,t,a,r){var i=e.children,o,u=i.length,l,c=new Array(u+1);for(c[0]=l=o=0;o<u;++o)c[o+1]=l+=i[o].value;h(0,u,e.value,n,t,a,r);function h(f,s,d,g,p,m,y){if(f>=s-1){var k=i[f];k.x0=g,k.y0=p,k.x1=m,k.y1=y;return}for(var v=c[f],b=d/2+v,w=f+1,M=s-1;w<M;){var x=w+M>>>1;c[x]<b?w=x+1:M=x}b-c[w-1]<c[w]-b&&f+1<w&&--w;var S=c[w]-v,T=d-S;if(m-g>y-p){var _=d?(g*T+m*S)/d:m;h(f,w,S,g,p,_,y),h(w,s,T,_,p,m,y)}else{var A=d?(p*T+y*S)/d:y;h(f,w,S,g,p,m,A),h(w,s,T,g,A,m,y)}}}function q_(e,n,t,a,r){(e.depth&1?jo:Gr)(e,n,t,a,r)}const F_=(function e(n){function t(a,r,i,o,u){if((l=a._squarify)&&l.ratio===n)for(var l,c,h,f,s=-1,d,g=l.length,p=a.value;++s<g;){for(c=l[s],h=c.children,f=c.value=0,d=h.length;f<d;++f)c.value+=h[f].value;c.dice?Gr(c,r,i,o,p?i+=(u-i)*c.value/p:u):jo(c,r,i,p?r+=(o-r)*c.value/p:o,u),p-=c.value}else a._squarify=l=S0(n,a,r,i,o,u),l.ratio=n}return t.ratio=function(a){return e((a=+a)>1?a:1)},t})(M0);function A0(e){for(var n=-1,t=e.length,a,r=e[t-1],i=0;++n<t;)a=r,r=e[n],i+=a[1]*r[0]-a[0]*r[1];return i/2}function U_(e){for(var n=-1,t=e.length,a=0,r=0,i,o=e[t-1],u,l=0;++n<t;)i=o,o=e[n],l+=u=i[0]*o[1]-o[0]*i[1],a+=(i[0]+o[0])*u,r+=(i[1]+o[1])*u;return l*=3,[a/l,r/l]}function j_(e,n,t){return(n[0]-e[0])*(t[1]-e[1])-(n[1]-e[1])*(t[0]-e[0])}function Y_(e,n){return e[0]-n[0]||e[1]-n[1]}function ef(e){const n=e.length,t=[0,1];let a=2,r;for(r=2;r<n;++r){for(;a>1&&j_(e[t[a-2]],e[t[a-1]],e[r])<=0;)--a;t[a++]=r}return t.slice(0,a)}function V_(e){if((t=e.length)<3)return null;var n,t,a=new Array(t),r=new Array(t);for(n=0;n<t;++n)a[n]=[+e[n][0],+e[n][1],n];for(a.sort(Y_),n=0;n<t;++n)r[n]=[a[n][0],-a[n][1]];var i=ef(a),o=ef(r),u=o[0]===i[0],l=o[o.length-1]===i[i.length-1],c=[];for(n=i.length-1;n>=0;--n)c.push(e[a[i[n]][2]]);for(n=+u;n<o.length-l;++n)c.push(e[a[o[n]][2]]);return c}function Fu(e,n){for(var t=e.length,a=e[t-1],r=n[0],i=n[1],o=a[0],u=a[1],l,c,h=!1,f=0;f<t;++f)a=e[f],l=a[0],c=a[1],c>i!=u>i&&r<(o-l)*(i-c)/(u-c)+l&&(h=!h),o=l,u=c;return h}function W_(e){for(var n=-1,t=e.length,a=e[t-1],r,i,o=a[0],u=a[1],l=0;++n<t;)r=o,i=u,a=e[n],o=a[0],u=a[1],r-=o,i-=u,l+=Math.hypot(r,i);return l}const Ie=Math.random,Z_=(function e(n){function t(a,r){return a=a==null?0:+a,r=r==null?1:+r,arguments.length===1?(r=a,a=0):r-=a,function(){return n()*r+a}}return t.source=e,t})(Ie),X_=(function e(n){function t(a,r){return arguments.length<2&&(r=a,a=0),a=Math.floor(a),r=Math.floor(r)-a,function(){return Math.floor(n()*r+a)}}return t.source=e,t})(Ie),Yo=(function e(n){function t(a,r){var i,o;return a=a==null?0:+a,r=r==null?1:+r,function(){var u;if(i!=null)u=i,i=null;else do i=n()*2-1,u=n()*2-1,o=i*i+u*u;while(!o||o>1);return a+r*u*Math.sqrt(-2*Math.log(o)/o)}}return t.source=e,t})(Ie),Q_=(function e(n){var t=Yo.source(n);function a(){var r=t.apply(this,arguments);return function(){return Math.exp(r())}}return a.source=e,a})(Ie),x0=(function e(n){function t(a){return(a=+a)<=0?()=>0:function(){for(var r=0,i=a;i>1;--i)r+=n();return r+i*n()}}return t.source=e,t})(Ie),J_=(function e(n){var t=x0.source(n);function a(r){if((r=+r)==0)return n;var i=t(r);return function(){return i()/r}}return a.source=e,a})(Ie),eA=(function e(n){function t(a){return function(){return-Math.log1p(-n())/a}}return t.source=e,t})(Ie),nA=(function e(n){function t(a){if((a=+a)<0)throw new RangeError("invalid alpha");return a=1/-a,function(){return Math.pow(1-n(),a)}}return t.source=e,t})(Ie),tA=(function e(n){function t(a){if((a=+a)<0||a>1)throw new RangeError("invalid p");return function(){return Math.floor(n()+a)}}return t.source=e,t})(Ie),T0=(function e(n){function t(a){if((a=+a)<0||a>1)throw new RangeError("invalid p");return a===0?()=>1/0:a===1?()=>1:(a=Math.log1p(-a),function(){return 1+Math.floor(Math.log1p(-n())/a)})}return t.source=e,t})(Ie),Yl=(function e(n){var t=Yo.source(n)();function a(r,i){if((r=+r)<0)throw new RangeError("invalid k");if(r===0)return()=>0;if(i=i==null?1:+i,r===1)return()=>-Math.log1p(-n())*i;var o=(r<1?r+1:r)-1/3,u=1/(3*Math.sqrt(o)),l=r<1?()=>Math.pow(n(),1/r):()=>1;return function(){do{do var c=t(),h=1+u*c;while(h<=0);h*=h*h;var f=1-n()}while(f>=1-.0331*c*c*c*c&&Math.log(f)>=.5*c*c+o*(1-h+Math.log(h)));return o*h*l()*i}}return a.source=e,a})(Ie),z0=(function e(n){var t=Yl.source(n);function a(r,i){var o=t(r),u=t(i);return function(){var l=o();return l===0?0:l/(l+u())}}return a.source=e,a})(Ie),C0=(function e(n){var t=T0.source(n),a=z0.source(n);function r(i,o){return i=+i,(o=+o)>=1?()=>i:o<=0?()=>0:function(){for(var u=0,l=i,c=o;l*c>16&&l*(1-c)>16;){var h=Math.floor((l+1)*c),f=a(h,l-h+1)();f<=c?(u+=h,l-=h,c=(c-f)/(1-f)):(l=h-1,c/=f)}for(var s=c<.5,d=s?c:1-c,g=t(d),p=g(),m=0;p<=l;++m)p+=g();return u+(s?m:l-m)}}return r.source=e,r})(Ie),aA=(function e(n){function t(a,r,i){var o;return(a=+a)==0?o=u=>-Math.log(u):(a=1/a,o=u=>Math.pow(u,a)),r=r==null?0:+r,i=i==null?1:+i,function(){return r+i*o(-Math.log1p(-n()))}}return t.source=e,t})(Ie),rA=(function e(n){function t(a,r){return a=a==null?0:+a,r=r==null?1:+r,function(){return a+r*Math.tan(Math.PI*n())}}return t.source=e,t})(Ie),iA=(function e(n){function t(a,r){return a=a==null?0:+a,r=r==null?1:+r,function(){var i=n();return a+r*Math.log(i/(1-i))}}return t.source=e,t})(Ie),oA=(function e(n){var t=Yl.source(n),a=C0.source(n);function r(i){return function(){for(var o=0,u=i;u>16;){var l=Math.floor(.875*u),c=t(l)();if(c>u)return o+a(l-1,u/c)();o+=l,u-=c}for(var h=-Math.log1p(-n()),f=0;h<=u;++f)h-=Math.log1p(-n());return o+f}}return r.source=e,r})(Ie),sA=1664525,uA=1013904223,nf=1/4294967296;function lA(e=Math.random()){let n=(0<=e&&e<1?e/nf:Math.abs(e))|0;return()=>(n=sA*n+uA|0,nf*(n>>>0))}function wn(e,n){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(n).domain(e);break}return this}function at(e,n){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof n=="function"?this.interpolator(n):this.range(n);break}}return this}const Uu=Symbol("implicit");function Vl(){var e=new mr,n=[],t=[],a=Uu;function r(i){let o=e.get(i);if(o===void 0){if(a!==Uu)return a;e.set(i,o=n.push(i)-1)}return t[o%t.length]}return r.domain=function(i){if(!arguments.length)return n.slice();n=[],e=new mr;for(const o of i)e.has(o)||e.set(o,n.push(o)-1);return r},r.range=function(i){return arguments.length?(t=Array.from(i),r):t.slice()},r.unknown=function(i){return arguments.length?(a=i,r):a},r.copy=function(){return Vl(n,t).unknown(a)},wn.apply(r,arguments),r}function Wl(){var e=Vl().unknown(void 0),n=e.domain,t=e.range,a=0,r=1,i,o,u=!1,l=0,c=0,h=.5;delete e.unknown;function f(){var s=n().length,d=r<a,g=d?r:a,p=d?a:r;i=(p-g)/Math.max(1,s-l+c*2),u&&(i=Math.floor(i)),g+=(p-g-i*(s-l))*h,o=i*(1-l),u&&(g=Math.round(g),o=Math.round(o));var m=Oe(s).map(function(y){return g+i*y});return t(d?m.reverse():m)}return e.domain=function(s){return arguments.length?(n(s),f()):n()},e.range=function(s){return arguments.length?([a,r]=s,a=+a,r=+r,f()):[a,r]},e.rangeRound=function(s){return[a,r]=s,a=+a,r=+r,u=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(s){return arguments.length?(u=!!s,f()):u},e.padding=function(s){return arguments.length?(l=Math.min(1,c=+s),f()):l},e.paddingInner=function(s){return arguments.length?(l=Math.min(1,s),f()):l},e.paddingOuter=function(s){return arguments.length?(c=+s,f()):c},e.align=function(s){return arguments.length?(h=Math.max(0,Math.min(1,s)),f()):h},e.copy=function(){return Wl(n(),[a,r]).round(u).paddingInner(l).paddingOuter(c).align(h)},wn.apply(f(),arguments)}function E0(e){var n=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return E0(n())},e}function cA(){return E0(Wl.apply(null,arguments).paddingInner(1))}function hA(e){return function(){return e}}function po(e){return+e}var tf=[0,1];function Xe(e){return e}function ju(e,n){return(n-=e=+e)?function(t){return(t-e)/n}:hA(isNaN(n)?NaN:.5)}function fA(e,n){var t;return e>n&&(t=e,e=n,n=t),function(a){return Math.max(e,Math.min(n,a))}}function dA(e,n,t){var a=e[0],r=e[1],i=n[0],o=n[1];return r<a?(a=ju(r,a),i=t(o,i)):(a=ju(a,r),i=t(i,o)),function(u){return i(a(u))}}function gA(e,n,t){var a=Math.min(e.length,n.length)-1,r=new Array(a),i=new Array(a),o=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),n=n.slice().reverse());++o<a;)r[o]=ju(e[o],e[o+1]),i[o]=t(n[o],n[o+1]);return function(u){var l=ht(e,u,1,a)-1;return i[l](r[l](u))}}function qr(e,n){return n.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Vo(){var e=tf,n=tf,t=tt,a,r,i,o=Xe,u,l,c;function h(){var s=Math.min(e.length,n.length);return o!==Xe&&(o=fA(e[0],e[s-1])),u=s>2?gA:dA,l=c=null,f}function f(s){return s==null||isNaN(s=+s)?i:(l||(l=u(e.map(a),n,t)))(a(o(s)))}return f.invert=function(s){return o(r((c||(c=u(n,e.map(a),mn)))(s)))},f.domain=function(s){return arguments.length?(e=Array.from(s,po),h()):e.slice()},f.range=function(s){return arguments.length?(n=Array.from(s),h()):n.slice()},f.rangeRound=function(s){return n=Array.from(s),t=Io,h()},f.clamp=function(s){return arguments.length?(o=s?!0:Xe,h()):o!==Xe},f.interpolate=function(s){return arguments.length?(t=s,h()):t},f.unknown=function(s){return arguments.length?(i=s,f):i},function(s,d){return a=s,r=d,h()}}function Zl(){return Vo()(Xe,Xe)}function N0(e,n,t,a){var r=Bi(e,n,t),i;switch(a=Sa(a??",f"),a.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(n));return a.precision==null&&!isNaN(i=zg(r,o))&&(a.precision=i),Tl(a,o)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(i=Cg(r,Math.max(Math.abs(e),Math.abs(n))))&&(a.precision=i-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(i=Tg(r))&&(a.precision=i-(a.type==="%")*2);break}}return qo(a)}function bt(e){var n=e.domain;return e.ticks=function(t){var a=n();return Bt(a[0],a[a.length-1],t??10)},e.tickFormat=function(t,a){var r=n();return N0(r[0],r[r.length-1],t??10,a)},e.nice=function(t){t==null&&(t=10);var a=n(),r=0,i=a.length-1,o=a[r],u=a[i],l,c,h=10;for(u<o&&(c=o,o=u,u=c,c=r,r=i,i=c);h-- >0;){if(c=Pt(o,u,t),c===l)return a[r]=o,a[i]=u,n(a);if(c>0)o=Math.floor(o/c)*c,u=Math.ceil(u/c)*c;else if(c<0)o=Math.ceil(o*c)/c,u=Math.floor(u*c)/c;else break;l=c}return e},e}function R0(){var e=Zl();return e.copy=function(){return qr(e,R0())},wn.apply(e,arguments),bt(e)}function B0(e){var n;function t(a){return a==null||isNaN(a=+a)?n:a}return t.invert=t,t.domain=t.range=function(a){return arguments.length?(e=Array.from(a,po),t):e.slice()},t.unknown=function(a){return arguments.length?(n=a,t):n},t.copy=function(){return B0(e).unknown(n)},e=arguments.length?Array.from(e,po):[0,1],bt(t)}function P0(e,n){e=e.slice();var t=0,a=e.length-1,r=e[t],i=e[a],o;return i<r&&(o=t,t=a,a=o,o=r,r=i,i=o),e[t]=n.floor(r),e[a]=n.ceil(i),e}function af(e){return Math.log(e)}function rf(e){return Math.exp(e)}function mA(e){return-Math.log(-e)}function pA(e){return-Math.exp(-e)}function yA(e){return isFinite(e)?+("1e"+e):e<0?0:e}function bA(e){return e===10?yA:e===Math.E?Math.exp:n=>Math.pow(e,n)}function vA(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),n=>Math.log(n)/e)}function of(e){return(n,t)=>-e(-n,t)}function Xl(e){const n=e(af,rf),t=n.domain;let a=10,r,i;function o(){return r=vA(a),i=bA(a),t()[0]<0?(r=of(r),i=of(i),e(mA,pA)):e(af,rf),n}return n.base=function(u){return arguments.length?(a=+u,o()):a},n.domain=function(u){return arguments.length?(t(u),o()):t()},n.ticks=u=>{const l=t();let c=l[0],h=l[l.length-1];const f=h<c;f&&([c,h]=[h,c]);let s=r(c),d=r(h),g,p;const m=u==null?10:+u;let y=[];if(!(a%1)&&d-s<m){if(s=Math.floor(s),d=Math.ceil(d),c>0){for(;s<=d;++s)for(g=1;g<a;++g)if(p=s<0?g/i(-s):g*i(s),!(p<c)){if(p>h)break;y.push(p)}}else for(;s<=d;++s)for(g=a-1;g>=1;--g)if(p=s>0?g/i(-s):g*i(s),!(p<c)){if(p>h)break;y.push(p)}y.length*2<m&&(y=Bt(c,h,m))}else y=Bt(s,d,Math.min(d-s,m)).map(i);return f?y.reverse():y},n.tickFormat=(u,l)=>{if(u==null&&(u=10),l==null&&(l=a===10?"s":","),typeof l!="function"&&(!(a%1)&&(l=Sa(l)).precision==null&&(l.trim=!0),l=qo(l)),u===1/0)return l;const c=Math.max(1,a*u/n.ticks().length);return h=>{let f=h/i(Math.round(r(h)));return f*a<a-.5&&(f*=a),f<=c?l(h):""}},n.nice=()=>t(P0(t(),{floor:u=>i(Math.floor(r(u))),ceil:u=>i(Math.ceil(r(u)))})),n}function I0(){const e=Xl(Vo()).domain([1,10]);return e.copy=()=>qr(e,I0()).base(e.base()),wn.apply(e,arguments),e}function sf(e){return function(n){return Math.sign(n)*Math.log1p(Math.abs(n/e))}}function uf(e){return function(n){return Math.sign(n)*Math.expm1(Math.abs(n))*e}}function Ql(e){var n=1,t=e(sf(n),uf(n));return t.constant=function(a){return arguments.length?e(sf(n=+a),uf(n)):n},bt(t)}function $0(){var e=Ql(Vo());return e.copy=function(){return qr(e,$0()).constant(e.constant())},wn.apply(e,arguments)}function lf(e){return function(n){return n<0?-Math.pow(-n,e):Math.pow(n,e)}}function kA(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function wA(e){return e<0?-e*e:e*e}function Jl(e){var n=e(Xe,Xe),t=1;function a(){return t===1?e(Xe,Xe):t===.5?e(kA,wA):e(lf(t),lf(1/t))}return n.exponent=function(r){return arguments.length?(t=+r,a()):t},bt(n)}function ec(){var e=Jl(Vo());return e.copy=function(){return qr(e,ec()).exponent(e.exponent())},wn.apply(e,arguments),e}function MA(){return ec.apply(null,arguments).exponent(.5)}function cf(e){return Math.sign(e)*e*e}function SA(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function L0(){var e=Zl(),n=[0,1],t=!1,a;function r(i){var o=SA(e(i));return isNaN(o)?a:t?Math.round(o):o}return r.invert=function(i){return e.invert(cf(i))},r.domain=function(i){return arguments.length?(e.domain(i),r):e.domain()},r.range=function(i){return arguments.length?(e.range((n=Array.from(i,po)).map(cf)),r):n.slice()},r.rangeRound=function(i){return r.range(i).round(!0)},r.round=function(i){return arguments.length?(t=!!i,r):t},r.clamp=function(i){return arguments.length?(e.clamp(i),r):e.clamp()},r.unknown=function(i){return arguments.length?(a=i,r):a},r.copy=function(){return L0(e.domain(),n).round(t).clamp(e.clamp()).unknown(a)},wn.apply(r,arguments),bt(r)}function K0(){var e=[],n=[],t=[],a;function r(){var o=0,u=Math.max(1,n.length);for(t=new Array(u-1);++o<u;)t[o-1]=hd(e,o/u);return i}function i(o){return o==null||isNaN(o=+o)?a:n[ht(t,o)]}return i.invertExtent=function(o){var u=n.indexOf(o);return u<0?[NaN,NaN]:[u>0?t[u-1]:e[0],u<t.length?t[u]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let u of o)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(ke),r()},i.range=function(o){return arguments.length?(n=Array.from(o),r()):n.slice()},i.unknown=function(o){return arguments.length?(a=o,i):a},i.quantiles=function(){return t.slice()},i.copy=function(){return K0().domain(e).range(n).unknown(a)},wn.apply(i,arguments)}function D0(){var e=0,n=1,t=1,a=[.5],r=[0,1],i;function o(l){return l!=null&&l<=l?r[ht(a,l,0,t)]:i}function u(){var l=-1;for(a=new Array(t);++l<t;)a[l]=((l+1)*n-(l-t)*e)/(t+1);return o}return o.domain=function(l){return arguments.length?([e,n]=l,e=+e,n=+n,u()):[e,n]},o.range=function(l){return arguments.length?(t=(r=Array.from(l)).length-1,u()):r.slice()},o.invertExtent=function(l){var c=r.indexOf(l);return c<0?[NaN,NaN]:c<1?[e,a[0]]:c>=t?[a[t-1],n]:[a[c-1],a[c]]},o.unknown=function(l){return arguments.length&&(i=l),o},o.thresholds=function(){return a.slice()},o.copy=function(){return D0().domain([e,n]).range(r).unknown(i)},wn.apply(bt(o),arguments)}function H0(){var e=[.5],n=[0,1],t,a=1;function r(i){return i!=null&&i<=i?n[ht(e,i,0,a)]:t}return r.domain=function(i){return arguments.length?(e=Array.from(i),a=Math.min(e.length,n.length-1),r):e.slice()},r.range=function(i){return arguments.length?(n=Array.from(i),a=Math.min(e.length,n.length-1),r):n.slice()},r.invertExtent=function(i){var o=n.indexOf(i);return[e[o-1],e[o]]},r.unknown=function(i){return arguments.length?(t=i,r):t},r.copy=function(){return H0().domain(e).range(n).unknown(t)},wn.apply(r,arguments)}const qs=new Date,Fs=new Date;function xe(e,n,t,a){function r(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return r.floor=i=>(e(i=new Date(+i)),i),r.ceil=i=>(e(i=new Date(i-1)),n(i,1),e(i),i),r.round=i=>{const o=r(i),u=r.ceil(i);return i-o<u-i?o:u},r.offset=(i,o)=>(n(i=new Date(+i),o==null?1:Math.floor(o)),i),r.range=(i,o,u)=>{const l=[];if(i=r.ceil(i),u=u==null?1:Math.floor(u),!(i<o)||!(u>0))return l;let c;do l.push(c=new Date(+i)),n(i,u),e(i);while(c<i&&i<o);return l},r.filter=i=>xe(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,u)=>{if(o>=o)if(u<0)for(;++u<=0;)for(;n(o,-1),!i(o););else for(;--u>=0;)for(;n(o,1),!i(o););}),t&&(r.count=(i,o)=>(qs.setTime(+i),Fs.setTime(+o),e(qs),e(Fs),Math.floor(t(qs,Fs))),r.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?r.filter(a?o=>a(o)%i===0:o=>r.count(0,o)%i===0):r)),r}const Ta=xe(()=>{},(e,n)=>{e.setTime(+e+n)},(e,n)=>n-e);Ta.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?xe(n=>{n.setTime(Math.floor(n/e)*e)},(n,t)=>{n.setTime(+n+t*e)},(n,t)=>(t-n)/e):Ta);const hf=Ta.range,Zn=1e3,bn=Zn*60,Xn=bn*60,nt=Xn*24,nc=nt*7,ff=nt*30,Us=nt*365,Qn=xe(e=>{e.setTime(e-e.getMilliseconds())},(e,n)=>{e.setTime(+e+n*Zn)},(e,n)=>(n-e)/Zn,e=>e.getUTCSeconds()),df=Qn.range,Wo=xe(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Zn)},(e,n)=>{e.setTime(+e+n*bn)},(e,n)=>(n-e)/bn,e=>e.getMinutes()),_A=Wo.range,Zo=xe(e=>{e.setUTCSeconds(0,0)},(e,n)=>{e.setTime(+e+n*bn)},(e,n)=>(n-e)/bn,e=>e.getUTCMinutes()),AA=Zo.range,Xo=xe(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Zn-e.getMinutes()*bn)},(e,n)=>{e.setTime(+e+n*Xn)},(e,n)=>(n-e)/Xn,e=>e.getHours()),xA=Xo.range,Qo=xe(e=>{e.setUTCMinutes(0,0,0)},(e,n)=>{e.setTime(+e+n*Xn)},(e,n)=>(n-e)/Xn,e=>e.getUTCHours()),TA=Qo.range,$a=xe(e=>e.setHours(0,0,0,0),(e,n)=>e.setDate(e.getDate()+n),(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*bn)/nt,e=>e.getDate()-1),zA=$a.range,Fr=xe(e=>{e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n)},(e,n)=>(n-e)/nt,e=>e.getUTCDate()-1),CA=Fr.range,tc=xe(e=>{e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n)},(e,n)=>(n-e)/nt,e=>Math.floor(e/nt)),EA=tc.range;function Yt(e){return xe(n=>{n.setDate(n.getDate()-(n.getDay()+7-e)%7),n.setHours(0,0,0,0)},(n,t)=>{n.setDate(n.getDate()+t*7)},(n,t)=>(t-n-(t.getTimezoneOffset()-n.getTimezoneOffset())*bn)/nc)}const za=Yt(0),Er=Yt(1),O0=Yt(2),G0=Yt(3),Ot=Yt(4),q0=Yt(5),F0=Yt(6),gf=za.range,NA=Er.range,RA=O0.range,BA=G0.range,PA=Ot.range,IA=q0.range,$A=F0.range;function Vt(e){return xe(n=>{n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-e)%7),n.setUTCHours(0,0,0,0)},(n,t)=>{n.setUTCDate(n.getUTCDate()+t*7)},(n,t)=>(t-n)/nc)}const Ca=Vt(0),Nr=Vt(1),U0=Vt(2),j0=Vt(3),Gt=Vt(4),Y0=Vt(5),V0=Vt(6),mf=Ca.range,LA=Nr.range,KA=U0.range,DA=j0.range,HA=Gt.range,OA=Y0.range,GA=V0.range,Jo=xe(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,n)=>{e.setMonth(e.getMonth()+n)},(e,n)=>n.getMonth()-e.getMonth()+(n.getFullYear()-e.getFullYear())*12,e=>e.getMonth()),qA=Jo.range,es=xe(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCMonth(e.getUTCMonth()+n)},(e,n)=>n.getUTCMonth()-e.getUTCMonth()+(n.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth()),FA=es.range,Hn=xe(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n)},(e,n)=>n.getFullYear()-e.getFullYear(),e=>e.getFullYear());Hn.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:xe(n=>{n.setFullYear(Math.floor(n.getFullYear()/e)*e),n.setMonth(0,1),n.setHours(0,0,0,0)},(n,t)=>{n.setFullYear(n.getFullYear()+t*e)});const UA=Hn.range,On=xe(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n)},(e,n)=>n.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());On.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:xe(n=>{n.setUTCFullYear(Math.floor(n.getUTCFullYear()/e)*e),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,t)=>{n.setUTCFullYear(n.getUTCFullYear()+t*e)});const jA=On.range;function W0(e,n,t,a,r,i){const o=[[Qn,1,Zn],[Qn,5,5*Zn],[Qn,15,15*Zn],[Qn,30,30*Zn],[i,1,bn],[i,5,5*bn],[i,15,15*bn],[i,30,30*bn],[r,1,Xn],[r,3,3*Xn],[r,6,6*Xn],[r,12,12*Xn],[a,1,nt],[a,2,2*nt],[t,1,nc],[n,1,ff],[n,3,3*ff],[e,1,Us]];function u(c,h,f){const s=h<c;s&&([c,h]=[h,c]);const d=f&&typeof f.range=="function"?f:l(c,h,f),g=d?d.range(c,+h+1):[];return s?g.reverse():g}function l(c,h,f){const s=Math.abs(h-c)/f,d=_o(([,,m])=>m).right(o,s);if(d===o.length)return e.every(Bi(c/Us,h/Us,f));if(d===0)return Ta.every(Math.max(Bi(c,h,f),1));const[g,p]=o[s/o[d-1][2]<o[d][2]/s?d-1:d];return g.every(p)}return[u,l]}const[Z0,X0]=W0(On,es,Ca,tc,Qo,Zo),[Q0,J0]=W0(Hn,Jo,za,$a,Xo,Wo);function js(e){if(0<=e.y&&e.y<100){var n=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return n.setFullYear(e.y),n}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Ys(e){if(0<=e.y&&e.y<100){var n=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return n.setUTCFullYear(e.y),n}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ga(e,n,t){return{y:e,m:n,d:t,H:0,M:0,S:0,L:0}}function em(e){var n=e.dateTime,t=e.date,a=e.time,r=e.periods,i=e.days,o=e.shortDays,u=e.months,l=e.shortMonths,c=qa(r),h=Fa(r),f=qa(i),s=Fa(i),d=qa(o),g=Fa(o),p=qa(u),m=Fa(u),y=qa(l),k=Fa(l),v={a:B,A:I,b:P,B:D,c:null,d:wf,e:wf,f:mx,g:Ax,G:Tx,H:fx,I:dx,j:gx,L:nm,m:px,M:yx,p:H,q:G,Q:_f,s:Af,S:bx,u:vx,U:kx,V:wx,w:Mx,W:Sx,x:null,X:null,y:_x,Y:xx,Z:zx,"%":Sf},b={a:W,A:Q,b:q,B:ce,c:null,d:Mf,e:Mf,f:Rx,g:Gx,G:Fx,H:Cx,I:Ex,j:Nx,L:am,m:Bx,M:Px,p:ee,q:he,Q:_f,s:Af,S:Ix,u:$x,U:Lx,V:Kx,w:Dx,W:Hx,x:null,X:null,y:Ox,Y:qx,Z:Ux,"%":Sf},w={a:_,A,b:R,B:N,c:z,d:vf,e:vf,f:ux,g:bf,G:yf,H:kf,I:kf,j:rx,L:sx,m:ax,M:ix,p:T,q:tx,Q:cx,s:hx,S:ox,u:XA,U:QA,V:JA,w:ZA,W:ex,x:E,X:C,y:bf,Y:yf,Z:nx,"%":lx};v.x=M(t,v),v.X=M(a,v),v.c=M(n,v),b.x=M(t,b),b.X=M(a,b),b.c=M(n,b);function M(O,Y){return function(ne){var K=[],ye=-1,se=0,Be=O.length,we,Z,me;for(ne instanceof Date||(ne=new Date(+ne));++ye<Be;)O.charCodeAt(ye)===37&&(K.push(O.slice(se,ye)),(Z=pf[we=O.charAt(++ye)])!=null?we=O.charAt(++ye):Z=we==="e"?" ":"0",(me=Y[we])&&(we=me(ne,Z)),K.push(we),se=ye+1);return K.push(O.slice(se,ye)),K.join("")}}function x(O,Y){return function(ne){var K=Ga(1900,void 0,1),ye=S(K,O,ne+="",0),se,Be;if(ye!=ne.length)return null;if("Q"in K)return new Date(K.Q);if("s"in K)return new Date(K.s*1e3+("L"in K?K.L:0));if(Y&&!("Z"in K)&&(K.Z=0),"p"in K&&(K.H=K.H%12+K.p*12),K.m===void 0&&(K.m="q"in K?K.q:0),"V"in K){if(K.V<1||K.V>53)return null;"w"in K||(K.w=1),"Z"in K?(se=Ys(Ga(K.y,0,1)),Be=se.getUTCDay(),se=Be>4||Be===0?Nr.ceil(se):Nr(se),se=Fr.offset(se,(K.V-1)*7),K.y=se.getUTCFullYear(),K.m=se.getUTCMonth(),K.d=se.getUTCDate()+(K.w+6)%7):(se=js(Ga(K.y,0,1)),Be=se.getDay(),se=Be>4||Be===0?Er.ceil(se):Er(se),se=$a.offset(se,(K.V-1)*7),K.y=se.getFullYear(),K.m=se.getMonth(),K.d=se.getDate()+(K.w+6)%7)}else("W"in K||"U"in K)&&("w"in K||(K.w="u"in K?K.u%7:"W"in K?1:0),Be="Z"in K?Ys(Ga(K.y,0,1)).getUTCDay():js(Ga(K.y,0,1)).getDay(),K.m=0,K.d="W"in K?(K.w+6)%7+K.W*7-(Be+5)%7:K.w+K.U*7-(Be+6)%7);return"Z"in K?(K.H+=K.Z/100|0,K.M+=K.Z%100,Ys(K)):js(K)}}function S(O,Y,ne,K){for(var ye=0,se=Y.length,Be=ne.length,we,Z;ye<se;){if(K>=Be)return-1;if(we=Y.charCodeAt(ye++),we===37){if(we=Y.charAt(ye++),Z=w[we in pf?Y.charAt(ye++):we],!Z||(K=Z(O,ne,K))<0)return-1}else if(we!=ne.charCodeAt(K++))return-1}return K}function T(O,Y,ne){var K=c.exec(Y.slice(ne));return K?(O.p=h.get(K[0].toLowerCase()),ne+K[0].length):-1}function _(O,Y,ne){var K=d.exec(Y.slice(ne));return K?(O.w=g.get(K[0].toLowerCase()),ne+K[0].length):-1}function A(O,Y,ne){var K=f.exec(Y.slice(ne));return K?(O.w=s.get(K[0].toLowerCase()),ne+K[0].length):-1}function R(O,Y,ne){var K=y.exec(Y.slice(ne));return K?(O.m=k.get(K[0].toLowerCase()),ne+K[0].length):-1}function N(O,Y,ne){var K=p.exec(Y.slice(ne));return K?(O.m=m.get(K[0].toLowerCase()),ne+K[0].length):-1}function z(O,Y,ne){return S(O,n,Y,ne)}function E(O,Y,ne){return S(O,t,Y,ne)}function C(O,Y,ne){return S(O,a,Y,ne)}function B(O){return o[O.getDay()]}function I(O){return i[O.getDay()]}function P(O){return l[O.getMonth()]}function D(O){return u[O.getMonth()]}function H(O){return r[+(O.getHours()>=12)]}function G(O){return 1+~~(O.getMonth()/3)}function W(O){return o[O.getUTCDay()]}function Q(O){return i[O.getUTCDay()]}function q(O){return l[O.getUTCMonth()]}function ce(O){return u[O.getUTCMonth()]}function ee(O){return r[+(O.getUTCHours()>=12)]}function he(O){return 1+~~(O.getUTCMonth()/3)}return{format:function(O){var Y=M(O+="",v);return Y.toString=function(){return O},Y},parse:function(O){var Y=x(O+="",!1);return Y.toString=function(){return O},Y},utcFormat:function(O){var Y=M(O+="",b);return Y.toString=function(){return O},Y},utcParse:function(O){var Y=x(O+="",!0);return Y.toString=function(){return O},Y}}}var pf={"-":"",_:" ",0:"0"},Re=/^\s*\d+/,YA=/^%/,VA=/[\\^$*+?|[\]().{}]/g;function ue(e,n,t){var a=e<0?"-":"",r=(a?-e:e)+"",i=r.length;return a+(i<t?new Array(t-i+1).join(n)+r:r)}function WA(e){return e.replace(VA,"\\$&")}function qa(e){return new RegExp("^(?:"+e.map(WA).join("|")+")","i")}function Fa(e){return new Map(e.map((n,t)=>[n.toLowerCase(),t]))}function ZA(e,n,t){var a=Re.exec(n.slice(t,t+1));return a?(e.w=+a[0],t+a[0].length):-1}function XA(e,n,t){var a=Re.exec(n.slice(t,t+1));return a?(e.u=+a[0],t+a[0].length):-1}function QA(e,n,t){var a=Re.exec(n.slice(t,t+2));return a?(e.U=+a[0],t+a[0].length):-1}function JA(e,n,t){var a=Re.exec(n.slice(t,t+2));return a?(e.V=+a[0],t+a[0].length):-1}function ex(e,n,t){var a=Re.exec(n.slice(t,t+2));return a?(e.W=+a[0],t+a[0].length):-1}function yf(e,n,t){var a=Re.exec(n.slice(t,t+4));return a?(e.y=+a[0],t+a[0].length):-1}function bf(e,n,t){var a=Re.exec(n.slice(t,t+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),t+a[0].length):-1}function nx(e,n,t){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(t,t+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),t+a[0].length):-1}function tx(e,n,t){var a=Re.exec(n.slice(t,t+1));return a?(e.q=a[0]*3-3,t+a[0].length):-1}function ax(e,n,t){var a=Re.exec(n.slice(t,t+2));return a?(e.m=a[0]-1,t+a[0].length):-1}function vf(e,n,t){var a=Re.exec(n.slice(t,t+2));return a?(e.d=+a[0],t+a[0].length):-1}function rx(e,n,t){var a=Re.exec(n.slice(t,t+3));return a?(e.m=0,e.d=+a[0],t+a[0].length):-1}function kf(e,n,t){var a=Re.exec(n.slice(t,t+2));return a?(e.H=+a[0],t+a[0].length):-1}function ix(e,n,t){var a=Re.exec(n.slice(t,t+2));return a?(e.M=+a[0],t+a[0].length):-1}function ox(e,n,t){var a=Re.exec(n.slice(t,t+2));return a?(e.S=+a[0],t+a[0].length):-1}function sx(e,n,t){var a=Re.exec(n.slice(t,t+3));return a?(e.L=+a[0],t+a[0].length):-1}function ux(e,n,t){var a=Re.exec(n.slice(t,t+6));return a?(e.L=Math.floor(a[0]/1e3),t+a[0].length):-1}function lx(e,n,t){var a=YA.exec(n.slice(t,t+1));return a?t+a[0].length:-1}function cx(e,n,t){var a=Re.exec(n.slice(t));return a?(e.Q=+a[0],t+a[0].length):-1}function hx(e,n,t){var a=Re.exec(n.slice(t));return a?(e.s=+a[0],t+a[0].length):-1}function wf(e,n){return ue(e.getDate(),n,2)}function fx(e,n){return ue(e.getHours(),n,2)}function dx(e,n){return ue(e.getHours()%12||12,n,2)}function gx(e,n){return ue(1+$a.count(Hn(e),e),n,3)}function nm(e,n){return ue(e.getMilliseconds(),n,3)}function mx(e,n){return nm(e,n)+"000"}function px(e,n){return ue(e.getMonth()+1,n,2)}function yx(e,n){return ue(e.getMinutes(),n,2)}function bx(e,n){return ue(e.getSeconds(),n,2)}function vx(e){var n=e.getDay();return n===0?7:n}function kx(e,n){return ue(za.count(Hn(e)-1,e),n,2)}function tm(e){var n=e.getDay();return n>=4||n===0?Ot(e):Ot.ceil(e)}function wx(e,n){return e=tm(e),ue(Ot.count(Hn(e),e)+(Hn(e).getDay()===4),n,2)}function Mx(e){return e.getDay()}function Sx(e,n){return ue(Er.count(Hn(e)-1,e),n,2)}function _x(e,n){return ue(e.getFullYear()%100,n,2)}function Ax(e,n){return e=tm(e),ue(e.getFullYear()%100,n,2)}function xx(e,n){return ue(e.getFullYear()%1e4,n,4)}function Tx(e,n){var t=e.getDay();return e=t>=4||t===0?Ot(e):Ot.ceil(e),ue(e.getFullYear()%1e4,n,4)}function zx(e){var n=e.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+ue(n/60|0,"0",2)+ue(n%60,"0",2)}function Mf(e,n){return ue(e.getUTCDate(),n,2)}function Cx(e,n){return ue(e.getUTCHours(),n,2)}function Ex(e,n){return ue(e.getUTCHours()%12||12,n,2)}function Nx(e,n){return ue(1+Fr.count(On(e),e),n,3)}function am(e,n){return ue(e.getUTCMilliseconds(),n,3)}function Rx(e,n){return am(e,n)+"000"}function Bx(e,n){return ue(e.getUTCMonth()+1,n,2)}function Px(e,n){return ue(e.getUTCMinutes(),n,2)}function Ix(e,n){return ue(e.getUTCSeconds(),n,2)}function $x(e){var n=e.getUTCDay();return n===0?7:n}function Lx(e,n){return ue(Ca.count(On(e)-1,e),n,2)}function rm(e){var n=e.getUTCDay();return n>=4||n===0?Gt(e):Gt.ceil(e)}function Kx(e,n){return e=rm(e),ue(Gt.count(On(e),e)+(On(e).getUTCDay()===4),n,2)}function Dx(e){return e.getUTCDay()}function Hx(e,n){return ue(Nr.count(On(e)-1,e),n,2)}function Ox(e,n){return ue(e.getUTCFullYear()%100,n,2)}function Gx(e,n){return e=rm(e),ue(e.getUTCFullYear()%100,n,2)}function qx(e,n){return ue(e.getUTCFullYear()%1e4,n,4)}function Fx(e,n){var t=e.getUTCDay();return e=t>=4||t===0?Gt(e):Gt.ceil(e),ue(e.getUTCFullYear()%1e4,n,4)}function Ux(){return"+0000"}function Sf(){return"%"}function _f(e){return+e}function Af(e){return Math.floor(+e/1e3)}var ra,ac,im,ns,rc;om({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function om(e){return ra=em(e),ac=ra.format,im=ra.parse,ns=ra.utcFormat,rc=ra.utcParse,ra}var sm="%Y-%m-%dT%H:%M:%S.%LZ";function jx(e){return e.toISOString()}var Yx=Date.prototype.toISOString?jx:ns(sm);function Vx(e){var n=new Date(e);return isNaN(n)?null:n}var Wx=+new Date("2000-01-01T00:00:00.000Z")?Vx:rc(sm);function Zx(e){return new Date(e)}function Xx(e){return e instanceof Date?+e:+new Date(+e)}function ic(e,n,t,a,r,i,o,u,l,c){var h=Zl(),f=h.invert,s=h.domain,d=c(".%L"),g=c(":%S"),p=c("%I:%M"),m=c("%I %p"),y=c("%a %d"),k=c("%b %d"),v=c("%B"),b=c("%Y");function w(M){return(l(M)<M?d:u(M)<M?g:o(M)<M?p:i(M)<M?m:a(M)<M?r(M)<M?y:k:t(M)<M?v:b)(M)}return h.invert=function(M){return new Date(f(M))},h.domain=function(M){return arguments.length?s(Array.from(M,Xx)):s().map(Zx)},h.ticks=function(M){var x=s();return e(x[0],x[x.length-1],M??10)},h.tickFormat=function(M,x){return x==null?w:c(x)},h.nice=function(M){var x=s();return(!M||typeof M.range!="function")&&(M=n(x[0],x[x.length-1],M??10)),M?s(P0(x,M)):h},h.copy=function(){return qr(h,ic(e,n,t,a,r,i,o,u,l,c))},h}function Qx(){return wn.apply(ic(Q0,J0,Hn,Jo,za,$a,Xo,Wo,Qn,ac).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Jx(){return wn.apply(ic(Z0,X0,On,es,Ca,Fr,Qo,Zo,Qn,ns).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ts(){var e=0,n=1,t,a,r,i,o=Xe,u=!1,l;function c(f){return f==null||isNaN(f=+f)?l:o(r===0?.5:(f=(i(f)-t)*r,u?Math.max(0,Math.min(1,f)):f))}c.domain=function(f){return arguments.length?([e,n]=f,t=i(e=+e),a=i(n=+n),r=t===a?0:1/(a-t),c):[e,n]},c.clamp=function(f){return arguments.length?(u=!!f,c):u},c.interpolator=function(f){return arguments.length?(o=f,c):o};function h(f){return function(s){var d,g;return arguments.length?([d,g]=s,o=f(d,g),c):[o(0),o(1)]}}return c.range=h(tt),c.rangeRound=h(Io),c.unknown=function(f){return arguments.length?(l=f,c):l},function(f){return i=f,t=f(e),a=f(n),r=t===a?0:1/(a-t),c}}function vt(e,n){return n.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Ur(){var e=bt(ts()(Xe));return e.copy=function(){return vt(e,Ur())},at.apply(e,arguments)}function um(){var e=Xl(ts()).domain([1,10]);return e.copy=function(){return vt(e,um()).base(e.base())},at.apply(e,arguments)}function lm(){var e=Ql(ts());return e.copy=function(){return vt(e,lm()).constant(e.constant())},at.apply(e,arguments)}function oc(){var e=Jl(ts());return e.copy=function(){return vt(e,oc()).exponent(e.exponent())},at.apply(e,arguments)}function e3(){return oc.apply(null,arguments).exponent(.5)}function cm(){var e=[],n=Xe;function t(a){if(a!=null&&!isNaN(a=+a))return n((ht(e,a,1)-1)/(e.length-1))}return t.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let r of a)r!=null&&!isNaN(r=+r)&&e.push(r);return e.sort(ke),t},t.interpolator=function(a){return arguments.length?(n=a,t):n},t.range=function(){return e.map((a,r)=>n(r/(e.length-1)))},t.quantiles=function(a){return Array.from({length:a+1},(r,i)=>pr(e,i/a))},t.copy=function(){return cm(n).domain(e)},at.apply(t,arguments)}function as(){var e=0,n=.5,t=1,a=1,r,i,o,u,l,c=Xe,h,f=!1,s;function d(p){return isNaN(p=+p)?s:(p=.5+((p=+h(p))-i)*(a*p<a*i?u:l),c(f?Math.max(0,Math.min(1,p)):p))}d.domain=function(p){return arguments.length?([e,n,t]=p,r=h(e=+e),i=h(n=+n),o=h(t=+t),u=r===i?0:.5/(i-r),l=i===o?0:.5/(o-i),a=i<r?-1:1,d):[e,n,t]},d.clamp=function(p){return arguments.length?(f=!!p,d):f},d.interpolator=function(p){return arguments.length?(c=p,d):c};function g(p){return function(m){var y,k,v;return arguments.length?([y,k,v]=m,c=tg(p,[y,k,v]),d):[c(0),c(.5),c(1)]}}return d.range=g(tt),d.rangeRound=g(Io),d.unknown=function(p){return arguments.length?(s=p,d):s},function(p){return h=p,r=p(e),i=p(n),o=p(t),u=r===i?0:.5/(i-r),l=i===o?0:.5/(o-i),a=i<r?-1:1,d}}function hm(){var e=bt(as()(Xe));return e.copy=function(){return vt(e,hm())},at.apply(e,arguments)}function fm(){var e=Xl(as()).domain([.1,1,10]);return e.copy=function(){return vt(e,fm()).base(e.base())},at.apply(e,arguments)}function dm(){var e=Ql(as());return e.copy=function(){return vt(e,dm()).constant(e.constant())},at.apply(e,arguments)}function sc(){var e=Jl(as());return e.copy=function(){return vt(e,sc()).exponent(e.exponent())},at.apply(e,arguments)}function n3(){return sc.apply(null,arguments).exponent(.5)}function ae(e){for(var n=e.length/6|0,t=new Array(n),a=0;a<n;)t[a]="#"+e.slice(a*6,++a*6);return t}const t3=ae("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),a3=ae("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),r3=ae("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),i3=ae("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),o3=ae("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),s3=ae("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),u3=ae("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),l3=ae("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),c3=ae("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),h3=ae("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),f3=ae("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),ge=e=>qd(e[e.length-1]);var gm=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(ae);const d3=ge(gm);var mm=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(ae);const g3=ge(mm);var pm=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(ae);const m3=ge(pm);var ym=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(ae);const p3=ge(ym);var bm=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(ae);const y3=ge(bm);var vm=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(ae);const b3=ge(vm);var km=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(ae);const v3=ge(km);var wm=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(ae);const k3=ge(wm);var Mm=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(ae);const Sm=ge(Mm);var _m=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(ae);const w3=ge(_m);var Am=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(ae);const M3=ge(Am);var xm=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(ae);const S3=ge(xm);var Tm=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(ae);const _3=ge(Tm);var zm=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(ae);const A3=ge(zm);var Cm=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(ae);const x3=ge(Cm);var Em=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(ae);const T3=ge(Em);var Nm=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(ae);const z3=ge(Nm);var Rm=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(ae);const C3=ge(Rm);var Bm=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(ae);const E3=ge(Bm);var Pm=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(ae);const N3=ge(Pm);var Im=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(ae);const R3=ge(Im);var $m=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(ae);const B3=ge($m);var Lm=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(ae);const P3=ge(Lm);var Km=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(ae);const I3=ge(Km);var Dm=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(ae);const $3=ge(Dm);var Hm=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(ae);const L3=ge(Hm);var Om=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(ae);const K3=ge(Om);function D3(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}const H3=$o(Tn(300,.5,0),Tn(-240,.5,1));var O3=$o(Tn(-100,.75,.35),Tn(80,1.5,.8)),G3=$o(Tn(260,.75,.35),Tn(80,1.5,.8)),gi=Tn();function uc(e){(e<0||e>1)&&(e-=Math.floor(e));var n=Math.abs(e-.5);return gi.h=360*e-100,gi.s=1.5-1.5*n,gi.l=.8-.9*n,gi+""}var mi=ba(),q3=Math.PI/3,F3=Math.PI*2/3;function U3(e){var n;return e=(.5-e)*Math.PI,mi.r=255*(n=Math.sin(e))*n,mi.g=255*(n=Math.sin(e+q3))*n,mi.b=255*(n=Math.sin(e+F3))*n,mi+""}function j3(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function rs(e){var n=e.length;return function(t){return e[Math.max(0,Math.min(n-1,Math.floor(t*n)))]}}const Y3=rs(ae("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var V3=rs(ae("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),W3=rs(ae("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Z3=rs(ae("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function te(e){return function(){return e}}const xf=Math.abs,De=Math.atan2,Yn=Math.cos,X3=Math.max,da=Math.min,rn=Math.sin,pe=Math.sqrt,He=1e-12,mt=Math.PI,yo=mt/2,ct=2*mt;function Q3(e){return e>1?0:e<-1?mt:Math.acos(e)}function Tf(e){return e>=1?yo:e<=-1?-yo:Math.asin(e)}function jr(e){let n=3;return e.digits=function(t){if(!arguments.length)return n;if(t==null)n=null;else{const a=Math.floor(t);if(!(a>=0))throw new RangeError(`invalid digits: ${t}`);n=a}return e},()=>new $r(n)}function J3(e){return e.innerRadius}function e5(e){return e.outerRadius}function n5(e){return e.startAngle}function t5(e){return e.endAngle}function a5(e){return e&&e.padAngle}function r5(e,n,t,a,r,i,o,u){var l=t-e,c=a-n,h=o-r,f=u-i,s=f*l-h*c;if(!(s*s<He))return s=(h*(n-i)-f*(e-r))/s,[e+s*l,n+s*c]}function pi(e,n,t,a,r,i,o){var u=e-t,l=n-a,c=(o?i:-i)/pe(u*u+l*l),h=c*l,f=-c*u,s=e+h,d=n+f,g=t+h,p=a+f,m=(s+g)/2,y=(d+p)/2,k=g-s,v=p-d,b=k*k+v*v,w=r-i,M=s*p-g*d,x=(v<0?-1:1)*pe(X3(0,w*w*b-M*M)),S=(M*v-k*x)/b,T=(-M*k-v*x)/b,_=(M*v+k*x)/b,A=(-M*k+v*x)/b,R=S-m,N=T-y,z=_-m,E=A-y;return R*R+N*N>z*z+E*E&&(S=_,T=A),{cx:S,cy:T,x01:-h,y01:-f,x11:S*(r/w-1),y11:T*(r/w-1)}}function i5(){var e=J3,n=e5,t=te(0),a=null,r=n5,i=t5,o=a5,u=null,l=jr(c);function c(){var h,f,s=+e.apply(this,arguments),d=+n.apply(this,arguments),g=r.apply(this,arguments)-yo,p=i.apply(this,arguments)-yo,m=xf(p-g),y=p>g;if(u||(u=h=l()),d<s&&(f=d,d=s,s=f),!(d>He))u.moveTo(0,0);else if(m>ct-He)u.moveTo(d*Yn(g),d*rn(g)),u.arc(0,0,d,g,p,!y),s>He&&(u.moveTo(s*Yn(p),s*rn(p)),u.arc(0,0,s,p,g,y));else{var k=g,v=p,b=g,w=p,M=m,x=m,S=o.apply(this,arguments)/2,T=S>He&&(a?+a.apply(this,arguments):pe(s*s+d*d)),_=da(xf(d-s)/2,+t.apply(this,arguments)),A=_,R=_,N,z;if(T>He){var E=Tf(T/s*rn(S)),C=Tf(T/d*rn(S));(M-=E*2)>He?(E*=y?1:-1,b+=E,w-=E):(M=0,b=w=(g+p)/2),(x-=C*2)>He?(C*=y?1:-1,k+=C,v-=C):(x=0,k=v=(g+p)/2)}var B=d*Yn(k),I=d*rn(k),P=s*Yn(w),D=s*rn(w);if(_>He){var H=d*Yn(v),G=d*rn(v),W=s*Yn(b),Q=s*rn(b),q;if(m<mt)if(q=r5(B,I,W,Q,H,G,P,D)){var ce=B-q[0],ee=I-q[1],he=H-q[0],O=G-q[1],Y=1/rn(Q3((ce*he+ee*O)/(pe(ce*ce+ee*ee)*pe(he*he+O*O)))/2),ne=pe(q[0]*q[0]+q[1]*q[1]);A=da(_,(s-ne)/(Y-1)),R=da(_,(d-ne)/(Y+1))}else A=R=0}x>He?R>He?(N=pi(W,Q,B,I,d,R,y),z=pi(H,G,P,D,d,R,y),u.moveTo(N.cx+N.x01,N.cy+N.y01),R<_?u.arc(N.cx,N.cy,R,De(N.y01,N.x01),De(z.y01,z.x01),!y):(u.arc(N.cx,N.cy,R,De(N.y01,N.x01),De(N.y11,N.x11),!y),u.arc(0,0,d,De(N.cy+N.y11,N.cx+N.x11),De(z.cy+z.y11,z.cx+z.x11),!y),u.arc(z.cx,z.cy,R,De(z.y11,z.x11),De(z.y01,z.x01),!y))):(u.moveTo(B,I),u.arc(0,0,d,k,v,!y)):u.moveTo(B,I),!(s>He)||!(M>He)?u.lineTo(P,D):A>He?(N=pi(P,D,H,G,s,-A,y),z=pi(B,I,W,Q,s,-A,y),u.lineTo(N.cx+N.x01,N.cy+N.y01),A<_?u.arc(N.cx,N.cy,A,De(N.y01,N.x01),De(z.y01,z.x01),!y):(u.arc(N.cx,N.cy,A,De(N.y01,N.x01),De(N.y11,N.x11),!y),u.arc(0,0,s,De(N.cy+N.y11,N.cx+N.x11),De(z.cy+z.y11,z.cx+z.x11),y),u.arc(z.cx,z.cy,A,De(z.y11,z.x11),De(z.y01,z.x01),!y))):u.arc(0,0,s,w,b,y)}if(u.closePath(),h)return u=null,h+""||null}return c.centroid=function(){var h=(+e.apply(this,arguments)+ +n.apply(this,arguments))/2,f=(+r.apply(this,arguments)+ +i.apply(this,arguments))/2-mt/2;return[Yn(f)*h,rn(f)*h]},c.innerRadius=function(h){return arguments.length?(e=typeof h=="function"?h:te(+h),c):e},c.outerRadius=function(h){return arguments.length?(n=typeof h=="function"?h:te(+h),c):n},c.cornerRadius=function(h){return arguments.length?(t=typeof h=="function"?h:te(+h),c):t},c.padRadius=function(h){return arguments.length?(a=h==null?null:typeof h=="function"?h:te(+h),c):a},c.startAngle=function(h){return arguments.length?(r=typeof h=="function"?h:te(+h),c):r},c.endAngle=function(h){return arguments.length?(i=typeof h=="function"?h:te(+h),c):i},c.padAngle=function(h){return arguments.length?(o=typeof h=="function"?h:te(+h),c):o},c.context=function(h){return arguments.length?(u=h??null,c):u},c}var o5=Array.prototype.slice;function is(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Gm(e){this._context=e}Gm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;default:this._context.lineTo(e,n);break}}};function os(e){return new Gm(e)}function lc(e){return e[0]}function cc(e){return e[1]}function kn(e,n){var t=te(!0),a=null,r=os,i=null,o=jr(u);e=typeof e=="function"?e:e===void 0?lc:te(e),n=typeof n=="function"?n:n===void 0?cc:te(n);function u(l){var c,h=(l=is(l)).length,f,s=!1,d;for(a==null&&(i=r(d=o())),c=0;c<=h;++c)!(c<h&&t(f=l[c],c,l))===s&&((s=!s)?i.lineStart():i.lineEnd()),s&&i.point(+e(f,c,l),+n(f,c,l));if(d)return i=null,d+""||null}return u.x=function(l){return arguments.length?(e=typeof l=="function"?l:te(+l),u):e},u.y=function(l){return arguments.length?(n=typeof l=="function"?l:te(+l),u):n},u.defined=function(l){return arguments.length?(t=typeof l=="function"?l:te(!!l),u):t},u.curve=function(l){return arguments.length?(r=l,a!=null&&(i=r(a)),u):r},u.context=function(l){return arguments.length?(l==null?a=i=null:i=r(a=l),u):a},u}function qm(e,n,t){var a=null,r=te(!0),i=null,o=os,u=null,l=jr(c);e=typeof e=="function"?e:e===void 0?lc:te(+e),n=typeof n=="function"?n:te(n===void 0?0:+n),t=typeof t=="function"?t:t===void 0?cc:te(+t);function c(f){var s,d,g,p=(f=is(f)).length,m,y=!1,k,v=new Array(p),b=new Array(p);for(i==null&&(u=o(k=l())),s=0;s<=p;++s){if(!(s<p&&r(m=f[s],s,f))===y)if(y=!y)d=s,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),g=s-1;g>=d;--g)u.point(v[g],b[g]);u.lineEnd(),u.areaEnd()}y&&(v[s]=+e(m,s,f),b[s]=+n(m,s,f),u.point(a?+a(m,s,f):v[s],t?+t(m,s,f):b[s]))}if(k)return u=null,k+""||null}function h(){return kn().defined(r).curve(o).context(i)}return c.x=function(f){return arguments.length?(e=typeof f=="function"?f:te(+f),a=null,c):e},c.x0=function(f){return arguments.length?(e=typeof f=="function"?f:te(+f),c):e},c.x1=function(f){return arguments.length?(a=f==null?null:typeof f=="function"?f:te(+f),c):a},c.y=function(f){return arguments.length?(n=typeof f=="function"?f:te(+f),t=null,c):n},c.y0=function(f){return arguments.length?(n=typeof f=="function"?f:te(+f),c):n},c.y1=function(f){return arguments.length?(t=f==null?null:typeof f=="function"?f:te(+f),c):t},c.lineX0=c.lineY0=function(){return h().x(e).y(n)},c.lineY1=function(){return h().x(e).y(t)},c.lineX1=function(){return h().x(a).y(n)},c.defined=function(f){return arguments.length?(r=typeof f=="function"?f:te(!!f),c):r},c.curve=function(f){return arguments.length?(o=f,i!=null&&(u=o(i)),c):o},c.context=function(f){return arguments.length?(f==null?i=u=null:u=o(i=f),c):i},c}function s5(e,n){return n<e?-1:n>e?1:n>=e?0:NaN}function u5(e){return e}function l5(){var e=u5,n=s5,t=null,a=te(0),r=te(ct),i=te(0);function o(u){var l,c=(u=is(u)).length,h,f,s=0,d=new Array(c),g=new Array(c),p=+a.apply(this,arguments),m=Math.min(ct,Math.max(-ct,r.apply(this,arguments)-p)),y,k=Math.min(Math.abs(m)/c,i.apply(this,arguments)),v=k*(m<0?-1:1),b;for(l=0;l<c;++l)(b=g[d[l]=l]=+e(u[l],l,u))>0&&(s+=b);for(n!=null?d.sort(function(w,M){return n(g[w],g[M])}):t!=null&&d.sort(function(w,M){return t(u[w],u[M])}),l=0,f=s?(m-c*v)/s:0;l<c;++l,p=y)h=d[l],b=g[h],y=p+(b>0?b*f:0)+v,g[h]={data:u[h],index:l,value:b,startAngle:p,endAngle:y,padAngle:k};return g}return o.value=function(u){return arguments.length?(e=typeof u=="function"?u:te(+u),o):e},o.sortValues=function(u){return arguments.length?(n=u,t=null,o):n},o.sort=function(u){return arguments.length?(t=u,n=null,o):t},o.startAngle=function(u){return arguments.length?(a=typeof u=="function"?u:te(+u),o):a},o.endAngle=function(u){return arguments.length?(r=typeof u=="function"?u:te(+u),o):r},o.padAngle=function(u){return arguments.length?(i=typeof u=="function"?u:te(+u),o):i},o}var Fm=hc(os);function Um(e){this._curve=e}Um.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,n){this._curve.point(n*Math.sin(e),n*-Math.cos(e))}};function hc(e){function n(t){return new Um(e(t))}return n._curve=e,n}function ar(e){var n=e.curve;return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e.curve=function(t){return arguments.length?n(hc(t)):n()._curve},e}function zf(){return ar(kn().curve(Fm))}function Cf(){var e=qm().curve(Fm),n=e.curve,t=e.lineX0,a=e.lineX1,r=e.lineY0,i=e.lineY1;return e.angle=e.x,delete e.x,e.startAngle=e.x0,delete e.x0,e.endAngle=e.x1,delete e.x1,e.radius=e.y,delete e.y,e.innerRadius=e.y0,delete e.y0,e.outerRadius=e.y1,delete e.y1,e.lineStartAngle=function(){return ar(t())},delete e.lineX0,e.lineEndAngle=function(){return ar(a())},delete e.lineX1,e.lineInnerRadius=function(){return ar(r())},delete e.lineY0,e.lineOuterRadius=function(){return ar(i())},delete e.lineY1,e.curve=function(o){return arguments.length?n(hc(o)):n()._curve},e}function rr(e,n){return[(n=+n)*Math.cos(e-=Math.PI/2),n*Math.sin(e)]}class jm{constructor(n,t){this._context=n,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(n,t){switch(n=+n,t=+t,this._point){case 0:{this._point=1,this._line?this._context.lineTo(n,t):this._context.moveTo(n,t);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+n)/2,this._y0,this._x0,t,n,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,n,this._y0,n,t);break}}this._x0=n,this._y0=t}}class c5{constructor(n){this._context=n}lineStart(){this._point=0}lineEnd(){}point(n,t){if(n=+n,t=+t,this._point===0)this._point=1;else{const a=rr(this._x0,this._y0),r=rr(this._x0,this._y0=(this._y0+t)/2),i=rr(n,this._y0),o=rr(n,t);this._context.moveTo(...a),this._context.bezierCurveTo(...r,...i,...o)}this._x0=n,this._y0=t}}function Ym(e){return new jm(e,!0)}function Vm(e){return new jm(e,!1)}function h5(e){return new c5(e)}function f5(e){return e.source}function d5(e){return e.target}function ss(e){let n=f5,t=d5,a=lc,r=cc,i=null,o=null,u=jr(l);function l(){let c;const h=o5.call(arguments),f=n.apply(this,h),s=t.apply(this,h);if(i==null&&(o=e(c=u())),o.lineStart(),h[0]=f,o.point(+a.apply(this,h),+r.apply(this,h)),h[0]=s,o.point(+a.apply(this,h),+r.apply(this,h)),o.lineEnd(),c)return o=null,c+""||null}return l.source=function(c){return arguments.length?(n=c,l):n},l.target=function(c){return arguments.length?(t=c,l):t},l.x=function(c){return arguments.length?(a=typeof c=="function"?c:te(+c),l):a},l.y=function(c){return arguments.length?(r=typeof c=="function"?c:te(+c),l):r},l.context=function(c){return arguments.length?(c==null?i=o=null:o=e(i=c),l):i},l}function g5(){return ss(Ym)}function m5(){return ss(Vm)}function p5(){const e=ss(h5);return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e}const y5=pe(3),Wm={draw(e,n){const t=pe(n+da(n/28,.75))*.59436,a=t/2,r=a*y5;e.moveTo(0,t),e.lineTo(0,-t),e.moveTo(-r,-a),e.lineTo(r,a),e.moveTo(-r,a),e.lineTo(r,-a)}},us={draw(e,n){const t=pe(n/mt);e.moveTo(t,0),e.arc(0,0,t,0,ct)}},Zm={draw(e,n){const t=pe(n/5)/2;e.moveTo(-3*t,-t),e.lineTo(-t,-t),e.lineTo(-t,-3*t),e.lineTo(t,-3*t),e.lineTo(t,-t),e.lineTo(3*t,-t),e.lineTo(3*t,t),e.lineTo(t,t),e.lineTo(t,3*t),e.lineTo(-t,3*t),e.lineTo(-t,t),e.lineTo(-3*t,t),e.closePath()}},Xm=pe(1/3),b5=Xm*2,Qm={draw(e,n){const t=pe(n/b5),a=t*Xm;e.moveTo(0,-t),e.lineTo(a,0),e.lineTo(0,t),e.lineTo(-a,0),e.closePath()}},Jm={draw(e,n){const t=pe(n)*.62625;e.moveTo(0,-t),e.lineTo(t,0),e.lineTo(0,t),e.lineTo(-t,0),e.closePath()}},ep={draw(e,n){const t=pe(n-da(n/7,2))*.87559;e.moveTo(-t,0),e.lineTo(t,0),e.moveTo(0,t),e.lineTo(0,-t)}},np={draw(e,n){const t=pe(n),a=-t/2;e.rect(a,a,t,t)}},tp={draw(e,n){const t=pe(n)*.4431;e.moveTo(t,t),e.lineTo(t,-t),e.lineTo(-t,-t),e.lineTo(-t,t),e.closePath()}},v5=.8908130915292852,ap=rn(mt/10)/rn(7*mt/10),k5=rn(ct/10)*ap,w5=-Yn(ct/10)*ap,rp={draw(e,n){const t=pe(n*v5),a=k5*t,r=w5*t;e.moveTo(0,-t),e.lineTo(a,r);for(let i=1;i<5;++i){const o=ct*i/5,u=Yn(o),l=rn(o);e.lineTo(l*t,-u*t),e.lineTo(u*a-l*r,l*a+u*r)}e.closePath()}},Vs=pe(3),ip={draw(e,n){const t=-pe(n/(Vs*3));e.moveTo(0,t*2),e.lineTo(-Vs*t,-t),e.lineTo(Vs*t,-t),e.closePath()}},M5=pe(3),op={draw(e,n){const t=pe(n)*.6824,a=t/2,r=t*M5/2;e.moveTo(0,-t),e.lineTo(r,a),e.lineTo(-r,a),e.closePath()}},fn=-.5,dn=pe(3)/2,Yu=1/pe(12),S5=(Yu/2+1)*3,sp={draw(e,n){const t=pe(n/S5),a=t/2,r=t*Yu,i=a,o=t*Yu+t,u=-i,l=o;e.moveTo(a,r),e.lineTo(i,o),e.lineTo(u,l),e.lineTo(fn*a-dn*r,dn*a+fn*r),e.lineTo(fn*i-dn*o,dn*i+fn*o),e.lineTo(fn*u-dn*l,dn*u+fn*l),e.lineTo(fn*a+dn*r,fn*r-dn*a),e.lineTo(fn*i+dn*o,fn*o-dn*i),e.lineTo(fn*u+dn*l,fn*l-dn*u),e.closePath()}},Vu={draw(e,n){const t=pe(n-da(n/6,1.7))*.6189;e.moveTo(-t,-t),e.lineTo(t,t),e.moveTo(-t,t),e.lineTo(t,-t)}},Ef=[us,Zm,Qm,np,rp,ip,sp],_5=[us,ep,Vu,op,Wm,tp,Jm];function A5(e,n){let t=null,a=jr(r);e=typeof e=="function"?e:te(e||us),n=typeof n=="function"?n:te(n===void 0?64:+n);function r(){let i;if(t||(t=i=a()),e.apply(this,arguments).draw(t,+n.apply(this,arguments)),i)return t=null,i+""||null}return r.type=function(i){return arguments.length?(e=typeof i=="function"?i:te(i),r):e},r.size=function(i){return arguments.length?(n=typeof i=="function"?i:te(+i),r):n},r.context=function(i){return arguments.length?(t=i??null,r):t},r}function pt(){}function bo(e,n,t){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+n)/6,(e._y0+4*e._y1+t)/6)}function ls(e){this._context=e}ls.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:bo(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:bo(this,e,n);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=n}};function up(e){return new ls(e)}function lp(e){this._context=e}lp.prototype={areaStart:pt,areaEnd:pt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._x2=e,this._y2=n;break;case 1:this._point=2,this._x3=e,this._y3=n;break;case 2:this._point=3,this._x4=e,this._y4=n,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+n)/6);break;default:bo(this,e,n);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=n}};function cs(e){return new lp(e)}function cp(e){this._context=e}cp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var t=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+n)/6;this._line?this._context.lineTo(t,a):this._context.moveTo(t,a);break;case 3:this._point=4;default:bo(this,e,n);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=n}};function x5(e){return new cp(e)}function hp(e,n){this._basis=new ls(e),this._beta=n}hp.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,n=this._y,t=e.length-1;if(t>0)for(var a=e[0],r=n[0],i=e[t]-a,o=n[t]-r,u=-1,l;++u<=t;)l=u/t,this._basis.point(this._beta*e[u]+(1-this._beta)*(a+l*i),this._beta*n[u]+(1-this._beta)*(r+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,n){this._x.push(+e),this._y.push(+n)}};const fp=(function e(n){function t(a){return n===1?new ls(a):new hp(a,n)}return t.beta=function(a){return e(+a)},t})(.85);function vo(e,n,t){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-n),e._y2+e._k*(e._y1-t),e._x2,e._y2)}function fc(e,n){this._context=e,this._k=(1-n)/6}fc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:vo(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2,this._x1=e,this._y1=n;break;case 2:this._point=3;default:vo(this,e,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const T5=(function e(n){function t(a){return new fc(a,n)}return t.tension=function(a){return e(+a)},t})(0);function dc(e,n){this._context=e,this._k=(1-n)/6}dc.prototype={areaStart:pt,areaEnd:pt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._x3=e,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=n);break;case 2:this._point=3,this._x5=e,this._y5=n;break;default:vo(this,e,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const z5=(function e(n){function t(a){return new dc(a,n)}return t.tension=function(a){return e(+a)},t})(0);function gc(e,n){this._context=e,this._k=(1-n)/6}gc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:vo(this,e,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const C5=(function e(n){function t(a){return new gc(a,n)}return t.tension=function(a){return e(+a)},t})(0);function mc(e,n,t){var a=e._x1,r=e._y1,i=e._x2,o=e._y2;if(e._l01_a>He){var u=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);a=(a*u-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,r=(r*u-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>He){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,h=3*e._l23_a*(e._l23_a+e._l12_a);i=(i*c+e._x1*e._l23_2a-n*e._l12_2a)/h,o=(o*c+e._y1*e._l23_2a-t*e._l12_2a)/h}e._context.bezierCurveTo(a,r,i,o,e._x2,e._y2)}function dp(e,n){this._context=e,this._alpha=n}dp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){if(e=+e,n=+n,this._point){var t=this._x2-e,a=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(t*t+a*a,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;break;case 2:this._point=3;default:mc(this,e,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const ua=(function e(n){function t(a){return n?new dp(a,n):new fc(a,0)}return t.alpha=function(a){return e(+a)},t})(.5);function gp(e,n){this._context=e,this._alpha=n}gp.prototype={areaStart:pt,areaEnd:pt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,n){if(e=+e,n=+n,this._point){var t=this._x2-e,a=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(t*t+a*a,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=n);break;case 2:this._point=3,this._x5=e,this._y5=n;break;default:mc(this,e,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const E5=(function e(n){function t(a){return n?new gp(a,n):new dc(a,0)}return t.alpha=function(a){return e(+a)},t})(.5);function mp(e,n){this._context=e,this._alpha=n}mp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){if(e=+e,n=+n,this._point){var t=this._x2-e,a=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(t*t+a*a,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:mc(this,e,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const N5=(function e(n){function t(a){return n?new mp(a,n):new gc(a,0)}return t.alpha=function(a){return e(+a)},t})(.5);function pp(e){this._context=e}pp.prototype={areaStart:pt,areaEnd:pt,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,n){e=+e,n=+n,this._point?this._context.lineTo(e,n):(this._point=1,this._context.moveTo(e,n))}};function R5(e){return new pp(e)}function Nf(e){return e<0?-1:1}function Rf(e,n,t){var a=e._x1-e._x0,r=n-e._x1,i=(e._y1-e._y0)/(a||r<0&&-0),o=(t-e._y1)/(r||a<0&&-0),u=(i*r+o*a)/(a+r);return(Nf(i)+Nf(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(u))||0}function Bf(e,n){var t=e._x1-e._x0;return t?(3*(e._y1-e._y0)/t-n)/2:n}function Ws(e,n,t){var a=e._x0,r=e._y0,i=e._x1,o=e._y1,u=(i-a)/3;e._context.bezierCurveTo(a+u,r+u*n,i-u,o-u*t,i,o)}function ko(e){this._context=e}ko.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ws(this,this._t0,Bf(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){var t=NaN;if(e=+e,n=+n,!(e===this._x1&&n===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;break;case 2:this._point=3,Ws(this,Bf(this,t=Rf(this,e,n)),t);break;default:Ws(this,this._t0,t=Rf(this,e,n));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=n,this._t0=t}}};function yp(e){this._context=new bp(e)}(yp.prototype=Object.create(ko.prototype)).point=function(e,n){ko.prototype.point.call(this,n,e)};function bp(e){this._context=e}bp.prototype={moveTo:function(e,n){this._context.moveTo(n,e)},closePath:function(){this._context.closePath()},lineTo:function(e,n){this._context.lineTo(n,e)},bezierCurveTo:function(e,n,t,a,r,i){this._context.bezierCurveTo(n,e,a,t,i,r)}};function B5(e){return new ko(e)}function P5(e){return new yp(e)}function vp(e){this._context=e}vp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,n=this._y,t=e.length;if(t)if(this._line?this._context.lineTo(e[0],n[0]):this._context.moveTo(e[0],n[0]),t===2)this._context.lineTo(e[1],n[1]);else for(var a=Pf(e),r=Pf(n),i=0,o=1;o<t;++i,++o)this._context.bezierCurveTo(a[0][i],r[0][i],a[1][i],r[1][i],e[o],n[o]);(this._line||this._line!==0&&t===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,n){this._x.push(+e),this._y.push(+n)}};function Pf(e){var n,t=e.length-1,a,r=new Array(t),i=new Array(t),o=new Array(t);for(r[0]=0,i[0]=2,o[0]=e[0]+2*e[1],n=1;n<t-1;++n)r[n]=1,i[n]=4,o[n]=4*e[n]+2*e[n+1];for(r[t-1]=2,i[t-1]=7,o[t-1]=8*e[t-1]+e[t],n=1;n<t;++n)a=r[n]/i[n-1],i[n]-=a,o[n]-=a*o[n-1];for(r[t-1]=o[t-1]/i[t-1],n=t-2;n>=0;--n)r[n]=(o[n]-r[n+1])/i[n];for(i[t-1]=(e[t]+r[t-1])/2,n=0;n<t-1;++n)i[n]=2*e[n+1]-r[n+1];return[r,i]}function kp(e){return new vp(e)}function hs(e,n){this._context=e,this._t=n}hs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,n),this._context.lineTo(e,n);else{var t=this._x*(1-this._t)+e*this._t;this._context.lineTo(t,this._y),this._context.lineTo(t,n)}break}}this._x=e,this._y=n}};function I5(e){return new hs(e,.5)}function $5(e){return new hs(e,0)}function L5(e){return new hs(e,1)}function Ea(e,n){if((o=e.length)>1)for(var t=1,a,r,i=e[n[0]],o,u=i.length;t<o;++t)for(r=i,i=e[n[t]],a=0;a<u;++a)i[a][1]+=i[a][0]=isNaN(r[a][1])?r[a][0]:r[a][1]}function Na(e){for(var n=e.length,t=new Array(n);--n>=0;)t[n]=n;return t}function K5(e,n){return e[n]}function D5(e){const n=[];return n.key=e,n}function H5(){var e=te([]),n=Na,t=Ea,a=K5;function r(i){var o=Array.from(e.apply(this,arguments),D5),u,l=o.length,c=-1,h;for(const f of i)for(u=0,++c;u<l;++u)(o[u][c]=[0,+a(f,o[u].key,c,i)]).data=f;for(u=0,h=is(n(o));u<l;++u)o[h[u]].index=u;return t(o,h),o}return r.keys=function(i){return arguments.length?(e=typeof i=="function"?i:te(Array.from(i)),r):e},r.value=function(i){return arguments.length?(a=typeof i=="function"?i:te(+i),r):a},r.order=function(i){return arguments.length?(n=i==null?Na:typeof i=="function"?i:te(Array.from(i)),r):n},r.offset=function(i){return arguments.length?(t=i??Ea,r):t},r}function O5(e,n){if((a=e.length)>0){for(var t,a,r=0,i=e[0].length,o;r<i;++r){for(o=t=0;t<a;++t)o+=e[t][r][1]||0;if(o)for(t=0;t<a;++t)e[t][r][1]/=o}Ea(e,n)}}function G5(e,n){if((l=e.length)>0)for(var t,a=0,r,i,o,u,l,c=e[n[0]].length;a<c;++a)for(o=u=0,t=0;t<l;++t)(i=(r=e[n[t]][a])[1]-r[0])>0?(r[0]=o,r[1]=o+=i):i<0?(r[1]=u,r[0]=u+=i):(r[0]=0,r[1]=i)}function q5(e,n){if((r=e.length)>0){for(var t=0,a=e[n[0]],r,i=a.length;t<i;++t){for(var o=0,u=0;o<r;++o)u+=e[o][t][1]||0;a[t][1]+=a[t][0]=-u/2}Ea(e,n)}}function F5(e,n){if(!(!((o=e.length)>0)||!((i=(r=e[n[0]]).length)>0))){for(var t=0,a=1,r,i,o;a<i;++a){for(var u=0,l=0,c=0;u<o;++u){for(var h=e[n[u]],f=h[a][1]||0,s=h[a-1][1]||0,d=(f-s)/2,g=0;g<u;++g){var p=e[n[g]],m=p[a][1]||0,y=p[a-1][1]||0;d+=m-y}l+=f,c+=d*f}r[a-1][1]+=r[a-1][0]=t,l&&(t-=c/l)}r[a-1][1]+=r[a-1][0]=t,Ea(e,n)}}function wp(e){var n=e.map(U5);return Na(e).sort(function(t,a){return n[t]-n[a]})}function U5(e){for(var n=-1,t=0,a=e.length,r,i=-1/0;++n<a;)(r=+e[n][1])>i&&(i=r,t=n);return t}function Mp(e){var n=e.map(Sp);return Na(e).sort(function(t,a){return n[t]-n[a]})}function Sp(e){for(var n=0,t=-1,a=e.length,r;++t<a;)(r=+e[t][1])&&(n+=r);return n}function j5(e){return Mp(e).reverse()}function Y5(e){var n=e.length,t,a,r=e.map(Sp),i=wp(e),o=0,u=0,l=[],c=[];for(t=0;t<n;++t)a=i[t],o<u?(o+=r[a],l.push(a)):(u+=r[a],c.push(a));return c.reverse().concat(l)}function V5(e){return Na(e).reverse()}const yi=e=>()=>e;function W5(e,{sourceEvent:n,target:t,transform:a,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:t,enumerable:!0,configurable:!0},transform:{value:a,enumerable:!0,configurable:!0},_:{value:r}})}function $n(e,n,t){this.k=e,this.x=n,this.y=t}$n.prototype={constructor:$n,scale:function(e){return e===1?this:new $n(this.k*e,this.x,this.y)},translate:function(e,n){return e===0&n===0?this:new $n(this.k,this.x+this.k*e,this.y+this.k*n)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var fs=new $n(1,0,0);_p.prototype=$n.prototype;function _p(e){for(;!e.__zoom;)if(!(e=e.parentNode))return fs;return e.__zoom}function Zs(e){e.stopImmediatePropagation()}function Ua(e){e.preventDefault(),e.stopImmediatePropagation()}function Z5(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function X5(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function If(){return this.__zoom||fs}function Q5(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function J5(){return navigator.maxTouchPoints||"ontouchstart"in this}function eT(e,n,t){var a=e.invertX(n[0][0])-t[0][0],r=e.invertX(n[1][0])-t[1][0],i=e.invertY(n[0][1])-t[0][1],o=e.invertY(n[1][1])-t[1][1];return e.translate(r>a?(a+r)/2:Math.min(0,a)||Math.max(0,r),o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o))}function nT(){var e=Z5,n=X5,t=eT,a=Q5,r=J5,i=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],u=250,l=Qd,c=qt("start","zoom","end"),h,f,s,d=500,g=150,p=0,m=10;function y(z){z.property("__zoom",If).on("wheel.zoom",S,{passive:!1}).on("mousedown.zoom",T).on("dblclick.zoom",_).filter(r).on("touchstart.zoom",A).on("touchmove.zoom",R).on("touchend.zoom touchcancel.zoom",N).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(z,E,C,B){var I=z.selection?z.selection():z;I.property("__zoom",If),z!==I?w(z,E,C,B):I.interrupt().each(function(){M(this,arguments).event(B).start().zoom(null,typeof E=="function"?E.apply(this,arguments):E).end()})},y.scaleBy=function(z,E,C,B){y.scaleTo(z,function(){var I=this.__zoom.k,P=typeof E=="function"?E.apply(this,arguments):E;return I*P},C,B)},y.scaleTo=function(z,E,C,B){y.transform(z,function(){var I=n.apply(this,arguments),P=this.__zoom,D=C==null?b(I):typeof C=="function"?C.apply(this,arguments):C,H=P.invert(D),G=typeof E=="function"?E.apply(this,arguments):E;return t(v(k(P,G),D,H),I,o)},C,B)},y.translateBy=function(z,E,C,B){y.transform(z,function(){return t(this.__zoom.translate(typeof E=="function"?E.apply(this,arguments):E,typeof C=="function"?C.apply(this,arguments):C),n.apply(this,arguments),o)},null,B)},y.translateTo=function(z,E,C,B,I){y.transform(z,function(){var P=n.apply(this,arguments),D=this.__zoom,H=B==null?b(P):typeof B=="function"?B.apply(this,arguments):B;return t(fs.translate(H[0],H[1]).scale(D.k).translate(typeof E=="function"?-E.apply(this,arguments):-E,typeof C=="function"?-C.apply(this,arguments):-C),P,o)},B,I)};function k(z,E){return E=Math.max(i[0],Math.min(i[1],E)),E===z.k?z:new $n(E,z.x,z.y)}function v(z,E,C){var B=E[0]-C[0]*z.k,I=E[1]-C[1]*z.k;return B===z.x&&I===z.y?z:new $n(z.k,B,I)}function b(z){return[(+z[0][0]+ +z[1][0])/2,(+z[0][1]+ +z[1][1])/2]}function w(z,E,C,B){z.on("start.zoom",function(){M(this,arguments).event(B).start()}).on("interrupt.zoom end.zoom",function(){M(this,arguments).event(B).end()}).tween("zoom",function(){var I=this,P=arguments,D=M(I,P).event(B),H=n.apply(I,P),G=C==null?b(H):typeof C=="function"?C.apply(I,P):C,W=Math.max(H[1][0]-H[0][0],H[1][1]-H[0][1]),Q=I.__zoom,q=typeof E=="function"?E.apply(I,P):E,ce=l(Q.invert(G).concat(W/Q.k),q.invert(G).concat(W/q.k));return function(ee){if(ee===1)ee=q;else{var he=ce(ee),O=W/he[2];ee=new $n(O,G[0]-he[0]*O,G[1]-he[1]*O)}D.zoom(null,ee)}})}function M(z,E,C){return!C&&z.__zooming||new x(z,E)}function x(z,E){this.that=z,this.args=E,this.active=0,this.sourceEvent=null,this.extent=n.apply(z,E),this.taps=0}x.prototype={event:function(z){return z&&(this.sourceEvent=z),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(z,E){return this.mouse&&z!=="mouse"&&(this.mouse[1]=E.invert(this.mouse[0])),this.touch0&&z!=="touch"&&(this.touch0[1]=E.invert(this.touch0[0])),this.touch1&&z!=="touch"&&(this.touch1[1]=E.invert(this.touch1[0])),this.that.__zoom=E,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(z){var E=_e(this.that).datum();c.call(z,this.that,new W5(z,{sourceEvent:this.sourceEvent,target:y,transform:this.that.__zoom,dispatch:c}),E)}};function S(z,...E){if(!e.apply(this,arguments))return;var C=M(this,E).event(z),B=this.__zoom,I=Math.max(i[0],Math.min(i[1],B.k*Math.pow(2,a.apply(this,arguments)))),P=cn(z);if(C.wheel)(C.mouse[0][0]!==P[0]||C.mouse[0][1]!==P[1])&&(C.mouse[1]=B.invert(C.mouse[0]=P)),clearTimeout(C.wheel);else{if(B.k===I)return;C.mouse=[P,B.invert(P)],Et(this),C.start()}Ua(z),C.wheel=setTimeout(D,g),C.zoom("mouse",t(v(k(B,I),C.mouse[0],C.mouse[1]),C.extent,o));function D(){C.wheel=null,C.end()}}function T(z,...E){if(s||!e.apply(this,arguments))return;var C=z.currentTarget,B=M(this,E,!0).event(z),I=_e(z.view).on("mousemove.zoom",G,!0).on("mouseup.zoom",W,!0),P=cn(z,C),D=z.clientX,H=z.clientY;Eo(z.view),Zs(z),B.mouse=[P,this.__zoom.invert(P)],Et(this),B.start();function G(Q){if(Ua(Q),!B.moved){var q=Q.clientX-D,ce=Q.clientY-H;B.moved=q*q+ce*ce>p}B.event(Q).zoom("mouse",t(v(B.that.__zoom,B.mouse[0]=cn(Q,C),B.mouse[1]),B.extent,o))}function W(Q){I.on("mousemove.zoom mouseup.zoom",null),No(Q.view,B.moved),Ua(Q),B.event(Q).end()}}function _(z,...E){if(e.apply(this,arguments)){var C=this.__zoom,B=cn(z.changedTouches?z.changedTouches[0]:z,this),I=C.invert(B),P=C.k*(z.shiftKey?.5:2),D=t(v(k(C,P),B,I),n.apply(this,E),o);Ua(z),u>0?_e(this).transition().duration(u).call(w,D,B,z):_e(this).call(y.transform,D,B,z)}}function A(z,...E){if(e.apply(this,arguments)){var C=z.touches,B=C.length,I=M(this,E,z.changedTouches.length===B).event(z),P,D,H,G;for(Zs(z),D=0;D<B;++D)H=C[D],G=cn(H,this),G=[G,this.__zoom.invert(G),H.identifier],I.touch0?!I.touch1&&I.touch0[2]!==G[2]&&(I.touch1=G,I.taps=0):(I.touch0=G,P=!0,I.taps=1+!!h);h&&(h=clearTimeout(h)),P&&(I.taps<2&&(f=G[0],h=setTimeout(function(){h=null},d)),Et(this),I.start())}}function R(z,...E){if(this.__zooming){var C=M(this,E).event(z),B=z.changedTouches,I=B.length,P,D,H,G;for(Ua(z),P=0;P<I;++P)D=B[P],H=cn(D,this),C.touch0&&C.touch0[2]===D.identifier?C.touch0[0]=H:C.touch1&&C.touch1[2]===D.identifier&&(C.touch1[0]=H);if(D=C.that.__zoom,C.touch1){var W=C.touch0[0],Q=C.touch0[1],q=C.touch1[0],ce=C.touch1[1],ee=(ee=q[0]-W[0])*ee+(ee=q[1]-W[1])*ee,he=(he=ce[0]-Q[0])*he+(he=ce[1]-Q[1])*he;D=k(D,Math.sqrt(ee/he)),H=[(W[0]+q[0])/2,(W[1]+q[1])/2],G=[(Q[0]+ce[0])/2,(Q[1]+ce[1])/2]}else if(C.touch0)H=C.touch0[0],G=C.touch0[1];else return;C.zoom("touch",t(v(D,H,G),C.extent,o))}}function N(z,...E){if(this.__zooming){var C=M(this,E).event(z),B=z.changedTouches,I=B.length,P,D;for(Zs(z),s&&clearTimeout(s),s=setTimeout(function(){s=null},d),P=0;P<I;++P)D=B[P],C.touch0&&C.touch0[2]===D.identifier?delete C.touch0:C.touch1&&C.touch1[2]===D.identifier&&delete C.touch1;if(C.touch1&&!C.touch0&&(C.touch0=C.touch1,delete C.touch1),C.touch0)C.touch0[1]=this.__zoom.invert(C.touch0[0]);else if(C.end(),C.taps===2&&(D=cn(D,this),Math.hypot(f[0]-D[0],f[1]-D[1])<m)){var H=_e(this).on("dblclick.zoom");H&&H.apply(this,arguments)}}}return y.wheelDelta=function(z){return arguments.length?(a=typeof z=="function"?z:yi(+z),y):a},y.filter=function(z){return arguments.length?(e=typeof z=="function"?z:yi(!!z),y):e},y.touchable=function(z){return arguments.length?(r=typeof z=="function"?z:yi(!!z),y):r},y.extent=function(z){return arguments.length?(n=typeof z=="function"?z:yi([[+z[0][0],+z[0][1]],[+z[1][0],+z[1][1]]]),y):n},y.scaleExtent=function(z){return arguments.length?(i[0]=+z[0],i[1]=+z[1],y):[i[0],i[1]]},y.translateExtent=function(z){return arguments.length?(o[0][0]=+z[0][0],o[1][0]=+z[1][0],o[0][1]=+z[0][1],o[1][1]=+z[1][1],y):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},y.constrain=function(z){return arguments.length?(t=z,y):t},y.duration=function(z){return arguments.length?(u=+z,y):u},y.interpolate=function(z){return arguments.length?(l=z,y):l},y.on=function(){var z=c.on.apply(c,arguments);return z===c?y:z},y.clickDistance=function(z){return arguments.length?(p=(z=+z)*z,y):Math.sqrt(p)},y.tapDistance=function(z){return arguments.length?(m=+z,y):m},y}const $f=Object.freeze(Object.defineProperty({__proto__:null,Adder:ze,Delaunay:_l,FormatSpecifier:Go,InternMap:mr,InternSet:Rt,Node:Ht,Path:$r,Voronoi:pg,ZoomTransform:$n,active:uk,arc:i5,area:qm,areaRadial:Cf,ascending:ke,autoType:Rw,axisBottom:Q1,axisLeft:J1,axisRight:X1,axisTop:Z1,bin:kc,bisect:ht,bisectCenter:Wp,bisectLeft:Vp,bisectRight:ht,bisector:_o,blob:Iw,blur:Zp,blur2:Zf,blurImage:Xp,brush:wk,brushSelection:bk,brushX:vk,brushY:kk,buffer:Lw,chord:Sk,chordDirected:Ak,chordTranspose:_k,cluster:QS,color:Ge,contourDensity:Xk,contours:yu,count:Ao,create:Pb,creator:zo,cross:r1,csv:Hw,csvFormat:ww,csvFormatBody:Mw,csvFormatRow:_w,csvFormatRows:Sw,csvFormatValue:Aw,csvParse:bg,csvParseRows:kw,cubehelix:Tn,cumsum:i1,curveBasis:up,curveBasisClosed:cs,curveBasisOpen:x5,curveBumpX:Ym,curveBumpY:Vm,curveBundle:fp,curveCardinal:T5,curveCardinalClosed:z5,curveCardinalOpen:C5,curveCatmullRom:ua,curveCatmullRomClosed:E5,curveCatmullRomOpen:N5,curveLinear:os,curveLinearClosed:R5,curveMonotoneX:B5,curveMonotoneY:P5,curveNatural:kp,curveStep:I5,curveStepAfter:L5,curveStepBefore:$5,descending:Vf,deviation:Jf,difference:K1,disjoint:D1,dispatch:qt,drag:qb,dragDisable:Eo,dragEnable:No,dsv:Dw,dsvFormat:Ho,easeBack:qc,easeBackIn:ek,easeBackInOut:qc,easeBackOut:nk,easeBounce:Sr,easeBounceIn:Qv,easeBounceInOut:Jv,easeBounceOut:Sr,easeCircle:Gc,easeCircleIn:Gv,easeCircleInOut:Gc,easeCircleOut:qv,easeCubic:hu,easeCubicIn:Pv,easeCubicInOut:hu,easeCubicOut:Iv,easeElastic:Fc,easeElasticIn:tk,easeElasticInOut:ak,easeElasticOut:Fc,easeExp:Oc,easeExpIn:Hv,easeExpInOut:Oc,easeExpOut:Ov,easeLinear:Nv,easePoly:Hc,easePolyIn:$v,easePolyInOut:Hc,easePolyOut:Lv,easeQuad:Dc,easeQuadIn:Rv,easeQuadInOut:Dc,easeQuadOut:Bv,easeSin:fu,easeSinIn:Kv,easeSinInOut:fu,easeSinOut:Dv,every:R1,extent:Tt,fcumsum:s1,filter:P1,flatGroup:u1,flatRollup:l1,forceCenter:Vw,forceCollide:Mg,forceLink:gM,forceManyBody:MM,forceRadial:SM,forceSimulation:Sg,forceX:_M,forceY:AM,get format(){return qo},formatDefaultLocale:xg,formatLocale:Ag,get formatPrefix(){return Tl},formatSpecifier:Sa,fsum:o1,geoAlbers:c0,geoAlbersUsa:ES,geoArea:IM,geoAzimuthalEqualArea:NS,geoAzimuthalEqualAreaRaw:Ll,geoAzimuthalEquidistant:RS,geoAzimuthalEquidistantRaw:Kl,geoBounds:DM,geoCentroid:UM,geoCircle:jM,geoClipAntimeridian:Eu,geoClipCircle:Vg,geoClipExtent:JM,geoClipRectangle:Fo,geoConicConformal:PS,geoConicConformalRaw:d0,geoConicEqualArea:go,geoConicEqualAreaRaw:l0,geoConicEquidistant:$S,geoConicEquidistantRaw:g0,geoContains:oS,geoDistance:io,geoEqualEarth:KS,geoEqualEarthRaw:Dl,geoEquirectangular:IS,geoEquirectangularRaw:Cr,geoGnomonic:DS,geoGnomonicRaw:Hl,geoGraticule:Xg,geoGraticule10:sS,geoIdentity:HS,geoInterpolate:uS,geoLength:Wg,geoMercator:BS,geoMercatorRaw:Or,geoNaturalEarth1:OS,geoNaturalEarth1Raw:Ol,geoOrthographic:GS,geoOrthographicRaw:Gl,geoPath:kS,geoProjection:qn,geoProjectionMutator:Il,geoRotation:Gg,geoStereographic:qS,geoStereographicRaw:ql,geoStream:Sn,geoTransform:wS,geoTransverseMercator:FS,geoTransverseMercatorRaw:Fl,gray:n2,greatest:cd,greatestIndex:T1,group:ad,groupSort:f1,groups:rd,hcl:Hi,hierarchy:Ul,histogram:kc,hsl:Li,html:jw,image:Gw,index:c1,indexes:h1,interpolate:tt,interpolateArray:s2,interpolateBasis:Dd,interpolateBasisClosed:Hd,interpolateBlues:B3,interpolateBrBG:d3,interpolateBuGn:w3,interpolateBuPu:M3,interpolateCividis:D3,interpolateCool:G3,interpolateCubehelix:M2,interpolateCubehelixDefault:H3,interpolateCubehelixLong:$o,interpolateDate:jd,interpolateDiscrete:c2,interpolateGnBu:S3,interpolateGreens:P3,interpolateGreys:I3,interpolateHcl:k2,interpolateHclLong:w2,interpolateHsl:y2,interpolateHslLong:b2,interpolateHue:h2,interpolateInferno:W3,interpolateLab:v2,interpolateMagma:V3,interpolateNumber:mn,interpolateNumberArray:fl,interpolateObject:Yd,interpolateOrRd:_3,interpolateOranges:K3,interpolatePRGn:g3,interpolatePiYG:m3,interpolatePlasma:Z3,interpolatePuBu:x3,interpolatePuBuGn:A3,interpolatePuOr:p3,interpolatePuRd:T3,interpolatePurples:$3,interpolateRainbow:uc,interpolateRdBu:y3,interpolateRdGy:b3,interpolateRdPu:z3,interpolateRdYlBu:v3,interpolateRdYlGn:k3,interpolateReds:L3,interpolateRgb:kr,interpolateRgbBasis:qd,interpolateRgbBasisClosed:o2,interpolateRound:Io,interpolateSinebow:U3,interpolateSpectral:Sm,interpolateString:dl,interpolateTransformCss:Zd,interpolateTransformSvg:Xd,interpolateTurbo:j3,interpolateViridis:Y3,interpolateWarm:O3,interpolateYlGn:E3,interpolateYlGnBu:C3,interpolateYlOrBr:N3,interpolateYlOrRd:R3,interpolateZoom:Qd,interrupt:Et,intersection:H1,interval:T2,isoFormat:Yx,isoParse:Wx,json:Fw,lab:Di,lch:t2,least:x1,leastIndex:pa,line:kn,lineRadial:zf,link:ss,linkHorizontal:g5,linkRadial:p5,linkVertical:m5,local:_d,map:I1,matcher:il,max:vn,maxIndex:el,mean:ft,median:dd,medianIndex:k1,merge:tl,min:An,minIndex:nl,mode:M1,namespace:Br,namespaces:tu,nice:Qu,now:Ir,pack:z_,packEnclose:M_,packSiblings:x_,pairs:S1,partition:C_,path:Sl,pathRound:zk,permute:ld,pie:l5,piecewise:tg,pointRadial:rr,pointer:cn,pointers:$b,polygonArea:A0,polygonCentroid:U_,polygonContains:Fu,polygonHull:V_,polygonLength:W_,precisionFixed:Tg,precisionPrefix:zg,precisionRound:Cg,quadtree:gt,quantile:pr,quantileIndex:fd,quantileSorted:hd,quantize:S2,quickselect:xo,radialArea:Cf,radialLine:zf,randomBates:J_,randomBernoulli:tA,randomBeta:z0,randomBinomial:C0,randomCauchy:rA,randomExponential:eA,randomGamma:Yl,randomGeometric:T0,randomInt:X_,randomIrwinHall:x0,randomLcg:lA,randomLogNormal:Q_,randomLogistic:iA,randomNormal:Yo,randomPareto:nA,randomPoisson:oA,randomUniform:Z_,randomWeibull:aA,range:Oe,rank:A1,reduce:$1,reverse:L1,rgb:ba,ribbon:$k,ribbonArrow:Lk,rollup:od,rollups:sd,scaleBand:Wl,scaleDiverging:hm,scaleDivergingLog:fm,scaleDivergingPow:sc,scaleDivergingSqrt:n3,scaleDivergingSymlog:dm,scaleIdentity:B0,scaleImplicit:Uu,scaleLinear:R0,scaleLog:I0,scaleOrdinal:Vl,scalePoint:cA,scalePow:ec,scaleQuantile:K0,scaleQuantize:D0,scaleRadial:L0,scaleSequential:Ur,scaleSequentialLog:um,scaleSequentialPow:oc,scaleSequentialQuantile:cm,scaleSequentialSqrt:e3,scaleSequentialSymlog:lm,scaleSqrt:MA,scaleSymlog:$0,scaleThreshold:H0,scaleTime:Qx,scaleUtc:Jx,scan:z1,schemeAccent:a3,schemeBlues:$m,schemeBrBG:gm,schemeBuGn:_m,schemeBuPu:Am,schemeCategory10:t3,schemeDark2:r3,schemeGnBu:xm,schemeGreens:Lm,schemeGreys:Km,schemeObservable10:i3,schemeOrRd:Tm,schemeOranges:Om,schemePRGn:mm,schemePaired:o3,schemePastel1:s3,schemePastel2:u3,schemePiYG:pm,schemePuBu:Cm,schemePuBuGn:zm,schemePuOr:ym,schemePuRd:Em,schemePurples:Dm,schemeRdBu:bm,schemeRdGy:vm,schemeRdPu:Nm,schemeRdYlBu:km,schemeRdYlGn:wm,schemeReds:Hm,schemeSet1:l3,schemeSet2:c3,schemeSet3:h3,schemeSpectral:Mm,schemeTableau10:f3,schemeYlGn:Bm,schemeYlGnBu:Rm,schemeYlOrBr:Pm,schemeYlOrRd:Im,select:_e,selectAll:Lb,selection:Ft,selector:Co,selectorAll:rl,shuffle:C1,shuffler:al,some:B1,sort:Js,stack:H5,stackOffsetDiverging:G5,stackOffsetExpand:O5,stackOffsetNone:Ea,stackOffsetSilhouette:q5,stackOffsetWiggle:F5,stackOrderAppearance:wp,stackOrderAscending:Mp,stackOrderDescending:j5,stackOrderInsideOut:Y5,stackOrderNone:Na,stackOrderReverse:V5,stratify:B_,style:It,subset:G1,sum:Pi,superset:md,svg:Yw,symbol:A5,symbolAsterisk:Wm,symbolCircle:us,symbolCross:Zm,symbolDiamond:Qm,symbolDiamond2:Jm,symbolPlus:ep,symbolSquare:np,symbolSquare2:tp,symbolStar:rp,symbolTimes:Vu,symbolTriangle:ip,symbolTriangle2:op,symbolWye:sp,symbolX:Vu,symbols:Ef,symbolsFill:Ef,symbolsStroke:_5,text:Oo,thresholdFreedmanDiaconis:b1,thresholdScott:v1,thresholdSturges:Ju,tickFormat:N0,tickIncrement:Pt,tickStep:Bi,ticks:Bt,timeDay:$a,timeDays:zA,get timeFormat(){return ac},timeFormatDefaultLocale:om,timeFormatLocale:em,timeFriday:q0,timeFridays:IA,timeHour:Xo,timeHours:xA,timeInterval:xe,timeMillisecond:Ta,timeMilliseconds:hf,timeMinute:Wo,timeMinutes:_A,timeMonday:Er,timeMondays:NA,timeMonth:Jo,timeMonths:qA,get timeParse(){return im},timeSaturday:F0,timeSaturdays:$A,timeSecond:Qn,timeSeconds:df,timeSunday:za,timeSundays:gf,timeThursday:Ot,timeThursdays:PA,timeTickInterval:J0,timeTicks:Q0,timeTuesday:O0,timeTuesdays:RA,timeWednesday:G0,timeWednesdays:BA,timeWeek:za,timeWeeks:gf,timeYear:Hn,timeYears:UA,timeout:qi,timer:Ko,timerFlush:ig,transition:pl,transpose:gd,tree:H_,treemap:O_,treemapBinary:G_,treemapDice:Gr,treemapResquarify:F_,treemapSlice:jo,treemapSliceDice:q_,treemapSquarify:_0,tsv:Ow,tsvFormat:Tw,tsvFormatBody:zw,tsvFormatRow:Ew,tsvFormatRows:Cw,tsvFormatValue:Nw,tsvParse:vg,tsvParseRows:xw,union:q1,unixDay:tc,unixDays:EA,utcDay:Fr,utcDays:CA,get utcFormat(){return ns},utcFriday:Y0,utcFridays:OA,utcHour:Qo,utcHours:TA,utcMillisecond:Ta,utcMilliseconds:hf,utcMinute:Zo,utcMinutes:AA,utcMonday:Nr,utcMondays:LA,utcMonth:es,utcMonths:FA,get utcParse(){return rc},utcSaturday:V0,utcSaturdays:GA,utcSecond:Qn,utcSeconds:df,utcSunday:Ca,utcSundays:mf,utcThursday:Gt,utcThursdays:HA,utcTickInterval:X0,utcTicks:Z0,utcTuesday:U0,utcTuesdays:KA,utcWednesday:j0,utcWednesdays:DA,utcWeek:Ca,utcWeeks:mf,utcYear:On,utcYears:jA,variance:Qf,window:ol,xml:Uw,zip:N1,zoom:nT,zoomIdentity:fs,zoomTransform:_p},Symbol.toStringTag,{value:"Module"})),oe=(e,n)=>e===void 0&&n===void 0?Math.random():(n===void 0&&(n=e,e=0),Math.floor(Math.random()*(n-e+1))+e),j=e=>e>=1?!0:e<=0?!1:Math.random()<e,ut=e=>n=>n%e===0,Ze=(e=100,n=30,t=0,a=300,r=0)=>L(Pe(Yo.source(()=>Math.random())(e,n)(),t,a),r),tT=e=>~~e+ +j(e%1),V=e=>e[Math.floor(Math.random()*e.length)],le=e=>{const n=[];for(const t in e)for(let a=0;a<e[t];a++)n.push(t);return n[Math.floor(Math.random()*n.length)]},Ap=(e,n,t)=>Math.round(e+(n-e)*Math.random()**t),En=e=>{if(typeof e!="string")return 0;if(!Number.isNaN(+e))return~~e+ +j(+e-~~e);const n=e[0]==="-"?-1:1;Number.isNaN(+e[0])&&(e=e.slice(1));const t=e.includes("-")?e.split("-"):null;if(!t)return 0;const a=oe(parseFloat(t[0])*n,+parseFloat(t[1]));return Number.isNaN(a)||a<0?0:a},xp=()=>String(Math.floor(Math.random()*1e9)),un=e=>"aeiouy'".includes(e),Ve=(e,n=3)=>{for(;e.length>n&&un(gr(Array.from(e)));)e=e.slice(0,-1);return e},Fe=e=>{const n=[{name:"guo",probability:1,condition:/ Guo$/,action:t=>t.slice(0,-4)},{name:"orszag",probability:1,condition:/orszag$/,action:t=>t.length<9?`${t}ian`:t.slice(0,-6)},{name:"stan",probability:1,condition:/stan$/,action:t=>t.length<9?`${t}i`:Ve(t.slice(0,-4))},{name:"land",probability:1,condition:/land$/,action:t=>{if(t.length>9)return t.slice(0,-4);const a=Ve(t.slice(0,-4),0);return a.length<3?`${t}ic`:a.length<4?`${a}lish`:`${a}ish`}},{name:"que",probability:1,condition:/que$/,action:t=>t.replace(/que$/,"can")},{name:"a",probability:1,condition:/a$/,action:t=>`${t}n`},{name:"o",probability:1,condition:/o$/,action:t=>t.replace(/o$/,"an")},{name:"u",probability:1,condition:/u$/,action:t=>`${t}an`},{name:"i",probability:1,condition:/i$/,action:t=>`${t}an`},{name:"e",probability:1,condition:/e$/,action:t=>`${t}an`},{name:"ay",probability:1,condition:/ay$/,action:t=>`${t}an`},{name:"os",probability:1,condition:/os$/,action:t=>{const a=Ve(t.slice(0,-2),0);return a.length<4?t.slice(0,-1):`${a}ian`}},{name:"es",probability:1,condition:/es$/,action:t=>{const a=Ve(t.slice(0,-2),0);return a.length>7?t.slice(0,-1):`${a}ian`}},{name:"l",probability:.8,condition:/l$/,action:t=>`${t}ese`},{name:"n",probability:.8,condition:/n$/,action:t=>`${t}ese`},{name:"ad",probability:.8,condition:/ad$/,action:t=>`${t}ian`},{name:"an",probability:.8,condition:/an$/,action:t=>`${t}ian`},{name:"ish",probability:.25,condition:/^[a-zA-Z]{6}$/,action:t=>`${Ve(t.slice(0,-1))}ish`},{name:"an",probability:.5,condition:/^[a-zA-Z]{0,7}$/,action:t=>`${Ve(t)}an`}];for(const t of n)if(j(t.probability)&&t.condition.test(e))return t.action(e);return e},aT=e=>e+(["st","nd","rd"][((e+90)%100-10)%10-1]||"th"),Rr=(e,n=[])=>{const a=e.replace("Old ","O ").replace(/[()]/g,"").split(" "),r=a.join("");let i=a.length===2?a[0][0]+a[1][0]:r.slice(0,2);for(let o=1;o<r.length-1&&n.includes(i);o++)i=r[0]+r[o].toUpperCase();return i},rT=e=>Intl.ListFormat?new Intl.ListFormat(document.documentElement.lang||"en",{style:"long",type:"conjunction"}).format(e):e.join(", "),Tp=(e,n="C")=>({"C":a=>`${L(a)}C`,"F":a=>`${L(a*9/5+32)}F`,K:a=>`${L(a+273.15)}K`,"R":a=>`${L((a+273.15)*9/5)}R`,"De":a=>`${L((100-a)*3/2)}De`,"N":a=>`${L(a*33/100)}N`,"R":a=>`${L(a*4/5)}R`,"R":a=>`${L(a*21/40+7.5)}R`})[n](e),iT=e=>e>=1e9?`${L(e/1e9,1)}B`:e>=1e8?`${L(e/1e6)}M`:e>=1e6?`${L(e/1e6,1)}M`:e>=1e4?`${L(e/1e3)}K`:e>=1e3?`${L(e/1e3,1)}K`:L(e).toString(),oT=e=>{const n=e.slice(-1);return n==="K"?parseInt(e.slice(0,-1),10)*1e3:n==="M"?parseInt(e.slice(0,-1),10)*1e6:n==="B"?parseInt(e.slice(0,-1),10)*1e9:parseInt(e,10)},sT=e=>{if(e.charAt(0)==="#")return e;const n=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return n&&n.length===4?"#"+`0${parseInt(n[1],10).toString(16)}`.slice(-2)+`0${parseInt(n[2],10).toString(16)}`.slice(-2)+`0${parseInt(n[3],10).toString(16)}`.slice(-2):""},pc=["#dababf","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#c6b9c1","#bc80bd","#ccebc5","#ffed6f","#8dd3c7","#eb8de7"],zp=e=>{const n=Ur(uc);return al(()=>Math.random())(Oe(e).map(r=>r<12?pc[r]:Ge(n((r-12)/(e-12)))?.formatHex())).filter(r=>typeof r=="string")},Ra=()=>Ge(Ur(uc)(Math.random())).formatHex(),lt=(e,n=.2,t=.3)=>{const a=e&&e[0]==="#"?e:Ra();return Ge(tt(a,Ra())(n)).brighter(t).formatHex()},Cp=e=>{let n;return e.parentNode?n=e.parentNode:e.host?n=e.host:e.defaultView&&(n=e.defaultView),n!==void 0?[e].concat(Cp(n)):[e]},uT=(e,n=1)=>{for(;document.getElementById(e+n);)n++;return e+n},lT=(e,n,...t)=>cT(e,Array.from,n,t),cT=(e,n,t,a)=>(function r(i,o){if(o>=a.length)return t(i);const u=new Map,l=a[o++];let c=-1;for(const h of i){const f=l(h,++c,i),s=u.get(f);s?s.push(h):u.set(f,[h])}for(const[h,f]of u)u.set(h,r(f,o));return n(u)})(e,0),Nt=([e,n],[t,a])=>(e-t)**2+(n-a)**2;class hT{constructor(n=[],t=(a,r)=>a<r?-1:a>r?1:0){if(this.data=n,this.length=this.data.length,this.compare=t,this.length>0)for(let a=(this.length>>1)-1;a>=0;a--)this._down(a)}push(n){this.data.push(n),this._up(this.length++)}pop(){if(this.length===0)return;const n=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:t,compare:a}=this,r=t[n];for(;n>0;){const i=n-1>>1,o=t[i];if(a(r,o)>=0)break;t[n]=o,n=i}t[n]=r}_down(n){const{data:t,compare:a}=this,r=this.length>>1,i=t[n];for(;n<r;){let o=(n<<1)+1;const u=o+1;if(u<this.length&&a(t[u],t[o])<0&&(o=u),a(t[o],i)>=0)break;t[n]=t[o],n=o}t[n]=i}}function fT(e,n=1,t=!1){let a=1/0,r=1/0,i=-1/0,o=-1/0;for(const[y,k]of e[0])y<a&&(a=y),k<r&&(r=k),y>i&&(i=y),k>o&&(o=k);const u=i-a,l=o-r,c=Math.max(n,Math.min(u,l));if(c===n){const y=[a,r];return y.distance=0,y}const h=new hT([],(y,k)=>k.max-y.max);let f=gT(e);const s=new wo(a+u/2,r+l/2,0,e);s.d>f.d&&(f=s);let d=2;function g(y,k,v){const b=new wo(y,k,v,e);d++,b.max>f.d+n&&h.push(b),b.d>f.d&&(f=b,t&&console.log(`found best ${Math.round(1e4*b.d)/1e4} after ${d} probes`))}let p=c/2;for(let y=a;y<i;y+=c)for(let k=r;k<o;k+=c)g(y+p,k+p,p);for(;h.length;){const{max:y,x:k,y:v,h:b}=h.pop();if(y-f.d<=n)break;p=b/2,g(k-p,v-p,p),g(k+p,v-p,p),g(k-p,v+p,p),g(k+p,v+p,p)}t&&console.log(`num probes: ${d}
best distance: ${f.d}`);const m=[f.x,f.y];return m.distance=f.d,m}function wo(e,n,t,a){this.x=e,this.y=n,this.h=t,this.d=dT(e,n,a),this.max=this.d+this.h*Math.SQRT2}function dT(e,n,t){let a=!1,r=1/0;for(const i of t)for(let o=0,u=i.length,l=u-1;o<u;l=o++){const c=i[o],h=i[l];c[1]>n!=h[1]>n&&e<(h[0]-c[0])*(n-c[1])/(h[1]-c[1])+c[0]&&(a=!a),r=Math.min(r,mT(e,n,c,h))}return r===0?0:(a?1:-1)*Math.sqrt(r)}function gT(e){let n=0,t=0,a=0;const r=e[0];for(let o=0,u=r.length,l=u-1;o<u;l=o++){const c=r[o],h=r[l],f=c[0]*h[1]-h[0]*c[1];t+=(c[0]+h[0])*f,a+=(c[1]+h[1])*f,n+=f*3}const i=new wo(t/n,a/n,0,e);return n===0||i.d<0?new wo(r[0][0],r[0][1],0,e):i}function mT(e,n,t,a){let r=t[0],i=t[1],o=a[0]-r,u=a[1]-i;if(o!==0||u!==0){const l=((e-r)*o+(n-i)*u)/(o*o+u*u);l>1?(r=a[0],i=a[1]):l>0&&(r+=o*l,i+=u*l)}return o=e-r,u=n-i,o*o+u*u}const Ep=(e,n)=>{const t=n.map(r=>e.p[r]);return`M${t.shift()} L${t.join(" ")} Z`},Lf=(e,n,t)=>{let a=!0,r="";return n.map(o=>{if(t(o))return a=!0,"";const u=a?"M":"L";return a=!1,r=u,` ${u==="L"&&u===r?"":u}${e.p[o]}`}).join("").trim()},pT=(e,n,t)=>{const a=[];let r=e,i=e;for(;r!==n;)a.push(r),i=t[r],r=i;return a.push(r),a.reverse()},yc=(e,n,t={polygons:!1,fill:!1,halo:!1,waterGap:!1})=>{const{cells:a,vertices:r}=e,i={},o=new Uint8Array(a.i.length),u=h=>{o[h]=1},l=h=>o[h]===1;for(const h of a.i){if(l(h)||!n(h))continue;u(h);const f=n(h),s=k=>n(k)===f,d=k=>n(k)!==f,g=a.c[h].find(d);if(g===void 0)continue;const p=e.features[a.f[g]];if(p.type==="lake"&&p.shoreline?.every(s))continue;const m=a.v[h].find(k=>r.c[k].some(d));if(m===void 0)throw new Error(`Starting vertex for cell ${h} is not found`);const y=Yr({vertices:r,startingVertex:m,ofSameType:s,addToChecked:u,closeRing:!0});y.length<3||c(f,r,y,i,t)}return i;function c(h,f,s,d,g){if(d[h]||(d[h]={}),g.polygons&&(d[h].polygons||(d[h].polygons=[]),d[h].polygons.push(s.map(p=>f.p[p]))),g.fill&&(d[h].fill||(d[h].fill=""),d[h].fill+=Ep(f,s)),g.waterGap){d[h].waterGap||(d[h].waterGap="");const p=m=>f.c[m].every(y=>a.h[y]>=20);d[h].waterGap+=Lf(f,s,p)}if(g.halo){d[h].halo||(d[h].halo="");const p=m=>f.c[m].some(y=>a.b[y]);d[h].halo+=Lf(f,s,p)}}},yT=(e,n={})=>{const{cells:t,vertices:a}=n,r=Object.fromEntries(e.map(f=>[f,!0])),i=f=>r[f],o=f=>!r[f],u=new Uint8Array(t.c.length),l=f=>{u[f]=1},c=f=>u[f]===1;let h="";for(const f of e){if(c(f))continue;const s=t.c[f].find(o);if(s===void 0)continue;const d=n.features[t.f[s]];if(d.type==="lake"&&d.shoreline&&d.shoreline.every(i))continue;const g=t.v[f].find(m=>a.c[m].some(o));if(g===void 0)throw new Error(`Starting vertex for cell ${f} is not found`);const p=Yr({vertices:a,startingVertex:g,ofSameType:i,addToChecked:l,closeRing:!0});p.length<3||(h+=Ep(a,p))}return h},bc=(e,n)=>{const t=yc(e,n,{polygons:!0}),a=Object.entries(t).map(([r,i])=>{const o=i.polygons.sort((c,h)=>h.length-c.length),[u,l]=fT(o,20);return[r,[L(u),L(l)]]});return Object.fromEntries(a)},Yr=({vertices:e,startingVertex:n,ofSameType:t,addToChecked:a,closeRing:r})=>{const i=e.c.length,o=[];let u=n;for(let l=0;l===0||u!==n;l++){const c=o.at(-1),h=u;o.push(h);const f=e.c[h];a&&f.filter(t).forEach(a);const[s,d,g]=f.map(t),[p,m,y]=e.v[h];if(p!==c&&s!==d?u=p:m!==c&&d!==g?u=m:y!==c&&s!==g&&(u=y),u>=e.c.length){window.ERROR&&console.error("ConnectVertices: next vertex is out of bounds");break}if(u===h){window.ERROR&&console.error("ConnectVertices: next vertex is not found");break}if(l===i){window.ERROR&&console.error("ConnectVertices: max iterations reached",i);break}}return r&&o.push(n),o},Wu=(e,n,t,a={})=>{if(n(e))return null;const r=[],i=[],o=new window.FlatQueue;for(o.push(e,0);o.length;){const u=o.peekValue(),l=o.pop();for(const c of a.cells.c[l]){if(n(c))return r[c]=l,pT(c,e,r);const h=t(l,c);if(h===1/0)continue;const f=u+h;f>=i[c]||(r[c]=l,i[c]=f,o.push(c,f))}}return null},zn=(e="",n=1)=>e.replace(/[\d.-][\d.e-]*/g,t=>L(parseFloat(t),n).toString()),Np=e=>e.charAt(0).toUpperCase()+e.slice(1),Rp=e=>{const n=e.length/2,t=e.split(" ");if(t.length<2)return t;let a="",r="",i="",o="";return t.forEach((u,l)=>{l+1!==t.length&&(u+=" "),o+=u,!a||o.length<n?a+=u:i?r+=u:i=u}),r?a.length<r.length?[a+i,r]:[a,i+r]:[a,i]},bT=e=>{if(!e)return[0,0,0,0,0,1];const n=e.replace(/[a-z()]/g,"").replace(/[ ]/g,",").split(",");return[n[0]||0,n[1]||0,n[2]||0,n[3]||0,n[4]||0,n[5]||1]},vT=e=>{try{return JSON.parse(e),!0}catch{return!1}},kT=e=>{try{return JSON.parse(e)}catch{return null}},wT=e=>{if(!e)throw new Error("No string provided");let n=e.toLowerCase().trim().replace(/[^a-z0-9-_]/g,"").replace(/\s+/g,"-");return n.match(/^\d/)&&(n=`_${n}`),n},Ae=document.getElementById.bind(document);function MT(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ei={exports:{}},ST=Ei.exports,Kf;function _T(){return Kf||(Kf=1,(function(e,n){(function(t,a){e.exports=a()})(ST,function(){return t.importState=function(r){var i=new t;return i.importState(r),i},t;function t(){return(function(r){var i=0,o=0,u=0,l=1;r.length==0&&(r=[+new Date]);var c=a();i=c(" "),o=c(" "),u=c(" ");for(var h=0;h<r.length;h++)i-=c(r[h]),i<0&&(i+=1),o-=c(r[h]),o<0&&(o+=1),u-=c(r[h]),u<0&&(u+=1);c=null;var f=function(){var s=2091639*i+l*23283064365386963e-26;return i=o,o=u,u=s-(l=s|0)};return f.next=f,f.uint32=function(){return f()*4294967296},f.fract53=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.version="Alea 0.9",f.args=r,f.exportState=function(){return[i,o,u,l]},f.importState=function(s){i=+s[0]||0,o=+s[1]||0,u=+s[2]||0,l=+s[3]||0},f})(Array.prototype.slice.call(arguments))}function a(){var r=4022871197,i=function(o){o=o.toString();for(var u=0;u<o.length;u++){r+=o.charCodeAt(u);var l=.02519603282416938*r;r=l>>>0,l-=r,l*=r,r=l>>>0,l-=r,r+=l*4294967296}return(r>>>0)*23283064365386963e-26};return i.version="Mash 0.9",i}})})(Ei)),Ei.exports}var AT=_T();const La=MT(AT);class xT{delaunay;points;pointsN;cells={v:[],c:[],b:[],i:new Uint32Array};vertices={p:[],v:[],c:[]};constructor(n,t,a){this.delaunay=n,this.points=t,this.pointsN=a,this.vertices;for(let r=0;r<this.delaunay.triangles.length;r++){const i=this.delaunay.triangles[this.nextHalfedge(r)];if(i<this.pointsN&&!this.cells.c[i]){const u=this.edgesAroundPoint(r);this.cells.v[i]=u.map(l=>this.triangleOfEdge(l)),this.cells.c[i]=u.map(l=>this.delaunay.triangles[l]).filter(l=>l<this.pointsN),this.cells.b[i]=u.length>this.cells.c[i].length?1:0}const o=this.triangleOfEdge(r);this.vertices.p[o]||(this.vertices.p[o]=this.triangleCenter(o),this.vertices.v[o]=this.trianglesAdjacentToTriangle(o),this.vertices.c[o]=this.pointsOfTriangle(o))}}pointsOfTriangle(n){return this.edgesOfTriangle(n).map(t=>this.delaunay.triangles[t])}trianglesAdjacentToTriangle(n){const t=[];for(const a of this.edgesOfTriangle(n)){const r=this.delaunay.halfedges[a];t.push(this.triangleOfEdge(r))}return t}edgesAroundPoint(n){const t=[];let a=n;do{t.push(a);const r=this.nextHalfedge(a);a=this.delaunay.halfedges[r]}while(a!==-1&&a!==n&&t.length<20);return t}triangleCenter(n){const t=this.pointsOfTriangle(n).map(a=>this.points[a]);return this.circumcenter(t[0],t[1],t[2])}edgesOfTriangle(n){return[3*n,3*n+1,3*n+2]}triangleOfEdge(n){return Math.floor(n/3)}nextHalfedge(n){return n%3===2?n-2:n+1}circumcenter(n,t,a){const[r,i]=n,[o,u]=t,[l,c]=a,h=r*r+i*i,f=o*o+u*u,s=l*l+c*c,d=2*(r*(u-c)+o*(c-i)+l*(i-u));return[Math.floor(1/d*(h*(u-c)+f*(c-i)+s*(i-u))),Math.floor(1/d*(h*(l-o)+f*(r-l)+s*(o-r)))]}}const TT=(e,n,t)=>{const a=L(-1*t),r=t*2,i=e-a*2,o=n-a*2,u=Math.ceil(i/r)-1,l=Math.ceil(o/r)-1,c=[];for(let h=.5;h<u;h++){const f=Math.ceil(i*h/u+a);c.push([f,a],[f,o+a])}for(let h=.5;h<l;h++){const f=Math.ceil(o*h/l+a);c.push([a,f],[i+a,f])}return c},zT=(e,n,t)=>{const a=t/2,r=a*.9,i=r*2,o=()=>Math.random()*i-r,u=[];for(let l=a;l<n;l+=t)for(let c=a;c<e;c+=t){const h=Math.min(L(c+o(),2),e),f=Math.min(L(l+o(),2),n);u.push([h,f])}return u},CT=(e,n)=>{TIME&&console.time("placePoints");const t=+(Ae("pointsInput")?.dataset.cells||0),a=L(Math.sqrt(e*n/t),2),r=TT(e,n,a),i=zT(e,n,a),o=Math.floor((e+.5*a-1e-10)/a),u=Math.floor((n+.5*a-1e-10)/a);return TIME&&console.timeEnd("placePoints"),{spacing:a,cellsDesired:t,boundary:r,points:i,cellsX:o,cellsY:u}},ET=(e,n,t,a)=>{if(n&&n!==e.seed)return!0;const r=+(Ae("pointsInput")?.dataset?.cells||0);if(r!==e.cellsDesired)return!0;const i=L(Math.sqrt(t*a/r),2),o=Math.floor((t+.5*i-1e-10)/i),u=Math.floor((a+.5*i-1e-10)/i);return e.spacing!==i||e.cellsX!==o||e.cellsY!==u},NT=(e,n,t)=>{Math.random=La(e);const{spacing:a,cellsDesired:r,boundary:i,points:o,cellsX:u,cellsY:l}=CT(n,t),{cells:c,vertices:h}=Bp(o,i);return{spacing:a,cellsDesired:r,boundary:i,points:o,cellsX:u,cellsY:l,cells:c,vertices:h,seed:e}},Bp=(e,n)=>{TIME&&console.time("calculateDelaunay");const t=e.concat(n),a=wa.from(t);TIME&&console.timeEnd("calculateDelaunay"),TIME&&console.time("calculateVoronoi");const r=new xT(a,t,e.length),i=r.cells;i.i=So({maxValue:e.length,length:e.length}).map((u,l)=>l);const o=r.vertices;return TIME&&console.timeEnd("calculateVoronoi"),{cells:i,vertices:o}},Nn=(e,n,t)=>Math.floor(Math.min(n/t.spacing,t.cellsY-1))*t.cellsX+Math.floor(Math.min(e/t.spacing,t.cellsX-1)),RT=(e,n,t,a)=>{const r=a.cells.c;let i=Math.floor(t/a.spacing),o=[Nn(e,n,a)];if(!i||t===1)return o;if(i>0&&(o=o.concat(r[o[0]])),i>1){let u=r[o[0]];for(;i>1;){const l=u.slice();u=[],l.forEach(c=>{r[c].forEach(h=>{o.indexOf(h)===-1&&(o.push(h),u.push(h))})}),i--}}return o},Mo=(e,n,t=1/0,a)=>{if(!a.cells?.q)return;const r=a.cells.q.find(e,n,t);return r?r[2]:void 0},Pp=(e,n,t,a)=>{let r,i,o;const u=(f,s)=>{f.result=[],f.x0=f.x-s,f.y0=f.y-s,f.x3=f.x+s,f.y3=f.y+s,f.radius=s*s},l=(f,s)=>{if(f.node.data.scanned=!0,s<f.radius)for(;f.node;)f.result.push(f.node.data),f.node.data.selected=!0,f.node=f.node.next};class c{node;x0;y0;x1;y1;constructor(s,d,g,p,m){this.node=s,this.x0=d,this.y0=g,this.x1=p,this.y1=m}}const h={x:e,y:n,x0:a._x0,y0:a._y0,x3:a._x1,y3:a._y1,quads:[],node:a._root};for(h.node&&h.quads.push(new c(h.node,h.x0,h.y0,h.x3,h.y3)),u(h,t),h.q=h.quads.pop();h.q;){if(h.node=h.q.node,h.x1=h.q.x0,h.y1=h.q.y0,h.x2=h.q.x1,h.y2=h.q.y1,!h.node||h.x1>h.x3||h.y1>h.y3||h.x2<h.x0||h.y2<h.y0){h.q=h.quads.pop();continue}if(h.node.length){h.node.explored=!0;const f=(h.x1+h.x2)/2,s=(h.y1+h.y2)/2;h.quads.push(new c(h.node[3],f,s,h.x2,h.y2),new c(h.node[2],h.x1,s,f,h.y2),new c(h.node[1],f,h.y1,h.x2,s),new c(h.node[0],h.x1,h.y1,f,s)),h.i=+(n>=s)<<1|+(e>=f),h.i&&(h.q=h.quads[h.quads.length-1],h.quads[h.quads.length-1]=h.quads[h.quads.length-1-h.i],h.quads[h.quads.length-1-h.i]=h.q)}else r=e-+a._x.call(null,h.node.data),i=n-+a._y.call(null,h.node.data),o=r*r+i*i,l(h,o);h.q=h.quads.pop()}return h.result},BT=(e,n,t,a)=>Pp(e,n,t,a.cells.q).map(i=>i[2]),PT=(e,n)=>n.cells.v[e].map(t=>n.vertices.p[t]),hr=(e,n)=>n.cells.v[e].map(t=>n.vertices.p[t]);function*IT(e,n,t,a,r,i=3){if(!(t>=e)||!(a>=n)||!(r>0))throw new Error;const o=t-e,u=a-n,l=r*r,c=3*l,h=r*Math.SQRT1_2,f=Math.ceil(o/h),s=Math.ceil(u/h),d=new Array(f*s),g=[];function p(y,k){const v=y/h|0,b=k/h|0,w=Math.max(v-2,0),M=Math.max(b-2,0),x=Math.min(v+3,f),S=Math.min(b+3,s);for(let T=M;T<S;++T){const _=T*f;for(let A=w;A<x;++A){const R=d[_+A];if(R){const N=R[0]-y,z=R[1]-k;if(N*N+z*z<l)return!1}}}return!0}function m(y,k){const v=[y,k];return d[f*(k/h|0)+(y/h|0)]=v,g.push(v),[y+e,k+n]}yield m(o/2,u/2);e:for(;g.length;){const y=Math.random()*g.length|0,k=g[y];for(let b=0;b<i;++b){const w=2*Math.PI*Math.random(),M=Math.sqrt(Math.random()*c+l),x=k[0]+M*Math.cos(w),S=k[1]+M*Math.sin(w);if(0<=x&&x<o&&0<=S&&S<u&&p(x,S)){yield m(x,S);continue e}}const v=g.pop();v!==void 0&&y<g.length&&(g[y]=v)}}const fr=(e,n)=>n.cells.h[e]>=20,vc=(e,n)=>n.cells.h[e]<20,$T=({heights:e,width:n,height:t,scheme:a,renderOcean:r})=>{const i=document.createElement("canvas");i.width=n,i.height=t;const o=i.getContext("2d"),u=o.createImageData(n,t),l=c=>c<20?r?c:0:c;for(let c=0;c<e.length;c++){const h=a(1-l(e[c])/100),{r:f,g:s,b:d}=Ge(h)?.rgb()??{r:0,g:0,b:0},g=c*4;u.data[g]=f,u.data[g+1]=s,u.data[g+2]=d,u.data[g+3]=255}return o.putImageData(u,0,0),i.toDataURL("image/png")},Vr=(e,n,t,a=0)=>e.length<2?e:e.some(r=>r===void 0)?(window.ERROR&&console.error("Undefined point in clipPoly",e),e):window.polygonclip(e,[0,0,n,t],a),LT=(e,n,t=10)=>{if(e.length===2)return 1;let a=1,r=1/0;for(let i=0;i<e.length-1;i++){const o=e[i],u=e[i+1],l=Math.sqrt(Nt(o,u)),c=Math.ceil(l/t),h=(u[0]-o[0])/c,f=(u[1]-o[1])/c;for(let s=0;s<c;s++){const d=o[0]+s*h,g=o[1]+s*f,p=Nt(n,[d,g]);p>=r||(r=p,a=i+1)}}return a},KT=(e,n)=>{let t=!1;return function(...a){t||(e.apply(this,a),t=!0,setTimeout(()=>{t=!1},n))}},DT=(e,n)=>{let t=!1,a=null,r=null;function i(...o){if(t){a=o,r=this;return}e.apply(this,o),t=!0,setTimeout(()=>{t=!1,a&&(i.apply(r,a),a=r=null)},n)}return i},HT=e=>{const t=navigator.userAgent.toLowerCase().indexOf("firefox")>-1?`${e.toString()} ${e.stack}`:e.stack||"",a=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#/%?=~_|!:,.;]*[-A-Z0-9+&@#/%=~_|])/gi;return t.replace(a,o=>`<i>${gr(o.split("/"))}</i>`).replace(/at /gi,"<br>&nbsp;&nbsp;at ")},OT=(e,n)=>{const t=new XMLHttpRequest;t.onload=()=>{const a=new FileReader;a.onloadend=()=>{n(a.result)},a.readAsDataURL(t.response)},t.open("GET",e),t.responseType="blob",t.send()},GT=e=>{window.open(e,"_blank")},qT=e=>{window.open(`https://github.com/Azgaar/Fantasy-Map-Generator/wiki/${e}`,"_blank")},FT=(e,n)=>`<a href="${e}" rel="noopener" target="_blank">${n}</a>`,UT=e=>e.ctrlKey||e.metaKey,jT=(e=100,n=1e3)=>new Date(oe(e,n),oe(12),oe(31)).toLocaleDateString("en",{year:"numeric",month:"long",day:"numeric"}),Ip=(e,n,t,a=2)=>L(n.lonW+e/t*n.lonT,a),$p=(e,n,t,a=2)=>L(n.latN-e/t*n.latT,a),YT=(e,n,t,a,r,i=2)=>[Ip(e,t,a,i),$p(n,t,r,i)],Df=()=>{const e=document.getElementById("prompt");if(!e)return;const n=e.querySelector("#promptForm");if(!n)return;const t="Please provide an input",a={default:1,step:.01,min:0,max:100,required:!0};window.prompt=(i=t,o=a,u)=>{if(o.default===void 0)return window.ERROR&&console.error("Prompt: options object does not have default value defined");const l=e.querySelector("#promptInput"),c=e.querySelector("#promptText");if(!l||!c)return;c.innerHTML=i;const h=typeof o.default=="number"?"number":"text";l.type=h,o.step!==void 0&&(l.step=o.step.toString()),o.min!==void 0&&(l.min=o.min.toString()),o.max!==void 0&&(l.max=o.max.toString()),l.required=o.required!==!1,l.placeholder=`type a ${h}`,l.value=o.default.toString(),l.style.width=i.length>10?"100%":"auto",e.style.display="block",n.addEventListener("submit",f=>{f.preventDefault(),e.style.display="none";const s=h==="number"?+l.value:l.value;u&&u(s)},{once:!0})};const r=e.querySelector("#promptCancel");r&&r.addEventListener("click",()=>{e.style.display="none"})},VT=(e,n)=>{window.debug.selectAll("text").remove(),window.debug.selectAll("text").data(e).enter().append("text").attr("x",(t,a)=>n.cells.p[a][0]).attr("y",(t,a)=>n.cells.p[a][1]).text(t=>t)},WT=(e,n,t)=>{const a=vn(e),r=An(e),i=window.getColorScheme(n.select("#landHeights").attr("scheme"));e=e.map(o=>1-dr(o,r,a)),window.debug.selectAll("polygon").remove(),window.debug.selectAll("polygon").data(e).enter().append("polygon").attr("points",(o,u)=>hr(u,t)).attr("fill",o=>i(o)).attr("stroke",o=>i(o))},ZT=e=>{window.debug.select("#connections").remove();const n=window.debug.append("g").attr("id","connections").attr("stroke-width",.8),t=e.cells.p,a=e.cells.routes;for(const r in a)for(const i in a[r]){const[o,u]=t[r],[l,c]=t[i],[h,f]=[(o+l)/2,(u+c)/2],s=a[r][i];n.append("line").attr("x1",o).attr("y1",u).attr("x2",h).attr("y2",f).attr("data-id",s).attr("stroke",pc[s%12])}},ir=([e,n],{color:t="red",radius:a=.5})=>{window.debug.append("circle").attr("cx",e).attr("cy",n).attr("r",a).attr("fill",t)},Lp=(e,{color:n="red",width:t=.5})=>{const a=kn().curve(fp);window.debug.append("path").attr("d",zn(a(e))).attr("stroke",n).attr("stroke-width",t).attr("fill","none")};window.rn=L;window.lim=gn;window.minmax=Pe;window.normalize=dr;window.lerp=ja;window.vowel=un;window.trimVowels=Ve;window.getAdjective=Fe;window.nth=aT;window.abbreviate=Rr;window.list=rT;window.last=gr;window.unique=jf;window.deepCopy=Up;window.getTypedArray=Yf;window.createTypedArray=So;window.INT8_MAX=Rn.INT8_MAX;window.UINT8_MAX=Rn.UINT8_MAX;window.UINT16_MAX=Rn.UINT16_MAX;window.UINT32_MAX=Rn.UINT32_MAX;window.rand=oe;window.P=j;window.each=ut;window.gauss=Ze;window.Pint=tT;window.ra=V;window.rw=le;window.biased=Ap;window.getNumberInRange=En;window.generateSeed=xp;window.convertTemperature=(e,n=window.temperatureScale.value||"C")=>Tp(e,n);window.si=iT;window.getInteger=oT;window.toHEX=sT;window.getColors=zp;window.getRandomColor=Ra;window.getMixedColor=lt;window.C_12=pc;window.getComposedPath=Cp;window.getNextId=uT;window.rollups=lT;window.dist2=Nt;window.getIsolines=yc;window.getPolesOfInaccessibility=bc;window.connectVertices=Yr;window.findPath=(e,n,t)=>Wu(e,n,t,window.pack);window.getVertexPath=e=>yT(e,window.pack);window.round=zn;window.capitalize=Np;window.splitInTwo=Rp;window.parseTransform=bT;window.sanitizeId=wT;JSON.isValid=vT;JSON.safeParse=kT;window.byId=Ae;Node.prototype.on=function(e,n,t){return this.addEventListener(e,n,t),this};Node.prototype.off=function(e,n){return this.removeEventListener(e,n),this};window.shouldRegenerateGrid=(e,n)=>ET(e,n,window.graphWidth,window.graphHeight);window.generateGrid=()=>NT(window.seed,window.graphWidth,window.graphHeight);window.findGridAll=(e,n,t)=>RT(e,n,t,window.grid);window.findGridCell=(e,n)=>Nn(e,n,window.grid);window.findCell=(e,n,t)=>Mo(e,n,t,window.pack);window.findAll=(e,n,t)=>BT(e,n,t,window.pack);window.getPackPolygon=e=>PT(e,window.pack);window.getGridPolygon=e=>hr(e,window.grid);window.calculateVoronoi=Bp;window.poissonDiscSampler=IT;window.findAllInQuadtree=Pp;window.drawHeights=$T;window.isLand=e=>fr(e,window.pack);window.isWater=e=>vc(e,window.pack);window.clipPoly=(e,n)=>Vr(e,graphWidth,graphHeight,n);window.getSegmentId=LT;window.debounce=KT;window.throttle=DT;window.parseError=HT;window.getBase64=OT;window.openURL=GT;window.wiki=qT;window.link=FT;window.isCtrlClick=UT;window.generateDate=jT;window.getLongitude=(e,n)=>Ip(e,mapCoordinates,graphWidth,n);window.getLatitude=(e,n)=>$p(e,mapCoordinates,graphHeight,n);window.getCoordinates=(e,n,t)=>YT(e,n,mapCoordinates,graphWidth,graphHeight,t);document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Df):Df();window.drawCellsValue=e=>VT(e,window.pack);window.drawPolygons=e=>WT(e,window.terrs,window.grid);window.drawRouteConnections=()=>ZT(window.packedGraph);window.drawPoint=ir;window.drawPath=Lp;class XT{grid=null;heights=null;blobPower=0;linePower=0;clearData(){this.heights=null,this.grid=null}getBlobPower(n){return{1e3:.93,2e3:.95,5e3:.97,1e4:.98,2e4:.99,3e4:.991,4e4:.993,5e4:.994,6e4:.995,7e4:.9955,8e4:.996,9e4:.9964,1e5:.9973}[n]||.98}getLinePower(n){return{1e3:.75,2e3:.77,5e3:.79,1e4:.81,2e4:.82,3e4:.83,4e4:.84,5e4:.86,6e4:.87,7e4:.88,8e4:.91,9e4:.92,1e5:.93}[n]||.81}getPointInRange(n,t){if(typeof n!="string"){window.ERROR&&console.error("Range should be a string");return}const a=parseInt(n.split("-")[0],10)/100||0,r=parseInt(n.split("-")[1],10)/100||a;return oe(a*t,r*t)}setGraph(n){const{cellsDesired:t,cells:a,points:r}=n;this.heights=a.h?Uint8Array.from(a.h):So({maxValue:100,length:r.length}),this.blobPower=this.getBlobPower(t),this.linePower=this.getLinePower(t),this.grid=n}addHill(n,t,a,r){const i=()=>{if(!this.heights||!this.grid)return;const u=new Uint8Array(this.heights.length);let l=0,c;const h=gn(En(t));do{const s=this.getPointInRange(a,graphWidth),d=this.getPointInRange(r,graphHeight);if(s===void 0||d===void 0)return;c=Nn(s,d,this.grid),l++}while(this.heights[c]+h>90&&l<50);u[c]=h;const f=[c];for(;f.length;){const s=f.shift();for(const d of this.grid.cells.c[s])u[d]||(u[d]=u[s]**this.blobPower*(Math.random()*.2+.9),u[d]>1&&f.push(d))}this.heights=this.heights.map((s,d)=>gn(s+u[d]))},o=En(n);for(let u=0;u<o;u++)i()}addPit(n,t,a,r){const i=()=>{if(!this.heights||!this.grid)return;const u=new Uint8Array(this.heights.length);let l=0,c,h=gn(En(t));do{const s=this.getPointInRange(a,graphWidth),d=this.getPointInRange(r,graphHeight);if(s===void 0||d===void 0)return;c=Nn(s,d,this.grid),l++}while(this.heights[c]<20&&l<50);const f=[c];for(;f.length;){const s=f.shift();if(h=h**this.blobPower*(Math.random()*.2+.9),h<1)return;this.grid.cells.c[s].forEach(d=>{u[d]||this.heights===null||(this.heights[d]=gn(this.heights[d]-h*(Math.random()*.2+.9)),u[d]=1,f.push(d))})}},o=En(n);for(let u=0;u<o;u++)i()}addRange(n,t,a,r,i,o){if(!this.heights||!this.grid)return;const u=()=>{if(!this.heights||!this.grid)return;const c=(p,m)=>{const y=[p],k=this.grid.points;for(h[p]=1;p!==m;){let v=1/0;if(this.grid.cells.c[p].forEach(b=>{if(h[b])return;let w=(k[m][0]-k[b][0])**2+(k[m][1]-k[b][1])**2;Math.random()>.85&&(w=w/2),w<v&&(v=w,p=b)}),v===1/0)return y;y.push(p),h[p]=1}return y},h=new Uint8Array(this.heights.length);let f=gn(En(t));if(a&&r){const p=this.getPointInRange(a,graphWidth),m=this.getPointInRange(r,graphHeight);let y=0,k=0,v,b;do b=Math.random()*graphWidth*.8+graphWidth*.1,v=Math.random()*graphHeight*.7+graphHeight*.15,y=Math.abs(v-m)+Math.abs(b-p),k++;while((y<graphWidth/8||y>graphWidth/3)&&k<50);i=Nn(p,m,this.grid),o=Nn(b,v,this.grid)}const s=c(i,o);let d=s.slice(),g=0;for(;d.length;){const p=d.slice();if(d=[],g++,p.forEach(m=>{this.heights&&(this.heights[m]=gn(this.heights[m]+f*(Math.random()*.3+.85)))}),f=f**this.linePower-1,f<2)break;p.forEach(m=>{this.grid.cells.c[m].forEach(y=>{h[y]||(d.push(y),h[y]=1)})})}s.forEach((p,m)=>{if(m%6===0)for(const y of Oe(g)){const k=pa(this.grid.cells.c[p],(b,w)=>this.heights[b]-this.heights[w]);if(k===void 0)continue;const v=this.grid.cells.c[p][k];this.heights[v]=(this.heights[p]*2+this.heights[v])/3,p=v}})},l=En(n);for(let c=0;c<l;c++)u()}addTrough(n,t,a,r,i,o){const u=()=>{if(!this.heights||!this.grid)return;const c=(p,m)=>{const y=[p],k=this.grid.points;for(h[p]=1;p!==m;){let v=1/0;if(this.grid.cells.c[p].forEach(b=>{if(h[b])return;let w=(k[m][0]-k[b][0])**2+(k[m][1]-k[b][1])**2;Math.random()>.8&&(w=w/2),w<v&&(v=w,p=b)}),v===1/0)return y;y.push(p),h[p]=1}return y},h=new Uint8Array(this.heights.length);let f=gn(En(t));if(a&&r){let p=0,m,y,k=0,v,b;do m=this.getPointInRange(a,graphWidth),y=this.getPointInRange(r,graphHeight),i=Nn(m,y,this.grid),p++;while(this.heights[i]<20&&p<50);p=0;do v=Math.random()*graphWidth*.8+graphWidth*.1,b=Math.random()*graphHeight*.7+graphHeight*.15,k=Math.abs(b-y)+Math.abs(v-m),p++;while((k<graphWidth/8||k>graphWidth/2)&&p<50);o=Nn(v,b,this.grid)}const s=c(i,o);let d=s.slice(),g=0;for(;d.length;){const p=d.slice();if(d=[],g++,p.forEach(m=>{this.heights[m]=gn(this.heights[m]-f*(Math.random()*.3+.85))}),f=f**this.linePower-1,f<2)break;p.forEach(m=>{this.grid.cells.c[m].forEach(y=>{h[y]||(d.push(y),h[y]=1)})})}s.forEach((p,m)=>{if(m%6===0)for(const y of Oe(g)){const k=pa(this.grid.cells.c[p],(b,w)=>this.heights[b]-this.heights[w]);if(k===void 0)continue;const v=this.grid.cells.c[p][k];this.heights[v]=(this.heights[p]*2+this.heights[v])/3,p=v}})},l=En(n);for(let c=0;c<l;c++)u()}addStrait(n,t="vertical"){if(!this.heights||!this.grid)return;const a=Math.min(En(n),this.grid.cellsX/3);if(a<1&&j(a))return;const r=new Uint8Array(this.heights.length),i=t==="vertical",o=i?Math.floor(Math.random()*graphWidth*.4+graphWidth*.3):5,u=i?5:Math.floor(Math.random()*graphHeight*.4+graphHeight*.3),l=i?Math.floor(graphWidth-o-graphWidth*.1+Math.random()*graphWidth*.2):graphWidth-5,c=i?graphHeight-5:Math.floor(graphHeight-u-graphHeight*.1+Math.random()*graphHeight*.2),h=Nn(o,u,this.grid),f=Nn(l,c,this.grid);let d=((m,y)=>{const k=[],v=this.grid.points;for(;m!==y;){let b=1/0;this.grid.cells.c[m].forEach(w=>{let M=(v[y][0]-v[w][0])**2+(v[y][1]-v[w][1])**2;Math.random()>.8&&(M=M/2),M<b&&(b=M,m=w)}),k.push(m)}return k})(h,f);const g=[],p=.1/a;for(let m=0;m<a;m++){const y=.9-p*a;d.forEach(k=>{this.grid.cells.c[k].forEach(v=>{r[v]||(r[v]=1,g.push(v),this.heights[v]**=y,this.heights[v]>100&&(this.heights[v]=5))})}),d=g.slice()}}modify(n,t,a,r){if(!this.heights)return;const i=n==="land"?20:n==="all"?0:+n.split("-")[0],o=n==="land"||n==="all"?100:+n.split("-")[1],u=i===20;this.heights=this.heights.map(l=>l<i||l>o?l:(t&&(l=u?Math.max(l+t,20):l+t),a!==1&&(l=u?(l-20)*a+20:l*a),r&&(l=u?(l-20)**r+20:l**r),gn(l)))}smooth(n=2,t=0){!this.heights||!this.grid||(this.heights=this.heights.map((a,r)=>{const i=[a];return this.grid.cells.c[r].forEach(o=>{i.push(this.heights[o])}),n===1?ft(i)+t:gn((a*(n-1)+ft(i)+t)/n)}))}mask(n=1){if(!this.heights||!this.grid)return;const t=n?Math.abs(n):1;this.heights=this.heights.map((a,r)=>{const[i,o]=this.grid.points[r],u=2*i/graphWidth-1,l=2*o/graphHeight-1;let c=(1-u**2)*(1-l**2);n<0&&(c=1-c);const h=a*c;return gn((a*(t-1)+h)/t)})}invert(n,t){if(!j(n)||!this.heights||!this.grid)return;const a=t!=="y",r=t!=="x",{cellsX:i,cellsY:o}=this.grid,u=this.heights.map((l,c)=>{if(!this.heights)return 0;const h=c%i,f=Math.floor(c/i),s=a?i-h-1:h,d=r?o-f-1:f,g=s+d*i;return this.heights[g]});this.heights=u}addStep(n,t,a,r,i){if(n==="Hill"){this.addHill(t,a,r,i);return}if(n==="Pit"){this.addPit(t,a,r,i);return}if(n==="Range"){this.addRange(t,a,r,i);return}if(n==="Trough"){this.addTrough(t,a,r,i);return}if(n==="Strait"){this.addStrait(t,a);return}if(n==="Mask"){this.mask(+t);return}if(n==="Invert"){this.invert(+t,a);return}if(n==="Add"){this.modify(a,+t,1);return}if(n==="Multiply"){this.modify(a,0,+t);return}if(n==="Smooth"){this.smooth(+t);return}}async generate(n){TIME&&console.time("defineHeightmap");const t=Ae("templateInput").value;Math.random=La(seed);const r=t in heightmapTemplates?this.fromTemplate(n,t):await this.fromPrecreated(n,t);return TIME&&console.timeEnd("defineHeightmap"),this.clearData(),r}fromTemplate(n,t){const r=(heightmapTemplates[t]?.template||"").split(`
`);if(!r.length)throw new Error(`Heightmap template: no steps. Template: ${t}. Steps: ${r}`);this.setGraph(n);for(const i of r){const o=i.trim().split(" ");if(o.length<2)throw new Error(`Heightmap template: steps < 2. Template: ${t}. Step: ${o}`);this.addStep(...o)}return this.heights}getHeightsFromImageData(n){if(this.heights)for(let t=0;t<this.heights.length;t++){const a=n[t*4]/255,r=a<.2?a:.2+(a-.2)**.8;this.heights[t]=Pe(Math.floor(r*100),0,100)}}fromPrecreated(n,t){return new Promise(a=>{const r=document.createElement("canvas"),i=r.getContext("2d"),{cellsX:o,cellsY:u}=n;r.width=o,r.height=u;const l=new Image;l.src=`./heightmaps/${t}.png`,l.onload=()=>{if(!i)throw new Error("Could not get canvas context");this.heights=this.heights||new Uint8Array(o*u),i.drawImage(l,0,0,o,u);const c=i.getImageData(0,0,o,u);this.setGraph(n),this.getHeightsFromImageData(c.data),r.remove(),l.remove(),a(this.heights)}})}getHeights(){return this.heights}}window.HeightmapGenerator=new XT;class QT{DEEPER_LAND=3;LANDLOCKED=2;LAND_COAST=1;UNMARKED=0;WATER_COAST=-1;DEEP_WATER=-2;markup({distanceField:n,neighbors:t,start:a,increment:r,limit:i=Rn.INT8_MAX}){for(let o=a,u=1/0;u>0&&o!==i;o+=r){u=0;const l=o-r;for(let c=0;c<t.length;c++)if(n[c]===l)for(const h of t[c])n[h]===this.UNMARKED&&(n[h]=o,u++)}}markupGrid(){TIME&&console.time("markupGrid"),Math.random=La(seed);const{h:n,c:t,b:a,i:r}=grid.cells,i=r.length,o=new Int8Array(i),u=new Uint16Array(i),l=[],c=[0];for(let h=1;c[0]!==-1;h++){const f=c[0];u[f]=h;const s=n[f]>=20;let d=!1;for(;c.length;){const p=c.pop();!d&&a[p]&&(d=!0);for(const m of t[p]){const y=n[m]>=20;s===y&&u[m]===this.UNMARKED?(u[m]=h,c.push(m)):s&&!y&&(o[p]=this.LAND_COAST,o[m]=this.WATER_COAST)}}const g=s?"island":d?"ocean":"lake";l.push({i:h,land:s,border:d,type:g}),c[0]=u.indexOf(this.UNMARKED)}this.markup({distanceField:o,neighbors:t,start:this.DEEP_WATER,increment:-1,limit:-10}),grid.cells.t=o,grid.cells.f=u,grid.features=[0,...l],TIME&&console.timeEnd("markupGrid")}markupPack(){const n=m=>{const y=o[m].filter(b=>vc(b,pack)),k=y.map(b=>Nt(r.p[m],r.p[b])),v=k.indexOf(Math.min.apply(Math,k));s[m]=y[v],d[m]=y.length},t=(m,y)=>{if(m==="ocean")return[y,[]];const k=_=>f[_],v=k(y),b=_=>k(_)===v,w=_=>k(_)!==v,M=S(y),x=T(M);return[M,x];function S(_){const A=N=>u[N]||o[N].some(w);if(A(_))return _;const R=r.i.filter(b).find(A);if(R===void 0)throw new Error(`Markup: firstCell ${_} is not on the feature or map border`);return R}function T(_){const A=r.v[_].find(R=>i.c[R].some(w));if(A===void 0)throw new Error(`Markup: startingVertex for cell ${_} is not found`);return Yr({vertices:i,startingVertex:A,ofSameType:b,closeRing:!1})}},a=({firstCell:m,land:y,border:k,featureId:v,totalCells:b})=>{const w=y?"island":k?"ocean":"lake",[M,x]=t(w,m),S=Vr(x.map(R=>i.p[R])),T=A0(S),_=Math.abs(L(T)),A={i:v,type:w,land:y,border:k,cells:b,firstCell:M,vertices:x,area:_,shoreline:[],height:0};return w==="lake"&&(T>0&&(A.vertices=A.vertices.reverse()),A.shoreline=jf(A.vertices.flatMap(R=>i.c[R].filter(N=>fr(N,pack)))),A.height=Lakes.getHeight(A)),{...A}};TIME&&console.time("markupPack");const{cells:r,vertices:i}=pack,{c:o,b:u,i:l}=r,c=l.length;if(!c)return;const h=new Int8Array(c),f=new Uint16Array(c),s=So({maxValue:c,length:c}),d=new Uint8Array(c),g=[],p=[0];for(let m=1;p[0]!==-1;m++){const y=p[0];f[y]=m;const k=fr(y,pack);let v=!!u[y],b=1;for(;p.length;){const w=p.pop();u[w]&&(v=!0);for(const M of o[w]){const x=fr(M,pack);k&&!x?(h[w]=this.LAND_COAST,h[M]=this.WATER_COAST,s[w]||n(w)):k&&x&&(h[M]===this.UNMARKED&&h[w]===this.LAND_COAST?h[M]=this.LANDLOCKED:h[w]===this.UNMARKED&&h[M]===this.LAND_COAST&&(h[w]=this.LANDLOCKED)),!f[M]&&k===x&&(p.push(M),f[M]=m,b++)}}g.push(a({firstCell:y,land:k,border:v,featureId:m,totalCells:b})),p[0]=f.indexOf(this.UNMARKED)}this.markup({distanceField:h,neighbors:o,start:this.DEEPER_LAND,increment:1}),this.markup({distanceField:h,neighbors:o,start:this.DEEP_WATER,increment:-1,limit:-10}),pack.cells.t=h,pack.cells.f=f,pack.cells.haven=s,pack.cells.harbor=d,pack.features=[0,...g],TIME&&console.timeEnd("markupPack")}defineGroups(){const n=grid.cells.i.length,t=n/25,a=n/1e3,r=n/10,i=n/1e3,o=h=>{const f=pack.features[pack.cells.f[h.firstCell-1]];return f&&f.type==="lake"?"lake_island":h.cells>r?"continent":h.cells>i?"island":"isle"},u=h=>h.cells>t?"ocean":h.cells>a?"sea":"gulf",l=h=>{if(h.temp<-3)return"frozen";if(h.height>60&&h.cells<10&&h.firstCell%10===0)return"lava";if(!h.inlets&&!h.outlet){if(h.evaporation>h.flux*4)return"dry";if(h.cells<3&&h.firstCell%10===0)return"sinkhole"}return!h.outlet&&h.evaporation>h.flux?"salt":"freshwater"},c=h=>{if(h.type==="island")return o(h);if(h.type==="ocean")return u(h);if(h.type==="lake")return l(h);throw new Error(`Markup: unknown feature type ${h.type}`)};for(const h of pack.features)!h||h.type==="ocean"||(h.type==="lake"&&(h.height=Lakes.getHeight(h)),h.group=c(h))}}window.Features=new QT;class JT{chains=[];calculateChain(n){const t=[],a=n.split(",");for(const r of a){const i=r.trim().toLowerCase(),o=!/[^\x20-\x7e]/.test(i);for(let u=-1,l="";u<i.length;u+=l.length||1,l=""){const c=i[u]||"";let h=0;for(let f=u+1;i[f]&&l.length<5;f++){const s=i[f],d=i[f+1];if(l+=s,l===" "||l==="-"||!d||d===" "||d==="-")break;if(un(s)&&(h=1),!(s==="y"&&d==="e")&&!(o&&(s==="o"&&d==="o"||s==="e"&&d==="e"||s==="a"&&d==="e"||s==="c"&&d==="h"))&&(un(s)===d||h&&un(i[f+2])))break}t[c]||(t[c]=[]),t[c].push(l)}}return t}updateChain(n){this.chains[n]=nameBases[n]?.b?this.calculateChain(nameBases[n].b):null}clearChains(){this.chains=[]}getBase(n,t,a,r){if(n===void 0)return ERROR&&console.error("Please define a base"),"ERROR";if(nameBases[n]===void 0)if(nameBases[0])WARN&&console.warn(`Namebase ${n} is not found. First available namebase will be used`),n=0;else return ERROR&&console.error(`Namebase ${n} is not found`),"ERROR";this.chains[n]||this.updateChain(n);const i=this.chains[n];if(!i||i[""]===void 0)return tip(`Namesbase ${n} is incorrect. Please check in namesbase editor`,!1,"error"),ERROR&&console.error(`Namebase ${n} is incorrect!`),"ERROR";t||(t=nameBases[n].min),a||(a=nameBases[n].max),r!==""&&(r=nameBases[n].d);let o=i[""],u=V(o),l="";for(let f=0;f<20;f++){if(u==="")if(l.length<t)u="",l="",o=i[""];else break;else if(l.length+u.length>a){l.length<t&&(l+=u);break}else o=i[gr(u.split(""))]||i[""];l+=u,u=V(o)}const c=gr(l.split(""));(c==="'"||c===" "||c==="-")&&(l=l.slice(0,-1));let h=[...l].reduce((f,s,d,g)=>s===g[d+1]&&!r.includes(s)?f:f.length?f.slice(-1)==="-"&&s===" "?f:f.slice(-1)===" "||f.slice(-1)==="-"?f+s.toUpperCase():s==="a"&&g[d+1]==="e"||d+2<g.length&&s===g[d+1]&&s===g[d+2]?f:f+s:s.toUpperCase(),"");return h.split(" ").some(f=>f.length<2)&&(h=h.split(" ").map((f,s)=>s?f.toLowerCase():f).join("")),h.length<2&&(ERROR&&console.error("Name is too short! Random name will be selected"),h=V(nameBases[n].b.split(","))),h}getCulture(n,t,a,r){if(n===void 0)return ERROR&&console.error("Please define a culture"),"ERROR";const i=pack.cultures[n].base;return this.getBase(i,t,a,r)}getCultureShort(n){return n===void 0?(ERROR&&console.error("Please define a culture"),"ERROR"):this.getBaseShort(pack.cultures[n].base)}getBaseShort(n){const t=nameBases[n]?nameBases[n].min-1:void 0,a=t?Math.max(nameBases[n].max-2,t):void 0;return this.getBase(n,t,a,"")}validateSuffix(n,t){if(n.slice(-1*t.length)===t)return n;const a=t.charAt(0);return n.slice(-1)===a&&(n=n.slice(0,-1)),un(a)===un(n.slice(-1))&&un(a)===un(n.slice(-2,-1))&&(n=n.slice(0,-1)),n.slice(-1)===a&&(n=n.slice(0,-1)),n+t}addSuffix(n){const t=j(.8)?"ia":"land";return t==="ia"&&n.length>6?n=n.slice(0,-(n.length-3)):t==="land"&&n.length>6&&(n=n.slice(0,-(n.length-5))),this.validateSuffix(n,t)}getState(n,t,a){if(n===void 0)return ERROR&&console.error("Please define a base name"),"ERROR";if(t===void 0&&a===void 0)return ERROR&&console.error("Please define a culture"),"ERROR";if(a===void 0&&(a=pack.cultures[t].base),n.includes(" ")&&(n=Np(n.replace(/ /g,"").toLowerCase())),n.length>6&&n.slice(-4)==="berg"&&(n=n.slice(0,-4)),n.length>5&&n.slice(-3)==="ton"&&(n=n.slice(0,-3)),a===5&&["sk","ev","ov"].includes(n.slice(-2)))n=n.slice(0,-2);else{if(a===12)return un(n.slice(-1))?n:`${n}u`;a===18&&j(.4)&&(n=un(n.slice(0,1).toLowerCase())?`Al${n.toLowerCase()}`:`Al ${n}`)}if(a>32&&a<42)return n;if(n.length>3&&un(n.slice(-1)))if(un(n.slice(-2,-1))&&j(.85))n=n.slice(0,-2);else if(j(.7))n=n.slice(0,-1);else return n;else if(j(.4))return n;let r="ia";const i=Math.random(),o=n.length;return a===3&&i<.03&&o<7||a===4&&i<.03&&o<7||a===13&&i<.03&&o<7?r="terra":a===2&&i<.03&&o<7?r="terre":a===0&&i<.5&&o<7||a===1&&i<.4&&o<7||a===6&&i<.3&&o<7||a===32&&i<.1&&o<7?r="land":a===7&&i<.1?r="eia":a===9&&i<.35?r="maa":a===15&&i<.4&&o<6?r="orszag":a===16?r=i<.6?"yurt":"eli":a===10?r="guk":a===11?r=" Guo":a===14?r=i<.5&&o<6?"tlan":"co":(a===17&&i<.8||a===18&&i<.8)&&(r="a"),this.validateSuffix(n,r)}getMapName(n){if(!n&&locked("mapName"))return;n&&locked("mapName")&&unlock("mapName");const t=j(.7)?2:j(.5)?oe(0,6):oe(0,31);if(!nameBases[t])return tip("Namebase is not found",!1,"error"),"";const a=nameBases[t].min-1,r=Math.max(nameBases[t].max-3,a),i=this.getBase(t,a,r,""),o=j(.7)?this.addSuffix(i):i;mapName.value=o}getNameBases(){return[{name:"German",i:0,min:5,max:12,d:"lt",m:0,b:"Achern,Aichhalden,Aitern,Albbruck,Alpirsbach,Altensteig,Althengstett,Appenweier,Auggen,Badenen,Badenweiler,Baiersbronn,Ballrechten,Bellingen,Berghaupten,Bernau,Biberach,Biederbach,Binzen,Birkendorf,Birkenfeld,Bischweier,Blumberg,Bollen,Bollschweil,Bonndorf,Bosingen,Braunlingen,Breisach,Breisgau,Breitnau,Brigachtal,Buchenbach,Buggingen,Buhl,Buhlertal,Calw,Dachsberg,Dobel,Donaueschingen,Dornhan,Dornstetten,Dottingen,Dunningen,Durbach,Durrheim,Ebhausen,Ebringen,Efringen,Egenhausen,Ehrenkirchen,Ehrsberg,Eimeldingen,Eisenbach,Elzach,Elztal,Emmendingen,Endingen,Engelsbrand,Enz,Enzklosterle,Eschbronn,Ettenheim,Ettlingen,Feldberg,Fischerbach,Fischingen,Fluorn,Forbach,Freiamt,Freiburg,Freudenstadt,Friedenweiler,Friesenheim,Frohnd,Furtwangen,Gaggenau,Geisingen,Gengenbach,Gernsbach,Glatt,Glatten,Glottertal,Gorwihl,Gottenheim,Grafenhausen,Grenzach,Griesbach,Gutach,Gutenbach,Hag,Haiterbach,Hardt,Harmersbach,Hasel,Haslach,Hausach,Hausen,Hausern,Heitersheim,Herbolzheim,Herrenalb,Herrischried,Hinterzarten,Hochenschwand,Hofen,Hofstetten,Hohberg,Horb,Horben,Hornberg,Hufingen,Ibach,Ihringen,Inzlingen,Kandern,Kappel,Kappelrodeck,Karlsbad,Karlsruhe,Kehl,Keltern,Kippenheim,Kirchzarten,Konigsfeld,Krozingen,Kuppenheim,Kussaberg,Lahr,Lauchringen,Lauf,Laufenburg,Lautenbach,Lauterbach,Lenzkirch,Liebenzell,Loffenau,Loffingen,Lorrach,Lossburg,Mahlberg,Malsburg,Malsch,March,Marxzell,Marzell,Maulburg,Monchweiler,Muhlenbach,Mullheim,Munstertal,Murg,Nagold,Neubulach,Neuenburg,Neuhausen,Neuried,Neuweiler,Niedereschach,Nordrach,Oberharmersbach,Oberkirch,Oberndorf,Oberbach,Oberried,Oberwolfach,Offenburg,Ohlsbach,Oppenau,Ortenberg,otigheim,Ottenhofen,Ottersweier,Peterstal,Pfaffenweiler,Pfalzgrafenweiler,Pforzheim,Rastatt,Renchen,Rheinau,Rheinfelden,Rheinmunster,Rickenbach,Rippoldsau,Rohrdorf,Rottweil,Rummingen,Rust,Sackingen,Sasbach,Sasbachwalden,Schallbach,Schallstadt,Schapbach,Schenkenzell,Schiltach,Schliengen,Schluchsee,Schomberg,Schonach,Schonau,Schonenberg,Schonwald,Schopfheim,Schopfloch,Schramberg,Schuttertal,Schwenningen,Schworstadt,Seebach,Seelbach,Seewald,Sexau,Simmersfeld,Simonswald,Sinzheim,Solden,Staufen,Stegen,Steinach,Steinen,Steinmauern,Straubenhardt,Stuhlingen,Sulz,Sulzburg,Teinach,Tiefenbronn,Tiengen,Titisee,Todtmoos,Todtnau,Todtnauberg,Triberg,Tunau,Tuningen,uhlingen,Unterkirnach,Reichenbach,Utzenfeld,Villingen,Villingendorf,Vogtsburg,Vohrenbach,Waldachtal,Waldbronn,Waldkirch,Waldshut,Wehr,Weil,Weilheim,Weisenbach,Wembach,Wieden,Wiesental,Wildbad,Wildberg,Winzeln,Wittlingen,Wittnau,Wolfach,Wutach,Wutoschingen,Wyhlen,Zavelstein"},{name:"English",i:1,min:6,max:11,d:"",m:.1,b:"Abingdon,Albrighton,Alcester,Almondbury,Altrincham,Amersham,Andover,Appleby,Ashboume,Atherstone,Aveton,Axbridge,Aylesbury,Baldock,Bamburgh,Barton,Basingstoke,Berden,Bere,Berkeley,Berwick,Betley,Bideford,Bingley,Birmingham,Blandford,Blechingley,Bodmin,Bolton,Bootham,Boroughbridge,Boscastle,Bossinney,Bramber,Brampton,Brasted,Bretford,Bridgetown,Bridlington,Bromyard,Bruton,Buckingham,Bungay,Burton,Calne,Cambridge,Canterbury,Carlisle,Castleton,Caus,Charmouth,Chawleigh,Chichester,Chillington,Chinnor,Chipping,Chisbury,Cleobury,Clifford,Clifton,Clitheroe,Cockermouth,Coleshill,Combe,Congleton,Crafthole,Crediton,Cuddenbeck,Dalton,Darlington,Dodbrooke,Drax,Dudley,Dunstable,Dunster,Dunwich,Durham,Dymock,Exeter,Exning,Faringdon,Felton,Fenny,Finedon,Flookburgh,Fowey,Frampton,Gateshead,Gatton,Godmanchester,Grampound,Grantham,Guildford,Halesowen,Halton,Harbottle,Harlow,Hatfield,Hatherleigh,Haydon,Helston,Henley,Hertford,Heytesbury,Hinckley,Hitchin,Holme,Hornby,Horsham,Kendal,Kenilworth,Kilkhampton,Kineton,Kington,Kinver,Kirby,Knaresborough,Knutsford,Launceston,Leighton,Lewes,Linton,Louth,Luton,Lyme,Lympstone,Macclesfield,Madeley,Malborough,Maldon,Manchester,Manningtree,Marazion,Marlborough,Marshfield,Mere,Merryfield,Middlewich,Midhurst,Milborne,Mitford,Modbury,Montacute,Mousehole,Newbiggin,Newborough,Newbury,Newenden,Newent,Norham,Northleach,Noss,Oakham,Olney,Orford,Ormskirk,Oswestry,Padstow,Paignton,Penkneth,Penrith,Penzance,Pershore,Petersfield,Pevensey,Pickering,Pilton,Pontefract,Portsmouth,Preston,Quatford,Reading,Redcliff,Retford,Rockingham,Romney,Rothbury,Rothwell,Salisbury,Saltash,Seaford,Seasalter,Sherston,Shifnal,Shoreham,Sidmouth,Skipsea,Skipton,Solihull,Somerton,Southam,Southwark,Standon,Stansted,Stapleton,Stottesdon,Sudbury,Swavesey,Tamerton,Tarporley,Tetbury,Thatcham,Thaxted,Thetford,Thornbury,Tintagel,Tiverton,Torksey,Totnes,Towcester,Tregoney,Trematon,Tutbury,Uxbridge,Wallingford,Wareham,Warenmouth,Wargrave,Warton,Watchet,Watford,Wendover,Westbury,Westcheap,Weymouth,Whitford,Wickwar,Wigan,Wigmore,Winchelsea,Winkleigh,Wiscombe,Witham,Witheridge,Wiveliscombe,Woodbury,Yeovil"},{name:"French",i:2,min:5,max:13,d:"nlrs",m:.1,b:"Adon,Aillant,Amilly,Andonville,Ardon,Artenay,Ascheres,Ascoux,Attray,Aubin,Audeville,Aulnay,Autruy,Auvilliers,Auxy,Aveyron,Baccon,Bardon,Barville,Batilly,Baule,Bazoches,Beauchamps,Beaugency,Beaulieu,Beaune,Bellegarde,Boesses,Boigny,Boiscommun,Boismorand,Boisseaux,Bondaroy,Bonnee,Bonny,Bordes,Bou,Bougy,Bouilly,Boulay,Bouzonville,Bouzy,Boynes,Bray,Breteau,Briare,Briarres,Bricy,Bromeilles,Bucy,Cepoy,Cercottes,Cerdon,Cernoy,Cesarville,Chailly,Chaingy,Chalette,Chambon,Champoulet,Chanteau,Chantecoq,Chapell,Charme,Charmont,Charsonville,Chateau,Chateauneuf,Chatel,Chatenoy,Chatillon,Chaussy,Checy,Chevannes,Chevillon,Chevilly,Chevry,Chilleurs,Choux,Chuelles,Clery,Coinces,Coligny,Combleux,Combreux,Conflans,Corbeilles,Corquilleroy,Cortrat,Coudroy,Coullons,Coulmiers,Courcelles,Courcy,Courtemaux,Courtempierre,Courtenay,Cravant,Crottes,Dadonville,Dammarie,Dampierre,Darvoy,Desmonts,Dimancheville,Donnery,Dordives,Dossainville,Douchy,Dry,Echilleuses,Egry,Engenville,Epieds,Erceville,Ervauville,Escrennes,Escrignelles,Estouy,Faverelles,Fay,Feins,Ferolles,Ferrieres,Fleury,Fontenay,Foret,Foucherolles,Freville,Gatinais,Gaubertin,Gemigny,Germigny,Gidy,Gien,Girolles,Givraines,Gondreville,Grangermont,Greneville,Griselles,Guigneville,Guilly,Gyleslonains,Huetre,Huisseau,Ingrannes,Ingre,Intville,Isdes,Ivre,Jargeau,Jouy,Juranville,Bussiere,Laas,Ladon,Lailly,Langesse,Leouville,Ligny,Lombreuil,Lorcy,Lorris,Loury,Louzouer,Malesherbois,Marcilly,Mardie,Mareau,Marigny,Marsainvilliers,Melleroy,Menestreau,Merinville,Messas,Meung,Mezieres,Migneres,Mignerette,Mirabeau,Montargis,Montbarrois,Montbouy,Montcresson,Montereau,Montigny,Montliard,Mormant,Morville,Moulinet,Moulon,Nancray,Nargis,Nesploy,Neuville,Neuvy,Nevoy,Nibelle,Nogent,Noyers,Ocre,Oison,Olivet,Ondreville,Onzerain,Orleans,Ormes,Orville,Oussoy,Outarville,Ouzouer,Pannecieres,Pannes,Patay,Paucourt,Pers,Pierrefitte,Pithiverais,Pithiviers,Poilly,Potier,Prefontaines,Presnoy,Pressigny,Puiseaux,Quiers,Ramoulu,Rebrechien,Rouvray,Rozieres,Rozoy,Ruan,Sandillon,Santeau,Saran,Sceaux,Seichebrieres,Semoy,Sennely,Sermaises,Sigloy,Solterre,Sougy,Sully,Sury,Tavers,Thignonville,Thimory,Thorailles,Thou,Tigy,Tivernon,Tournoisis,Trainou,Treilles,Trigueres,Trinay,Vannes,Varennes,Vennecy,Vieilles,Vienne,Viglain,Vignes,Villamblain,Villemandeur,Villemoutiers,Villemurlin,Villeneuve,Villereau,Villevoques,Villorceau,Vimory,Vitry,Vrigny"},{name:"Italian",i:3,min:5,max:12,d:"cltr",m:.1,b:"Accumoli,Acquafondata,Acquapendente,Acuto,Affile,Agosta,Alatri,Albano,Allumiere,Alvito,Amaseno,Amatrice,Anagni,Anguillara,Anticoli,Antrodoco,Anzio,Aprilia,Aquino,Arcinazzo,Ariccia,Arpino,Arsoli,Ausonia,Bagnoregio,Bassiano,Bellegra,Belmonte,Bolsena,Bomarzo,Borgorose,Boville,Bracciano,Broccostella,Calcata,Camerata,Campagnano,Campoli,Canale,Canino,Cantalice,Cantalupo,Capranica,Caprarola,Carbognano,Casalattico,Casalvieri,Castelforte,Castelnuovo,Castiglione,Castro,Castrocielo,Ceccano,Celleno,Cellere,Cerreto,Cervara,Cerveteri,Ciampino,Ciciliano,Cittaducale,Cittareale,Civita,Civitella,Colfelice,Colleferro,Collepardo,Colonna,Concerviano,Configni,Contigliano,Cori,Cottanello,Esperia,Faleria,Farnese,Ferentino,Fiamignano,Filacciano,Fiuggi,Fiumicino,Fondi,Fontana,Fonte,Fontechiari,Formia,Frascati,Frasso,Frosinone,Fumone,Gaeta,Gallese,Gavignano,Genazzano,Giuliano,Gorga,Gradoli,Grottaferrata,Grotte,Guarcino,Guidonia,Ischia,Isola,Labico,Labro,Ladispoli,Latera,Lenola,Leonessa,Licenza,Longone,Lubriano,Maenza,Magliano,Marano,Marcellina,Marcetelli,Marino,Mazzano,Mentana,Micigliano,Minturno,Montalto,Montasola,Montebuono,Monteflavio,Montelanico,Monteleone,Montenero,Monterosi,Moricone,Morlupo,Nazzano,Nemi,Nerola,Nespolo,Nettuno,Norma,Olevano,Onano,Oriolo,Orte,Orvinio,Paganico,Paliano,Palombara,Patrica,Pescorocchiano,Petrella,Piansano,Picinisco,Pico,Piedimonte,Piglio,Pignataro,Poggio,Poli,Pomezia,Pontecorvo,Pontinia,Ponzano,Posta,Pozzaglia,Priverno,Proceno,Rignano,Riofreddo,Ripi,Rivodutri,Rocca,Roccagorga,Roccantica,Roccasecca,Roiate,Ronciglione,Roviano,Salisano,Sambuci,Santa,Santini,Scandriglia,Segni,Selci,Sermoneta,Serrone,Settefrati,Sezze,Sgurgola,Sonnino,Sora,Soriano,Sperlonga,Spigno,Subiaco,Supino,Sutri,Tarano,Tarquinia,Terelle,Terracina,Tivoli,Toffia,Tolfa,Torrice,Torricella,Trevi,Trevignano,Trivigliano,Turania,Tuscania,Valentano,Vallecorsa,Vallemaio,Vallepietra,Vallerano,Vasanello,Vejano,Velletri,Ventotene,Veroli,Vetralla,Vicalvi,Vico,Vicovaro,Vignanello,Viterbo,Viticuso,Vitorchiano,Vivaro,Zagarolo"},{name:"Castillian",i:4,min:5,max:11,d:"lr",m:0,b:"Ajofrin,Alameda,Alaminos,Albares,Albarreal,Albendiego,Alcanizo,Alcaudete,Alcolea,Aldea,Aldeanueva,Algar,Algora,Alhondiga,Almadrones,Almendral,Alovera,Anguita,Arbancon,Argecilla,Arges,Arroyo,Atanzon,Atienza,Azuqueca,Baides,Banos,Bargas,Barriopedro,Belvis,Berninches,Brihuega,Buenaventura,Burgos,Burguillos,Bustares,Cabanillas,Calzada,Camarena,Campillo,Cantalojas,Cardiel,Carmena,Casas,Castejon,Castellar,Castilforte,Castillo,Castilnuevo,Cazalegas,Centenera,Cervera,Checa,Chozas,Chueca,Cifuentes,Cincovillas,Ciruelas,Cogollor,Cogolludo,Consuegra,Copernal,Corral,Cuerva,Domingo,Dosbarrios,Driebes,Duron,Escalona,Escalonilla,Escamilla,Escopete,Espinosa,Esplegares,Esquivias,Estables,Estriegana,Fontanar,Fuembellida,Fuensalida,Fuentelsaz,Gajanejos,Galvez,Gascuena,Gerindote,Guadamur,Heras,Herreria,Herreruela,Hinojosa,Hita,Hombrados,Hontanar,Hormigos,Huecas,Huerta,Humanes,Illana,Illescas,Iniestola,Irueste,Jadraque,Jirueque,Lagartera,Ledanca,Lillo,Lominchar,Loranca,Lucillos,Luzaga,Luzon,Madrid,Magan,Malaga,Malpica,Manzanar,Maqueda,Masegoso,Matillas,Medranda,Megina,Mejorada,Millana,Milmarcos,Mirabueno,Miralrio,Mocejon,Mochales,Molina,Mondejar,Montarron,Mora,Moratilla,Morenilla,Navas,Negredo,Noblejas,Numancia,Nuno,Ocana,Ocentejo,Olias,Olmeda,Ontigola,Orea,Orgaz,Oropesa,Otero,Palma,Pardos,Paredes,Penalver,Pepino,Peralejos,Pinilla,Pioz,Piqueras,Portillo,Poveda,Pozo,Pradena,Prados,Puebla,Puerto,Quero,Quintanar,Rebollosa,Retamoso,Riba,Riofrio,Robledo,Romanillos,Romanones,Rueda,Salmeron,Santiuste,Santo,Sauca,Segura,Selas,Semillas,Sesena,Setiles,Sevilla,Siguenza,Solanillos,Somolinos,Sonseca,Sotillo,Talavera,Taravilla,Tembleque,Tendilla,Tierzo,Torralba,Torre,Torrejon,Torrijos,Tortola,Tortuera,Totanes,Trillo,Uceda,Ugena,Urda,Utande,Valdesotos,Valhermoso,Valtablado,Valverde,Velada,Viana,Yebra,Yuncos,Yunquera,Zaorejas,Zarzuela,Zorita"},{name:"Ruthenian",i:5,min:5,max:10,d:"",m:0,b:"Belgorod,Beloberezhye,Belyi,Belz,Berestiy,Berezhets,Berezovets,Berezutsk,Bobruisk,Bolonets,Borisov,Borovsk,Bozhesk,Bratslav,Bryansk,Brynsk,Buryn,Byhov,Chechersk,Chemesov,Cheremosh,Cherlen,Chern,Chernigov,Chernitsa,Chernobyl,Chernogorod,Chertoryesk,Chetvertnia,Demyansk,Derevesk,Devyagoresk,Dichin,Dmitrov,Dorogobuch,Dorogobuzh,Drestvin,Drokov,Drutsk,Dubechin,Dubichi,Dubki,Dubkov,Dveren,Galich,Glebovo,Glinsk,Goloty,Gomiy,Gorodets,Gorodische,Gorodno,Gorohovets,Goroshin,Gorval,Goryshon,Holm,Horobor,Hoten,Hotin,Hotmyzhsk,Ilovech,Ivan,Izborsk,Izheslavl,Kamenets,Kanev,Karachev,Karna,Kavarna,Klechesk,Klyapech,Kolomyya,Kolyvan,Kopyl,Korec,Kornik,Korochunov,Korshev,Korsun,Koshkin,Kotelno,Kovyla,Kozelsk,Kozelsk,Kremenets,Krichev,Krylatsk,Ksniatin,Kulatsk,Kursk,Kursk,Lebedev,Lida,Logosko,Lomihvost,Loshesk,Loshichi,Lubech,Lubno,Lubutsk,Lutsk,Luchin,Luki,Lukoml,Luzha,Lvov,Mtsensk,Mdin,Medniki,Melecha,Merech,Meretsk,Mescherskoe,Meshkovsk,Metlitsk,Mezetsk,Mglin,Mihailov,Mikitin,Mikulino,Miloslavichi,Mogilev,Mologa,Moreva,Mosalsk,Moschiny,Mozyr,Mstislav,Mstislavets,Muravin,Nemech,Nemiza,Nerinsk,Nichan,Novgorod,Novogorodok,Obolichi,Obolensk,Obolensk,Oleshsk,Olgov,Omelnik,Opoka,Opoki,Oreshek,Orlets,Osechen,Oster,Ostrog,Ostrov,Perelai,Peremil,Peremyshl,Pererov,Peresechen,Perevitsk,Pereyaslav,Pinsk,Ples,Polotsk,Pronsk,Proposhesk,Punia,Putivl,Rechitsa,Rodno,Rogachev,Romanov,Romny,Roslavl,Rostislavl,Rostovets,Rsha,Ruza,Rybchesk,Rylsk,Rzhavesk,Rzhev,Rzhischev,Sambor,Serensk,Serensk,Serpeysk,Shilov,Shuya,Sinech,Sizhka,Skala,Slovensk,Slutsk,Smedin,Sneporod,Snitin,Snovsk,Sochevo,Sokolec,Starica,Starodub,Stepan,Sterzh,Streshin,Sutesk,Svinetsk,Svisloch,Terebovl,Ternov,Teshilov,Teterin,Tiversk,Torchevsk,Toropets,Torzhok,Tripolye,Trubchevsk,Tur,Turov,Usvyaty,Uteshkov,Vasilkov,Velil,Velye,Venev,Venicha,Verderev,Vereya,Veveresk,Viazma,Vidbesk,Vidychev,Voino,Volodimer,Volok,Volyn,Vorobesk,Voronich,Voronok,Vorotynsk,Vrev,Vruchiy,Vselug,Vyatichsk,Vyatka,Vyshegorod,Vyshgorod,Vysokoe,Yagniatin,Yaropolch,Yasenets,Yuryev,Yuryevets,Zaraysk,Zhitomel,Zholvazh,Zizhech,Zubkov,Zudechev,Zvenigorod"},{name:"Nordic",i:6,min:6,max:10,d:"kln",m:.1,b:"Akureyri,Aldra,Alftanes,Andenes,Austbo,Auvog,Bakkafjordur,Ballangen,Bardal,Beisfjord,Bifrost,Bildudalur,Bjerka,Bjerkvik,Bjorkosen,Bliksvaer,Blokken,Blonduos,Bolga,Bolungarvik,Borg,Borgarnes,Bosmoen,Bostad,Bostrand,Botsvika,Brautarholt,Breiddalsvik,Bringsli,Brunahlid,Budardalur,Byggdakjarni,Dalvik,Djupivogur,Donnes,Drageid,Drangsnes,Egilsstadir,Eiteroga,Elvenes,Engavogen,Ertenvog,Eskifjordur,Evenes,Eyrarbakki,Fagernes,Fallmoen,Fellabaer,Fenes,Finnoya,Fjaer,Fjelldal,Flakstad,Flateyri,Flostrand,Fludir,Gardaber,Gardur,Gimstad,Givaer,Gjeroy,Gladstad,Godoya,Godoynes,Granmoen,Gravdal,Grenivik,Grimsey,Grindavik,Grytting,Hafnir,Halsa,Hauganes,Haugland,Hauknes,Hella,Helland,Hellissandur,Hestad,Higrav,Hnifsdalur,Hofn,Hofsos,Holand,Holar,Holen,Holkestad,Holmavik,Hopen,Hovden,Hrafnagil,Hrisey,Husavik,Husvik,Hvammstangi,Hvanneyri,Hveragerdi,Hvolsvollur,Igeroy,Indre,Inndyr,Innhavet,Innes,Isafjordur,Jarklaustur,Jarnsreykir,Junkerdal,Kaldvog,Kanstad,Karlsoy,Kavosen,Keflavik,Kjelde,Kjerstad,Klakk,Kopasker,Kopavogur,Korgen,Kristnes,Krutoga,Krystad,Kvina,Lande,Laugar,Laugaras,Laugarbakki,Laugarvatn,Laupstad,Leines,Leira,Leiren,Leland,Lenvika,Loding,Lodingen,Lonsbakki,Lopsmarka,Lovund,Luroy,Maela,Melahverfi,Meloy,Mevik,Misvaer,Mornes,Mosfellsber,Moskenes,Myken,Naurstad,Nesberg,Nesjahverfi,Nesset,Nevernes,Obygda,Ofoten,Ogskardet,Okervika,Oknes,Olafsfjordur,Oldervika,Olstad,Onstad,Oppeid,Oresvika,Orsnes,Orsvog,Osmyra,Overdal,Prestoya,Raudalaekur,Raufarhofn,Reipo,Reykholar,Reykholt,Reykjahlid,Rif,Rinoya,Rodoy,Rognan,Rosvika,Rovika,Salhus,Sanden,Sandgerdi,Sandoker,Sandset,Sandvika,Saudarkrokur,Selfoss,Selsoya,Sennesvik,Setso,Siglufjordur,Silvalen,Skagastrond,Skjerstad,Skonland,Skorvogen,Skrova,Sleneset,Snubba,Softing,Solheim,Solheimar,Sorarnoy,Sorfugloy,Sorland,Sormela,Sorvaer,Sovika,Stamsund,Stamsvika,Stave,Stokka,Stokkseyri,Storjord,Storo,Storvika,Strand,Straumen,Strendene,Sudavik,Sudureyri,Sundoya,Sydalen,Thingeyri,Thorlakshofn,Thorshofn,Tjarnabyggd,Tjotta,Tosbotn,Traelnes,Trofors,Trones,Tverro,Ulvsvog,Unnstad,Utskor,Valla,Vandved,Varmahlid,Vassos,Vevelstad,Vidrek,Vik,Vikholmen,Vogar,Vogehamn,Vopnafjordur"},{name:"Greek",i:7,min:5,max:11,d:"s",m:.1,b:"Abdera,Acharnae,Aegae,Aegina,Agrinion,Aigosthena,Akragas,Akroinon,Akrotiri,Alalia,Alexandria,Amarynthos,Amaseia,Amphicaea,Amphigeneia,Amphipolis,Antipatrea,Antiochia,Apamea,Aphidna,Apollonia,Argos,Artemita,Argyropolis,Asklepios,Athenai,Athmonia,Bhrytos,Borysthenes,Brauron,Byblos,Byzantion,Bythinion,Calydon,Chamaizi,Chalcis,Chios,Cleona,Corcyra,Croton,Cyrene,Cythera,Decelea,Delos,Delphi,Dicaearchia,Didyma,Dion,Dioscurias,Dodona,Dorylaion,Elateia,Eleusis,Eleutherna,Emporion,Ephesos,Epidamnos,Epidauros,Epizephyrian,Erythrae,Eubea,Golgi,Gonnos,Gorgippia,Gournia,Gortyn,Gytion,Hagios,Halicarnassos,Heliopolis,Hellespontos,Heloros,Heraclea,Hierapolis,Himera,Histria,Hubla,Hyele,Ialysos,Iasos,Idalion,Imbros,Iolcos,Itanos,Ithaca,Juktas,Kallipolis,Kameiros,Karistos,Kasmenai,Kepoi,Kimmerikon,Knossos,Korinthos,Kos,Kourion,Kydonia,Kyrenia,Lamia,Lampsacos,Laodicea,Lapithos,Larissa,Lebena,Lefkada,Lekhaion,Leibethra,Leontinoi,Lilaea,Lindos,Lissos,Magnesia,Mantineia,Marathon,Marmara,Massalia,Megalopolis,Megara,Metapontion,Methumna,Miletos,Morgantina,Mulai,Mukenai,Myonia,Myra,Myrmekion,Myos,Nauplios,Naucratis,Naupaktos,Naxos,Neapolis,Nemea,Nicaea,Nicopolis,Nymphaion,Nysa,Odessos,Olbia,Olympia,Olynthos,Opos,Orchomenos,Oricos,Orestias,Oreos,Onchesmos,Pagasae,Palaikastro,Pandosia,Panticapaion,Paphos,Pargamon,Paros,Pegai,Pelion,Peiraies,Phaistos,Phaleron,Pharos,Pithekussa,Philippopolis,Phocaea,Pinara,Pisa,Pitane,Plataea,Poseidonia,Potidaea,Pseira,Psychro,Pteleos,Pydna,Pylos,Pyrgos,Rhamnos,Rhithymna,Rhypae,Rizinia,Rodos,Salamis,Samos,Skyllaion,Seleucia,Semasos,Sestos,Scidros,Sicyon,,Sinope,Siris,Smyrna,Sozopolis,Sparta,Stagiros,Stratos,Stymphalos,Sybaris,Surakousai,Taras,Tanagra,Tanais,Tauromenion,Tegea,Temnos,Teos,Thapsos,Thassos,Thebai,Theodosia,Therma,Thespian,Thronion,Thoricos,Thurii,Thyreum,Thyria,Tithoraea,Tomis,Tragurion,Tripolis,Troliton,Troy,Tylissos,Tyros,Vathypetros,Zakynthos,Zakros"},{name:"Roman",i:8,min:6,max:11,d:"ln",m:.1,b:"Abila,Adflexum,Adnicrem,Aelia,Aelius,Aeminium,Aequum,Agrippina,Agrippinae,Ala,Albanianis,Aleria,Ambianum,Andautonia,Apulum,Aquae,Aquaegranni,Aquensis,Aquileia,Aquincum,Arae,Argentoratum,Ariminum,Ascrivium,Asturica,Atrebatum,Atuatuca,Augusta,Aurelia,Aurelianorum,Batavar,Batavorum,Belum,Biriciana,Blestium,Bonames,Bonna,Bononia,Borbetomagus,Bovium,Bracara,Brigantium,Burgodunum,Caesaraugusta,Caesarea,Caesaromagus,Calleva,Camulodunum,Cannstatt,Cantiacorum,Capitolina,Caralis,Castellum,Castra,Castrum,Cibalae,Clausentum,Colonia,Concangis,Condate,Confluentes,Conimbriga,Corduba,Coria,Corieltauvorum,Corinium,Coriovallum,Cornoviorum,Danum,Deva,Dianium,Divodurum,Dobunnorum,Drusi,Dubris,Dumnoniorum,Durnovaria,Durocobrivis,Durocornovium,Duroliponte,Durovernum,Durovigutum,Eboracum,Ebusus,Edetanorum,Emerita,Emona,Emporiae,Euracini,Faventia,Flaviae,Florentia,Forum,Gerulata,Gerunda,Gesoscribate,Glevensium,Hadriani,Herculanea,Isca,Italica,Iulia,Iuliobrigensium,Iuvavum,Lactodurum,Lagentium,Lapurdum,Lauri,Legionis,Lemanis,Lentia,Lepidi,Letocetum,Lindinis,Lindum,Lixus,Londinium,Lopodunum,Lousonna,Lucus,Lugdunum,Luguvalium,Lutetia,Mancunium,Marsonia,Martius,Massa,Massilia,Matilo,Mattiacorum,Mediolanum,Mod,Mogontiacum,Moridunum,Mursa,Naissus,Nervia,Nida,Nigrum,Novaesium,Noviomagus,Olicana,Olisippo,Ovilava,Parisiorum,Partiscum,Paterna,Pistoria,Placentia,Pollentia,Pomaria,Pompeii,Pons,Portus,Praetoria,Praetorium,Pullum,Ragusium,Ratae,Raurica,Ravenna,Regina,Regium,Regulbium,Rigomagus,Roma,Romula,Rutupiae,Salassorum,Salernum,Salona,Scalabis,Segovia,Silurum,Sirmium,Siscia,Sorviodurum,Sumelocenna,Tarraco,Taurinorum,Theranda,Traiectum,Treverorum,Tungrorum,Turicum,Ulpia,Valentia,Venetiae,Venta,Verulamium,Vesontio,Vetera,Victoriae,Victrix,Villa,Viminacium,Vindelicorum,Vindobona,Vinovia,Viroconium"},{name:"Finnic",i:9,min:5,max:11,d:"akiut",m:0,b:"Aanekoski,Ahlainen,Aholanvaara,Ahtari,Aijala,Akaa,Alajarvi,Antsla,Aspo,Bennas,Bjorkoby,Elva,Emasalo,Espoo,Esse,Evitskog,Forssa,Haapamaki,Haapavesi,Haapsalu,Hameenlinna,Hanko,Harjavalta,Hattuvaara,Hautajarvi,Havumaki,Heinola,Hetta,Hinkabole,Hirmula,Hossa,Huittinen,Husula,Hyryla,Hyvinkaa,Ikaalinen,Iskmo,Itakoski,Jamsa,Jarvenpaa,Jeppo,Jioesuu,Jiogeva,Joensuu,Jokikyla,Jungsund,Jyvaskyla,Kaamasmukka,Kajaani,Kalajoki,Kallaste,Kankaanpaa,Karkku,Karpankyla,Kaskinen,Kasnas,Kauhajoki,Kauhava,Kauniainen,Kauvatsa,Kehra,Kellokoski,Kelottijarvi,Kemi,Kemijarvi,Kerava,Keuruu,Kiljava,Kiuruvesi,Kivesjarvi,Kiviioli,Kivisuo,Klaukkala,Klovskog,Kohtlajarve,Kokemaki,Kokkola,Kolho,Koskue,Kotka,Kouva,Kaupunki,Kuhmo,Kunda,Kuopio,Kuressaare,Kurikka,Kuusamo,Kylmalankyla,Lahti,Laitila,Lankipohja,Lansikyla,Lapua,Laurila,Lautiosaari,Lempaala,Lepsama,Liedakkala,Lieksa,Littoinen,Lohja,Loimaa,Loksa,Loviisa,Malmi,Mantta,Matasvaara,Maula,Miiluranta,Mioisakula,Munapirtti,Mustvee,Muurahainen,Naantali,Nappa,Narpio,Niinimaa,Niinisalo,Nikkila,Nilsia,Nivala,Nokia,Nummela,Nuorgam,Nuvvus,Obbnas,Oitti,Ojakkala,Onninen,Orimattila,Orivesi,Otanmaki,Otava,Otepaa,Oulainen,Oulu,Paavola,Paide,Paimio,Pakankyla,Paldiski,Parainen,Parkumaki,Parola,Perttula,Pieksamaki,Pioltsamaa,Piolva,Pohjavaara,Porhola,Porrasa,Porvoo,Pudasjarvi,Purmo,Pyhajarvi,Raahe,Raasepori,Raisio,Rajamaki,Rakvere,Rapina,Rapla,Rauma,Rautio,Reposaari,Riihimaki,Rovaniemi,Roykka,Ruonala,Ruottala,Rutalahti,Saarijarvi,Salo,Sastamala,Saue,Savonlinna,Seinajoki,Sillamae,Siuntio,Sompujarvi,Suonenjoki,Suurejaani,Syrjantaka,Tamsalu,Tapa,Temmes,Tiorva,Tormasenvaara,Tornio,Tottijarvi,Tulppio,Turenki,Turi,Tuukkala,Tuurala,Tuuri,Tuuski,Tuusniemi,Ulvila,Unari,Upinniemi,Utti,Uusikaupunki,Vaaksy,Vaalimaa,Vaarinmaja,Vaasa,Vainikkala,Valga,Valkeakoski,Vantaa,Varkaus,Vehkapera,Vehmasmaki,Vieki,Vierumaki,Viitasaari,Viljandi,Vilppula,Viohma,Vioru,Virrat,Ylike,Ylivieska,Ylojarvi"},{name:"Korean",i:10,min:5,max:11,d:"",m:0,b:"Anjung,Ansan,Anseong,Anyang,Aphae,Apo,Baekseok,Baeksu,Beolgyo,Boeun,Boseong,Busan,Buyeo,Changnyeong,Changwon,Cheonan,Cheongdo,Cheongjin,Cheongsong,Cheongyang,Cheorwon,Chirwon,Chuncheon,Chungju,Daedeok,Daegaya,Daejeon,Damyang,Dangjin,Dasa,Donghae,Dongsong,Doyang,Eonyang,Gaeseong,Ganggyeong,Ganghwa,Gangneung,Ganseong,Gaun,Geochang,Geoje,Geoncheon,Geumho,Geumil,Geumwang,Gijang,Gimcheon,Gimhwa,Gimje,Goa,Gochang,Gohan,Gongdo,Gongju,Goseong,Goyang,Gumi,Gunpo,Gunsan,Guri,Gurye,Gwangju,Gwangyang,Gwansan,Gyeongseong,Hadong,Hamchang,Hampyeong,Hamyeol,Hanam,Hapcheon,Hayang,Heungnam,Hongnong,Hongseong,Hwacheon,Hwando,Hwaseong,Hwasun,Hwawon,Hyangnam,Incheon,Inje,Iri,Janghang,Jangheung,Jangseong,Jangseungpo,Jangsu,Jecheon,Jeju,Jeomchon,Jeongeup,Jeonggwan,Jeongju,Jeongok,Jeongseon,Jeonju,Jido,Jiksan,Jinan,Jincheon,Jindo,Jingeon,Jinjeop,Jinnampo,Jinyeong,Jocheon,Jochiwon,Jori,Maepo,Mangyeong,Mokpo,Muju,Munsan,Naesu,Naju,Namhae,Namwon,Namyang,Namyangju,Nongong,Nonsan,Ocheon,Okcheon,Okgu,Onam,Onsan,Onyang,Opo,Paengseong,Pogok,Poseung,Pungsan,Pyeongchang,Pyeonghae,Pyeongyang,Sabi,Sacheon,Samcheok,Samho,Samrye,Sancheong,Sangdong,Sangju,Sapgyo,Sariwon,Sejong,Seocheon,Seogwipo,Seonghwan,Seongjin,Seongju,Seongnam,Seongsan,Seosan,Seungju,Siheung,Sindong,Sintaein,Soheul,Sokcho,Songak,Songjeong,Songnim,Songtan,Suncheon,Taean,Taebaek,Tongjin,Uijeongbu,Uiryeong,Uiwang,Uljin,Ulleung,Unbong,Ungcheon,Ungjin,Waegwan,Wando,Wayang,Wiryeseong,Wondeok,Yangju,Yangsan,Yangyang,Yecheon,Yeomchi,Yeoncheon,Yeongam,Yeongcheon,Yeongdeok,Yeongdong,Yeonggwang,Yeongju,Yeongwol,Yeongyang,Yeonil,Yongin,Yongjin,Yugu"},{name:"Chinese",i:11,min:5,max:10,d:"",m:0,b:"Anding,Anlu,Anqing,Anshun,Baixing,Banyang,Baoqing,Binzhou,Caozhou,Changbai,Changchun,Changde,Changling,Changsha,Changzhou,Chengdu,Chenzhou,Chizhou,Chongqing,Chuxiong,Chuzhou,Dading,Daming,Datong,Daxing,Dengzhou,Deqing,Dihua,Dingli,Dongan,Dongchang,Dongchuan,Dongping,Duyun,Fengtian,Fengxiang,Fengyang,Fenzhou,Funing,Fuzhou,Ganzhou,Gaoyao,Gaozhou,Gongchang,Guangnan,Guangning,Guangping,Guangxin,Guangzhou,Guiyang,Hailong,Hangzhou,Hanyang,Hanzhong,Heihe,Hejian,Henan,Hengzhou,Hezhong,Huaian,Huaiqing,Huanglong,Huangzhou,Huining,Hulan,Huzhou,Jiading,Jian,Jianchang,Jiangning,Jiankang,Jiaxing,Jiayang,Jilin,Jinan,Jingjiang,Jingzhao,Jinhua,Jinzhou,Jiujiang,Kaifeng,Kaihua,Kangding,Kuizhou,Laizhou,Lianzhou,Liaoyang,Lijiang,Linan,Linhuang,Lintao,Liping,Liuzhou,Longan,Longjiang,Longxing,Luan,Lubin,Luzhou,Mishan,Nanan,Nanchang,Nandian,Nankang,Nanyang,Nenjiang,Ningbo,Ningguo,Ningwu,Ningxia,Ningyuan,Pingjiang,Pingliang,Pingyang,Puer,Puzhou,Qianzhou,Qingyang,Qingyuan,Qingzhou,Qujing,Quzhou,Raozhou,Rende,Ruian,Ruizhou,Shafeng,Shajing,Shaoqing,Shaowu,Shaoxing,Shaozhou,Shinan,Shiqian,Shouchun,Shuangcheng,Shulei,Shunde,Shuntian,Shuoping,Sicheng,Sinan,Sizhou,Songjiang,Suiding,Suihua,Suining,Suzhou,Taian,Taibei,Taiping,Taiwan,Taiyuan,Taizhou,Taonan,Tengchong,Tingzhou,Tongchuan,Tongqing,Tongzhou,Weihui,Wensu,Wenzhou,Wuchang,Wuding,Wuzhou,Xian,Xianchun,Xianping,Xijin,Xiliang,Xincheng,Xingan,Xingde,Xinghua,Xingjing,Xingyi,Xingyuan,Xingzhong,Xining,Xinmen,Xiping,Xuanhua,Xunzhou,Xuzhou,Yanan,Yangzhou,Yanji,Yanping,Yanzhou,Yazhou,Yichang,Yidu,Yilan,Yili,Yingchang,Yingde,Yingtian,Yingzhou,Yongchang,Yongping,Yongshun,Yuanzhou,Yuezhou,Yulin,Yunnan,Yunyang,Zezhou,Zhang,Zhangzhou,Zhaoqing,Zhaotong,Zhenan,Zhending,Zhenhai,Zhenjiang,Zhenxi,Zhenyun,Zhongshan,Zunyi"},{name:"Japanese",i:12,min:4,max:10,d:"",m:0,b:"Abira,Aga,Aikawa,Aizumisato,Ajigasawa,Akkeshi,Amagi,Ami,Ando,Asakawa,Ashikita,Bandai,Biratori,Chonan,Esashi,Fuchu,Fujimi,Funagata,Genkai,Godo,Goka,Gonohe,Gyokuto,Haboro,Hamatonbetsu,Harima,Hashikami,Hayashima,Heguri,Hidaka,Higashiura,Hiranai,Hirogawa,Hiroo,Hodatsushimizu,Hoki,Hokuei,Hokuryu,Horokanai,Ibigawa,Ichikai,Ichikawa,Ichinohe,Iijima,Iizuna,Ikawa,Inagawa,Itakura,Iwaizumi,Iwate,Kaisei,Kamifurano,Kamiita,Kamijima,Kamikawa,Kamishihoro,Kamiyama,Kanda,Kanna,Kasagi,Kasuya,Katsuura,Kawabe,Kawamoto,Kawanehon,Kawanishi,Kawara,Kawasaki,Kawatana,Kawazu,Kihoku,Kikonai,Kin,Kiso,Kitagata,Kitajima,Kiyama,Kiyosato,Kofu,Koge,Kohoku,Kokonoe,Kora,Kosa,Kotohira,Kudoyama,Kumejima,Kumenan,Kumiyama,Kunitomi,Kurate,Kushimoto,Kutchan,Kyonan,Kyotamba,Mashike,Matsumae,Mifune,Mihama,Minabe,Minami,Minamiechizen,Minamitane,Misaki,Misasa,Misato,Miyashiro,Miyoshi,Mori,Moseushi,Mutsuzawa,Nagaizumi,Nagatoro,Nagayo,Nagomi,Nakadomari,Nakanojo,Nakashibetsu,Namegawa,Nanbu,Nanporo,Naoshima,Nasu,Niseko,Nishihara,Nishiizu,Nishikatsura,Nishikawa,Nishinoshima,Nishiwaga,Nogi,Noto,Nyuzen,Oarai,Obuse,Odai,Ogawara,Oharu,Oirase,Oishida,Oiso,Oizumi,Oji,Okagaki,Okutama,Omu,Ono,Osaka,Otobe,Otsuki,Owani,Reihoku,Rifu,Rikubetsu,Rishiri,Rokunohe,Ryuo,Saka,Sakuho,Samani,Satsuma,Sayo,Saza,Setana,Shakotan,Shibayama,Shikama,Shimamoto,Shimizu,Shintomi,Shirakawa,Shisui,Shitara,Sobetsu,Sue,Sumita,Suooshima,Suttsu,Tabuse,Tachiarai,Tadami,Tadaoka,Taiji,Taiki,Takachiho,Takahama,Taketoyo,Taragi,Tateshina,Tatsugo,Tawaramoto,Teshikaga,Tobe,Tokigawa,Toma,Tomioka,Tonosho,Tosa,Toyokoro,Toyotomi,Toyoyama,Tsubata,Tsubetsu,Tsukigata,Tsuno,Tsuwano,Umi,Wakasa,Yamamoto,Yamanobe,Yamatsuri,Yanaizu,Yasuda,Yoichi,Yonaguni,Yoro,Yoshino,Yubetsu,Yugawara,Yuni,Yusuhara,Yuza"},{name:"Portuguese",i:13,min:5,max:11,d:"",m:.1,b:"Abrigada,Afonsoeiro,Agueda,Aguilada,Alagoas,Alagoinhas,Albufeira,Alcanhoes,Alcobaca,Alcoutim,Aldoar,Alenquer,Alfeizerao,Algarve,Almada,Almagreira,Almeirim,Alpalhao,Alpedrinha,Alvorada,Amieira,Anapolis,Apelacao,Aranhas,Arganil,Armacao,Assenceira,Aveiro,Avelar,Balsas,Barcarena,Barreiras,Barretos,Batalha,Beira,Benavente,Betim,Braga,Braganca,Brasilia,Brejo,Cabeceiras,Cabedelo,Cachoeiras,Cadafais,Calhandriz,Calheta,Caminha,Campinas,Canidelo,Canoas,Capinha,Carmoes,Cartaxo,Carvalhal,Carvoeiro,Cascavel,Castanhal,Caxias,Chapadinha,Chaves,Cocais,Coentral,Coimbra,Comporta,Conde,Coqueirinho,Coruche,Damaia,Dourados,Enxames,Ericeira,Ervidel,Escalhao,Esmoriz,Espinhal,Estela,Estoril,Eunapolis,Evora,Famalicao,Fanhoes,Faro,Fatima,Felgueiras,Ferreira,Figueira,Flecheiras,Florianopolis,Fornalhas,Fortaleza,Freiria,Freixeira,Fronteira,Fundao,Gracas,Gradil,Grainho,Gralheira,Guimaraes,Horta,Ilhavo,Ilheus,Lages,Lagos,Laranjeiras,Lavacolhos,Leiria,Limoeiro,Linhares,Lisboa,Lomba,Lorvao,Lourical,Lourinha,Luziania,Macedo,Machava,Malveira,Marinhais,Maxial,Mealhada,Milharado,Mira,Mirandela,Mogadouro,Montalegre,Mourao,Nespereira,Nilopolis,Obidos,Odemira,Odivelas,Oeiras,Oleiros,Olhalvo,Olinda,Olival,Oliveira,Oliveirinha,Palheiros,Palmeira,Palmital,Pampilhosa,Pantanal,Paradinha,Parelheiros,Pedrosinho,Pegoes,Penafiel,Peniche,Pinhao,Pinheiro,Pombal,Pontal,Pontinha,Portel,Portimao,Quarteira,Queluz,Ramalhal,Reboleira,Recife,Redinha,Ribadouro,Ribeira,Ribeirao,Rosais,Sabugal,Sacavem,Sagres,Sandim,Sangalhos,Santarem,Santos,Sarilhos,Seixas,Seixezelo,Seixo,Silvares,Silveira,Sinhaem,Sintra,Sobral,Sobralinho,Tabuaco,Tabuleiro,Taveiro,Teixoso,Telhado,Telheiro,Tomar,Torreira,Trancoso,Troviscal,Vagos,Varzea,Velas,Viamao,Viana,Vidigal,Vidigueira,Vidual,Vilamar,Vimeiro,Vinhais,Vitoria"},{name:"Nahuatl",i:14,min:6,max:13,d:"l",m:0,b:"Acapulco,Acatepec,Acatlan,Acaxochitlan,Acolman,Actopan,Acuamanala,Ahuacatlan,Almoloya,Amacuzac,Amanalco,Amaxac,Apaxco,Apetatitlan,Apizaco,Atenco,Atizapan,Atlacomulco,Atlapexco,Atotonilco,Axapusco,Axochiapan,Axocomanitla,Axutla,Azcapotzalco,Aztahuacan,Calimaya,Calnali,Calpulalpan,Camotlan,Capulhuac,Chalco,Chapulhuacan,Chapultepec,Chiapan,Chiautempan,Chiconautla,Chihuahua,Chilcuautla,Chimalhuacan,Cholollan,Cihuatlan,Coahuila,Coatepec,Coatetelco,Coatlan,Coatlinchan,Coatzacoalcos,Cocotitlan,Cohetzala,Colima,Colotlan,Coyoacan,Coyohuacan,Cuapiaxtla,Cuauhnahuac,Cuauhtemoc,Cuauhtitlan,Cuautepec,Cuautla,Cuaxomulco,Culhuacan,Ecatepec,Eloxochitlan,Epatlan,Epazoyucan,Huamantla,Huascazaloya,Huatlatlauca,Huautla,Huehuetlan,Huehuetoca,Huexotla,Hueyapan,Hueyotlipan,Hueypoxtla,Huichapan,Huimilpan,Huitzilac,Ixtapallocan,Iztacalco,Iztaccihuatl,Iztapalapa,Lolotla,Malinalco,Mapachtlan,Mazatepec,Mazatlan,Metepec,Metztitlan,Mexico,Miacatlan,Michoacan,Minatitlan,Mixcoac,Mixtla,Molcaxac,Nanacamilpa,Naucalpan,Naupan,Nextlalpan,Nezahualcoyotl,Nopalucan,Oaxaca,Ocotepec,Ocotitlan,Ocotlan,Ocoyoacac,Ocuilan,Ocuituco,Omitlan,Otompan,Otzoloapan,Pacula,Pahuatlan,Panotla,Papalotla,Patlachican,Piaztla,Popocatepetl,Sultepec,Tecamac,Tecolotlan,Tecozautla,Temamatla,Temascalapa,Temixco,Temoac,Temoaya,Tenayuca,Tenochtitlan,Teocuitlatlan,Teotihuacan,Teotlalco,Tepeacac,Tepeapulco,Tepehuacan,Tepetitlan,Tepeyanco,Tepotzotlan,Tepoztlan,Tetecala,Tetlatlahuca,Texcalyacac,Texcoco,Tezontepec,Tezoyuca,Timilpan,Tizapan,Tizayuca,Tlacopan,Tlacotenco,Tlahuac,Tlahuelilpan,Tlahuiltepa,Tlalmanalco,Tlalnepantla,Tlalpan,Tlanchinol,Tlatelolco,Tlaxcala,Tlaxcoapan,Tlayacapan,Tocatlan,Tolcayuca,Toluca,Tonanitla,Tonantzintla,Tonatico,Totolac,Totolapan,Tototlan,Tuchtlan,Tulantepec,Tultepec,Tzompantepec,Xalatlaco,Xaloztoc,Xaltocan,Xiloxoxtla,Xochiatipan,Xochicoatlan,Xochimilco,Xochitepec,Xolotlan,Xonacatlan,Yahualica,Yautepec,Yecapixtla,Yehaultepec,Zacatecas,Zacazonapan,Zacoalco,Zacualpan,Zacualtipan,Zapotlan,Zimapan,Zinacantepec,Zoyaltepec,Zumpahuacan"},{name:"Hungarian",i:15,min:6,max:13,d:"",m:.1,b:"Aba,Abadszalok,Adony,Ajak,Albertirsa,Alsozsolca,Aszod,Babolna,Bacsalmas,Baktaloranthaza,Balassagyarmat,Balatonalmadi,Balatonboglar,Balkany,Balmazujvaros,Barcs,Bataszek,Batonyterenye,Battonya,Bekes,Berettyoujfalu,Berhida,Biatorbagy,Bicske,Biharkeresztes,Bodajk,Boly,Bonyhad,Budakalasz,Budakeszi,Celldomolk,Csakvar,Csenger,Csongrad,Csorna,Csorvas,Csurgo,Dabas,Demecser,Derecske,Devavanya,Devecser,Dombovar,Dombrad,Dunafoldvar,Dunaharaszti,Dunavarsany,Dunavecse,Edeleny,Elek,Emod,Encs,Enying,Ercsi,Fegyvernek,Fehergyarmat,Felsozsolca,Fertoszentmiklos,Fonyod,Fot,Fuzesabony,Fuzesgyarmat,Gardony,God,Gyal,Gyomaendrod,Gyomro,Hajdudorog,Hajduhadhaz,Hajdusamson,Hajduszoboszlo,Halasztelek,Harkany,Hatvan,Heves,Heviz,Ibrany,Isaszeg,Izsak,Janoshalma,Janossomorja,Jaszapati,Jaszarokszallas,Jaszfenyszaru,Jaszkiser,Kaba,Kalocsa,Kapuvar,Karcag,Kecel,Kemecse,Kenderes,Kerekegyhaza,Keszthely,Kisber,Kiskunmajsa,Kistarcsa,Kistelek,Kisujszallas,Kisvarda,Komadi,Komarom,Komlo,Kormend,Korosladany,Koszeg,Kozarmisleny,Kunhegyes,Kunszentmarton,Kunszentmiklos,Labatlan,Lajosmizse,Lenti,Letavertes,Letenye,Lorinci,Maglod,Mako,Mandok,Marcali,Martonvasar,Mateszalka,Melykut,Mezobereny,Mezocsat,Mezohegyes,Mezokeresztes,Mezokovesd,Mezotur,Mindszent,Mohacs,Monor,Mor,Morahalom,Nadudvar,Nagyatad,Nagyecsed,Nagyhalasz,Nagykallo,Nagykoros,Nagymaros,Nyekladhaza,Nyergesujfalu,Nyirbator,Nyirmada,Nyirtelek,Ocsa,Orkeny,Oroszlany,Paks,Pannonhalma,Paszto,Pecel,Pecsvarad,Pilisvorosvar,Polgar,Polgardi,Pomaz,Puspokladany,Pusztaszabolcs,Putnok,Racalmas,Rackeve,Rakamaz,Rakoczifalva,Sajoszent,Sandorfalva,Sarbogard,Sarkad,Sarospatak,Sarvar,Satoraljaujhely,Siklos,Simontornya,Soltvadkert,Sumeg,Szabadszallas,Szarvas,Szazhalombatta,Szecseny,Szeghalom,Szentgotthard,Szentlorinc,Szerencs,Szigethalom,Szigetvar,Szikszo,Tab,Tamasi,Tapioszele,Tapolca,Teglas,Tet,Tiszafoldvar,Tiszafured,Tiszakecske,Tiszalok,Tiszaujvaros,Tiszavasvari,Tokaj,Tokol,Tompa,Torokbalint,Torokszentmiklos,Totkomlos,Tura,Turkeve,Ujkigyos,ujszasz,Vamospercs,Varpalota,Vasarosnameny,Vasvar,Vecses,Veresegyhaz,Verpelet,Veszto,Zahony,Zalaszentgrot,Zirc,Zsambek"},{name:"Turkish",i:16,min:4,max:10,d:"",m:0,b:"Yelkaya,Buyrukkaya,Erdemtepe,Alakesen,Baharbeyli,Bozbay,Karaoklu,Altunbey,Yalkale,Yalkut,Akardere,Altayburnu,Esentepe,Okbelen,Derinsu,Alaoba,Yamanbeyli,Aykor,Ekinova,Saztepe,Baharkale,Devrekdibi,Alpseki,Ormanseki,Erkale,Yalbelen,Aytay,Yamanyaka,Altaydelen,Esen,Yedieli,Alpkor,Demirkor,Yediyol,Erdemkaya,Yayburnu,Ganiler,Bayatyurt,Kopuzteke,Aytepe,Deniz,Ayan,Ayazdere,Tepe,Kayra,Ayyaka,Deren,Adatepe,Kalkaneli,Bozkale,Yedidelen,Kocayolu,Sazdere,Bozkesen,Oguzeli,Yayladibi,Uluyol,Altay,Ayvar,Alazyaka,Yaloba,Suyaka,Baltaberi,Poyrazdelen,Eymir,Yediyuva,Kurt,Yeltepe,Oktar,Kara Ok,Ekinberi,Er Yurdu,Eren,Erenler,Ser,Oguz,Asay,Bozokeli,Aykut,Ormanyol,Yazkaya,Kalkanova,Yazbeyli,Dokuz Teke,Bilge,Ertensuyu,Kopuzyuva,Buyrukkut,Akardiken,Aybaray,Aslanbeyli,Altun Kaynak,Atikobasi,Yayla Eli,Kor Tepe,Salureli,Kor Kaya,Aybarberi,Kemerev,Yanaray,Beydileli,Buyrukoba,Yolduman,Tengri Tepe,Dokuzsu,Uzunkor,Erdem Yurdu,Kemer,Korteke,Bozokev,Bozoba,Ormankale,Askale,Oguztoprak,Yolberi,Kumseki,Esenobasi,Turkbelen,Ayazseki,Cereneli,Taykut,Bayramdelen,Beydilyaka,Boztepe,Uluoba,Yelyaka,Ulgardiken,Esensu,Baykale,Cerenkor,Bozyol,Duranoba,Aladuman,Denizli,Bahar,Yarkesen,Dokuzer,Yamankaya,Kocatarla,Alayaka,Toprakeli,Sarptarla,Sarpkoy,Serkaynak,Adayaka,Ayazkaynak,Kopuz,Turk,Kart,Kum,Erten,Buyruk,Yel,Ada,Alazova,Ayvarduman,Buyrukok,Ayvartoprak,Uzuntepe,Binseki,Yedibey,Durankale,Alaztoprak,Sarp Ok,Yaparobasi,Yaytepe,Asberi,Kalkankor,Beydiltepe,Adaberi,Bilgeyolu,Ganiyurt,Alkanteke,Esenerler,Asbey,Erdemkale,Erenkaynak,Oguzkoyu,Ayazoba,Boynuztoprak,Okova,Yaloklu,Sivriberi,Yuladiken,Sazbey,Karakaynak,Kopuzkoyu,Buyrukay,Kocakaya,Tepeduman,Yanarseki,Atikyurt,Esenev,Akarbeyli,Yayteke,Devreksungur,Akseki,Baykut,Kalkandere,Ulgarova,Devrekev,Yulabey,Bayatev,Yazsu,Vuraleli,Sivribeyli,Alaova,Alpobasi,Yalyurt,Elmatoprak,Alazkaynak,Esenay,Ertenev,Salurkor,Ekinok,Yalbey,Yeldere,Ganibay,Altaykut,Baltaboy,Ereli,Ayvarsu,Uzunsaz,Bayeli,Erenyol,Kocabay,Derintay,Ayazyol,Aslanoba,Esenkaynak,Ekinlik,Alpyolu,Alayunt,Bozeski,Erkil,Duransuyu,Yulak,Kut,Dodurga,Kutlubey,Kutluyurt,Boynuz,Alayol,Aybar,Aslaneli,Kemerseki,Baltasuyu,Akarer,Ayvarburnu,Boynuzbeyli,Adasungur,Esenkor,Yamanoba,Toprakkor,Uzunyurt,Sungur,Bozok,Kemerli,Alaz,Demirci,Kartepe"},{name:"Berber",i:17,min:4,max:10,d:"s",m:.2,b:"Abkhouch,Adrar,Aeraysh,Afrag,Agadir,Agelmam,Aghmat,Agrakal,Agulmam,Ahaggar,Ait Baha,Ajdir,Akka,Almou,Amegdul,Amizmiz,Amknas,Amlil,Amurakush,Anfa,Annaba,Aousja,Arbat,Arfud,Argoub,Arif,Asfi,Asfru,Ashawen,Assamer,Assif,Awlluz,Ayt Melel,Azaghar,Azila,Azilal,Azmour,Azro,Azrou,Beccar,Beja,Bennour,Benslimane,Berkane,Berrechid,Bizerte,Bjaed,Bouayach,Boudenib,Boufrah,Bouskoura,Boutferda,Darallouch,Dar Bouazza,Darchaabane,Dcheira,Demnat,Denden,Djebel,Djedeida,Drargua,Elhusima,Essaouira,Ezzahra,Fas,Fnideq,Ghezeze,Goubellat,Grisaffen,Guelmim,Guercif,Hammamet,Harrouda,Hdifa,Hoceima,Houara,Idhan,Idurar,Ifendassen,Ifoghas,Ifrane,Ighoud,Ikbir,Imilchil,Imzuren,Inezgane,Irherm,Izoughar,Jendouba,Kacem,Kelibia,Kenitra,Kerrando,Khalidia,Khemisset,Khenifra,Khouribga,Khourigba,Kidal,Korba,Korbous,Lahraouyine,Larache,Leyun,Lqliaa,Manouba,Martil,Mazagan,Mcherga,Mdiq,Megrine,Mellal,Melloul,Midelt,Misur,Mohammedia,Mornag,Mrirt,Nabeul,Nadhour,Nador,Nawaksut,Nefza,Ouarzazate,Ouazzane,Oued Zem,Oujda,Ouladteima,Qsentina,Rades,Rafraf,Safi,Sefrou,Sejnane,Settat,Sijilmassa,Skhirat,Slimane,Somaa,Sraghna,Susa,Tabarka,Tadrart,Taferka,Tafilalt,Tafrawt,Tafza,Tagbalut,Tagerdayt,Taghzut,Takelsa,Taliouine,Tanja,Tantan,Taourirt,Targuist,Taroudant,Tarudant,Tasfelalayt,Tassort,Tata,Tattiwin,Tawnat,Taza,Tazagurt,Tazerka,Tazizawt,Taznakht,Tebourba,Teboursouk,Temara,Testour,Tetouan,Tibeskert,Tifelt,Tijdit,Tinariwen,Tinduf,Tinja,Tittawan,Tiznit,Toubkal,Trables,Tubqal,Tunes,Ultasila,Urup,Wagguten,Wararni,Warzazat,Watlas,Wehran,Wejda,Xamida,Yedder,Youssoufia,Zaghouan,Zahret,Zemmour,Zriba"},{name:"Arabic",i:18,min:4,max:9,d:"ae",m:.2,b:"Abha,Ajman,Alabar,Alarjam,Alashraf,Alawali,Albawadi,Albirk,Aldhabiyah,Alduwaid,Alfareeq,Algayed,Alhazim,Alhrateem,Alhudaydah,Alhuwaya,Aljahra,Aljubail,Alkhafah,Alkhalas,Alkhawaneej,Alkhen,Alkhobar,Alkhuznah,Allisafah,Almshaykh,Almurjan,Almuwayh,Almuzaylif,Alnaheem,Alnashifah,Alqah,Alqouz,Alqurayyat,Alradha,Alraqmiah,Alsadyah,Alsafa,Alshagab,Alshuqaiq,Alsilaa,Althafeer,Alwasqah,Amaq,Amran,Annaseem,Aqbiyah,Arafat,Arar,Ardah,Asfan,Ashayrah,Askar,Ayaar,Aziziyah,Baesh,Bahrah,Balhaf,Banizayd,Bidiyah,Bisha,Biyatah,Buqhayq,Burayda,Dafiyat,Damad,Dammam,Dariyah,Dhafar,Dhahran,Dhalkut,Dhurma,Dibab,Doha,Dukhan,Duwaibah,Enaker,Fadhla,Fahaheel,Fanateer,Farasan,Fardah,Fujairah,Ghalilah,Ghar,Ghizlan,Ghomgyah,Ghran,Hadiyah,Haffah,Hajanbah,Hajrah,Haqqaq,Haradh,Hasar,Hawiyah,Hebaa,Hefar,Hijal,Husnah,Huwailat,Huwaitah,Irqah,Isharah,Ithrah,Jamalah,Jarab,Jareef,Jazan,Jeddah,Jiblah,Jihanah,Jilah,Jizan,Joraibah,Juban,Jumeirah,Kamaran,Keyad,Khab,Khaiybar,Khasab,Khathirah,Khawarah,Khulais,Kumzar,Limah,Linah,Madrak,Mahab,Mahalah,Makhtar,Mashwar,Masirah,Masliyah,Mastabah,Mazhar,Medina,Meeqat,Mirbah,Mokhtara,Muharraq,Muladdah,Musaykah,Mushayrif,Musrah,Mussafah,Nafhan,Najran,Nakhab,Nizwa,Oman,Qadah,Qalhat,Qamrah,Qasam,Qosmah,Qurain,Quriyat,Qurwa,Radaa,Rafha,Rahlah,Rakamah,Rasheedah,Rasmadrakah,Risabah,Rustaq,Ryadh,Sabtaljarah,Sadah,Safinah,Saham,Saihat,Salalah,Salmiya,Shabwah,Shalim,Shaqra,Sharjah,Sharurah,Shatifiyah,Shidah,Shihar,Shoqra,Shuwaq,Sibah,Sihmah,Sinaw,Sirwah,Sohar,Suhailah,Sulaibiya,Sunbah,Tabuk,Taif,Taqah,Tarif,Tharban,Thuqbah,Thuwal,Tubarjal,Turaif,Turbah,Tuwaiq,Ubar,Umaljerem,Urayarah,Urwah,Wabrah,Warbah,Yabreen,Yadamah,Yafur,Yarim,Yemen,Yiyallah,Zabid,Zahwah,Zallaq,Zinjibar,Zulumah"},{name:"Inuit",i:19,min:5,max:15,d:"alutsn",m:0,b:"Aaluik,Aappilattoq,Aasiaat,Agissat,Agssaussat,Akuliarutsip,Akunnaaq,Alluitsup,Alluttoq,Amitsorsuaq,Ammassalik,Anarusuk,Anguniartarfik,Annertussoq,Annikitsoq,Apparsuit,Apusiaajik,Arsivik,Arsuk,Atammik,Ateqanaq,Atilissuaq,Attu,Augpalugtoq,Aukarnersuaq,Aumat,Auvilkikavsaup,Avadtlek,Avallersuaq,Bjornesk,Blabaerdalen,Blomsterdalen,Brattalhid,Bredebrae,Brededal,Claushavn,Edderfulegoer,Egger,Eqalugalinnguit,Eqalugarssuit,Eqaluit,Eqqua,Etah,Graah,Hakluyt,Haredalen,Hareoen,Hundeo,Igaliku,Igdlorssuit,Igdluluarssuk,Iginniafik,Ikamiut,Ikarissat,Ikateq,Ikermiut,Ikermoissuaq,Ikorfarssuit,Ilimanaq,Illorsuit,Illunnguit,Iluileq,Ilulissat,Imaarsivik,Imartunarssuk,Immikkoortukajik,Innaarsuit,Inneruulalik,Inussullissuaq,Iperaq,Ippik,Iqek,Isortok,Isungartussoq,Itileq,Itissaalik,Itivdleq,Ittit,Ittoqqortoormiit,Ivingmiut,Ivittuut,Kanajoorartuut,Kangaamiut,Kangeq,Kangerluk,Kangerlussuaq,Kanglinnguit,Kapisillit,Kekertamiut,Kiatak,Kiataussaq,Kigatak,Kinaussak,Kingittorsuaq,Kitak,Kitsissuarsuit,Kitsissut,Klenczner,Kook,Kraulshavn,Kujalleq,Kullorsuaq,Kulusuk,Kuurmiit,Kuusuaq,Laksedalen,Maniitsoq,Marrakajik,Mattaangassut,Mernoq,Mittivakkat,Moriusaq,Myggbukta,Naajaat,Nangissat,Nanuuseq,Nappassoq,Narsarmijt,Narsarsuaq,Narssaq,Nasiffik,Natsiarsiorfik,Naujanguit,Niaqornaarsuk,Niaqornat,Nordfjordspasset,Nugatsiaq,Nunarssit,Nunarsuaq,Nunataaq,Nunatakavsaup,Nutaarmiut,Nuugaatsiaq,Nuuk,Nuukullak,Olonkinbyen,Oodaaq,Oqaatsut,Oqaitsunguit,Oqonermiut,Paagussat,Paamiut,Paatuut,Palungataq,Pamialluk,Perserajoq,Pituffik,Puugutaa,Puulkuip,Qaanaq,Qaasuitsup,Qaersut,Qajartalik,Qallunaat,Qaneq,Qaqortok,Qasigiannguit,Qassimiut,Qeertartivaq,Qeqertaq,Qeqertasussuk,Qeqqata,Qernertoq,Qernertunnguit,Qianarreq,Qingagssat,Qoornuup,Qorlortorsuaq,Qullikorsuit,Qunnerit,Qutdleq,Ravnedalen,Ritenbenk,Rypedalen,Saarloq,Saatorsuaq,Saattut,Salliaruseq,Sammeqqat,Sammisoq,Sanningassoq,Saqqaq,Saqqarlersuaq,Saqqarliit,Sarfannguit,Sattiaatteq,Savissivik,Serfanguaq,Sermersooq,Sermiligaaq,Sermilik,Sermitsiaq,Simitakaja,Simiutaq,Singamaq,Siorapaluk,Sisimiut,Sisuarsuit,Sullorsuaq,Suunikajik,Sverdrup,Taartoq,Takiseeq,Tasirliaq,Tasiusak,Tiilerilaaq,Timilersua,Timmiarmiut,Tukingassoq,Tussaaq,Tuttulissuup,Tuujuk,Uiivaq,Uilortussoq,Ujuaakajiip,Ukkusissat,Upernavik,Uttorsiutit,Uumannaq,Uunartoq,Uvkusigssat,Ymer"},{name:"Basque",i:20,min:4,max:11,d:"r",m:.1,b:"Agurain,Aia,Aiara,Albiztur,Alkiza,Altzaga,Amorebieta,Amurrio,Andoain,Anoeta,Antzuola,Arakaldo,Arantzazu,Arbatzegi,Areatza,Arratzua,Arrieta,Artea,Artziniega,Asteasu,Astigarraga,Ataun,Atxondo,Aulesti,Azkoitia,Azpeitia,Bakio,Baliarrain,Barakaldo,Barrika,Barrundia,Basauri,Beasain,Bedia,Beizama,Belauntza,Berastegi,Bergara,Bermeo,Bernedo,Berriatua,Berriz,Bidania,Bilar,Bilbao,Busturia,Deba,Derio,Donostia,Dulantzi,Durango,Ea,Eibar,Elantxobe,Elduain,Elgeta,Elgoibar,Elorrio,Erandio,Ergoitia,Ermua,Errenteria,Errezil,Eskoriatza,Eskuernaga,Etxebarri,Etxebarria,Ezkio,Forua,Gabiria,Gaintza,Galdakao,Gamiz,Garai,Gasteiz,Gatzaga,Gaubea,Gautegiz,Gaztelu,Gernika,Gerrikaitz,Getaria,Getxo,Gizaburuaga,Goiatz,Gorliz,Gorriaga,Harana,Hernani,Hondarribia,Ibarra,Ibarrangelu,Idiazabal,Iekora,Igorre,Ikaztegieta,Irun,Irura,Iruraiz,Itsaso,Itsasondo,Iurreta,Izurtza,Jatabe,Kanpezu,Karrantza,Kortezubi,Kripan,Kuartango,Lanestosa,Lantziego,Larrabetzu,Lasarte,Laukiz,Lazkao,Leaburu,Legazpi,Legorreta,Legutio,Leintz,Leioa,Lekeitio,Lemoa,Lemoiz,Leza,Lezama,Lezo,Lizartza,Maeztu,Mallabia,Manaria,Markina,Maruri,Menaka,Mendaro,Mendata,Mendexa,Morga,Mundaka,Mungia,Munitibar,Murueta,Muskiz,Mutiloa,Mutriku,Nabarniz,Oiartzun,Oion,Okondo,Olaberria,Onati,Ondarroa,Ordizia,Orendain,Orexa,Oria,Orio,Ormaiztegi,Orozko,Ortuella,Otegi,Otxandio,Pasaia,Plentzia,Santurtzi,Sestao,Sondika,Soraluze,Sukarrieta,Tolosa,Trapagaran,Turtzioz,Ubarrundia,Ubide,Ugao,Urdua,Urduliz,Urizaharra,Urkabustaiz,Urnieta,Urretxu,Usurbil,Xemein,Zabaleta,Zaia,Zaldibar,Zambrana,Zamudio,Zaratamo,Zarautz,Zeberio,Zegama,Zerain,Zestoa,Zierbena,Zigoitia,Ziortza,Zuia,Zumaia,Zumarraga"},{name:"Nigerian",i:21,min:4,max:10,d:"",m:.3,b:"Abadogo,Abafon,Adealesu,Adeto,Adyongo,Afaga,Afamju,Agigbigi,Agogoke,Ahute,Aiyelaboro,Ajebe,Ajola,Akarekwu,Akunuba,Alawode,Alkaijji,Amangam,Amgbaye,Amtasa,Amunigun,Animahun,Anyoko,Arapagi,Asande,Awgbagba,Awhum,Awodu,Babateduwa,Bandakwai,Bangdi,Bilikani,Birnindodo,Braidu,Bulakawa,Buriburi,Cainnan,Chakum,Chondugh,Dagwarga,Darpi,Dokatofa,Dozere,Ebelibri,Efem,Ekoku,Ekpe,Ewhoeviri,Galea,Gamen,Ganjin,Gantetudu,Gargar,Garinbode,Gbure,Gerti,Gidan,Gitabaremu,Giyagiri,Giyawa,Gmawa,Golakochi,Golumba,Gunji,Gwambula,Gwodoti,Hayinlere,Hayinmaialewa,Hirishi,Hombo,Ibefum,Iberekodo,Icharge,Idofin,Idofinoka,Igbogo,Ijoko,Ijuwa,Ikawga,Ikhin,Ikpakidout,Ikpeoniong,Imuogo,Ipawo,Ipinlerere,Isicha,Itakpa,Jangi,Jare,Jataudakum,Jaurogomki,Jepel,Kafinmalama,Katab,Katanga,Katinda,Katirije,Kaurakimba,Keffinshanu,Kellumiri,Kiagbodor,Kirbutu,Kita,Kogogo,Kopje,Korokorosei,Kotoku,Kuata,Kujum,Kukau,Kunboon,Kuonubogbene,Kurawe,Kushinahu,Kwaramakeri,Ladimeji,Lafiaro,Lahaga,Laindebajanle,Laindegoro,Lakati,Litenswa,Maba,Madarzai,Maianita,Malikansaa,Mata,Megoyo,Meku,Miama,Modi,Mshi,Msugh,Muduvu,Murnachehu,Namnai,Ndamanma,Ndiwulunbe,Ndonutim,Ngbande,Nguengu,Ntoekpe,Nyajo,Nyior,Odajie,Ogbaga,Ogultu,Ogunbunmi,Ojopode,Okehin,Olugunna,Omotunde,Onipede,Onma,Orhere,Orya,Otukwang,Otunade,Rampa,Rimi,Rugan,Rumbukawa,Sabiu,Sangabama,Sarabe,Seboregetore,Shafar,Shagwa,Shata,Shengu,Sokoron,Sunnayu,Tafoki,Takula,Talontan,Tarhemba,Tayu,Ter,Timtim,Timyam,Tindirke,Tokunbo,Torlwam,Tseakaadza,Tseanongo,Tsebeeve,Tsepaegh,Tuba,Tumbo,Tungalombo,Tunganyakwe,Uhkirhi,Umoru,Umuabai,Umuajuju,Unchida,Ungua,Unguwar,Unongo,Usha,Utongbo,Vembera,Wuro,Yanbashi,Yanmedi,Yoku,Zarunkwari,Zilumo,Zulika"},{name:"Celtic",i:22,min:4,max:12,d:"nld",m:0,b:"Aberaman,Aberangell,Aberarth,Aberavon,Aberbanc,Aberbargoed,Aberbeeg,Abercanaid,Abercarn,Abercastle,Abercegir,Abercraf,Abercregan,Abercych,Abercynon,Aberdare,Aberdaron,Aberdaugleddau,Aberdeen,Aberdulais,Aberdyfi,Aberedw,Abereiddy,Abererch,Abereron,Aberfan,Aberffraw,Aberffrwd,Abergavenny,Abergele,Aberglasslyn,Abergorlech,Abergwaun,Abergwesyn,Abergwili,Abergwynfi,Abergwyngregyn,Abergynolwyn,Aberhafesp,Aberhonddu,Aberkenfig,Aberllefenni,Abermain,Abermaw,Abermorddu,Abermule,Abernant,Aberpennar,Aberporth,Aberriw,Abersoch,Abersychan,Abertawe,Aberteifi,Aberthin,Abertillery,Abertridwr,Aberystwyth,Achininver,Afonhafren,Alisaha,Anfosadh,Antinbhearmor,Ardenna,Attacon,Banwen,Beira,Bhrura,Bleddfa,Boioduro,Bona,Boskyny,Boslowenpolbrogh,Boudobriga,Bravon,Brigant,Briganta,Briva,Brosnach,Caersws,Cambodunum,Cambra,Caracta,Catumagos,Centobriga,Ceredigion,Chalain,Chearbhallain,Chlasaigh,Chormaic,Cuileannach,Dinn,Diwa,Dubingen,Duibhidighe,Duro,Ebora,Ebruac,Eburodunum,Eccles,Egloskuri,Eighe,Eireann,Elerghi,Ferkunos,Fhlaithnin,Gallbhuaile,Genua,Ghrainnse,Gwyles,Heartsease,Hebron,Hordh,Inbhear,Inbhir,Inbhirair,Innerleithen,Innerleven,Innerwick,Inver,Inveraldie,Inverallan,Inveralmond,Inveramsay,Inveran,Inveraray,Inverarnan,Inverbervie,Inverclyde,Inverell,Inveresk,Inverfarigaig,Invergarry,Invergordon,Invergowrie,Inverhaddon,Inverkeilor,Inverkeithing,Inverkeithney,Inverkip,Inverleigh,Inverleith,Inverloch,Inverlochlarig,Inverlochy,Invermay,Invermoriston,Inverness,Inveroran,Invershin,Inversnaid,Invertrossachs,Inverugie,Inveruglas,Inverurie,Iubhrach,Karardhek,Kilninver,Kirkcaldy,Kirkintilloch,Krake,Lanngorrow,Latense,Leming,Lindomagos,Llanaber,Llandidiwg,Llandyrnog,Llanfarthyn,Llangadwaldr,Llansanwyr,Lochinver,Lugduno,Magoduro,Mheara,Monmouthshire,Nanshiryarth,Narann,Novioduno,Nowijonago,Octoduron,Penning,Pheofharain,Ponsmeur,Raithin,Ricomago,Rossinver,Salodurum,Seguia,Sentica,Theorsa,Tobargeal,Trealaw,Trefesgob,Trewedhenek,Trewythelan,Tuaisceart,Uige,Vitodurum,Windobona"},{name:"Mesopotamian",i:23,min:4,max:9,d:"srpl",m:.1,b:"Adab,Adamndun,Adma,Admatum,Agrab,Akkad,Akshak,Amnanum,Andarig,Anshan,Apiru,Apum,Arantu,Arbid,Arpachiyah,Arpad,Arrapha,Ashlakka,Assur,Awan,Babilim,Bad-Tibira,Balawat,Barsip,Birtu,Bit-Bunakki,Borsippa,Chuera,Dashrah,Der,Dilbat,Diniktum,Doura,Dur-Kurigalzu,Dur-Sharrukin,Dur-Untash,Dr-gurgurri,Ebla,Ekallatum,Ekalte,Emar,Erbil,Eresh,Eridu,Eshnunn,Eshnunna,Gargamish,Gasur,Gawra,Gibil,Girsu,Gizza,Habirun,Habur,Hadatu,Hakkulan,Halab,Halabit,Hamazi,Hamoukar,Haradum,Harbidum,Harran,Harranu,Hassuna,Hatarikka,Hatra,Hissar,Hiyawa,Hormirzad,Ida-Maras,Idamaraz,Idu,Imerishu,Imgur-Enlil,Irisagrig,Irnina,Irridu,Isin,Issinnitum,Iturungal,Izubitum,Jarmo,Jemdet,Kabnak,Kadesh,Kahat,Kalhu,Kar-Shulmanu-Asharedu,Kar-Tukulti-Ninurta,Kar-shulmanu-asharedu,Karana,Karatepe,Kartukulti,Kazallu,Kesh,Kidsha,Kinza,Kish,Kisiga,Kisurra,Kuara,Kurda,Kurruhanni,Kutha,Lagaba,Lagash,Larak,Larsa,Leilan,Malgium,Marad,Mardaman,Mari,Marlik,Mashkan,Mashkan-shapir,Matutem,Me-Turan,Meliddu,Mumbaqat,Nabada,Nagar,Nanagugal,Nerebtum,Nigin,Nimrud,Nina,Nineveh,Ninua,Nippur,Niru,Niya,Nuhashe,Nuhasse,Nuzi,Puzrish-Dagan,Qalatjarmo,Qatara,Qatna,Qattunan,Qidshu,Rapiqum,Rawda,Sagaz,Shaduppum,Shaggaratum,Shalbatu,Shanidar,Sharrukin,Shawwan,Shehna,Shekhna,Shemshara,Shibaniba,Shubat-Enlil,Shurkutir,Shuruppak,Shusharra,Shushin,Sikan,Sippar,Sippar-Amnanum,Sippar-sha-Annunitum,Subatum,Susuka,Tadmor,Tarbisu,Telul,Terqa,Tirazish,Tisbon,Tuba,Tushhan,Tuttul,Tutub,Ubaid,Umma,Ur,Urah,Urbilum,Urkesh,Ursa'um,Uruk,Urum,Uzarlulu,Warka,Washukanni,Zabalam,Zarri-Amnan"},{name:"Iranian",i:24,min:5,max:11,d:"",m:.1,b:"Abali,Abrisham,Absard,Abuzeydabad,Afus,Alavicheh,Alikosh,Amol,Anarak,Anbar,Andisheh,Anshan,Aran,Ardabil,Arderica,Ardestan,Arjomand,Asgaran,Asgharabad,Ashian,Awan,Babajan,Badrud,Bafran,Baghestan,Baghshad,Bahadoran,Baharan Shahr,Baharestan,Bakun,Bam,Baqershahr,Barzok,Bastam,Behistun,Bitistar,Bumahen,Bushehr,Chadegan,Chahardangeh,Chamgardan,Chermahin,Choghabonut,Chugan,Damaneh,Damavand,Darabgard,Daran,Dastgerd,Dehaq,Dehaqan,Dezful,Dizicheh,Dorcheh,Dowlatabad,Duruntash,Ecbatana,Eslamshahr,Estakhr,Ezhiyeh,Falavarjan,Farrokhi,Fasham,Ferdowsieh,Fereydunshahr,Ferunabad,Firuzkuh,Fuladshahr,Ganjdareh,Ganzak,Gaz,Geoy,Godin,Goldasht,Golestan,Golpayegan,Golshahr,Golshan,Gorgab,Guged,Habibabad,Hafshejan,Hajjifiruz,Hana,Harand,Hasanabad,Hasanlu,Hashtgerd,Hecatompylos,Hormirzad,Imanshahr,Isfahan,Jandaq,Javadabad,Jiroft,Jowsheqan ,Jowzdan,Kabnak,Kahrizak,Kahriz Sang,Kangavar,Karaj,Karkevand,Kashan,Kelishad,Kermanshah,Khaledabad,Khansar,Khorramabad,Khur,Khvorzuq,Kilan,Komeh,Komeshcheh,Konar,Kuhpayeh,Kul,Kushk,Lavasan,Laybid,Liyan,Lyan,Mahabad,Mahallat,Majlesi,Malard,Manzariyeh,Marlik,Meshkat,Meymeh,Miandasht,Mish,Mobarakeh,Nahavand,Nain,Najafabad,Naqshe,Narezzash,Nasimshahr,Nasirshahr,Nasrabad,Natanz,Neyasar,Nikabad,Nimvar,Nushabad,Pakdasht,Parand,Pardis,Parsa,Pasargadai,Patigrabana,Pir Bakran,Pishva,Qahderijan,Qahjaverestan,Qamsar,Qarchak,Qods,Rabat,Ray-shahr,Rezvanshahr,Rhages,Robat Karim,Rozveh,Rudehen,Sabashahr,Safadasht,Sagzi,Salehieh,Sandal,Sarvestan,Sedeh,Sefidshahr,Semirom,Semnan,Shadpurabad,Shah,Shahdad,Shahedshahr,Shahin,Shahpour,Shahr,Shahreza,Shahriar,Sharifabad,Shemshak,Shiraz,Shushan,Shushtar,Sialk,Sin,Sukhteh,Tabas,Tabriz,Takhte,Talkhuncheh,Talli,Tarq,Temukan,Tepe,Tiran,Tudeshk,Tureng,Urmia,Vahidieh,Vahrkana,Vanak,Varamin,Varnamkhast,Varzaneh,Vazvan,Yahya,Yarim,Yasuj,Zarrin Shahr,Zavareh,Zayandeh,Zazeran,Ziar,Zibashahr,Zranka"},{name:"Hawaiian",i:25,min:5,max:10,d:"auo",m:1,b:"Aapueo,Ahoa,Ahuakaio,Ahupau,Alaakua,Alae,Alaeloa,Alamihi,Aleamai,Alena,Alio,Aupokopoko,Halakaa,Haleu,Haliimaile,Hamoa,Hanakaoo,Hanaulu,Hanawana,Hanehoi,Haou,Hikiaupea,Hokuula,Honohina,Honokahua,Honokeana,Honokohau,Honolulu,Honomaele,Hononana,Honopou,Hoolawa,Huelo,Kaalaea,Kaapahu,Kaeo,Kahalehili,Kahana,Kahuai,Kailua,Kainehe,Kakalahale,Kakanoni,Kalenanui,Kaleoaihe,Kalialinui,Kalihi,Kalimaohe,Kaloi,Kamani,Kamehame,Kanahena,Kaniaula,Kaonoulu,Kapaloa,Kapohue,Kapuaikini,Kapunakea,Kauau,Kaulalo,Kaulanamoa,Kauluohana,Kaumakani,Kaumanu,Kaunauhane,Kaupakulua,Kawaloa,Keaa,Keaaula,Keahua,Keahuapono,Kealahou,Keanae,Keauhou,Kelawea,Keokea,Keopuka,Kikoo,Kipapa,Koakupuna,Koali,Kolokolo,Kopili,Kou,Kualapa,Kuhiwa,Kuholilea,Kuhua,Kuia,Kuikui,Kukoae,Kukohia,Kukuiaeo,Kukuipuka,Kukuiula,Kulahuhu,Lapakea,Lapueo,Launiupoko,Lole,Maalo,Mahinahina,Mailepai,Makaakini,Makaalae,Makaehu,Makaiwa,Makaliua,Makapipi,Makapuu,Maluaka,Manawainui,Mehamenui,Moalii,Moanui,Mohopili,Mokae,Mokuia,Mokupapa,Mooiki,Mooloa,Moomuku,Muolea,Nakaaha,Nakalepo,Nakaohu,Nakapehu,Nakula,Napili,Niniau,Nuu,Oloewa,Olowalu,Omaopio,Onau,Onouli,Opaeula,Opana,Opikoula,Paakea,Paeahu,Paehala,Paeohi,Pahoa,Paia,Pakakia,Palauea,Palemo,Paniau,Papaaea,Papaanui,Papaauhau,Papaka,Papauluana,Pauku,Paunau,Pauwalu,Pauwela,Pohakanele,Polaiki,Polanui,Polapola,Poopoo,Poponui,Poupouwela,Puahoowali,Puakea,Puako,Pualaea,Puehuehu,Pueokauiki,Pukaauhuhu,Pukuilua,Pulehu,Puolua,Puou,Puuhaehae,Puuiki,Puuki,Puulani,Puunau,Puuomaile,Uaoa,Uhao,Ukumehame,Ulaino,Ulumalu,Wahikuli,Waianae,Waianu,Waiawa,Waiehu,Waieli,Waikapu,Wailamoa,Wailaulau,Wainee,Waiohole,Waiohonu,Waiohuli,Waiokama,Waiokila,Waiopai,Waiopua,Waipao,Waipionui,Waipouli"},{name:"Karnataka",i:26,min:5,max:11,d:"tnl",m:0,b:"Adityapatna,Adyar,Afzalpur,Aland,Alnavar,Alur,Ambikanagara,Anekal,Ankola,Annigeri,Arkalgud,Arsikere,Athni,Aurad,Badami,Bagalkot,Bagepalli,Bail,Bajpe,Bangalore,Bangarapet,Bankapura,Bannur,Bantval,Basavakalyan,Basavana,Belgaum,Beltangadi,Belur,Bhadravati,Bhalki,Bhatkal,Bhimarayanagudi,Bidar,Bijapur,Bilgi,Birur,Bommasandra,Byadgi,Challakere,Chamarajanagar,Channagiri,Channapatna,Channarayapatna,Chik,Chikmagalur,Chiknayakanhalli,Chikodi,Chincholi,Chintamani,Chitapur,Chitgoppa,Chitradurga,Dandeli,Dargajogihalli,Devadurga,Devanahalli,Dod,Donimalai,Gadag,Gajendragarh,Gangawati,Gauribidanur,Gokak,Gonikoppal,Gubbi,Gudibanda,Gulbarga,Guledgudda,Gundlupet,Gurmatkal,Haliyal,Hangal,Harapanahalli,Harihar,Hassan,Hatti,Haveri,Hebbagodi,Heggadadevankote,Hirekerur,Holalkere,Hole,Homnabad,Honavar,Honnali,Hoovina,Hosakote,Hosanagara,Hosdurga,Hospet,Hubli,Hukeri,Hungund,Hunsur,Ilkal,Indi,Jagalur,Jamkhandi,Jevargi,Jog,Kadigenahalli,Kadur,Kalghatgi,Kamalapuram,Kampli,Kanakapura,Karkal,Karwar,Khanapur,Kodiyal,Kolar,Kollegal,Konnur,Koppa,Koppal,Koratagere,Kotturu,Krishnarajanagara,Krishnarajasagara,Krishnarajpet,Kudchi,Kudligi,Kudremukh,Kumta,Kundapura,Kundgol,Kunigal,Kurgunta,Kushalnagar,Kushtagi,Lakshmeshwar,Lingsugur,Londa,Maddur,Madhugiri,Madikeri,Mahalingpur,Malavalli,Mallar,Malur,Mandya,Mangalore,Manvi,Molakalmuru,Mudalgi,Mudbidri,Muddebihal,Mudgal,Mudhol,Mudigere,Mulbagal,Mulgund,Mulki,Mulur,Mundargi,Mundgod,Munirabad,Mysore,Nagamangala,Nanjangud,Narasimharajapura,Naregal,Nargund,Navalgund,Nipani,Pandavapura,Pavagada,Piriyapatna,Pudu,Puttur,Rabkavi,Raichur,Ramanagaram,Ramdurg,Ranibennur,Raybag,Robertson,Ron,Sadalgi,Sagar,Sakleshpur,Saligram,Sandur,Sankeshwar,Saundatti,Savanur,Sedam,Shahabad,Shahpur,Shaktinagar,Shiggaon,Shikarpur,Shirhatti,Shorapur,Shrirangapattana,Siddapur,Sidlaghatta,Sindgi,Sindhnur,Sira,Siralkoppa,Sirsi,Siruguppa,Somvarpet,Sorab,Sringeri,Srinivaspur,Sulya,Talikota,Tarikere,Tekkalakote,Terdal,Thumbe,Tiptur,Tirthahalli,Tirumakudal,Tumkur,Turuvekere,Udupi,Vijayapura,Wadi,Yadgir,Yelandur,Yelbarga,Yellapur,Yenagudde"},{name:"Quechua",i:27,min:6,max:12,d:"l",m:0,b:"Alpahuaycco,Anchihuay,Anqea,Apurimac,Arequipa,Atahuallpa,Atawalpa,Atico,Ayacucho,Ayahuanco,Ayllu,Cajamarca,Canayre,Canchacancha,Carapo,Carhuac,Carhuacatac,Cashan,Caullaraju,Caxamalca,Cayesh,Ccahuasno,Ccarhuacc,Ccopayoc,Chacchapunta,Chacraraju,Challhuamayo,Champara,Chanchan,Chekiacraju,Chillihua,Chinchey,Chontah,Chopicalqui,Chucuito,Chuito,Chullo,Chumpi,Chuncho,Chupahuacho,Chuquiapo,Chuquisaca,Churup,Cocapata,Cochabamba,Cojup,Collota,Conococha,Corihuayrachina,Cuchoquesera,Cusichaca,Haika,Hanpiq,Hatun,Haywarisqa,Huaca,Huachinga,Hualcan,Hualchancca,Huamanga,Huamashraju,Huancarhuas,Huandoy,Huantsan,Huanupampa,Huarmihuanusca,Huascaran,Huaylas,Huayllabamba,Huayrana,Huaytara,Huichajanca,Huinayhuayna,Huinche,Huinioch,Illiasca,Intipunku,Iquicha,Ishinca,Jahuacocha,Jirishanca,Juli,Jurau,Kakananpunta,Kamasqa,Karpay,Kausay,Khuya,Kuelap,Lanccochayocc,Llaca,Llactapata,Llanganuco,Llaqta,Lloqllasca,Llupachayoc,Luricocha,Machu,Mallku,Matarraju,Mechecc,Mikhuy,Milluacocha,Morochuco,Munay,Ocshapalca,Ollantaytambo,Oroccahua,Oronccoy,Oyolo,Pacamayo,Pacaycasa,Paccharaju,Pachacamac,Pachakamaq,Pachakuteq,Pachakuti,Pachamama,Paititi,Pajaten,Palcaraju,Pallccas,Pampa,Panaka,Paqarina,Paqo,Parap,Paria,Patahuasi,Patallacta,Patibamba,Pisac,Pisco,Pongos,Pucacolpa,Pucahirca,Pucaranra,Pumatambo,Puscanturpa,Putaca,Puyupatamarca,Qawaq,Qayqa,Qochamoqo,Qollana,Qorihuayrachina,Qorimoqo,Qotupuquio,Quenuaracra,Queshque,Quillcayhuanca,Quillya,Quitaracsa,Quitaraju,Qusqu,Rajucolta,Rajutakanan,Rajutuna,Ranrahirca,Ranrapalca,Raria,Rasac,Rimarima,Riobamba,Runkuracay,Rurec,Sacsa,Sacsamarca,Saiwa,Sarapo,Sayacmarca,Sayripata,Sinakara,Sonccopa,Taripaypacha,Taulliraju,Tawantinsuyu,Taytanchis,Tiwanaku,Tocllaraju,Tsacra,Tuco,Tucubamba,Tullparaju,Tumbes,Uchuraccay,Uchuraqay,Ulta,Urihuana,Uruashraju,Vallunaraju,Vilcabamba,Wacho,Wankawillka,Wayra,Yachay,Yahuarraju,Yanamarey,Yanaqucha,Yanesha,Yerupaja"},{name:"Swahili",i:28,min:4,max:9,d:"",m:0,b:"Abim,Adjumani,Alebtong,Amolatar,Amuru,Apac,Arua,Arusha,Babati,Baragoi,Bombo,Budaka,Bugembe,Bugiri,Buikwe,Bukedea,Bukoba,Bukomansimbi,Bukungu,Buliisa,Bundibugyo,Bungoma,Busembatya,Bushenyi,Busia,Busolwe,Butaleja,Butambala,Butere,Buwenge,Buyende,Dadaab,Dodoma,Dokolo,Eldoret,Elegu,Emali,Embu,Entebbe,Garissa,Gede,Gulu,Handeni,Hima,Hoima,Hola,Ibanda,Iganga,Iringa,Isingiro,Isiolo,Jinja,Kaabong,Kabuyanda,Kabwohe,Kagadi,Kajiado,Kakinga,Kakiri,Kakuma,Kalangala,Kaliro,Kalongo,Kalungu,Kampala,Kamwenge,Kanungu,Kapchorwa,Kasese,Kasulu,Katakwi,Kayunga,Keroka,Kiambu,Kibaale,Kibaha,Kibingo,Kibwezi,Kigoma,Kihiihi,Kilifi,Kiruhura,Kiryandongo,Kisii,Kisoro,Kisumu,Kitale,Kitgum,Kitui,Koboko,Korogwe,Kotido,Kumi,Kyazanga,Kyegegwa,Kyenjojo,Kyotera,Lamu,Langata,Lindi,Lodwar,Lokichoggio,Londiani,Loyangalani,Lugazi,Lukaya,Luweero,Lwakhakha,Lwengo,Lyantonde,Machakos,Mafinga,Makambako,Makindu,Malaba,Malindi,Manafwa,Mandera,Marsabit,Masaka,Masindi,Masulita,Matugga,Mayuge,Mbale,Mbarara,Mbeya,Meru,Mitooma,Mityana,Mombasa,Morogoro,Moroto,Moyale,Moyo,Mpanda,Mpigi,Mpondwe,Mtwara,Mubende,Mukono,Muranga,Musoma,Mutomo,Mutukula,Mwanza,Nagongera,Nairobi,Naivasha,Nakapiripirit,Nakaseke,Nakasongola,Nakuru,Namanga,Namayingo,Namutumba,Nansana,Nanyuki,Narok,Naromoru,Nebbi,Ngora,Njeru,Njombe,Nkokonjeru,Ntungamo,Nyahururu,Nyeri,Oyam,Pader,Paidha,Pakwach,Pallisa,Rakai,Ruiru,Rukungiri,Rwimi,Sanga,Sembabule,Shimoni,Shinyanga,Singida,Sironko,Songea,Soroti,Ssabagabo,Sumbawanga,Tabora,Takaungu,Tanga,Thika,Tororo,Tunduma,Vihiga,Voi,Wajir,Wakiso,Watamu,Webuye,Wobulenzi,Wote,Wundanyi,Yumbe,Zanzibar"},{name:"Vietnamese",i:29,min:3,max:12,d:"",m:1,b:"An Giang,Anh Son,An Khe,An Nhon,Ayun Pa,Bac Giang,Bac Kan,Bac Lieu,Bac Ninh,Ba Don,Bao Loc,Ba Ria,Ba Ria-Vung Tau,Ba Thuoc,Ben Cat,Ben Tre,Bien Hoa,Bim Son,Binh Dinh,Binh Duong,Binh Long,Binh Minh,Binh Phuoc,Binh Thuan,Buon Ho,Buon Ma Thuot,Cai Lay,Ca Mau,Cam Khe,Cam Pha,Cam Ranh,Cam Thuy,Can Tho,Cao Bang,Cao Lanh,Cao Phong,Chau Doc,Chi Linh,Con Cuong,Cua Lo,Da Bac,Dak Lak,Da Lat,Da Nang,Di An,Dien Ban,Dien Bien,Dien Bien Phu,Dien Chau,Do Luong,Dong Ha,Dong Hoi,Dong Trieu,Duc Pho,Duyen Hai,Duy Tien,Gia Lai,Gia Nghia,Gia Rai,Go Cong,Ha Giang,Ha Hoa,Hai Duong,Hai Phong,Ha Long,Ha Nam,Ha Noi,Ha Tinh,Ha Trung,Hau Giang,Hoa Binh,Hoang Mai,Hoa Thanh,Ho Chi Minh,Hoi An,Hong Linh,Hong Ngu,Hue,Hung Nguyen,Hung Yen,Huong Thuy,Huong Tra,Khanh Hoa,Kien Tuong,Kim Boi,Kinh Mon,Kon Tum,Ky Anh,Ky Son,Lac Son,Lac Thuy,La Gi,Lai Chau,Lam Thao,Lang Chanh,Lang Son,Lao Cai,Long An,Long Khanh,Long My,Long Xuyen,Luong Son,Mai Chau,Mong Cai,Muong Lat,Muong Lay,My Hao,My Tho,Nam Dan,Nam Dinh,Nga Bay,Nga Nam,Nga Son,Nghe An,Nghia Dan,Nghia Lo,Nghi Loc,Nghi Son,Ngoc Lac,Nha Trang,Nhu Thanh,Nhu Xuan,Ninh Binh,Ninh Hoa,Nong Cong,Phan Rang Thap Cham,Phan Thiet,Pho Yen,Phu Ly,Phu My,Phu Ninh,Phuoc Long,Phu Tho,Phu Yen,Pleiku,Quang Binh,Quang Nam,Quang Ngai,Quang Ninh,Quang Tri,Quang Xuong,Quang Yen,Quan Hoa,Quan Son,Que Phong,Quy Chau,Quy Hop,Quynh Luu,Quy Nhon,Rach Gia,Sa Dec,Sai Gon,Sam Son,Sa Pa,Soc Trang,Song Cau,Song Cong,Son La,Son Tay,Tam Diep,Tam Ky,Tan An,Tan Chau,Tan Ky,Tan Lac,Tan Son,Tan Uyen,Tay Ninh,Thach Thanh,Thai Binh,Thai Hoa,Thai Nguyen,Thanh Chuong,Thanh Hoa,Thieu Hoa,Thuan An,Thua Thien-Hue,Thu Dau Mot,Thu Duc,Thuong Xuan,Tien Giang,Trang Bang,Tra Vinh,Trieu Son,Tu Son,Tuyen Quang,Tuy Hoa,Uong Bi,Viet Tri,Vinh,Vinh Chau,Vinh Loc,Vinh Long,Vinh Yen,Vi Thanh,Vung Tau,Yen Bai,Yen Dinh,Yen Thanh,Yen Thuy"},{name:"Cantonese",i:30,min:5,max:11,d:"",m:0,b:"Chaiwan,Chingchung,Chinghoi,Chingsen,Chingshing,Chiunam,Chiuon,Chiuyeung,Chiyuen,Choihung,Chuehoi,Chuiman,Chungfu,Chungsan,Chunguktsuen,Dakhing,Daopo,Daumun,Dingwu,Dinpak,Donggun,Dongyuen,Duenchau,Fachau,Fanling,Fatgong,Fatshan,Fotan,Fuktien,Fumun,Funggong,Funghoi,Fungshun,Fungtei,Gamtin,Gochau,Goming,Gonghoi,Gongshing,Goyiu,Hanghau,Hangmei,Hengon,Heungchau,Heunggong,Heungkiu,Hingning,Hohfuktong,Hoichue,Hoifung,Hoiping,Hokong,Hokshan,Hoyuen,Hunghom,Hungshuikiu,Jiuling,Kamsheung,Kamwan,Kaulongtong,Keilun,Kinon,Kinsang,Kityeung,Kongmun,Kukgong,Kwaifong,Kwaihing,Kwongchau,Kwongling,Kwongming,Kwuntong,Laichikok,Laiking,Laiwan,Lamtei,Lamtin,Leitung,Leungking,Limkong,Linping,Linshan,Loding,Lokcheong,Lokfu,Longchuen,Longgong,Longmun,Longping,Longwa,Longwu,Lowu,Luichau,Lukfung,Lukho,Lungmun,Macheung,Maliushui,Maonshan,Mauming,Maunam,Meifoo,Mingkum,Mogong,Mongkok,Muichau,Muigong,Muiyuen,Naiwai,Namcheong,Namhoi,Namhong,Namsha,Nganwai,Ngautaukok,Ngchuen,Ngwa,Onting,Pakwun,Paotoishan,Pingshan,Pingyuen,Poklo,Pongon,Poning,Potau,Puito,Punyue,Saiwanho,Saiyingpun,Samshing,Samshui,Samtsen,Samyuenlei,Sanfung,Sanhing,Sanhui,Sanwai,Seiwui,Shamshuipo,Shanmei,Shantau,Shauking,Shekmun,Shekpai,Sheungshui,Shingkui,Shiuhing,Shundak,Shunyi,Shupinwai,Simshing,Siuhei,Siuhong,Siukwan,Siulun,Suikai,Taihing,Taikoo,Taipo,Taishuihang,Taiwai,Taiwohau,Tinhau,Tinshuiwai,Tiukengleng,Toishan,Tongfong,Tonglowan,Tsakyoochung,Tsamgong,Tsangshing,Tseungkwano,Tsimshatsui,Tsinggong,Tsingshantsuen,Tsingwun,Tsingyi,Tsingyuen,Tsiuchau,Tsuenshekshan,Tsuenwan,Tuenmun,Tungchung,Waichap,Waichau,Waidong,Wailoi,Waishing,Waiyeung,Wanchai,Wanfau,Wanshing,Wingon,Wongpo,Wongtaisin,Woping,Wukaisha,Yano,Yaumatei,Yautong,Yenfa,Yeungchun,Yeungdong,Yeungsai,Yeungshan,Yimtin,Yingdak,Yiuping,Yongshing,Yongyuen,Yuenlong,Yuenshing,Yuetsau,Yuknam,Yunping"},{name:"Mongolian",i:31,min:5,max:12,d:"aou",m:.3,b:"Adaatsag,Airag,Alag Erdene,Altai,Altanshiree,Altantsogts,Arbulag,Baatsagaan,Batnorov,Batshireet,Battsengel,Bayan Adarga,Bayan Agt,Bayanbulag,Bayandalai,Bayandun,Bayangovi,Bayanjargalan,Bayankhongor,Bayankhutag,Bayanlig,Bayanmonkh,Bayannur,Bayannuur,Bayan Ondor,Bayan Ovoo,Bayantal,Bayantsagaan,Bayantumen,Bayan Uul,Bayanzurkh,Berkh,Biger,Binder,Bogd,Bombogor,Bor Ondor,Bugat,Bugt,Bulgan,Buregkhangai,Burentogtokh,Buutsagaan,Buyant,Chandmani,Chandmani Ondor,Choibalsan,Chuluunkhoroot,Chuluut,Dadal,Dalanjargalan,Dalanzadgad,Darhan Muminggan,Darkhan,Darvi,Dashbalbar,Dashinchilen,Delger,Delgerekh,Delgerkhaan,Delgerkhangai,Delgertsogt,Deluun,Deren,Dorgon,Duut,Erdene,Erdenebulgan,Erdeneburen,Erdenedalai,Erdenemandal,Erdenetsogt,Galshar,Galt,Galuut,Govi Ugtaal,Gurvan,Gurvanbulag,Gurvansaikhan,Gurvanzagal,Hinggan,Hodong,Holingol,Hondlon,Horin Ger,Horqin,Hulunbuir,Hure,Ikhkhet,Ikh Tamir,Ikh Uul,Jargalan,Jargalant,Jargaltkhaan,Jarud,Jinst,Khairkhan,Khalhgol,Khaliun,Khanbogd,Khangai,Khangal,Khankh,Khankhongor,Khashaat,Khatanbulag,Khatgal,Kherlen,Khishig Ondor,Khokh,Kholonbuir,Khongor,Khotont,Khovd,Khovsgol,Khuld,Khureemaral,Khurmen,Khutag Ondor,Luus,Mandakh,Mandal Ovoo,Mankhan,Manlai,Matad,Mogod,Monkhkhairkhan,Moron,Most,Myangad,Nogoonnuur,Nomgon,Norovlin,Noyon,Ogii,Olgii,Olziit,Omnodelger,Ondorkhaan,Ondorshil,Ondor Ulaan,Ongniud,Ordos,Orgon,Orkhon,Rashaant,Renchinlkhumbe,Sagsai,Saikhan,Saikhandulaan,Saikhan Ovoo,Sainshand,Saintsagaan,Selenge,Sergelen,Sevrei,Sharga,Sharyngol,Shine Ider,Shinejinst,Shiveegovi,Sumber,Taishir,Tarialan,Tariat,Teshig,Togrog,Togtoh,Tolbo,Tomorbulag,Tonkhil,Tosontsengel,Tsagaandelger,Tsagaannuur,Tsagaan Ovoo,Tsagaan Uur,Tsakhir,Tseel,Tsengel,Tsenkher,Tsenkhermandal,Tsetseg,Tsetserleg,Tsogt,Tsogt Ovoo,Tsogttsetsii,Tumed,Tunel,Tuvshruulekh,Ulaanbadrakh,Ulaankhus,Ulaan Uul,Ulanhad,Ulanqab,Uyench,Yesonbulag,Zag,Zalainur,Zamyn Uud,Zereg"},{name:"Human Generic",i:32,min:6,max:11,d:"peolst",m:0,b:"Amberglen,Angelhand,Arrowden,Autumnband,Autumnkeep,Basinfrost,Basinmore,Bayfrost,Beargarde,Bearmire,Bellcairn,Bellport,Bellreach,Blackwatch,Bleakward,Bonemouth,Boulder,Bridgefalls,Bridgeforest,Brinepeak,Brittlehelm,Bronzegrasp,Castlecross,Castlefair,Cavemire,Claymond,Claymouth,Clearguard,Cliffgate,Cliffshear,Cliffshield,Cloudbay,Cloudcrest,Cloudwood,Coldholde,Cragbury,Crowgrove,Crowvault,Crystalrock,Crystalspire,Cursefield,Curseguard,Cursespell,Dawnforest,Dawnwater,Deadford,Deadkeep,Deepcairn,Deerchill,Demonfall,Dewglen,Dewmere,Diredale,Direden,Dirtshield,Dogcoast,Dogmeadow,Dragonbreak,Dragonhold,Dragonward,Dryhost,Dustcross,Dustwatch,Eaglevein,Earthfield,Earthgate,Earthpass,Ebonfront,Edgehaven,Eldergate,Eldermere,Embervault,Everchill,Evercoast,Falsevale,Faypond,Fayvale,Fayyard,Fearpeak,Flameguard,Flamewell,Freyshell,Ghostdale,Ghostpeak,Gloomburn,Goldbreach,Goldyard,Grassplains,Graypost,Greeneld,Grimegrove,Grimeshire,Heartfall,Heartford,Heartvault,Highbourne,Hillpass,Hollowstorm,Honeywater,Houndcall,Houndholde,Iceholde,Icelight,Irongrave,Ironhollow,Knightlight,Knighttide,Lagoonpass,Lakecross,Lastmere,Laststar,Lightvale,Limeband,Littlehall,Littlehold,Littlemire,Lostcairn,Lostshield,Loststar,Madfair,Madham,Midholde,Mightglen,Millstrand,Mistvault,Mondpass,Moonacre,Moongulf,Moonwell,Mosshand,Mosstide,Mosswind,Mudford,Mudwich,Mythgulch,Mythshear,Nevercrest,Neverfront,Newfalls,Nighthall,Oakenbell,Oakenrun,Oceanstar,Oldreach,Oldwall,Oldwatch,Oxbrook,Oxlight,Pearlhaven,Pinepond,Pondfalls,Pondtown,Pureshell,Quickbell,Quickpass,Ravenside,Roguehaven,Roseborn,Rosedale,Rosereach,Rustmore,Saltmouth,Sandhill,Scorchpost,Scorchstall,Shadeforest,Shademeadow,Shadeville,Shimmerrun,Shimmerwood,Shroudrock,Silentkeep,Silvercairn,Silvergulch,Smallmire,Smoothcliff,Smoothgrove,Smoothtown,Snakemere,Snowbay,Snowshield,Snowtown,Southbreak,Springmire,Springview,Stagport,Steammouth,Steamwall,Steepmoor,Stillhall,Stoneguard,Stonespell,Stormhand,Stormhorn,Sungulf,Sunhall,Swampmaw,Swangarde,Swanwall,Swiftwell,Thorncairn,Thornhelm,Thornyard,Timberside,Tradewick,Westmeadow,Westpoint,Whiteshore,Whitvalley,Wildeden,Wildwell,Wildyard,Winterhaven,Wolfpass"},{name:"Elven",i:33,min:6,max:12,d:"lenmsrg",m:0,b:"Adrindest,Aethel,Afranthemar,Aiqua,Alari,Allanar,Almalian,Alora,Alyanasari,Alyelona,Alyran,Ammar,Anyndell,Arasari,Aren,Ashmebel,Aymlume,Bel-Didhel,Brinorion,Caelora,Chaulssad,Chaundra,Cyhmel,Cyrang,Dolarith,Dolonde,Draethe,Dranzan,Draugaust,E'ana,Eahil,Edhil,Eebel,Efranluma,Eld-Sinnocrin,Elelthyr,Ellanalin,Ellena,Ellorthond,Eltaesi,Elunore,Emyranserine,Entheas,Eriargond,Esari,Esath,Eserius,Eshsalin,Eshthalas,Evraland,Faellenor,Famelenora,Filranlean,Filsaqua,Gafetheas,Gaf Serine,Geliene,Gondorwin,Guallu,Haeth,Hanluna,Haulssad,Heloriath,Himlarien,Himliene,Hinnead,Hlinas,Hloireenil,Hluihei,Hlurthei,Hlynead,Iaenarion,Iaron,Illanathaes,Illfanora,Imlarlon,Imyse,Imyvelian,Inferius,Inlurth,innsshe,Iralserin,Irethtalos,Irholona,Ishal,Ishlashara,Ithelion,Ithlin,Iulil,Jaal,Jamkadi,Kaalume,Kaansera,Karanthanil,Karnosea,Kasethyr,Keatheas,Kelsya,Keth Aiqua,Kmlon,Kyathlenor,Kyhasera,Lahetheas,Lefdorei,Lelhamelle,Lilean,Lindeenil,Lindoress,Litys,Llaughei,Lya,Lyfa,Lylharion,Lynathalas,Machei,Masenoris,Mathethil,Mathentheas,Meethalas,Menyamar,Mithlonde,Mytha,Mythsemelle,Mythsthas,Naahona,Nalore,Nandeedil,Nasad Ilaurth,Nasin,Nathemar,Neadar,Neilon,Nelalon,Nellean,Nelnetaesi,Nilenathyr,Nionande,Nylm,Nytenanas,Nythanlenor,O'anlenora,Obeth,Ofaenathyr,Ollmnaes,Ollsmel,Olwen,Olyaneas,Omanalon,Onelion,Onelond,Orlormel,Ormrion,Oshana,Oshvamel,Raethei,Rauguall,Reisera,Reslenora,Ryanasera,Rymaserin,Sahnor,Saselune,Sel-Zedraazin,Selananor,Sellerion,Selmaluma,Shaeras,Shemnas,Shemserin,Sheosari,Sileltalos,Siriande,Siriathil,Srannor,Sshanntyr,Sshaulu,Syholume,Sylharius,Sylranbel,Taesi,Thalor,Tharenlon,Thelethlune,Thelhohil,Themar,Thene,Thilfalean,Thilnaenor,Thvethalas,Thylathlond,Tiregul,Tlauven,Tlindhe,Ulal,Ullve,Ulmetheas,Ulssin,Umnalin,Umye,Umyheserine,Unanneas,Unarith,Undraeth,Unysarion,Vel-Shonidor,Venas,Vin Argor,Wasrion,Wlalean,Yaeluma,Yeelume,Yethrion,Ymserine,Yueghed,Yuerran,Yuethin"},{name:"Dark Elven",i:34,min:6,max:14,d:"nrslamg",m:.2,b:"Abaethaggar,Abburth,Afranthemar,Aharasplit,Aidanat,Ald'ruhn,Ashamanu,Ashesari,Ashletheas,Baerario,Baereghel,Baethei,Bahashae,Balmora,Bel-Didhel,Borethanil,Buiyrandyn,Caellagith,Caellathala,Caergroth,Caldras,Chaggar,Chaggaust,Channtar,Charrvhel'raugaust,Chaulssin,Chaundra,ChedNasad,ChetarIthlin,ChethRrhinn,Chymaer,Clarkarond,Cloibbra,Commoragh,Cyrangroth,Cilben,D'eldarc,Daedhrog,Dalkyn,Do'Urden,Doladress,Dolarith,Dolonde,Draethe,Dranzan,Dranzithl,Draugaust,Dreghei,Drelhei,Dryndlu,Dusklyngh,DyonG'ennivalz,Edraithion,Eld-Sinnocrin,Ellorthond,Enhethyr,Entheas,ErrarIthinn,Eryndlyn,Faladhell,Faneadar,Fethalas,Filranlean,Formarion,Ferdor,Gafetheas,Ghrond,Gilranel,Glamordis,Gnaarmok,Gnisis,Golothaer,Gondorwin,Guallidurth,Guallu,Gulshin,Haeth,Haggraef,Harganeth,Harkaldra,Haulssad,Haundrauth,Heloriath,Hlammachar,Hlaughei,Hloireenil,Hluitar,Inferius,Innsshe,Ithilaughym,Iz'aiogith,Jaal,Jhachalkhyn,Kaerabrae,Karanthanil,Karondkar,Karsoluthiyl,Kellyth,Khuul,Lahetheas,Lidurth,Lindeenil,Lirillaquen,LithMy'athar,LlurthDreier,Lolth,Lothuial,Luihaulen'tar,Maeralyn,Maerimydra,Mathathlona,Mathethil,Mellodona,Menagith,Menegwen,Menerrendil,Menzithl,Menzoberranzan,Mila-Nipal,Mithryn,Molagmar,Mundor,Myvanas,Naggarond,Nandeedil,NasadIlaurth,Nauthor,Navethas,Neadar,Nurtaleewe,Nidiel,Noruiben,Olwen,O'lalona,Obeth,Ofaenathyr,Orlormel,Orlytlar,Pelagiad,Raethei,Raugaust,Rauguall,Rilauven,Rrharrvhei,Sadrith,Sel-Zedraazin,Seydaneen,Shaz'rir,Skaal,Sschindylryn,Shamath,Shamenz,Shanntur,Sshanntynlan,Sshanntyr,Shaulssin,SzithMorcane,Szithlin,Szobaeth,Sirdhemben,T'lindhet,Tebh'zhor,Telmere,Telnarquel,Tharlarast,Thylathlond,Tlaughe,Trizex,Tyrybblyn,Ugauth,Ughym,Uhaelben,Ullmatalos,Ulmetheas,Ulrenserine,Uluitur,Undraeth,Undraurth,Undrek'Thoz,Ungethal,UstNatha,Uthaessien,V'elddrinnsshar,Vaajha,Vel-Shonidor,Velddra,Velothi,Venead,Vhalth'vha,Vinargothr,Vojha,Waethe,Waethei,Xaalkis,Yakaridan,Yeelume,Yridhremben,Yuethin,Yuethindrynn,Zirnakaynin"},{name:"Dwarven",i:35,min:4,max:11,d:"dk",m:0,b:"Addundad,Ahagzad,Ahazil,Akil,Akzizad,Anumush,Araddush,Arar,Arbhur,Badushund,Baragzig,Baragzund,Barakinb,Barakzig,Barakzinb,Barakzir,Baramunz,Barazinb,Barazir,Bilgabar,Bilgatharb,Bilgathaz,Bilgila,Bilnaragz,Bilnulbar,Bilnulbun,Bizaddum,Bizaddush,Bizanarg,Bizaram,Bizinbiz,Biziram,Bunaram,Bundinar,Bundushol,Bundushund,Bundushur,Buzaram,Buzundab,Buzundush,Gabaragz,Gabaram,Gabilgab,Gabilgath,Gabizir,Gabunal,Gabunul,Gabuzan,Gatharam,Gatharbhur,Gathizdum,Gathuragz,Gathuraz,Gila,Giledzir,Gilukkhath,Gilukkhel,Gunala,Gunargath,Gunargil,Gundumunz,Gundusharb,Gundushizd,Kharbharbiln,Kharbhatharb,Kharbhela,Kharbilgab,Kharbuzadd,Khatharbar,Khathizdin,Khathundush,Khazanar,Khazinbund,Khaziragz,Khaziraz,Khizdabun,Khizdusharbh,Khizdushath,Khizdushel,Khizdushur,Kholedzar,Khundabiln,Khundabuz,Khundinarg,Khundushel,Khuragzig,Khuramunz,Kibarak,Kibilnal,Kibizar,Kibunarg,Kibundin,Kibuzan,Kinbadab,Kinbaragz,Kinbarakz,Kinbaram,Kinbizah,Kinbuzar,Nala,Naledzar,Naledzig,Naledzinb,Naragzah,Naragzar,Naragzig,Narakzah,Narakzar,Naramunz,Narazar,Nargabad,Nargabar,Nargatharb,Nargila,Nargundum,Nargundush,Nargunul,Narukthar,Narukthel,Nula,Nulbadush,Nulbaram,Nulbilnarg,Nulbunal,Nulbundab,Nulbundin,Nulbundum,Nulbuzah,Nuledzah,Nuledzig,Nulukkhaz,Nulukkhund,Nulukkhur,Sharakinb,Sharakzar,Sharamunz,Sharbarukth,Shatharbhizd,Shatharbiz,Shathazah,Shathizdush,Shathola,Shaziragz,Shizdinar,Shizdushund,Sholukkharb,Shundinulb,Shundushund,Shurakzund,Shuramunz,Tumunzadd,Tumunzan,Tumunzar,Tumunzinb,Tumunzir,Ukthad,Ulbirad,Ulbirar,Ulunzar,Ulur,Umunzad,Undalar,Undukkhil,Undun,Undur,Unduzur,Unzar,Unzathun,Usharar,Zaddinarg,Zaddushur,Zaharbad,Zaharbhizd,Zarakib,Zarakzar,Zaramunz,Zarukthel,Zinbarukth,Zirakinb,Zirakzir,Ziramunz,Ziruktharbh,Zirukthur,Zundumunz"},{name:"Goblin",i:36,min:4,max:9,d:"eag",m:0,b:"Asinx,Bhiagielt,Biokvish,Blix,Blus,Bratliaq,Breshass,Bridvelb,Brybsil,Bugbig,Buyagh,Cel,Chalk,Chiafzia,Chox,Cielb,Cosvil,Crekork,Crild,Croibieq,Diervaq,Dobruing,Driord,Eebligz,Een,Enissee,Esz,Far,Felhob,Froihiofz,Fruict,Fygsee,Gagablin,Gigganqi,Givzieqee,Glamzofs,Glernaahx,Gneabs,Gnoklig,Gobbledak,gobbok,Gobbrin,Heszai,Hiszils,Hobgar,Honk,Iahzaarm,Ialsirt,Ilm,Ish,Jasheafta,Joimtoilm,Kass,Katmelt,Kleabtong,Kleardeek,Klilm,Kluirm,Kuipuinx,Moft,Mogg,Nilbog,Oimzoishai,Onq,Ozbiard,Paas,Phax,Phigheldai,Preang,Prolkeh,Pyreazzi,Qeerags,Qosx,Rekx,Shaxi,Sios,Slehzit,Slofboif,Slukex,Srefs,Srurd,Stiaggaltia,Stiolx,Stioskurt,Stroir,Strytzakt,Stuikvact,Styrzangai,Suirx,Swaxi,Taxai,Thelt,Thresxea,Thult,Traglila,Treaq,Ulb,Ulm,Utha,Utiarm,Veekz,Vohniots,Vreagaald,Watvielx,Wrogdilk,Wruilt,Xurx,Ziggek,Zriokots"},{name:"Orc",i:37,min:4,max:8,d:"gzrcu",m:0,b:"Adgoz,Adgril-Gha,Adog,Adzurd,Agkadh,Agzil-Ghal,Akh,Ariz-Dru,Arkugzo,Arrordri,Ashnedh,Azrurdrekh,Bagzildre,Bashnud,Bedgez-Graz,Bhakh,Bhegh,Bhiccozdur,Bhicrur,Bhirgoshbel,Bhog,Bhurkrukh,Bod-Rugniz,Bogzel,Bozdra,Bozgrun,Bozziz,Bral-Lazogh,Brazadh,Brogved,Brogzozir,Brolzug,Brordegeg,Brorkril-Zrog,Brugroz,Brukh-Zrabrul,Brur-Korre,Bulbredh,Bulgragh,Chaz-Charard,Chegan-Khed,Chugga,Chuzar,Dhalgron-Mog,Dhazon-Ner,Dhezza,Dhoddud,Dhodh-Brerdrodh,Dhodh-Ghigin,Dhoggun-Bhogh,Dhulbazzol,Digzagkigh,Dirdrurd,Dodkakh,Dorgri,Drizdedh,Drobagh,Drodh-Ashnugh,Drogvukh-Drodh,Drukh-Qodgoz,Drurkuz,Dududh,Dur-Khaddol,Egmod,Ekh-Beccon,Ekh-Krerdrugh,Ekh-Mezred,Gagh-Druzred,Gazdrakh-Vrard,Gegnod,Gerkradh,Ghagrocroz,Ghared-Krin,Ghedgrolbrol,Gheggor,Ghizgil,Gho-Ugnud,Gholgard,Gidh-Ucceg,Goccogmurd,Golkon,Graz-Khulgag,Gribrabrokh,Gridkog,Grigh-Kaggaz,Grirkrun-Qur,Grughokh,Grurro,Gugh-Zozgrod,Gur-Ghogkagh,Ibagh-Chol,Ibruzzed,Ibul-Brad,Iggulzaz,Ikh-Ugnan,Irdrelzug,Irmekh-Bhor,Kacruz,Kalbrugh,Karkor-Zrid,Kazzuz-Zrar,Kezul-Bruz,Kharkiz,Khebun,Khorbric,Khuldrerra,Khuzdraz,Kirgol,Koggodh,Korkrir-Grar,Kraghird,Krar-Zurmurd,Krigh-Bhurdin,Kroddadh,Krudh-Khogzokh,Kudgroccukh,Kudrukh,Kudzal,Kuzgrurd-Dedh,Larud,Legvicrodh,Lorgran,Lugekh,Lulkore,Mazgar,Merkraz,Mocculdrer,Modh-Odod,Morbraz,Mubror,Muccug-Ghuz,Mughakh-Chil,Murmad,Nazad-Ludh,Negvidh,Nelzor-Zroz,Nirdrukh,Nogvolkar,Nubud,Nuccag,Nudh-Kuldra,Nuzecro,Oddigh-Krodh,Okh-Uggekh,Ordol,Orkudh-Bhur,Orrad,Qashnagh,Qiccad-Chal,Qiddolzog,Qidzodkakh,Qirzodh,Rarurd,Reradgri,Rezegh,Rezgrugh,Rodrekh,Rogh-Chirzaz,Rordrushnokh,Rozzez,Ruddirgrad,Rurguz-Vig,Ruzgrin,Ugh-Vruron,Ughudadh,Uldrukh-Bhudh,Ulgor,Ulkin,Ummugh-Ekh,Uzaggor,Uzdriboz,Uzdroz,Uzord,Uzron,Vaddog,Vagord-Khod,Velgrudh,Verrugh,Vrazin,Vrobrun,Vrugh-Nardrer,Vrurgu,Vuccidh,Vun-Gaghukh,Zacrad,Zalbrez,Zigmorbredh,Zordrordud,Zorrudh,Zradgukh,Zragmukh,Zragrizgrakh,Zraldrozzuz,Zrard-Krodog,Zrazzuz-Vaz,Zrigud,Zrulbukh-Dekh,Zubod-Ur,Zulbriz,Zun-Bergrord"},{name:"Giant",i:38,min:5,max:10,d:"kdtng",m:0,b:"Addund,Aerora,Agane,Anumush,Arangrim,Bahourg,Baragzund,Barakinb,Barakzig,Barakzinb,Baramunz,Barazinb,Beornelde,Beratira,Borgbert,Botharic,Bremrol,Brerstin,Brildung,Brozu,Bundushund,Burthug,Chazruc,Chergun,Churtec,Dagdhor,Dankuc,Darnaric,Debuch,Dina,Dinez,Diru,Drard,Druguk,Dugfast,Duhal,Dulkun,Eldond,Enuz,Eraddam,Eradhelm,Froththorn,Fynwyn,Gabaragz,Gabaram,Gabizir,Gabuzan,Gagkake,Galfald,Galgrim,Gatal,Gazin,Geru,Gila,Giledzir,Girkun,Glumvat,Gluthmark,Gomruch,Gorkege,Gortho,Gostuz,Grimor,Grimtira,Guddud,Gudgiz,Gulwo,Gunargath,Gundusharb,Guril,Gurkale,Guruge,Guzi,Hargarth,Hartreo,Heimfara,Hildlaug,Idgurth,Inez,Inginy,Iora,Irkin,Jaldhor,Jarwar,Jornangar,Jornmoth,Kakkek,Kaltoch,Kegkez,Kengord,Kharbharbiln,Khatharbar,Khathizdin,Khazanar,Khaziragz,Khizdabun,Khizdushel,Khundinarg,Kibarak,Kibizar,Kigine,Kilfond,Kilkan,Kinbadab,Kinbuzar,Koril,Kostand,Kuzake,Lindira,Lingarth,Maerdis,Magald,Marbold,Marbrand,Memron,Minu,Mistoch,Morluch,Mornkin,Morntaric,Nagu,Naragzah,Naramunz,Narazar,Nargabar,Nargatharb,Nargundush,Nargunul,Natan,Natil,Neliz,Nelkun,Noluch,Norginny,Nulbaram,Nulbilnarg,Nuledzah,Nuledzig,Nulukkhaz,Nulukkhur,Nurkel,Oci,Olane,Oldstin,Orga,Ranava,Ranhera,Rannerg,Rirkan,Rizen,Rurki,Rurkoc,Sadgach,Sgandrol,Sharakzar,Shatharbiz,Shathizdush,Shathola,Shizdinar,Sholukkharb,Shundushund,Shurakzund,Sidga,Sigbeorn,Sigbi,Solfod,Somrud,Srokvan,Stighere,Sulduch,Talkale,Theoddan,Theodgrim,Throtrek,Tigkiz,Tolkeg,Toren,Tozage,Tulkug,Tumunzar,Umunzad,Undukkhil,Usharar,Valdhere,Varkud,Velfirth,Velhera,Vigkan,Vorkige,Vozig,Vylwed,Widhyrde,Wylaeya,Yili,Yotane,Yudgor,Yulkake,Zigez,Zugkan,Zugke"},{name:"Draconic",i:39,min:6,max:14,d:"aliuszrox",m:0,b:"Aaronarra,Adalon,Adamarondor,Aeglyl,Aerosclughpalar,Aghazstamn,Aglaraerose,Agoshyrvor,Alduin,Alhazmabad,Altagos,Ammaratha,Amrennathed,Anaglathos,Andrathanach,Araemra,Araugauthos,Arauthator,Arharzel,Arngalor,Arveiaturace,Athauglas,Augaurath,Auntyrlothtor,Azarvilandral,Azhaq,Balagos,Baratathlaer,Bleucorundum,BrazzPolis,Canthraxis,Capnolithyl,Charvekkanathor,Chellewis,Chelnadatilar,Cirrothamalan,Claugiyliamatar,Cragnortherma,Dargentum,Dendeirmerdammarar,Dheubpurcwenpyl,Domborcojh,Draconobalen,Dragansalor,Dupretiskava,Durnehviir,Eacoathildarandus,Eldrisithain,Enixtryx,Eormennoth,Esmerandanna,Evenaelorathos,Faenphaele,Felgolos,Felrivenser,Firkraag,Fll'Yissetat,Furlinastis,Galadaeros,Galglentor,Garnetallisar,Garthammus,Gaulauntyr,Ghaulantatra,Glouroth,Greshrukk,Guyanothaz,Haerinvureem,Haklashara,Halagaster,Halaglathgar,Havarlan,Heltipyre,Hethcypressarvil,Hoondarrh,Icehauptannarthanyx,Iiurrendeem,Ileuthra,Iltharagh,Ingeloakastimizilian,Irdrithkryn,Ishenalyr,Iymrith,Jaerlethket,Jalanvaloss,Jharakkan,Kasidikal,Kastrandrethilian,Khavalanoth,Khuralosothantar,Kisonraathiisar,Kissethkashaan,Kistarianth,Klauth,Klithalrundrar,Krashos,Kreston,Kriionfanthicus,Krosulhah,Krustalanos,Kruziikrel,Kuldrak,Lareth,Latovenomer,Lhammaruntosz,Llimark,Ma'fel'no'sei'kedeh'naar,MaelestorRex,Magarovallanthanz,Mahatnartorian,Mahrlee,Malaeragoth,Malagarthaul,Malazan,Maldraedior,Maldrithor,MalekSalerno,Maughrysear,Mejas,Meliordianix,Merah,Mikkaalgensis,Mirmulnir,Mistinarperadnacles,Miteach,Mithbarazak,Morueme,Moruharzel,Naaslaarum,Nahagliiv,Nalavarauthatoryl,Naxorlytaalsxar,Nevalarich,Nolalothcaragascint,Nurvureem,Nymmurh,Odahviing,Olothontor,Ormalagos,Otaaryliakkarnos,Paarthurnax,Pelath,Pelendralaar,Praelorisstan,Praxasalandos,Protanther,Qiminstiir,Quelindritar,Ralionate,Rathalylaug,Rathguul,Rauglothgor,Raumorthadar,Relonikiv,Ringreemeralxoth,Roraurim,Rynnarvyx,Sablaxaahl,Sahloknir,Sahrotaar,Samdralyrion,Saryndalaghlothtor,Sawaka,Shalamalauth,Shammagar,Sharndrel,Shianax,Skarlthoon,Skurge,Smergadas,Ssalangan,Sssurist,Sussethilasis,Sylvallitham,Tamarand,Tantlevgithus,Tarlacoal,Tenaarlaktor,Thalagyrt,Tharas'kalagram,Thauglorimorgorus,Thoklastees,Thyka,Tsenshivah,Ueurwen,Uinnessivar,Urnalithorgathla,Velcuthimmorhar,Velora,Vendrathdammarar,Venomindhar,Viinturuth,Voaraghamanthar,Voslaarum,Vr'tark,Vrondahorevos,Vuljotnaak,Vulthuryol,Wastirek,Worlathaugh,Xargithorvar,Xavarathimius,Yemere,Ylithargathril,Ylveraasahlisar,Za-Jikku,Zarlandris,Zellenesterex,Zilanthar,Zormapalearath,Zundaerazylym,Zz'Pzora"},{name:"Arachnid",i:40,min:4,max:10,d:"erlsk",m:0,b:"Aaqok'ser,Aiced,Aizachis,Allinqel,As'taq,Ashrash,Caaqtos,Ceek'sax,Ceezuq,Cek'sier,Cen'qi,Ceqzocer,Cezeed,Chachocaq,Charis,Chashilieth,Checib,Chernul,Chezi,Chiazu,Chishros,Chixhi,Chizhi,Chollash,Choq'sha,Cinchichail,Collul,Ecush'taid,Ekiqe,Eqas,Er'uria,Erikas,Es'tase,Esrub,Exha,Haqsho,Hiavheesh,Hitha,Hok'thi,Hossa,Iacid,Iciever,Illuq,Isnir,Keezut,Kheellavas,Kheizoh,Khiachod,Khika,Khirzur,Khonrud,Khrakku,Khraqshis,Khrethish'ti,Khriashus,Khrika,Khrirni,Klashirel,Kleil'sha,Klishuth,Krarnit,Kras'tex,Krotieqas,Lais'tid,Laizuh,Lasnoth,Len'qeer,Leqanches,Lezad,Lhilir,Lhivhath,Lhok'thu,Lialliesed,Liaraq,Liceva,Lichorro,Lilla,Lokieqib,Nakur,Neerhaca,Neet'er,Neezoh,Nenchiled,Nerhalneth,Nir'ih,Nizus,Noreeqo,On'qix,Qalitho,Qas'tor,Qasol,Qavrud,Qavud,Qazar,Qazru,Qekno,Qeqravee,Qes'tor,Qhaik'sal,Qhak'sish,Qhazsakais,Qheliva,Qhenchaqes,Qherazal,Qhon'qos,Qhosh,Qish'tur,Qisih,Qorhoci,Qranchiq,Racith,Rak'zes,Ranchis,Rarhie,Rarzi,Rarzisiaq,Ras'tih,Ravosho,Recad,Rekid,Rernee,Rertachis,Rezhokketh,Reziel,Rhacish,Rhail'shel,Rhairhizse,Rhakivex,Rhaqeer,Rhartix,Rheciezsei,Rheevid,Rhel'shir,Rhevhie,Rhiavekot,Rhikkos,Rhiqese,Rhiqi,Rhiqracar,Rhisned,Rhousnateb,Riakeesnex,Rintachal,Rir'ul,Rourk'u,Rouzakri,Sailiqei,Sanchiqed,Saqshu,Sat'ier,Sazi,Seiqas,Shieth'i,Shiqsheh,Shizha,Shrachuvo,Shranqo,Shravhos,Shravuth,Shreerhod,Shrethuh,Shriantieth,Shronqash,Shrovarhir,Shrozih,Siacaqoh,Siezosh,Siq'sha,Sirro,Sornosi,Srachussi,Szaca,Szacih,Szaqova,Szasu,Szazhilos,Szeerrud,Szeezsad,Szeknur,Szesir,Szezhirros,Szilshith,Szon'qol,Szornuq,Xeekke,Yeek'su,Yeeq'zox,Yeqil,Yeqroq,Yeveed,Yevied,Yicaveeh,Yirresh,Yisie,Yithik'thaih,Yorhaqshes,Zacheek'sa,Zakkasa,Zelraq,Zeqo,Zharuncho,Zhath'arhish,Zhavirrit,Zhazilraq,Zhazsachiel,Zhek'tha,Zhequ,Zhias'ted,Zhicat,Zhicur,Zhirhacil,Zhizri,Zhochizses,Ziarih,Zirnib"},{name:"Serpents",i:41,min:5,max:11,d:"slrk",m:0,b:"Aj'ha,Aj'i,Aj'tiss,Ajakess,Aksas,Aksiss,Al'en,An'jeshe,Apjige,Arkkess,Athaz,Atus,Azras,Caji,Cakrasar,Cal'arrun,Capji,Cathras,Cej'han,Ces,Cez'jenta,Cij'te,Cinash,Cizran,Coth'jus,Cothrash,Culzanek,Cunaless,Ej'tesh,Elzazash,Ergek,Eshjuk,Ethris,Gan'jas,Gapja,Gar'thituph,Gopjeguss,Gor'thesh,Gragishaph,Grar'theness,Grath'ji,Gressinas,Grolzesh,Grorjar,Grozrash,Guj'ika,Harji,Hej'hez,Herkush,Horgarrez,Illuph,Ipjar,Ithashin,Kaj'ess,Kar'kash,Kepjusha,Ki'kintus,Kissere,Koph,Kopjess,Kra'kasher,Krak,Krapjez,Krashjuless,Kraz'ji,Krirrigis,Krussin,Ma'lush,Mage,Maj'tak,Mal'a,Mapja,Mar'kash,Mar'kis,Marjin,Mas,Mathan,Men'jas,Meth'jaresh,Mij'hegak,Min'jash,Mith'jas,Monassu,Moss,Naj'hass,Najugash,Nak,Napjiph,Nar'ka,Nar'thuss,Narrusha,Nash,Nashjekez,Nataph,Nij'ass,Nij'tessiph,Nishjiss,Norkkuss,Nus,Olluruss,Or'thi,Or'thuss,Paj'a,Parkka,Pas,Pathujen,Paz'jaz,Pepjerras,Pirkkanar,Pituk,Porjunek,Pu'ke,Ragen,Ran'jess,Rargush,Razjuph,Rilzan,Riss,Rithruz,Rorgiss,Rossez,Rraj'asesh,Rraj'tass,Rrar'kess,Rrar'thuph,Rras,Rrazresh,Rrej'hish,Rrigelash,Rris,Rris,Rroksurrush,Rukrussush,Rurri,Russa,Ruth'jes,Sa'kitesh,Sar'thass,Sarjas,Sazjuzush,Ser'thez,Sezrass,Shajas,Shas,Shashja,Shass,Shetesh,Shijek,Shun'jaler,Shurjarri,Skaler,Skalla,Skallentas,Skaph,Skar'kerriz,Skath'jeruk,Sker'kalas,Skor,Skoz'ji,Sku'lu,Skuph,Skur'thur,Slalli,Slalt'har,Slelziress,Slil'ar,Sloz'jisa,Sojesh,Solle,Sorge,Sral'e,Sran'ji,Srapjess,Srar'thazur,Srash,Srath'jess,Srathrarre,Srerkkash,Srus,Sruss'tugeph,Sun,Suss'tir,Uzrash,Vargush,Vek,Vess'tu,Viph,Vult'ha,Vupjer,Vushjesash,Xagez,Xassa,Xulzessu,Zaj'tiss,Zan'jer,Zarriss,Zassegus,Zirres,Zsor,Zurjass"},{name:"Levantine",i:42,min:4,max:12,d:"ankprs",m:0,b:"Adme,Adramet,Agadir,Akko,Akzib,Alimas,Alis-Ubbo,Alqosh,Amid,Ammon,Ampi,Amurru,Andarig,Anpa,Araden,Aram,Arwad,Ashkelon,Athar,Atiq,Aza,Azeka,Baalbek,Babel,Batrun,Beerot,Beersheba,Beit Shemesh,Berytus,Bet Agus,Bet Anya,Beth-Horon,Bethel,Bethlehem,Bethuel,Bet Nahrin,Bet Nohadra,Bet Zalin,Birmula,Biruta,Bit Agushi,Bitan,Bit Zamani,Cerne,Dammeseq,Darmsuq,Dor,Eddial,Eden Ekron,Elah,Emek,Emun,Ephratah,Eyn Ganim,Finike,Gades,Galatia,Gaza,Gebal,Gedera,Gerizzim,Gethsemane,Gibeon,Gilead,Gilgal,Golgotha,Goshen,Gytte,Hagalil,Haifa,Halab,Haqel Dma,Har Habayit,Har Nevo,Har Pisga,Havilah,Hazor,Hebron,Hormah,Iboshim,Iriho,Irinem,Irridu,Israel,Kadesh,Kanaan,Kapara,Karaly,Kart-Hadasht,Keret Chadeshet,Kernah,Kesed,Keysariya,Kfar,Kfar Nahum,Khalibon,Khalpe,Khamat,Kiryat,Kittim,Kurda,Lapethos,Larna,Lepqis,Lepriptza,Liksos,Lod,Luv,Malaka,Malet,Marat,Megido,Melitta,Merdin,Metsada,Mishmarot,Mitzrayim,Moab,Mopsos,Motye,Mukish,Nampigi,Nampigu,Natzrat,Nimrud,Nineveh,Nob,Nuhadra,Oea,Ofir,Oyat,Phineka,Phoenicus,Pleshet,Qart-Tubah Sarepta,Qatna,Rabat Amon,Rakkath,Ramat Aviv,Ramitha,Ramta,Rehovot,Reshef,Rushadir,Rushakad,Samrin,Sefarad,Sehyon,Sepat,Sexi,Sharon,Shechem,Shefelat,Shfanim,Shiloh,Shmaya,Shomron,Sidon,Sinay,Sis,Solki,Sur,Suria,Tabetu,Tadmur,Tarshish,Tartus,Teberya,Tefessedt,Tekoa,Teyman,Tinga,Tipasa,Tsabratan,Tur Abdin,Tzarfat,Tziyon,Tzor,Ugarit,Unubaal,Ureshlem,Urhay,Urushalim,Vaga,Yaffa,Yamhad,Yam hamelach,Yam Kineret,Yamutbal,Yathrib,Yaudi,Yavne,Yehuda,Yerushalayim,Yev,Yevus,Yizreel,Yurdnan,Zarefat,Zeboim,Zeurta,Zeytim,Zikhron,Zmurna"}]}}window.Names=new JT;class e6{cells;vertices;pointsN;used;lineGen=kn().curve(cs);oceanLayers;constructor(n){this.oceanLayers=n}randomizeOutline(){const n=[];let t=.2;for(let a=-9;a<0;a++)j(t)?(t=.2,n.push(a)):t*=2;return n}connectVertices(n,t){const a=[];for(let r=0,i=n;r===0||i!==n&&r<1e4;r++){const o=a[a.length-1];a.push(i);const u=this.vertices.c[i];u.filter(s=>this.cells.t[s]===t).forEach(s=>{this.used[s]=1});const l=this.vertices.v[i],c=!this.cells.t[u[0]]||this.cells.t[u[0]]===t-1,h=!this.cells.t[u[1]]||this.cells.t[u[1]]===t-1,f=!this.cells.t[u[2]]||this.cells.t[u[2]]===t-1;if(l[0]!==void 0&&l[0]!==o&&c!==h?i=l[0]:l[1]!==void 0&&l[1]!==o&&h!==f?i=l[1]:l[2]!==void 0&&l[2]!==o&&c!==f&&(i=l[2]),i===a[a.length-1]){ERROR&&console.error("Next vertex is not found");break}}return a.push(a[0]),a}findStart(n,t){return this.cells.b[n]?this.cells.v[n].find(a=>this.vertices.c[a].some(r=>r>=this.pointsN)):this.cells.v[n][this.cells.c[n].findIndex(a=>this.cells.t[a]<t||!this.cells.t[a])]}draw(){const n=this.oceanLayers.attr("layers");if(n==="none")return;TIME&&console.time("drawOceanLayers"),this.cells=grid.cells,this.pointsN=grid.cells.i.length,this.vertices=grid.vertices;const t=n==="random"?this.randomizeOutline():n.split(",").map(i=>+i),a=[],r=L(.4/t.length,2);this.used=new Uint8Array(this.pointsN);for(const i of this.cells.i){const o=this.cells.t[i];if(o>0||this.used[i]||!t.includes(o))continue;const u=this.findStart(i,o);if(!u)continue;this.used[i]=1;const l=this.connectVertices(u,o);if(l.length<4)continue;const c=1+o*-2,h=l.filter((s,d)=>!(d%c)||this.vertices.c[s].some(g=>g>=this.pointsN));if(h.length<4)continue;const f=Vr(h.map(s=>this.vertices.p[s]),graphWidth,graphHeight,1);a.push([o,f])}for(const i of t){const u=a.filter(l=>l[0]===i).map(l=>zn(this.lineGen(l[1])||"")).join("");u&&this.oceanLayers.append("path").attr("d",u).attr("fill","#ecf2f9").attr("fill-opacity",r)}TIME&&console.timeEnd("drawOceanLayers")}}window.OceanLayers=()=>new e6(oceanLayers).draw();class n6{LAKE_ELEVATION_DELTA=.1;getHeight(n){const t=pack.cells.h,a=An(n.shoreline.map(r=>t[r]))||20;return L(a-this.LAKE_ELEVATION_DELTA,2)}defineNames(){pack.features.forEach(n=>{n.type==="lake"&&(n.name=this.getName(n))})}getName(n){const t=n.shoreline[0],a=pack.cells.culture[t];return Names.getCulture(a)}cleanupLakeData=()=>{for(const n of pack.features){if(n.type!=="lake")continue;delete n.river,delete n.enteringFlux,delete n.outCell,delete n.closed,n.height=L(n.height,3);const t=n.inlets?.filter(r=>pack.rivers.find(i=>i.i===r));!t||!t.length?delete n.inlets:n.inlets=t,n.outlet&&pack.rivers.find(r=>r.i===n.outlet)||delete n.outlet}};defineClimateData(n){const{cells:t,features:a}=pack,r=new Uint16Array(t.i.length),i=c=>c.shoreline.reduce((h,f)=>h+grid.cells.prec[t.g[f]],0),o=c=>c.cells<6?grid.cells.temp[t.g[c.firstCell]]:L(ft(c.shoreline.map(h=>grid.cells.temp[t.g[h]])),1),u=c=>{const h=(c.height-18)**Number(heightExponentInput.value),f=(700*(c.temp+.006*h)/50+75)/(80-c.temp);return L(f*c.cells)},l=c=>c.shoreline.sort((h,f)=>n[h]-n[f])[0];return a.forEach(c=>{c.type==="lake"&&(c.flux=i(c),c.temp=o(c),c.evaporation=u(c),!c.closed&&(c.outCell=l(c),r[c.outCell]=c.i))}),r}detectCloseLakes(n){const{cells:t}=pack,a=+Ae("lakeElevationLimitOutput")?.value;pack.features.forEach(r=>{if(r.type!=="lake")return;delete r.closed;const i=r.height+a;if(i>99){r.closed=!1;return}let o=!0;const u=r.shoreline.sort((h,f)=>n[h]-n[f])[0],l=[u],c=[];for(c[u]=!0;l.length&&o;){const h=l.pop();for(const f of t.c[h])if(!c[f]&&!(n[f]>=i)){if(n[f]<20){const s=pack.features[t.f[f]];(s.type==="ocean"||r.height>s.height)&&(o=!1)}c[f]=!0,l.push(f)}}r.closed=o})}}window.Lakes=new n6;class t6{FLUX_FACTOR=500;MAX_FLUX_WIDTH=1;LENGTH_FACTOR=200;LENGTH_STEP_WIDTH=1/this.LENGTH_FACTOR;LENGTH_PROGRESSION=[1,1,2,3,5,8,13,21,34].map(n=>n/this.LENGTH_FACTOR);lineGen=kn().curve(up);riverTypes={main:{big:{River:1},small:{Creek:9,River:3,Brook:3,Stream:1}},fork:{big:{Fork:1},small:{Branch:1}}};smallLength=null;generate(n=!0){TIME&&console.time("generateRivers"),Math.random=La(seed);const{cells:t,features:a}=pack,r={},i={},o=(g,p)=>{r[p]?r[p].push(g):r[p]=[g]},u=()=>{const p=(pointsInput.dataset.cells/1e4)**.25,m=grid.cells.prec,y=t.i.filter(v=>d[v]>=20).sort((v,b)=>d[b]-d[v]),k=Lakes.defineClimateData(d);for(const v of y){t.fl[v]+=m[t.g[v]]/p;const b=k[v]?a.filter(x=>v===x.outCell&&x.flux>x.evaporation):[];for(const x of b){const S=t.c[v].find(T=>d[T]<20&&t.f[T]===x.i);t.fl[S]+=Math.max(x.flux-x.evaporation,0),t.r[S]!==x.river&&(t.c[S].some(_=>t.r[_]===x.river)?(t.r[S]=x.river,o(S,x.river)):(t.r[S]=s,o(S,s),s++)),x.outlet=t.r[S],l(v,t.fl[S],x.outlet)}const w=b[0]?.outlet;for(const x of b)if(Array.isArray(x.inlets))for(const S of x.inlets)i[S]=w;if(t.b[v]&&t.r[v]){o(-1,t.r[v]);continue}let M=null;if(k[v]?M=t.c[v].filter(S=>!b.map(T=>T.i).includes(t.f[S])).sort((S,T)=>d[S]-d[T])[0]:t.haven[v]?M=t.haven[v]:M=t.c[v].sort((x,S)=>d[x]-d[S])[0],!(d[v]<=d[M])){if(t.fl[v]<30){d[M]>=20&&(t.fl[M]+=t.fl[v]);continue}t.r[v]||(t.r[v]=s,o(v,s),s++),l(M,t.fl[v],t.r[v])}}},l=(g,p,m)=>{const y=t.fl[g]-t.conf[g],k=t.r[g];if(k?p>y?(t.conf[g]+=t.fl[g],d[g]>=20&&(i[k]=m),t.r[g]=m):(t.conf[g]+=p,d[g]>=20&&(i[m]=k)):t.r[g]=m,d[g]<20){const v=a[t.f[g]];v.type==="lake"&&((!v.river||p>v.enteringFlux)&&(v.river=m,v.enteringFlux=p),v.flux=v.flux+p,v.inlets?v.inlets.push(m):v.inlets=[m])}else t.fl[g]+=p;o(g,m)},c=()=>{t.r=new Uint16Array(t.i.length),t.conf=new Uint16Array(t.i.length),pack.rivers=[];const g=L(1/(pointsInput.dataset.cells/1e4)**.25,2),p=g*1.2;for(const m in r){const y=r[m];if(y.length<3)continue;const k=+m;for(const R of y)R<0||t.h[R]<20||(t.r[R]?t.conf[R]=1:t.r[R]=k);const v=y[0],b=y[y.length-2],w=i[m]||0,M=!w||w===k?p:g,x=this.addMeandering(y),S=t.fl[b],T=this.getApproximateLength(x),_=this.getSourceWidth(t.fl[v]),A=this.getWidth(this.getOffset({flux:S,pointIndex:x.length,widthFactor:M,startingWidth:_}));pack.rivers.push({i:k,source:v,mouth:b,discharge:S,length:T,width:A,widthFactor:M,sourceWidth:_,parent:w,cells:y})}},h=()=>{for(const p of pack.cells.i){if(t.h[p]<35||!t.fl[p])continue;const m=t.c[p].filter(v=>t.h[v]>t.h[p]),y=m.reduce((v,b)=>v+t.fl[b],0)/m.length;if(!y)continue;const k=Math.floor(t.fl[p]/y);k&&(t.h[p]-=Math.min(k,5))}},f=()=>{for(const g of t.i){if(!t.conf[g])continue;const p=t.c[g].filter(m=>t.r[m]&&d[m]>d[g]).map(m=>t.fl[m]).sort((m,y)=>y-m);t.conf[g]=p.reduce((m,y,k)=>k?m+y:m,0)}};t.fl=new Uint16Array(t.i.length),t.r=new Uint16Array(t.i.length),t.conf=new Uint8Array(t.i.length);let s=1;const d=this.alterHeights();Lakes.detectCloseLakes(d),this.resolveDepressions(d),u(),c(),f(),Lakes.cleanupLakeData(),n&&(t.h=Uint8Array.from(d),h()),TIME&&console.timeEnd("generateRivers")}alterHeights(){const{h:n,c:t,t:a}=pack.cells;return Array.from(n).map((r,i)=>r<20||a[i]<1?r:r+a[i]/100+ft(t[i].map(o=>a[o]))/1e4)}resolveDepressions(n){const{cells:t,features:a}=pack,r=+document.getElementById("resolveDepressionsStepsOutput")?.value,i=r*.85,o=r*.75,u=d=>a[t.f[d]].height||n[d],l=a.filter(d=>d.type==="lake"),c=t.i.filter(d=>n[d]>=20&&!t.b[d]);c.sort((d,g)=>n[d]-n[g]);const h=[];let f=1/0,s=null;for(let d=0;f&&d<r;d++){if(h.length>5&&Pi(h)>0){n=this.alterHeights(),f=h[0];break}if(f=0,d<i)for(const g of l){if(g.closed)continue;const p=An(g.shoreline.map(m=>n[m]));if(!(p>=100||g.height>p)){if(d>o){g.shoreline.forEach(m=>{n[m]=t.h[m]}),g.height=An(g.shoreline.map(m=>n[m]))-1,g.closed=!0;continue}f++,g.height=p+.2}}for(const g of c){const p=An(t.c[g].map(m=>u(m)));p>=100||n[g]>p||(f++,n[g]=p+.1)}s!==null&&h.push(f-s),s=f}f&&WARN&&console.warn(`Unresolved depressions: ${f}. Edit heightmap to fix`)}addMeandering(n,t=null,a=.5){const{fl:r,h:i}=pack.cells,o=[],u=n.length-1,l=this.getRiverPoints(n,t);let c=i[n[0]]<20?1:10;for(let h=0;h<=u;h++,c++){const f=n[h],s=h===u,[d,g]=l[h];if(o.push([d,g,r[f]]),s)break;const p=n[h+1],[m,y]=l[h+1];if(p===-1){o.push([m,y,r[f]]);break}const k=(m-d)**2+(y-g)**2;if(k<=25&&n.length>=6)continue;const v=a+1/c+Math.max(a-c/100,0),b=Math.atan2(y-g,m-d),w=Math.sin(b)*v,M=Math.cos(b)*v;if(c<20&&(k>64||k>36&&n.length<5)){const x=(d*2+m)/3+-w,S=(g*2+y)/3+M,T=(d+m*2)/3+w/2,_=(g+y*2)/3-M/2;o.push([x,S,0],[T,_,0])}else if(k>25||n.length<6){const x=(d+m)/2+-w,S=(g+y)/2+M;o.push([x,S,0])}}return o}getRiverPoints(n,t){if(t)return t;const{p:a}=pack.cells;return n.map((r,i)=>r===-1?this.getBorderPoint(n[i-1]):a[r])}getBorderPoint(n){const[t,a]=pack.cells.p[n],r=Math.min(a,graphHeight-a,t,graphWidth-t);return r===a?[t,0]:r===graphHeight-a?[t,graphHeight]:r===t?[0,a]:[graphWidth,a]}getOffset({flux:n,pointIndex:t,widthFactor:a,startingWidth:r}){if(t===0)return r;const i=Math.min(n**.7/this.FLUX_FACTOR,this.MAX_FLUX_WIDTH),o=t*this.LENGTH_STEP_WIDTH+(this.LENGTH_PROGRESSION[t]||this.LENGTH_PROGRESSION.at(-1));return a*(o+i)+r}getSourceWidth(n){return L(Math.min(n**.9/this.FLUX_FACTOR,this.MAX_FLUX_WIDTH),2)}getRiverPath(n,t,a){this.lineGen.curve(ua.alpha(.1));const r=[],i=[];let o=0;for(let c=0;c<n.length;c++){const[h,f]=n[c-1]||n[c],[s,d,g]=n[c],[p,m]=n[c+1]||n[c];g>o&&(o=g);const y=this.getOffset({flux:o,pointIndex:c,widthFactor:t,startingWidth:a}),k=Math.atan2(f-m,h-p),v=Math.sin(k)*y,b=Math.cos(k)*y;r.push([s-v,d+b]),i.push([s+v,d-b])}const u=this.lineGen(i.reverse());let l=this.lineGen(r)||"";return l=l.substring(l.indexOf("C")),zn(u+l,1)}specify(){const n=pack.rivers;if(n.length)for(const t of n)t.basin=this.getBasin(t.i),t.name=this.getName(t.mouth),t.type=this.getType(t)}getName(n){return Names.getCulture(pack.cells.culture[n])}getType({i:n,length:t,parent:a}){if(this.smallLength===null){const o=Math.ceil(pack.rivers.length*.15);this.smallLength=pack.rivers.map(u=>u.length||0).sort((u,l)=>u-l)[o]}const r=t<this.smallLength,i=ut(3)(n)&&a&&a!==n;return le(this.riverTypes[i?"fork":"main"][r?"small":"big"])}getApproximateLength(n){const t=n.reduce((a,r,i,o)=>a+(i?Math.hypot(r[0]-o[i-1][0],r[1]-o[i-1][1]):0),0);return L(t,2)}getWidth(n){return L((n/1.5)**1.8,2)}remove(n){const t=pack.cells,a=pack.rivers.filter(r=>r.i===n||r.parent===n||r.basin===n).map(r=>r.i);a.forEach(r=>{rivers.select(`#river${r}`).remove()}),t.r.forEach((r,i)=>{!r||!a.includes(r)||(t.r[i]=0,t.fl[i]=grid.cells.prec[t.g[i]],t.conf[i]=0)}),pack.rivers=pack.rivers.filter(r=>!a.includes(r.i))}getBasin(n){const t=pack.rivers.find(a=>a.i===n)?.parent;return!t||n===t?n:this.getBasin(t)}getNextId(n){return n.length?Math.max(...n.map(t=>t.i))+1:1}}window.Rivers=new t6;class a6{shift(){const{cells:n,features:t,burgs:a}=pack,r=grid.cells.temp,i={};for(const u of a){if(!u.i||u.lock)continue;delete u.port;const l=u.cell,c=n.haven[l],h=n.harbor[l],f=n.f[c];if(!f)continue;const s=t[f].cells>1,d=h&&u.capital||h===1,g=r[n.g[l]]<=0;s&&d&&!g&&(i[f]||(i[f]=[]),i[f].push(u))}const o=(u,l)=>{const{cells:c,vertices:h}=pack,[f,s]=c.p[u],d=c.v[u].filter(M=>h.c[M].some(x=>x===l)),[g,p]=h.p[d[0]],[m,y]=h.p[d[1]],k=(g+m)/2,v=(p+y)/2,b=L(f+.95*(k-f),2),w=L(s+.95*(v-s),2);return[b,w]};Object.entries(i).forEach(([u,l])=>{l.length<2||l.forEach(c=>{c.port=Number(u);const h=n.haven[c.cell],[f,s]=o(c.cell,h);c.x=f,c.y=s})});for(const u of a){if(!u.i||u.lock||u.port||!n.r[u.cell])continue;const l=u.cell,c=Math.min(n.fl[l]/150,1);u.x=l%2?L(u.x+c,2):L(u.x-c,2),u.y=n.r[l]%2?L(u.y+c,2):L(u.y-c,2)}}generate(){TIME&&console.time("generateBurgs");const{cells:n}=pack;let t=[0];n.burg=new Uint16Array(n.i.length);const a=n.i.filter(c=>n.s[c]>0&&n.culture[c]);if(!a.length)return ERROR&&console.error("There is no populated cells with culture assigned. Cannot generate states"),t;let r=gt();const i=()=>{const c=g=>g*(.5+Math.random()*.5),h=new Int16Array(n.s.map(c)),f=a.sort((g,p)=>h[p]-h[g]),s=u();let d=(graphWidth+graphHeight)/2/s;for(let g=0;t.length<=s;g++){const p=f[g],[m,y]=n.p[p];r.find(m,y,d)===void 0&&(t.push({cell:p,x:m,y}),r.add([m,y])),g===f.length-1&&(WARN&&console.warn("Cannot place capitals with current spacing. Trying again with reduced spacing"),r=gt(),g=-1,t=[0],d/=1.2)}t.forEach((g,p)=>{p&&(g.i=p,g.state=p,g.culture=n.culture[g.cell],g.name=Names.getCultureShort(g.culture),g.feature=n.f[g.cell],g.capital=1,n.burg[g.cell]=p)})},o=()=>{const c=g=>g*Ze(1,3,0,20,3),h=new Int16Array(n.s.map(c)),f=a.sort((g,p)=>h[p]-h[g]),s=l();let d=(graphWidth+graphHeight)/150/(s**.7/66);for(let g=0;g<s&&d>1;){for(let p=0;g<s&&p<f.length;p++){if(n.burg[f[p]])continue;const m=f[p],[y,k]=n.p[m],v=d*Ze(1,.3,.2,2,2);if(r.find(y,k,v)!==void 0)continue;const b=t.length,w=n.culture[m],M=Names.getCulture(w),x=n.f[m];t.push({cell:m,x:y,y:k,i:b,state:0,culture:w,name:M,feature:x,capital:0}),g++,n.burg[m]=b}d*=.5}};i(),o(),pack.burgs=t,this.shift(),TIME&&console.timeEnd("generateBurgs");function u(){let c=Ae("statesNumber").valueAsNumber;return a.length<c*10&&(c=Math.floor(a.length/10),WARN&&console.warn(`Not enough populated cells. Generating only ${c} capitals/states`)),c}function l(){const c=Ae("manorsInput");return c.value==="1000"?L(a.length/5/(grid.points.length/1e4)**.8):Math.min(c.valueAsNumber,a.length)}}getType(n,t){const{cells:a,features:r}=pack;if(t)return"Naval";const i=a.haven[n];if(i!==void 0&&r[a.f[i]].type==="lake")return"Lake";if(a.h[n]>60)return"Highland";if(a.r[n]&&a.fl[n]>=100)return"River";const o=a.biome[n],u=a.pop[n];if(!a.burg[n]||u<=5){if(u<5&&[1,2,3,4].includes(o))return"Nomadic";if(o>4&&o<10)return"Hunting"}return"Generic"}definePopulation(n){const t=n.cell;let a=pack.cells.s[t]/5;n.capital&&(a*=1.5);const r=Routes.getConnectivityRate(t);r&&(a*=r),a*=Ze(1,1,.25,4,5),a+=(n.i%100-t%100)/1e3,n.population=L(Math.max(a,.01),3)}defineEmblem(n){n.type=this.getType(n.cell,n.port);const t=pack.states[n.state],a=t.coa;let r=.25;n.capital?r+=.1:n.port&&(r-=.1),n.culture!==t.culture&&(r-=.25);const i=n.capital&&j(.2)?"Capital":n.type==="Generic"?"City":n.type;n.coa=COA.generate(a,r,null,i),n.coa.shield=COA.getShield(n.culture,n.state)}defineFeatures(n){const t=n.population;n.citadel=Number(n.capital||t>50&&j(.75)||t>15&&j(.5)||j(.1)),n.plaza=Number(Routes.isCrossroad(n.cell)||Routes.hasRoad(n.cell)&&j(.7)||t>20||t>10&&j(.8)),n.walls=Number(n.capital||t>30||t>20&&j(.75)||t>10&&j(.5)||j(.1)),n.shanty=Number(t>60||t>40&&j(.75)||t>20&&n.walls&&j(.4));const a=pack.cells.religion[n.cell],r=pack.states[n.state].form==="Theocracy";n.temple=Number(a&&r&&j(.5)||t>50||t>35&&j(.75)||t>20&&j(.5))}getDefaultGroups(){return[{name:"capital",active:!0,order:9,features:{capital:!0},preview:"watabou-city"},{name:"city",active:!0,order:8,percentile:90,min:5,preview:"watabou-city"},{name:"fort",active:!0,features:{citadel:!0,walls:!1,plaza:!1,port:!1},order:6,max:1},{name:"monastery",active:!0,features:{temple:!0,walls:!1,plaza:!1,port:!1},order:5,max:.8},{name:"caravanserai",active:!0,features:{port:!1,plaza:!0},order:4,max:.8,biomes:[1,2,3]},{name:"trading_post",active:!0,order:3,features:{plaza:!0},max:.8,biomes:[5,6,7,8,9,10,11,12]},{name:"village",active:!0,order:2,min:.1,max:2,preview:"watabou-village"},{name:"hamlet",active:!0,order:1,features:{plaza:!1},max:.1,preview:"watabou-village"},{name:"town",active:!0,order:7,isDefault:!0,preview:"watabou-city"}]}defineGroup(n,t){if(n.lock&&n.group&&options.burgs.groups.find(i=>i.name===n.group))return;const a=options.burgs.groups.find(r=>r.isDefault);if(!a){ERROR&&console.error("No default group defined");return}n.group=a.name;for(const r of options.burgs.groups)if(r.active&&!(r.min&&!(n.population>=r.min))&&!(r.max&&!(n.population<=r.max))&&!(r.features&&!Object.entries(r.features).every(([o,u])=>!!n[o]===u))&&!(r.biomes&&!r.biomes.includes(pack.cells.biome[n.cell]))&&!(r.percentile&&!(t.indexOf(n.population)>=Math.floor(t.length*r.percentile/100)))){n.group=r.name;return}}specify(){TIME&&console.time("specifyBurgs"),pack.burgs.forEach(t=>{!t.i||t.removed||t.lock||(this.definePopulation(t),this.defineEmblem(t),this.defineFeatures(t))});const n=pack.burgs.filter(t=>t.i&&!t.removed).map(t=>t.population).sort((t,a)=>t-a);pack.burgs.forEach(t=>{!t.i||t.removed||this.defineGroup(t,n)}),TIME&&console.timeEnd("specifyBurgs")}createWatabouCityLinks(n){const t=pack.cells,{i:a,name:r,population:i,cell:o}=n,u=n.MFCG||seed+String(n.i).padStart(4,"0"),l=2.13*(i*populationRate/urbanDensity)**.385,c=Pe(Math.ceil(l),6,100),h=L(i*populationRate*urbanization),f=t.r[o]?1:0,s=+((n.port||0)>0),d=(()=>{if(!s||!t.haven[o])return null;const[_,A]=t.p[o],[R,N]=t.p[t.haven[o]],z=Math.atan2(N-A,R-_)*180/Math.PI;return z<=0?L(dr(Math.abs(z),0,180),2):L(2-dr(z,0,180),2)})(),p=+(f?[1,2,3,4,5,6,7,8]:[5,6,7,8]).includes(t.biome[o]),m=+n.citadel,y=+(m&&ut(2)(a)),k=Routes.isCrossroad(o),v=+n.walls,b=+n.plaza,w=+n.temple,M=+n.shanty,x="natural",S=new URL("https://watabou.github.io/city-generator/");S.search=new URLSearchParams({name:r||"",population:h.toString(),size:c.toString(),seed:u,river:f.toString(),coast:s.toString(),farms:p.toString(),citadel:m.toString(),urban_castle:y.toString(),hub:k.toString(),plaza:b.toString(),temple:w.toString(),walls:v.toString(),shantytown:M.toString(),gates:"-1",style:x}).toString(),d&&S.searchParams.append("sea",d.toString());const T=S.toString();return{link:T,preview:`${T}&preview=1`}}createWatabouVillageLinks(n){const{cells:t,features:a}=pack,{i:r,population:i,cell:o}=n,u=seed+String(r).padStart(4,"0"),l=L(i*populationRate*urbanization),c=[];t.r[o]&&t.haven[o]?c.push("estuary"):t.haven[o]&&a[t.f[o]].cells===1?c.push("island,district"):n.port?c.push("coast"):t.conf[o]?c.push("confluence"):t.r[o]?c.push("river"):l<200&&ut(4)(o)&&c.push("pond");const h=Routes.getConnectivityRate(o);c.push(h>1?"highway":h===1?"dead end":"isolated");const f=t.biome[o];(t.r[o]?[1,2,3,4,5,6,7,8]:[5,6,7,8]).includes(f)?ut(6)(o)&&c.push("farmland"):c.push("uncultivated");const d=grid.cells.temp[t.g[o]];(d<=0||d>28||d>25&&ut(3)(o))&&c.push("no orchards"),n.plaza||c.push("no square"),n.walls&&c.push("palisade"),l<100?c.push("sparse"):l>300&&c.push("dense");const g=l>1500?1600:l>1e3?1400:l>500?1e3:l>200?800:l>100?600:400,p=L(g/2.05),m=[1,2].includes(f)?"sand":d<=5||[9,10,11].includes(f)?"snow":"default",y=new URL("https://watabou.github.io/village-generator/");y.search=new URLSearchParams({pop:l.toString(),name:n.name||"",seed:u,width:g.toString(),height:p.toString(),style:m,tags:c.join(",")}).toString();const k=y.toString();return{link:k,preview:`${k}&preview=1`}}createWatabouDwellingLinks(n){const t=seed+String(n.i).padStart(4,"0"),a=L(n.population*populationRate*urbanization),r=a>200?["large","tall"]:a>100?["large"]:a>50?["tall"]:a>20?["low"]:["small"],i=new URL("https://watabou.github.io/dwellings/");i.search=new URLSearchParams({pop:a.toString(),name:"",seed:t,tags:r.join(",")}).toString();const o=i.toString();return{link:o,preview:`${o}&preview=1`}}getPreview(n){const t={"watabou-city":r=>this.createWatabouCityLinks(r),"watabou-village":r=>this.createWatabouVillageLinks(r),"watabou-dwelling":r=>this.createWatabouDwellingLinks(r)};if(n.link)return{link:n.link,preview:n.link};const a=options.burgs.groups.find(r=>r.name===n.group);return!a?.preview||!t[a.preview]?{link:null,preview:null}:t[a.preview](n)}add([n,t]){const{cells:a}=pack,r=pack.burgs.length,i=window.findCell(n,t,void 0,pack),o=a.culture[i],u=Names.getCulture(o),l=a.state[i],c=a.f[i],h={cell:i,x:n,y:t,i:r,state:l,culture:o,name:u,feature:c,capital:0,port:0};this.definePopulation(h),this.defineEmblem(h),this.defineFeatures(h);const f=pack.burgs.filter(d=>d.i&&!d.removed).map(d=>d.population).sort((d,g)=>d-g);this.defineGroup(h,f),pack.burgs.push(h),a.burg[i]=r;const s=Routes.connect(i);return s&&layerIsOn("toggleRoutes")&&drawRoute(s),drawBurgIcon(h),drawBurgLabel(h),r}changeGroup(n,t){if(t)n.group=t;else{const r=pack.burgs.filter(i=>i.i&&!i.removed).map(i=>i.population).sort((i,o)=>i-o);this.defineGroup(n,r)}drawBurgIcon(n),drawBurgLabel(n)}remove(n){const t=pack.burgs[n];if(!t)return tip(`Burg ${n} not found`,!1,"error");pack.cells.burg[t.cell]=0,t.removed=!0;const a=notes.findIndex(r=>r.id===`burg${n}`);a!==-1&&notes.splice(a,1),t.coa&&(Ae(`burgCOA${n}`)?.remove(),emblems.select(`#burgEmblems > use[data-i='${n}']`).remove(),delete t.coa),removeBurgIcon(t.i),removeBurgLabel(t.i)}}window.Burgs=new a6;class r6{MIN_LAND_HEIGHT=20;getDefault(){const n=["Marine","Hot desert","Cold desert","Savanna","Grassland","Tropical seasonal forest","Temperate deciduous forest","Tropical rainforest","Temperate rainforest","Taiga","Tundra","Glacier","Wetland"],t=["#466eab","#fbe79f","#b5b887","#d2d082","#c8d68f","#b6d95d","#29bc56","#7dcb35","#409c43","#4b6b32","#96784b","#d5e7eb","#0b9131"],a=[0,4,10,22,30,50,100,80,90,12,4,0,12],r=[0,3,2,120,120,120,120,150,150,100,5,0,250],i=[{},{dune:3,cactus:6,deadTree:1},{dune:9,deadTree:1},{acacia:1,grass:9},{grass:1},{acacia:8,palm:1},{deciduous:1},{acacia:5,palm:3,deciduous:1,swamp:1},{deciduous:6,swamp:1},{conifer:1},{grass:1},{},{swamp:1}],o=[10,200,150,60,50,70,70,80,90,200,1e3,5e3,150],u=[new Uint8Array([1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,10]),new Uint8Array([3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,9,9,9,9,10,10,10]),new Uint8Array([5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,9,9,9,9,9,10,10,10]),new Uint8Array([5,6,6,6,6,6,6,8,8,8,8,8,8,8,8,8,8,9,9,9,9,9,9,10,10,10]),new Uint8Array([7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,10,10])],l=[];for(let c=0;c<i.length;c++){const h=[];for(const f in i[c])for(let s=0;s<i[c][f];s++)h.push(f);l[c]=h}return{i:Oe(0,n.length),name:n,color:t,biomesMatrix:u,habitability:a,iconsDensity:r,icons:l,cost:o}}define(){TIME&&console.time("defineBiomes");const{fl:n,r:t,h:a,c:r,g:i}=pack.cells,{temp:o,prec:u}=grid.cells;pack.cells.biome=new Uint8Array(pack.cells.i.length);const l=c=>{let h=u[i[c]];t[c]&&(h+=Math.max(n[c]/10,2));const f=r[c].filter(s=>a[s]>=this.MIN_LAND_HEIGHT).map(s=>u[i[s]]).concat([h]);return L(4+ft(f))};for(let c=0;c<a.length;c++){const h=a[c],f=h<this.MIN_LAND_HEIGHT?0:l(c),s=o[i[c]];pack.cells.biome[c]=this.getId(f,s,h,!!t[c])}TIME&&console.timeEnd("defineBiomes")}getId(n,t,a,r){if(a<20)return 0;if(t<-5)return 11;if(t>=25&&!r&&n<8)return 1;if(this.isWetland(n,t,a))return 12;const i=Math.min(n/5|0,4),o=Math.min(Math.max(20-t,0),25);return biomesData.biomesMatrix[i][o]}isWetland(n,t,a){return t<=-2?!1:n>40&&a<25||n>24&&a>24&&a<60}}window.Biomes=new r6;class i6{cells;getRandomShield(){const n=le(COA.shields.types);return le(COA.shields[n])}getDefault(n=0){const t=pack.cells,a=t.s,r=vn(a),i=t.t,o=t.h,u=grid.cells.temp,l=s=>Math.ceil(a[s]/r*3),c=(s,d)=>{const g=Math.abs(u[t.g[s]]-d);return g?g+1:1},h=(s,d,g=4)=>d.includes(t.biome[s])?1:g,f=(s,d=4)=>t.haven[s]&&pack.features[t.f[t.haven[s]]].type!=="lake"?1:d;if(culturesSet.value==="european")return[{name:"Shwazen",base:0,odd:1,sort:s=>l(s)/c(s,10)/h(s,[6,8]),shield:"swiss"},{name:"Angshire",base:1,odd:1,sort:s=>l(s)/c(s,10)/f(s),shield:"wedged"},{name:"Luari",base:2,odd:1,sort:s=>l(s)/c(s,12)/h(s,[6,8]),shield:"french"},{name:"Tallian",base:3,odd:1,sort:s=>l(s)/c(s,15),shield:"horsehead"},{name:"Astellian",base:4,odd:1,sort:s=>l(s)/c(s,16),shield:"spanish"},{name:"Slovan",base:5,odd:1,sort:s=>l(s)/c(s,6)*i[s],shield:"polish"},{name:"Norse",base:6,odd:1,sort:s=>l(s)/c(s,5),shield:"heater"},{name:"Elladan",base:7,odd:1,sort:s=>l(s)/c(s,18)*o[s],shield:"boeotian"},{name:"Romian",base:8,odd:.2,sort:s=>l(s)/c(s,15)/i[s],shield:"roman"},{name:"Soumi",base:9,odd:1,sort:s=>l(s)/c(s,5)/h(s,[9])*i[s],shield:"pavise"},{name:"Portuzian",base:13,odd:1,sort:s=>l(s)/c(s,17)/f(s),shield:"renaissance"},{name:"Vengrian",base:15,odd:1,sort:s=>l(s)/c(s,11)/h(s,[4])*i[s],shield:"horsehead2"},{name:"Turchian",base:16,odd:.05,sort:s=>l(s)/c(s,14),shield:"round"},{name:"Euskati",base:20,odd:.05,sort:s=>l(s)/c(s,15)*o[s],shield:"oldFrench"},{name:"Keltan",base:22,odd:.05,sort:s=>l(s)/c(s,11)/h(s,[6,8])*i[s],shield:"oval"}];if(culturesSet.value==="oriental")return[{name:"Koryo",base:10,odd:1,sort:s=>l(s)/c(s,12)/i[s],shield:"round"},{name:"Hantzu",base:11,odd:1,sort:s=>l(s)/c(s,13),shield:"banner"},{name:"Yamoto",base:12,odd:1,sort:s=>l(s)/c(s,15)/i[s],shield:"round"},{name:"Turchian",base:16,odd:1,sort:s=>l(s)/c(s,12),shield:"round"},{name:"Berberan",base:17,odd:.2,sort:s=>l(s)/c(s,19)/h(s,[1,2,3],7)*i[s],shield:"oval"},{name:"Eurabic",base:18,odd:1,sort:s=>l(s)/c(s,26)/h(s,[1,2],7)*i[s],shield:"oval"},{name:"Efratic",base:23,odd:.1,sort:s=>l(s)/c(s,22)*i[s],shield:"round"},{name:"Tehrani",base:24,odd:1,sort:s=>l(s)/c(s,18)*o[s],shield:"round"},{name:"Maui",base:25,odd:.2,sort:s=>l(s)/c(s,24)/f(s)/i[s],shield:"vesicaPiscis"},{name:"Carnatic",base:26,odd:.5,sort:s=>l(s)/c(s,26),shield:"round"},{name:"Vietic",base:29,odd:.8,sort:s=>l(s)/c(s,25)/h(s,[7],7)/i[s],shield:"banner"},{name:"Guantzu",base:30,odd:.5,sort:s=>l(s)/c(s,17),shield:"banner"},{name:"Ulus",base:31,odd:1,sort:s=>l(s)/c(s,5)/h(s,[2,4,10],7)*i[s],shield:"banner"}];if(culturesSet.value==="english"){const s=()=>Names.getBase(1,5,9,"");return[{name:s(),base:1,odd:1,shield:"heater"},{name:s(),base:1,odd:1,shield:"wedged"},{name:s(),base:1,odd:1,shield:"swiss"},{name:s(),base:1,odd:1,shield:"oldFrench"},{name:s(),base:1,odd:1,shield:"swiss"},{name:s(),base:1,odd:1,shield:"spanish"},{name:s(),base:1,odd:1,shield:"hessen"},{name:s(),base:1,odd:1,shield:"fantasy5"},{name:s(),base:1,odd:1,shield:"fantasy4"},{name:s(),base:1,odd:1,shield:"fantasy1"}]}return culturesSet.value==="antique"?[{name:"Roman",base:8,odd:1,sort:s=>l(s)/c(s,14)/i[s],shield:"roman"},{name:"Roman",base:8,odd:1,sort:s=>l(s)/c(s,15)/f(s),shield:"roman"},{name:"Roman",base:8,odd:1,sort:s=>l(s)/c(s,16)/f(s),shield:"roman"},{name:"Roman",base:8,odd:1,sort:s=>l(s)/c(s,17)/i[s],shield:"roman"},{name:"Hellenic",base:7,odd:1,sort:s=>l(s)/c(s,18)/f(s)*o[s],shield:"boeotian"},{name:"Hellenic",base:7,odd:1,sort:s=>l(s)/c(s,19)/f(s)*o[s],shield:"boeotian"},{name:"Macedonian",base:7,odd:.5,sort:s=>l(s)/c(s,12)*o[s],shield:"round"},{name:"Celtic",base:22,odd:1,sort:s=>l(s)/c(s,11)**.5/h(s,[6,8]),shield:"round"},{name:"Germanic",base:0,odd:1,sort:s=>l(s)/c(s,10)**.5/h(s,[6,8]),shield:"round"},{name:"Persian",base:24,odd:.8,sort:s=>l(s)/c(s,18)*o[s],shield:"oval"},{name:"Scythian",base:24,odd:.5,sort:s=>l(s)/c(s,11)**.5/h(s,[4]),shield:"round"},{name:"Cantabrian",base:20,odd:.5,sort:s=>l(s)/c(s,16)*o[s],shield:"oval"},{name:"Estian",base:9,odd:.2,sort:s=>l(s)/c(s,5)*i[s],shield:"pavise"},{name:"Carthaginian",base:42,odd:.3,sort:s=>l(s)/c(s,20)/f(s),shield:"oval"},{name:"Hebrew",base:42,odd:.2,sort:s=>l(s)/c(s,19)*f(s),shield:"oval"},{name:"Mesopotamian",base:23,odd:.2,sort:s=>l(s)/c(s,22)/h(s,[1,2,3]),shield:"oval"}]:culturesSet.value==="highFantasy"?[{name:"Quenian (Elfish)",base:33,odd:1,sort:s=>l(s)/h(s,[6,7,8,9],10)*i[s],shield:"gondor"},{name:"Eldar (Elfish)",base:33,odd:1,sort:s=>l(s)/h(s,[6,7,8,9],10)*i[s],shield:"noldor"},{name:"Trow (Dark Elfish)",base:34,odd:.9,sort:s=>l(s)/h(s,[7,8,9,12],10)*i[s],shield:"hessen"},{name:"Lothian (Dark Elfish)",base:34,odd:.3,sort:s=>l(s)/h(s,[7,8,9,12],10)*i[s],shield:"wedged"},{name:"Dunirr (Dwarven)",base:35,odd:1,sort:s=>l(s)+o[s],shield:"ironHills"},{name:"Khazadur (Dwarven)",base:35,odd:1,sort:s=>l(s)+o[s],shield:"erebor"},{name:"Kobold (Goblin)",base:36,odd:1,sort:s=>i[s]-a[s],shield:"moriaOrc"},{name:"Uruk (Orkish)",base:37,odd:1,sort:s=>o[s]*i[s],shield:"urukHai"},{name:"Ugluk (Orkish)",base:37,odd:.5,sort:s=>o[s]*i[s]/h(s,[1,2,10,11]),shield:"moriaOrc"},{name:"Yotunn (Giants)",base:38,odd:.7,sort:s=>c(s,-10),shield:"pavise"},{name:"Rake (Drakonic)",base:39,odd:.7,sort:s=>-a[s],shield:"fantasy2"},{name:"Arago (Arachnid)",base:40,odd:.7,sort:s=>i[s]-a[s],shield:"horsehead2"},{name:"Aj'Snaga (Serpents)",base:41,odd:.7,sort:s=>l(s)/h(s,[12],10),shield:"fantasy1"},{name:"Anor (Human)",base:32,odd:1,sort:s=>l(s)/c(s,10),shield:"fantasy5"},{name:"Dail (Human)",base:32,odd:1,sort:s=>l(s)/c(s,13),shield:"roman"},{name:"Rohand (Human)",base:16,odd:1,sort:s=>l(s)/c(s,16),shield:"round"},{name:"Dulandir (Human)",base:31,odd:1,sort:s=>l(s)/c(s,5)/h(s,[2,4,10],7)*i[s],shield:"easterling"}]:culturesSet.value==="darkFantasy"?[{name:"Angshire",base:1,odd:1,sort:s=>l(s)/c(s,10)/f(s),shield:"heater"},{name:"Enlandic",base:1,odd:1,sort:s=>l(s)/c(s,12),shield:"heater"},{name:"Westen",base:1,odd:1,sort:s=>l(s)/c(s,10),shield:"heater"},{name:"Nortumbic",base:1,odd:1,sort:s=>l(s)/c(s,7),shield:"heater"},{name:"Mercian",base:1,odd:1,sort:s=>l(s)/c(s,9),shield:"heater"},{name:"Kentian",base:1,odd:1,sort:s=>l(s)/c(s,12),shield:"heater"},{name:"Norse",base:6,odd:.7,sort:s=>l(s)/c(s,5)/f(s),shield:"oldFrench"},{name:"Schwarzen",base:0,odd:.3,sort:s=>l(s)/c(s,10)/h(s,[6,8]),shield:"gonfalon"},{name:"Luarian",base:2,odd:.3,sort:s=>l(s)/c(s,12)/h(s,[6,8]),shield:"oldFrench"},{name:"Hetallian",base:3,odd:.3,sort:s=>l(s)/c(s,15),shield:"oval"},{name:"Astellian",base:4,odd:.3,sort:s=>l(s)/c(s,16),shield:"spanish"},{name:"Kiswaili",base:28,odd:.05,sort:s=>l(s)/c(s,29)/h(s,[1,3,5,7]),shield:"vesicaPiscis"},{name:"Yoruba",base:21,odd:.05,sort:s=>l(s)/c(s,15)/h(s,[5,7]),shield:"vesicaPiscis"},{name:"Koryo",base:10,odd:.05,sort:s=>l(s)/c(s,12)/i[s],shield:"round"},{name:"Hantzu",base:11,odd:.05,sort:s=>l(s)/c(s,13),shield:"banner"},{name:"Yamoto",base:12,odd:.05,sort:s=>l(s)/c(s,15)/i[s],shield:"round"},{name:"Guantzu",base:30,odd:.05,sort:s=>l(s)/c(s,17),shield:"banner"},{name:"Ulus",base:31,odd:.05,sort:s=>l(s)/c(s,5)/h(s,[2,4,10],7)*i[s],shield:"banner"},{name:"Turan",base:16,odd:.05,sort:s=>l(s)/c(s,12),shield:"round"},{name:"Berberan",base:17,odd:.05,sort:s=>l(s)/c(s,19)/h(s,[1,2,3],7)*i[s],shield:"round"},{name:"Eurabic",base:18,odd:.05,sort:s=>l(s)/c(s,26)/h(s,[1,2],7)*i[s],shield:"round"},{name:"Slovan",base:5,odd:.05,sort:s=>l(s)/c(s,6)*i[s],shield:"round"},{name:"Keltan",base:22,odd:.1,sort:s=>l(s)/c(s,11)**.5/h(s,[6,8]),shield:"vesicaPiscis"},{name:"Elladan",base:7,odd:.2,sort:s=>l(s)/c(s,18)/f(s)*o[s],shield:"boeotian"},{name:"Romian",base:8,odd:.2,sort:s=>l(s)/c(s,14)/i[s],shield:"roman"},{name:"Eldar",base:33,odd:.5,sort:s=>l(s)/h(s,[6,7,8,9],10)*i[s],shield:"fantasy5"},{name:"Trow",base:34,odd:.8,sort:s=>l(s)/h(s,[7,8,9,12],10)*i[s],shield:"hessen"},{name:"Durinn",base:35,odd:.8,sort:s=>l(s)+o[s],shield:"erebor"},{name:"Kobblin",base:36,odd:.8,sort:s=>i[s]-a[s],shield:"moriaOrc"},{name:"Uruk",base:37,odd:.8,sort:s=>o[s]*i[s]/h(s,[1,2,10,11]),shield:"urukHai"},{name:"Yotunn",base:38,odd:.8,sort:s=>c(s,-10),shield:"pavise"},{name:"Drake",base:39,odd:.9,sort:s=>-a[s],shield:"fantasy2"},{name:"Rakhnid",base:40,odd:.9,sort:s=>i[s]-a[s],shield:"horsehead2"},{name:"Aj'Snaga",base:41,odd:.9,sort:s=>l(s)/h(s,[12],10),shield:"fantasy1"}]:culturesSet.value==="random"?Oe(n).map(()=>{const s=oe(nameBases.length-1);return{name:Names.getBaseShort(s),base:s,odd:1,shield:this.getRandomShield()}}):[{name:"Shwazen",base:0,odd:.7,sort:s=>l(s)/c(s,10)/h(s,[6,8]),shield:"hessen"},{name:"Angshire",base:1,odd:1,sort:s=>l(s)/c(s,10)/f(s),shield:"heater"},{name:"Luari",base:2,odd:.6,sort:s=>l(s)/c(s,12)/h(s,[6,8]),shield:"oldFrench"},{name:"Tallian",base:3,odd:.6,sort:s=>l(s)/c(s,15),shield:"horsehead2"},{name:"Astellian",base:4,odd:.6,sort:s=>l(s)/c(s,16),shield:"spanish"},{name:"Slovan",base:5,odd:.7,sort:s=>l(s)/c(s,6)*i[s],shield:"round"},{name:"Norse",base:6,odd:.7,sort:s=>l(s)/c(s,5),shield:"heater"},{name:"Elladan",base:7,odd:.7,sort:s=>l(s)/c(s,18)*o[s],shield:"boeotian"},{name:"Romian",base:8,odd:.7,sort:s=>l(s)/c(s,15),shield:"roman"},{name:"Soumi",base:9,odd:.3,sort:s=>l(s)/c(s,5)/h(s,[9])*i[s],shield:"pavise"},{name:"Koryo",base:10,odd:.1,sort:s=>l(s)/c(s,12)/i[s],shield:"round"},{name:"Hantzu",base:11,odd:.1,sort:s=>l(s)/c(s,13),shield:"banner"},{name:"Yamoto",base:12,odd:.1,sort:s=>l(s)/c(s,15)/i[s],shield:"round"},{name:"Portuzian",base:13,odd:.4,sort:s=>l(s)/c(s,17)/f(s),shield:"spanish"},{name:"Nawatli",base:14,odd:.1,sort:s=>o[s]/c(s,18)/h(s,[7]),shield:"square"},{name:"Vengrian",base:15,odd:.2,sort:s=>l(s)/c(s,11)/h(s,[4])*i[s],shield:"wedged"},{name:"Turchian",base:16,odd:.2,sort:s=>l(s)/c(s,13),shield:"round"},{name:"Berberan",base:17,odd:.1,sort:s=>l(s)/c(s,19)/h(s,[1,2,3],7)*i[s],shield:"round"},{name:"Eurabic",base:18,odd:.2,sort:s=>l(s)/c(s,26)/h(s,[1,2],7)*i[s],shield:"round"},{name:"Inuk",base:19,odd:.05,sort:s=>c(s,-1)/h(s,[10,11])/f(s),shield:"square"},{name:"Euskati",base:20,odd:.05,sort:s=>l(s)/c(s,15)*o[s],shield:"spanish"},{name:"Yoruba",base:21,odd:.05,sort:s=>l(s)/c(s,15)/h(s,[5,7]),shield:"vesicaPiscis"},{name:"Keltan",base:22,odd:.05,sort:s=>l(s)/c(s,11)/h(s,[6,8])*i[s],shield:"vesicaPiscis"},{name:"Efratic",base:23,odd:.05,sort:s=>l(s)/c(s,22)*i[s],shield:"diamond"},{name:"Tehrani",base:24,odd:.1,sort:s=>l(s)/c(s,18)*o[s],shield:"round"},{name:"Maui",base:25,odd:.05,sort:s=>l(s)/c(s,24)/f(s)/i[s],shield:"round"},{name:"Carnatic",base:26,odd:.05,sort:s=>l(s)/c(s,26),shield:"round"},{name:"Inqan",base:27,odd:.05,sort:s=>o[s]/c(s,13),shield:"square"},{name:"Kiswaili",base:28,odd:.1,sort:s=>l(s)/c(s,29)/h(s,[1,3,5,7]),shield:"vesicaPiscis"},{name:"Vietic",base:29,odd:.1,sort:s=>l(s)/c(s,25)/h(s,[7],7)/i[s],shield:"banner"},{name:"Guantzu",base:30,odd:.1,sort:s=>l(s)/c(s,17),shield:"banner"},{name:"Ulus",base:31,odd:.1,sort:s=>l(s)/c(s,5)/h(s,[2,4,10],7)*i[s],shield:"banner"},{name:"Hebrew",base:42,odd:.2,sort:s=>l(s)/c(s,18)*f(s),shield:"oval"}]}generate(){TIME&&console.time("generateCultures"),this.cells=pack.cells;const n=new Uint16Array(this.cells.i.length),t=+Ae("culturesInput").value,a=+(Ae("culturesSet").selectedOptions[0].dataset.max??"0");let r=Math.min(t,a);const i=this.cells.i.filter(p=>this.cells.s[p]);if(i.length<r*25)if(r=Math.floor(i.length/50),r)WARN&&console.warn(`Not enough populated cells (${i.length}). Will generate only ${r} cultures`),alertMessage.innerHTML=` There are only ${i.length} populated cells and it's insufficient livable area.<br />
          Only ${r} out of ${culturesInput.value} requested cultures will be generated.<br />
          Please consider changing climate settings in the World Configurator`,$("#alert").dialog({resizable:!1,title:"Extreme climate warning",buttons:{Ok:function(){$(this).dialog("close")}}});else{WARN&&console.warn("There are no populated cells. Cannot generate cultures"),pack.cultures=[{name:"Wildlands",i:0,base:1,shield:"round"}],this.cells.culture=n,alertMessage.innerHTML=`The climate is harsh and people cannot live in this world.<br />
          No cultures, states and burgs will be created.<br />
          Please consider changing climate settings in the World Configurator`,$("#alert").dialog({resizable:!1,title:"Extreme climate warning",buttons:{Ok:function(){$(this).dialog("close")}}});return}const u=(p=>{const m=this.getDefault(p),y=[];if(pack.cultures?.forEach(k=>{k.lock&&!k.removed&&y.push(k)}),!y.length){if(p===m.length)return m;if(m.every(k=>k.odd===1))return m.splice(0,p)}for(let k,v,b=0;y.length<p&&m.length>0;){do v=oe(m.length-1),k=m[v],b++;while(b<200&&!j(k.odd));y.push(k),m.splice(v,1)}return y})(r);pack.cultures=u;const l=gt(),c=zp(r),h=Ae("emblemShape").value,f=[],s=p=>{let m=(graphWidth+graphHeight)/2/r;const y=100,k=[...i].sort((w,M)=>p(M)-p(w)),v=Math.floor(k.length/2);let b=0;for(let w=0;w<y&&(b=k[Ap(0,v,5)],m*=.9,!(!n[b]&&!l.find(this.cells.p[b][0],this.cells.p[b][1],m)));w++);return b},d=p=>{if(this.cells.h[p]<70&&[1,2,4].includes(this.cells.biome[p]))return"Nomadic";if(this.cells.h[p]>50)return"Highland";const m=pack.features[this.cells.f[this.cells.haven[p]]];return m.type==="lake"&&m.cells>5?"Lake":this.cells.harbor[p]&&m.type!=="lake"&&j(.1)||this.cells.harbor[p]===1&&j(.6)||pack.features[this.cells.f[p]].group==="isle"&&j(.4)?"Naval":this.cells.r[p]&&this.cells.fl[p]>100?"River":this.cells.t[p]>2&&[3,7,8,9,10,12].includes(this.cells.biome[p])?"Hunting":"Generic"},g=p=>{let m=1;return p==="Lake"?m=.8:p==="Naval"?m=1.5:p==="River"?m=.9:p==="Nomadic"?m=1.5:p==="Hunting"?m=.7:p==="Highland"&&(m=1.2),L((Math.random()*Ae("sizeVariety").valueAsNumber/2+1)*m,1)};u.forEach((p,m)=>{const y=m+1;if(p.lock){f.push(p.code),l.add(p.center);for(const b of this.cells.i)this.cells.culture[b]===p.i&&(n[b]=y);p.i=y;return}const k=p.sort?p.sort:b=>this.cells.s[b],v=s(k);l.add(this.cells.p[v]),p.center=v,p.i=y,delete p.odd,delete p.sort,p.color=c[m],p.type=d(v),p.expansionism=g(p.type),p.origins=[0],p.code=Rr(p.name,f),f.push(p.code),n[v]=y,h==="random"&&(p.shield=this.getRandomShield())}),this.cells.culture=n,u.unshift({name:"Wildlands",i:0,base:1,origins:[null],shield:"round"}),nameBases.length||(ERROR&&console.error("Name base is empty, default nameBases will be applied"),nameBases=Names.getNameBases()),u.forEach(p=>{p.base=p.base%nameBases.length}),TIME&&console.timeEnd("generateCultures")}add(n){const t=this.getDefault();let a,r,i;pack.cultures.length<t.length?(a=pack.cultures.length,r=t[a].base,i=t[a].name):(a=oe(pack.cultures.length-1),i=Names.getCulture(a,5,8,""),r=pack.cultures[a].base);const o=Rr(i,pack.cultures.map(h=>h.code)),u=pack.cultures.length,l=Ra(),c=document.getElementById("emblemShape").value;pack.cultures.push({name:i,color:l,base:r,center:n,i:u,expansionism:1,type:"Generic",cells:0,area:0,rural:0,urban:0,origins:[pack.cells.culture[n]],code:o,shield:c==="random"?this.getRandomShield():""})}expand(){TIME&&console.time("expandCultures");const{cells:n,cultures:t}=pack,a=new FlatQueue,r=[],i=Ae("neutralRate")?.valueAsNumber||1,o=n.i.length*.6*i,u=t.some(s=>!s.removed&&s.lock);if(u)for(const s of n.i)t[n.culture[s]].lock||(n.culture[s]=0);else n.culture=new Uint16Array(n.i.length);for(const s of t)!s.i||s.removed||s.lock||a.push({cellId:s.center,cultureId:s.i,priority:0},0);const l=(s,d,g)=>n.biome[t[s].center]===d?10:g==="Hunting"?biomesData.cost[d]*5:g==="Nomadic"&&d>4&&d<10?biomesData.cost[d]*10:biomesData.cost[d]*2,c=(s,d,g)=>{const p=pack.features[n.f[s]],m=n.area[s];return g==="Lake"&&p.type==="lake"?10:g==="Naval"&&d<20?m*2:g==="Nomadic"&&d<20?m*50:d<20?m*6:g==="Highland"&&d<44?3e3:g==="Highland"&&d<62?200:g==="Highland"?0:d>=67?200:d>=44?30:0},h=(s,d,g)=>g==="River"?s?0:100:s?Pe(n.fl[d]/10,20,100):0,f=(s,d)=>s===1?d==="Naval"||d==="Lake"?0:d==="Nomadic"?60:20:s===2?d==="Naval"||d==="Nomadic"?30:0:s!==-1&&(d==="Naval"||d==="Lake")?100:0;for(;a.length;){const{cellId:s,priority:d,cultureId:g}=a.pop(),{type:p,expansionism:m}=t[g];n.c[s].forEach(y=>{if(u){const _=n.culture[y];if(_&&t[_].lock)return}const k=n.biome[y],v=l(g,k,p),b=k===n.biome[y]?0:20,w=c(y,n.h[y],p),M=h(n.r[y],y,p),x=f(n.t[y],p),S=(v+b+w+M+x)/m,T=d+S;T>o||(!r[y]||T<r[y])&&(n.pop[y]>0&&(n.culture[y]=g),r[y]=T,a.push({cellId:y,cultureId:g,priority:T},T))})}TIME&&console.timeEnd("expandCultures")}}window.Cultures=new i6;const o6=135,s6=115,u6=-4,Hf={"-1":1,"-2":1.8,"-3":4,"-4":6,default:8},l6={roads:{burg_suffix:3,prefix_suffix:6,the_descriptor_prefix_suffix:2,the_descriptor_burg_suffix:1},trails:{burg_suffix:8,prefix_suffix:1,the_descriptor_burg_suffix:1},searoutes:{burg_suffix:4,prefix_suffix:2,the_descriptor_prefix_suffix:1}},Of=["King","Queen","Military","Old","New","Ancient","Royal","Imperial","Great","Grand","High","Silver","Dragon","Shadow","Star","Mystic","Whisper","Eagle","Golden","Crystal","Enchanted","Frost","Moon","Sun","Thunder","Phoenix","Sapphire","Celestial","Wandering","Echo","Twilight","Crimson","Serpent","Iron","Forest","Flower","Whispering","Eternal","Frozen","Rain","Luminous","Stardust","Arcane","Glimmering","Jade","Ember","Azure","Gilded","Divine","Shadowed","Cursed","Moonlit","Sable","Everlasting","Amber","Nightshade","Wraith","Scarlet","Platinum","Whirlwind","Obsidian","Ethereal","Ghost","Spike","Dusk","Raven","Spectral","Burning","Verdant","Copper","Velvet","Falcon","Enigma","Glowing","Silvered","Molten","Radiant","Astral","Wild","Flame","Amethyst","Aurora","Shadowy","Solar","Lunar","Whisperwind","Fading","Titan","Dawn","Crystalline","Jeweled","Sylvan","Twisted","Ebon","Thorn","Cerulean","Halcyon","Infernal","Storm","Eldritch","Sapphire","Crimson","Tranquil","Paved"],Gf=["Great","Shrouded","Sacred","Fabled","Frosty","Winding","Echoing","Serpentine","Breezy","Misty","Rustic","Silent","Cobbled","Cracked","Shaky","Obscure"],c6={roads:{road:7,route:3,way:2,highway:1},trails:{trail:4,path:1,track:1,pass:1},searoutes:{"sea route":5,lane:2,passage:1,seaway:1}};class h6{buildLinks(n){const t={};for(const{points:a,i:r}of n){const i=a.map(o=>o[2]);for(let o=0;o<i.length-1;o++){const u=i[o],l=i[o+1];u!==l&&(t[u]||(t[u]={}),t[u][l]=r,t[l]||(t[l]={}),t[l][u]=r)}}return t}sortBurgsByFeature(n){const t={},a={},r={},i=(o,u,l)=>{o[u]||(o[u]=[]),o[u].push(l)};for(const o of n)if(o.i&&!o.removed){const{feature:u,capital:l,port:c}=o;i(t,u,o),l&&i(a,u,o),c&&i(r,c,o)}return{burgsByFeature:t,capitalsByFeature:a,portsByFeature:r}}calculateUrquhartEdges(n){const t=(l,c)=>Nt(n[l],n[c]),{halfedges:a,triangles:r}=wa.from(n),i=r.length,o=new Uint8Array(i),u=[];for(let l=0;l<i;l+=3){const c=r[l],h=r[l+1],f=r[l+2],s=t(c,h),d=t(h,f),g=t(f,c);o[g>s&&g>d?Math.max(l+2,a[l+2]):d>s&&d>g?Math.max(l+1,a[l+1]):Math.max(l,a[l])]=1}for(let l=0;l<i;++l)if(l>a[l]&&!o[l]){const c=r[l],h=r[l%3===2?l-2:l+1];u.push([c,h])}return u}createCostEvaluator({isWater:n,connections:t}){function a(i,o){if(pack.cells.h[o]<20)return 1/0;const u=biomesData.habitability[pack.cells.biome[o]];if(!u)return 1/0;const l=Nt(pack.cells.p[i],pack.cells.p[o]),c=1+Math.max(100-u,0)/1e3,h=1+Math.max(pack.cells.h[o]-25,25)/25,f=t.has(`${i}-${o}`)?.5:1,s=pack.cells.burg[o]?1:3;return l*c*h*f*s}function r(i,o){if(pack.cells.h[o]>=20||grid.cells.temp[pack.cells.g[o]]<u6)return 1/0;const u=Nt(pack.cells.p[i],pack.cells.p[o]),l=Hf[pack.cells.t[o]]||Hf.default,c=t.has(`${i}-${o}`)?.5:1;return u*l*c}return n?r:a}getRouteSegments(n,t){const a=[];let r=[];for(let i=0;i<n.length;i++){const o=n[i],u=n[i+1];if(t.has(`${o}-${u}`)||t.has(`${u}-${o}`)){r.length&&(r.push(n[i]),a.push(r),r=[]);continue}r.push(n[i])}return r.length>1&&a.push(r),a}findPathSegments({isWater:n,connections:t,start:a,exit:r}){const i=this.createCostEvaluator({isWater:n,connections:t}),o=Wu(a,l=>l===r,i,pack);return o?this.getRouteSegments(o,t):[]}generateMainRoads(n){TIME&&console.time("generateMainRoads");const{capitalsByFeature:t}=this.sortBurgsByFeature(pack.burgs),a=[];for(const[r,i]of Object.entries(t)){const o=i.map(l=>[l.x,l.y]);this.calculateUrquhartEdges(o).forEach(([l,c])=>{const h=i[l].cell,f=i[c].cell,s=this.findPathSegments({isWater:!1,connections:n,start:h,exit:f});for(const d of s)this.addConnections(d,n),a.push({feature:Number(r),cells:d})})}return TIME&&console.timeEnd("generateMainRoads"),a}addConnections(n,t){for(let a=0;a<n.length;a++){const r=n[a],i=n[a+1];i&&(t.set(`${r}-${i}`,!0),t.set(`${i}-${r}`,!0))}}generateTrails(n){TIME&&console.time("generateTrails");const{burgsByFeature:t}=this.sortBurgsByFeature(pack.burgs),a=[];for(const[r,i]of Object.entries(t)){const o=i.map(l=>[l.x,l.y]);this.calculateUrquhartEdges(o).forEach(([l,c])=>{const h=i[l].cell,f=i[c].cell,s=this.findPathSegments({isWater:!1,connections:n,start:h,exit:f});for(const d of s)this.addConnections(d,n),a.push({feature:Number(r),cells:d})})}return TIME&&console.timeEnd("generateTrails"),a}generateSeaRoutes(n){TIME&&console.time("generateSeaRoutes");const{portsByFeature:t}=this.sortBurgsByFeature(pack.burgs),a=[];for(const[r,i]of Object.entries(t)){const o=i.map(l=>[l.x,l.y]);this.calculateUrquhartEdges(o).forEach(([l,c])=>{const h=i[l].cell,f=i[c].cell,s=this.findPathSegments({isWater:!0,connections:n,start:h,exit:f});for(const d of s)this.addConnections(d,n),a.push({feature:Number(r),cells:d})})}return TIME&&console.timeEnd("generateSeaRoutes"),a}preparePointsArray(){const{cells:n,burgs:t}=pack;return n.p.map(([a,r],i)=>{const o=n.burg[i];return o?[t[o].x,t[o].y]:[a,r]})}getPoints(n,t,a){const r=t.map(i=>[...a[i],i]);if(n!=="searoutes")for(let i=1;i<t.length-1;i++){const o=t[i];if(pack.cells.burg[o])continue;const[u,l]=r[i-1],[c,h]=r[i],[f,s]=r[i+1],d=u-c,g=l-h,p=f-c,m=s-h,y=Math.abs(Math.atan2(d*m-g*p,d*p+g*m)*180/Math.PI);if(y<o6){const k=(u+f)/2,v=(l+s)/2;let b,w;y<s6?(b=L((c+k*2)/3,2),w=L((h+v*2)/3,2)):(b=L((c+k)/2,2),w=L((h+v)/2,2)),Mo(b,w,void 0,pack)===o&&(r[i]=[b,w,o],a[o]=[r[i][0],r[i][1]])}}return r}mergeRoutes(n){let t=0;for(let a=0;a<n.length;a++){const r=n[a];if(!r.merged)for(let i=a+1;i<n.length;i++){const o=n[i];o.merged||o.cells.at(0)===r.cells.at(-1)&&(t++,r.cells=r.cells.concat(o.cells.slice(1)),o.merged=!0)}}return t>1?this.mergeRoutes(n):n}createRoutesData(n,t){const a=this.generateMainRoads(t),r=this.generateTrails(t),i=this.generateSeaRoutes(t),o=this.preparePointsArray();for(const{feature:u,cells:l,merged:c}of this.mergeRoutes(a)){if(c)continue;const h=this.getPoints("roads",l,o);n.push({i:n.length,group:"roads",feature:u,points:h})}for(const{feature:u,cells:l,merged:c}of this.mergeRoutes(r)){if(c)continue;const h=this.getPoints("trails",l,o);n.push({i:n.length,group:"trails",feature:u,points:h})}for(const{feature:u,cells:l,merged:c}of this.mergeRoutes(i)){if(c)continue;const h=this.getPoints("searoutes",l,o);n.push({i:n.length,group:"searoutes",feature:u,points:h})}return n}generate(n=[]){const t=new Map;n.forEach(a=>{this.addConnections(a.points.map(r=>r[2]),t)}),pack.routes=this.createRoutesData(n,t),pack.cells.routes=this.buildLinks(pack.routes)}isConnected(n){const t=pack.cells.routes;return t[n]&&Object.keys(t[n]).length>0}getNextId(){return pack.routes.length?Math.max(...pack.routes.map(n=>n.i))+1:0}connect(n){const t=this.createCostEvaluator({isWater:!1,connections:new Map}),r=Wu(n,f=>fr(f,pack)&&this.isConnected(f),t,pack);if(!r)return;const i=this.preparePointsArray(),o=this.getPoints("trails",r,i),u=pack.cells.f[n],l=this.getNextId(),c={i:l,group:"trails",feature:u,points:o};pack.routes.push(c);const h=(f,s,d)=>{const g=pack.cells.routes;g[f]||(g[f]={}),g[f][s]=d,g[s]||(g[s]={}),g[s][f]=d};for(let f=0;f<r.length;f++){const s=r[f],d=r[f+1];d&&h(s,d,l)}return c}areConnected(n,t){return pack.cells.routes[n]?.[t]!==void 0}getRoute(n,t){const a=pack.cells.routes[n]?.[t];if(a===void 0)return null;const r=pack.routes.find(i=>i.i===a);return r||null}hasRoad(n){const t=pack.cells.routes[n];return t?Object.values(t).some(a=>{const r=pack.routes.find(i=>i.i===a);return r?r.group==="roads":!1}):!1}isCrossroad(n){const t=pack.cells.routes[n];return t?Object.keys(t).length>3?!0:Object.values(t).filter(r=>pack.routes.find(o=>o.i===r)?.group==="roads").length>2:!1}remove(n){const t=pack.cells.routes;for(const a of n.points){const r=a[2];if(t[r])for(const[i,o]of Object.entries(t[r]))o===n.i&&(delete t[r][parseInt(i,10)],delete t[parseInt(i,10)][r])}pack.routes=pack.routes.filter(a=>a.i!==n.i),viewbox.select(`#route${n.i}`).remove()}getConnectivityRate(n){const t=pack.cells.routes[n];if(!t)return 0;const a={roads:.2,trails:.1,searoutes:.2,default:.1};return Object.values(t).reduce((i,o)=>{const u=pack.routes.find(c=>c.i===o);if(!u)return i;const l=a[u.group]||a.default;return i+l},.8)}generateName({group:n,points:t}){if(t.length<4)return"Unnamed route segment";function a(){const u=[t.at(-1),t.at(0),t.slice(1,-1).reverse()];for(const[l,c,h]of u){const f=pack.cells.burg[h];if(f)return Fe(pack.burgs[f].name)}return null}const r=le(l6[n]),i=le(c6[n]),o=a();return r==="burg_suffix"&&o?`${o} ${i}`:r==="prefix_suffix"?`${V(Of)} ${i}`:r==="the_descriptor_prefix_suffix"?`The ${V(Gf)} ${V(Of)} ${i}`:r==="the_descriptor_burg_suffix"&&o?`The ${V(Gf)} ${o} ${i}`:"Unnamed route"}getPath({group:n,points:t}){const a=kn(),r={roads:ua.alpha(.1),trails:ua.alpha(.1),searoutes:ua.alpha(.5),default:ua.alpha(.1)};return a.curve(r[n]||r.default),zn(a(t.map(o=>[o[0],o[1]])),1)}getLength(n){return routes.select(`#route${n}`).node().getTotalLength()}}window.Routes=new h6;class f6{createStates(){const n=[{i:0,name:"Neutrals"}],t=ut(5),a=Ae("sizeVariety").valueAsNumber;return pack.burgs.forEach(r=>{if(!r.i||!r.capital)return;const i=L(Math.random()*a+1,1),o=r.name.length<9&&t(r.cell)?r.name:Names.getCultureShort(r.culture),u=Names.getState(o,r.culture),l=pack.cultures[r.culture].type,c=COA.generate(null,null,null,l);c.shield=COA.getShield(r.culture,null),n.push({i:r.i,name:u,expansionism:i,capital:r.i,type:l,center:r.cell,culture:r.culture,coa:c})}),n}getBiomeCost(n,t,a){return n===t?10:a==="Hunting"?biomesData.cost[t]*2:a==="Nomadic"&&t>4&&t<10?biomesData.cost[t]*3:biomesData.cost[t]}getHeightCost(n,t,a){return a==="Lake"&&n.type==="lake"?10:a==="Naval"&&t<20?300:a==="Nomadic"&&t<20?1e4:t<20?1e3:a==="Highland"&&t<62?1100:a==="Highland"?0:t>=67?2200:t>=44?300:0}getRiverCost(n,t,a){return a==="River"?n?0:100:n?Pe(pack.cells.fl[t]/10,20,100):0}getTypeCost(n,t){return n===1?t==="Naval"||t==="Lake"?0:t==="Nomadic"?60:20:n===2?t==="Naval"||t==="Nomadic"?30:0:n!==-1&&(t==="Naval"||t==="Lake")?100:0}generate(){TIME&&console.time("generateStates"),pack.states=this.createStates(),this.expandStates(),this.normalize(),this.getPoles(),this.findNeighbors(),this.assignColors(),this.generateCampaigns(),this.generateDiplomacy(),TIME&&console.timeEnd("generateStates")}expandStates(){TIME&&console.time("expandStates");const{cells:n,states:t,cultures:a,burgs:r}=pack;n.state=n.state||new Uint16Array(n.i.length);const i=new FlatQueue,o=[],u=Ae("growthRate")?.valueAsNumber||1,l=Ae("statesGrowthRate")?.valueAsNumber||1,c=n.i.length/2*u*l;for(const h of n.i)t[n.state[h]].lock||(n.state[h]=0);for(const h of t){if(!h.i||h.removed)continue;const f=r[h.capital].cell;n.state[f]=h.i;const s=a[h.culture].center,d=n.biome[s];i.push({e:h.center,p:0,s:h.i,b:d},0),o[h.center]=1}for(;i.length;){const h=i.pop(),{e:f,p:s,s:d,b:g}=h,{type:p,culture:m}=t[d];n.c[f].forEach(y=>{const k=t[n.state[y]];if(k.lock||n.state[y]&&y===k.center)return;const v=m===n.culture[y]?-9:100,b=n.h[y]<20?0:n.s[y]?Math.max(20-n.s[y],0):5e3,w=this.getBiomeCost(g,n.biome[y],p),M=this.getHeightCost(pack.features[n.f[y]],n.h[y],p),x=this.getRiverCost(n.r[y],y,p),S=this.getTypeCost(n.t[y],p),T=Math.max(v+b+w+M+x+S,0),_=s+10+T/t[d].expansionism;_>c||(!o[y]||_<o[y])&&(n.h[y]>=20&&(n.state[y]=d),o[y]=_,i.push({e:y,p:_,s:d,b:g},_))})}r.filter(h=>h.i&&!h.removed).forEach(h=>{h.state=n.state[h.cell]}),TIME&&console.timeEnd("expandStates")}normalize(){TIME&&console.time("normalizeStates");const{cells:n,burgs:t}=pack;for(const a of n.i){if(n.h[a]<20||n.burg[a]||pack.states[n.state[a]]?.lock||n.c[a].some(u=>t[n.burg[u]].capital))continue;const r=n.c[a].filter(u=>n.h[u]>=20),i=r.filter(u=>!pack.states[n.state[u]]?.lock&&n.state[u]!==n.state[a]);if(i.length<2)continue;const o=r.filter(u=>!pack.states[n.state[u]]?.lock&&n.state[u]===n.state[a]);o.length>2||i.length<=o.length||(n.state[a]=n.state[i[0]])}TIME&&console.timeEnd("normalizeStates")}getPoles(){const n=a=>pack.cells.state[a],t=bc(pack,n);pack.states.forEach(a=>{!a.i||a.removed||(a.pole=t[a.i]||[0,0])})}findNeighbors(){const{cells:n,states:t}=pack,a=[];t.forEach(r=>{r.removed||(a[r.i]=new Set)});for(const r of n.i){if(n.h[r]<20)continue;const i=n.state[r];n.c[r].filter(o=>n.h[o]>=20&&n.state[o]!==i).forEach(o=>{a[i].add(n.state[o])})}t.forEach(r=>{!a[r.i]||r.removed||(r.neighbors=Array.from(a[r.i]))})}assignColors(){TIME&&console.time("assignColors");const n=["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f"],t=pack.states;t.forEach(a=>{!a.i||a.removed||a.lock||(a.color=n.find(r=>a.neighbors.every(i=>t[i].color!==r)),a.color||(a.color=Ra()),n.push(n.shift()))}),n.forEach(a=>{t.filter(i=>i.color===a&&i.i&&!i.lock).forEach((i,o)=>{o&&(i.color=lt(i.color))})}),TIME&&console.timeEnd("assignColors")}collectStatistics(){TIME&&console.time("collectStatistics");const{cells:n,states:t}=pack;t.forEach(a=>{a.removed||(a.cells=a.area=a.burgs=a.rural=a.urban=0)});for(const a of n.i){if(n.h[a]<20)continue;const r=n.state[a];t[r].cells+=1,t[r].area+=n.area[a],t[r].rural+=n.pop[a],n.burg[a]&&(t[r].urban+=pack.burgs[n.burg[a]].population,t[r].burgs++)}TIME&&console.timeEnd("collectStatistics")}generateCampaign(n){const t={War:6,Conflict:2,Campaign:4,Invasion:2,Rebellion:2,Conquest:2,Intervention:1,Expedition:1,Crusade:1};return(n.neighbors?.length?n.neighbors:[0]).map(r=>{const i=r&&j(.8)?pack.states[r].name:Names.getCultureShort(n.culture),o=Ze(options.year-100,150,1,options.year-6),u=o+Ze(4,5,1,options.year-o-1);return{name:`${Fe(i)} ${le(t)}`,start:o,end:u}}).sort((r,i)=>r.start-i.start)}generateCampaigns(){pack.states.forEach(n=>{!n.i||n.removed||(n.campaigns=this.generateCampaign(n))})}generateDiplomacy(){TIME&&console.time("generateDiplomacy");const{cells:n,states:t}=pack;t[0].diplomacy=[];const a=t[0].diplomacy,r=t.filter(h=>h.i&&!h.removed),i={Ally:1,Friendly:2,Neutral:1,Suspicion:10,Rival:9},o={Ally:10,Friendly:8,Neutral:5,Suspicion:1},u={Friendly:1,Neutral:12,Suspicion:2,Unknown:6},l={Neutral:1,Suspicion:2,Rival:1,Unknown:1};if(r.forEach(h=>{h.diplomacy=new Array(t.length).fill("x")}),r.length<2)return;const c=ft(r.map(h=>h.area));for(let h=1;h<t.length;h++)if(!t[h].removed){if(t[h].diplomacy.includes("Vassal")){const f=t[h].diplomacy.indexOf("Vassal");for(let s=1;s<t.length;s++)if(!(s===h||s===f)){t[h].diplomacy[s]=t[f].diplomacy[s],t[f].diplomacy[s]==="Suzerain"&&(t[h].diplomacy[s]="Ally");for(let d=1;d<t.length;d++)d===h||d===f||t[d].diplomacy[f]==="Suzerain"||t[d].diplomacy[f]==="Vassal"||(t[d].diplomacy[h]=t[d].diplomacy[f])}continue}for(let f=h+1;f<t.length;f++){if(t[f].removed)continue;if(t[f].diplomacy.includes("Vassal")){const m=t[f].diplomacy.indexOf("Vassal");t[h].diplomacy[f]=t[h].diplomacy[m];continue}const s=t[h].type==="Naval"&&t[f].type==="Naval"&&n.f[t[h].center]!==n.f[t[f].center],d=s?!1:t[h].neighbors.includes(f),g=s||d?!1:t[h].neighbors.map(m=>t[m].neighbors).join("").includes(f.toString());let p=le(s?l:d?i:g?o:u);d&&j(.8)&&t[h].area>c&&t[f].area<c&&t[h].area/t[f].area>2&&(p="Vassal"),t[h].diplomacy[f]=p==="Vassal"?"Suzerain":p,t[f].diplomacy[h]=p}}for(let h=1;h<t.length;h++){const f=t[h].diplomacy;if(t[h].removed||!f.includes("Rival")||f.includes("Vassal")||f.includes("Enemy"))continue;const s=V(f.map((S,T)=>S==="Rival"&&!t[T].diplomacy.includes("Vassal")?T:0).filter(S=>S));let d=t[h].area*t[h].expansionism,g=t[s].area*t[s].expansionism;if(d<g*Ze(1.6,.8,0,10,2))continue;const p=t[h].name,m=t[s].name,y=[h],k=[s],v=t[s].diplomacy,b=`${p}-${Ve(m)}ian War`,w=options.year-Ze(2,3,0,10),M=[b,`${p} declared a war on its rival ${m}`],x={name:b,start:w,attacker:h,defender:s};t[h].campaigns.push(x),t[s].campaigns.push(x),f.forEach((S,T)=>{S==="Suzerain"&&(y.push(T),M.push(`${p}'s vassal ${t[T].name} joined the war on attackers side`))}),v.forEach((S,T)=>{S==="Suzerain"&&(k.push(T),M.push(`${m}'s vassal ${t[T].name} joined the war on defenders side`))}),d=Pi(y.map(S=>t[S].area*t[S].expansionism)),g=Pi(k.map(S=>t[S].area*t[S].expansionism)),v.forEach((S,T)=>{if(!(S!=="Ally"||t[T].diplomacy.includes("Vassal"))){if(t[T].diplomacy[h]!=="Rival"&&d/g>2*Ze(1.6,.8,0,10,2)){const _=t[T].diplomacy.includes("Enemy")?"Being already at war,":`Frightened by ${p},`;M.push(`${_} ${t[T].name} severed the defense pact with ${m}`),v[T]=t[T].diplomacy[s]="Suspicion";return}k.push(T),g+=t[T].area*t[T].expansionism,M.push(`${m}'s ally ${t[T].name} joined the war on defenders side`),t[T].diplomacy.map((_,A)=>_==="Suzerain"?A:0).filter(_=>_).forEach(_=>{k.push(_),g+=t[_].area*t[_].expansionism,M.push(`${t[T].name}'s vassal ${t[_].name} joined the war on defenders side`)})}}),f.forEach((S,T)=>{if(S!=="Ally"||t[T].diplomacy.includes("Vassal")||k.includes(T))return;const _=t[T].name;if(t[T].diplomacy[s]!=="Rival"&&(j(.2)||d<=g*1.2)){M.push(`${p}'s ally ${_} avoided entering the war`);return}if(t[T].diplomacy.map((R,N)=>R==="Ally"?N:0).filter(R=>R).some(R=>k.includes(R))){M.push(`${p}'s ally ${_} did not join the war as its allies are in war on both sides`);return}y.push(T),d+=t[T].area*t[T].expansionism,M.push(`${p}'s ally ${_} joined the war on attackers side`),t[T].diplomacy.map((R,N)=>R==="Suzerain"?N:0).filter(R=>R).forEach(R=>{y.push(R),d+=t[R].area*t[R].expansionism,M.push(`${t[T].name}'s vassal ${t[R].name} joined the war on attackers side`)})}),y.forEach(S=>{k.forEach(T=>{t[S].diplomacy[T]=t[T].diplomacy[S]="Enemy"})}),a.push(M)}TIME&&console.timeEnd("generateDiplomacy")}defineStateForms(n=null){TIME&&console.time("defineStateForms");const t=pack.states.filter(d=>d.i&&!d.removed&&!d.lock);if(t.length<1)return;const a={Monarchy:25,Republic:2,Union:1},r={Monarchy:25,Republic:8,Union:3},i=dd(pack.states.map(d=>d.area)),o=t.map(d=>d.area).sort((d=0,g=0)=>g-d)[Math.max(Math.ceil(t.length**.4)-2,0)],u=pack.states.map(d=>{let g=Math.min(Math.floor(d.area/i*2.6),4);return g===4&&d.area<o&&(g=3),g}),l=["Duchy","Grand Duchy","Principality","Kingdom","Empire"],c={Republic:75,Federation:4,"Trade Company":4,"Most Serene Republic":2,Oligarchy:2,Tetrarchy:1,Triumvirate:1,Diarchy:1,Junta:1},h={Union:3,League:4,Confederation:1,"United Kingdom":1,"United Republic":1,"United Provinces":2,Commonwealth:1,Heptarchy:1},f={Theocracy:20,Brotherhood:1,Thearchy:2,See:1,"Holy State":1},s={"Free Territory":2,Council:3,Commune:1,Community:1};for(const d of t){if(n&&!n.includes(d.i))continue;const g=u[d.i],p=pack.cells.religion[d.center],m=p&&pack.religions[p].expansion==="state"||j(.1)&&["Organized","Cult"].includes(pack.religions[p].type),y=j(.01-g/500);m?d.form="Theocracy":y?d.form="Anarchy":d.form=d.type==="Naval"?le(r):le(a);const k=(v,b)=>{const w=pack.cultures[v.culture].base;if(v.form==="Monarchy"){const M=l[b];if(v.diplomacy){if(M==="Duchy"&&v.neighbors.length>1&&oe(6)<v.neighbors.length&&v.diplomacy.includes("Vassal"))return"Marches";if(w===1&&j(.3)&&v.diplomacy.includes("Vassal"))return"Dominion";if(j(.3)&&v.diplomacy.includes("Vassal"))return"Protectorate"}return w===31&&(M==="Empire"||M==="Kingdom")?"Khanate":w===16&&M==="Principality"?"Beylik":w===5&&(M==="Empire"||M==="Kingdom")?"Tsardom":w===16&&(M==="Empire"||M==="Kingdom")?"Khaganate":w===12&&(M==="Kingdom"||M==="Grand Duchy")?"Shogunate":[18,17].includes(w)&&M==="Empire"?"Caliphate":w===18&&(M==="Grand Duchy"||M==="Duchy")?"Emirate":w===7&&(M==="Grand Duchy"||M==="Duchy")?"Despotate":w===31&&(M==="Grand Duchy"||M==="Duchy")?"Ulus":w===16&&(M==="Grand Duchy"||M==="Duchy")?"Horde":w===24&&(M==="Grand Duchy"||M==="Duchy")?"Satrapy":M}if(v.form==="Republic"){if(b<2&&v.burgs===1){if(Ve(v.name)===Ve(pack.burgs[v.capital].name))return v.name=pack.burgs[v.capital].name,"Free City";if(j(.3))return"City-state"}return le(c)}if(v.form==="Union")return le(h);if(v.form==="Anarchy")return le(s);if(v.form==="Theocracy"){if([0,1,2,3,4,6,8,9,13,15,20].includes(w)){if(j(.1))return`Divine ${l[b]}`;if(b<2&&j(.5))return"Diocese";if(b<2&&j(.5))return"Bishopric"}if(j(.9)&&[7,5].includes(w)){if(b<2)return"Eparchy";if(b===2)return"Exarchate";if(b>2)return"Patriarchate"}return j(.9)&&[21,16].includes(w)?"Imamah":b>2&&j(.8)&&[18,17,28].includes(w)?"Caliphate":le(f)}};d.formName=k(d,g),d.fullName=this.getFullName(d)}TIME&&console.timeEnd("defineStateForms")}getFullName(n){const t=["Empire","Sultanate","Khaganate","Shogunate","Caliphate","Despotate","Theocracy","Oligarchy","Union","Confederation","Trade Company","League","Tetrarchy","Triumvirate","Diarchy","Horde","Marches"];return n.formName?!n.name&&n.formName?`The ${n.formName}`:t.includes(n.formName)&&!/-| /.test(n.name)?`${Fe(n.name)} ${n.formName}`:`${n.formName} of ${n.name}`:n.name}}window.States=new f6;class d6{config;constructor(){this.config={invasion:{quantity:2,generate:n=>this.addInvasion(n)},rebels:{quantity:1.5,generate:n=>this.addRebels(n)},proselytism:{quantity:1.6,generate:n=>this.addProselytism(n)},crusade:{quantity:1.6,generate:n=>this.addCrusade(n)},disease:{quantity:1.4,generate:n=>this.addDisease(n)},disaster:{quantity:1,generate:n=>this.addDisaster(n)},eruption:{quantity:1,generate:n=>this.addEruption(n)},avalanche:{quantity:.8,generate:n=>this.addAvalanche(n)},fault:{quantity:1,generate:n=>this.addFault(n)},flood:{quantity:1,generate:n=>this.addFlood(n)},tsunami:{quantity:1,generate:n=>this.addTsunami(n)}}}generate(n=1){TIME&&console.time("generateZones");const t=new Uint8Array(pack.cells.i.length);pack.zones=[],Object.values(this.config).forEach(a=>{const r=a.quantity*n;let i=Ze(r,r/2,0,100);for(;i--;)a.generate(t)}),TIME&&console.timeEnd("generateZones")}addInvasion(n){const{cells:t,states:a}=pack,r=a.filter(g=>g.i&&!g.removed&&g.campaigns).flatMap(g=>g.campaigns).filter(g=>!g.end);if(!r.length)return;const{defender:i,attacker:o}=V(r),u=t.i.filter(g=>n[g]||t.state[g]!==i?!1:t.c[g].some(p=>t.state[p]===o)),l=V(u);if(l===void 0)return;const c=[],h=[l],f=oe(5,30);for(;h.length;){const g=j(.4)?h.shift():h.pop();if(c.push(g),c.length>=f)break;t.c[g].forEach(p=>{n[p]||t.state[p]===i&&(n[p]=1,h.push(p))})}const s=le({Invasion:5,Occupation:4,Conquest:3,Incursion:2,Intervention:2,Assault:1,Foray:1,Intrusion:1,Irruption:1,Offensive:1,Pillaging:1,Plunder:1,Raid:1,Skirmishes:1}),d=`${Fe(a[o].name)} ${s}`;pack.zones.push({i:pack.zones.length,name:d,type:"Invasion",cells:c,color:"url(#hatch1)"})}addRebels(n){const{cells:t,states:a}=pack,r=V(a.filter(s=>s.i&&!s.removed&&s.neighbors?.some(Boolean)));if(!r)return;const i=V(r.neighbors.filter(s=>s&&!a[s].removed));if(!i)return;const o=[],u=[],l=t.i.find(s=>t.state[s]===r.i&&t.c[s].some(d=>t.state[d]===i));l&&u.push(l);const c=oe(10,30);for(;u.length;){const s=u.shift();if(o.push(s),o.length>=c)break;t.c[s].forEach(d=>{n[d]||t.state[d]===r.i&&(n[d]=1,!(d%4!==0&&!t.c[d].some(g=>t.state[g]===i))&&u.push(d))})}const h=le({Rebels:5,Insurrection:2,Mutineers:1,Insurgents:1,Rebellion:1,Renegades:1,Revolters:1,Revolutionaries:1,Rioters:1,Separatists:1,Secessionists:1,Conspiracy:1}),f=`${Fe(a[i].name)} ${h}`;pack.zones.push({i:pack.zones.length,name:f,type:"Rebels",cells:o,color:"url(#hatch3)"})}addProselytism(n){const{cells:t,religions:a}=pack,r=a.filter(d=>d.i&&!d.removed&&d.type==="Organized"),i=V(r);if(!i)return;const o=t.i.filter(d=>t.h[d]>=20&&t.pop[d]&&t.religion[d]!==i.i&&t.c[d].some(g=>t.religion[g]===i.i)),u=V(o);if(!u)return;const l=t.religion[u],c=[],h=[u],f=oe(10,30);for(;h.length;){const d=h.shift();if(c.push(d),c.length>=f)break;t.c[d].forEach(g=>{n[g]||t.religion[g]===l&&(t.h[g]<20||!t.pop[g]||(n[g]=1,h.push(g)))})}const s=`${Fe(i.name.split(" ")[0])} Proselytism`;pack.zones.push({i:pack.zones.length,name:s,type:"Proselytism",cells:c,color:"url(#hatch6)"})}addCrusade(n){const{cells:t,religions:a}=pack,r=a.filter(l=>!l.removed&&l.type==="Heresy");if(!r.length)return;const i=V(r),o=t.i.filter(l=>!n[l]&&t.religion[l]===i.i);if(!o.length)return;for(const l of o)n[l]=1;const u=`${Fe(i.name.split(" ")[0])} Crusade`;pack.zones.push({i:pack.zones.length,name:u,type:"Crusade",cells:Array.from(o),color:"url(#hatch6)"})}addDisease(n){const{cells:t,burgs:a}=pack,r=V(a.filter(m=>!n[m.cell]&&m.i&&!m.removed));if(!r)return;const i=[],o=[],u=oe(20,40),l=new FlatQueue;for(l.push({e:r.cell,p:0},0);l.length;){const m=l.pop();(t.burg[m.e]||t.pop[m.e])&&i.push(m.e),n[m.e]=1,t.c[m.e].forEach(y=>{const k=Routes.getRoute(m.e,y)?5:100,v=m.p+k;v>u||(!o[y]||v<o[y])&&(o[y]=v,l.push({e:y,p:v},v))})}const c=this.getDiseaseName("color"),h=this.getDiseaseName("animal"),f=this.getDiseaseName("adjective"),s=le({color:2,animal:1,adjective:1}),d=s==="color"?c:s==="animal"?h:f,g=le({Fever:5,Plague:3,Cough:3,Flu:2,Pox:2,Cholera:2,Typhoid:2,Leprosy:1,Smallpox:1,Pestilence:1,Consumption:1,Malaria:1,Dropsy:1}),p=`${d} ${g}`;pack.zones.push({i:pack.zones.length,name:p,type:"Disease",cells:i,color:"url(#hatch12)"})}getDiseaseName(n){return V(n==="color"?["Amber","Azure","Black","Blue","Brown","Crimson","Emerald","Golden","Green","Grey","Orange","Pink","Purple","Red","Ruby","Scarlet","Silver","Violet","White","Yellow"]:n==="animal"?["Ape","Bear","Bird","Boar","Cat","Cow","Deer","Dog","Fox","Goat","Horse","Lion","Pig","Rat","Raven","Sheep","Spider","Tiger","Viper","Wolf","Worm","Wyrm"]:["Blind","Bloody","Brutal","Burning","Deadly","Fatal","Furious","Great","Grim","Horrible","Invisible","Lethal","Loud","Mortal","Savage","Severe","Silent","Unknown","Venomous","Vicious"])}addDisaster(n){const{cells:t,burgs:a}=pack,r=V(a.filter(f=>!n[f.cell]&&f.i&&!f.removed));if(!r)return;n[r.cell]=1;const i=[],o=[],u=oe(5,25),l=new FlatQueue;for(l.push({e:r.cell,p:0},0);l.length;){const f=l.pop();(t.burg[f.e]||t.pop[f.e])&&i.push(f.e),n[f.e]=1,t.c[f.e].forEach(s=>{const d=oe(1,10),g=f.p+d;g>u||(!o[s]||g<o[s])&&(o[s]=g,l.push({e:s,p:g},g))})}const c=le({Famine:5,Drought:3,Earthquake:3,Dearth:1,Tornadoes:1,Wildfires:1,Storms:1,Blight:1}),h=`${Fe(r.name)} ${c}`;pack.zones.push({i:pack.zones.length,name:h,type:"Disaster",cells:i,color:"url(#hatch5)"})}addEruption(n){const{cells:t,markers:a}=pack,r=a.find(h=>h.type==="volcanoes"&&!n[h.cell]);if(!r)return;n[r.cell]=1;const i=notes.find(h=>h.id===`marker${r.i}`);i&&(i.legend=i.legend.replace("Active volcano","Erupting volcano"));const o=i?`${i.name.replace(" Volcano","")} Eruption`:"Volcano Eruption",u=[],l=[r.cell],c=oe(10,30);for(;l.length;){const h=j(.5)?l.shift():l.pop();if(u.push(h),u.length>=c)break;t.c[h].forEach(f=>{n[f]||t.h[f]<20||(n[f]=1,l.push(f))})}pack.zones.push({i:pack.zones.length,name:o,type:"Eruption",cells:u,color:"url(#hatch7)"})}addAvalanche(n){const{cells:t}=pack,a=t.i.filter(c=>!n[c]&&Routes.isConnected(c)&&t.h[c]>=70);if(!a.length)return;const r=V(a);n[r]=1;const i=[],o=[r],u=oe(3,15);for(;o.length;){const c=j(.3)?o.shift():o.pop();if(i.push(c),i.length>=u)break;t.c[c].forEach(h=>{n[h]||t.h[h]<65||(n[h]=1,o.push(h))})}const l=`${Fe(Names.getCultureShort(t.culture[r]))} Avalanche`;pack.zones.push({i:pack.zones.length,name:l,type:"Avalanche",cells:i,color:"url(#hatch5)"})}addFault(n){const t=pack.cells,a=t.i.filter(c=>!n[c]&&t.h[c]>50&&t.h[c]<70);if(!a.length)return;const r=V(a);n[r]=1;const i=[],o=[r],u=oe(3,15);for(;o.length;){const c=o.pop();if(t.h[c]>=20&&i.push(c),i.length>=u)break;t.c[c].forEach(h=>{n[h]||t.r[h]||(n[h]=1,o.push(h))})}const l=`${Fe(Names.getCultureShort(t.culture[r]))} Fault`;pack.zones.push({i:pack.zones.length,name:l,type:"Fault",cells:i,color:"url(#hatch2)"})}addFlood(n){const t=pack.cells,a=t.fl.filter(Boolean),r=ft(a)??0,o=((vn(a)??0)-r)/2+r,u=t.i.filter(g=>!n[g]&&t.h[g]<50&&t.r[g]&&t.fl[g]>o&&t.burg[g]);if(!u.length)return;const l=V(u);n[l]=1;const c=t.r[l],h=[],f=[l],s=oe(5,30);for(;f.length;){const g=f.pop();if(h.push(g),h.length>=s)break;t.c[g].forEach(p=>{n[p]||t.h[p]<20||t.r[p]!==c||t.h[p]>50||t.fl[p]<r||(n[p]=1,f.push(p))})}const d=`${Fe(pack.burgs[t.burg[l]].name)} Flood`;pack.zones.push({i:pack.zones.length,name:d,type:"Flood",cells:h,color:"url(#hatch13)"})}addTsunami(n){const{cells:t,features:a}=pack,r=t.i.filter(h=>!n[h]&&t.t[h]===-1&&a[t.f[h]].type!=="lake");if(!r.length)return;const i=V(r);n[i]=1;const o=[],u=[i],l=oe(10,30);for(;u.length;){const h=u.shift();if(t.t[h]===1&&o.push(h),o.length>=l)break;t.c[h].forEach(f=>{n[f]||t.t[f]>2||pack.features[t.f[f]].type!=="lake"&&(n[f]=1,u.push(f))})}const c=`${Fe(Names.getCultureShort(t.culture[i]))} Tsunami`;pack.zones.push({i:pack.zones.length,name:c,type:"Tsunami",cells:o,color:"url(#hatch13)"})}}window.Zones=new d6;const qf={Number:1,Being:3,Adjective:5,"Color + Animal":5,"Adjective + Animal":5,"Adjective + Being":5,"Adjective + Genitive":1,"Color + Being":3,"Color + Genitive":3,"Being + of + Genitive":2,"Being + of the + Genitive":1,"Animal + of + Genitive":1,"Adjective + Being + of + Genitive":2,"Adjective + Animal + of + Genitive":2},Kp=[];for(const e in qf)for(let n=0;n<qf[e];n++)Kp.push(e);const fe={number:["One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve"],being:["Ancestor","Ancient","Avatar","Brother","Champion","Chief","Council","Creator","Deity","Divine One","Elder","Enlightened Being","Father","Forebear","Forefather","Giver","God","Goddess","Guardian","Guide","Hierarch","Lady","Lord","Maker","Master","Mother","Numen","Oracle","Overlord","Protector","Reaper","Ruler","Sage","Seer","Sister","Spirit","Supreme Being","Transcendent","Virgin"],animal:["Antelope","Ape","Badger","Basilisk","Bear","Beaver","Bison","Boar","Buffalo","Camel","Cat","Centaur","Cerberus","Chimera","Cobra","Cockatrice","Crane","Crocodile","Crow","Cyclope","Deer","Dog","Direwolf","Drake","Dragon","Eagle","Elephant","Elk","Falcon","Fox","Goat","Goose","Gorgon","Gryphon","Hare","Hawk","Heron","Hippogriff","Horse","Hound","Hyena","Ibis","Jackal","Jaguar","Kitsune","Kraken","Lark","Leopard","Lion","Manticore","Mantis","Marten","Minotaur","Moose","Mule","Narwhal","Owl","Ox","Panther","Pegasus","Phoenix","Python","Rat","Raven","Roc","Rook","Scorpion","Serpent","Shark","Sheep","Snake","Sphinx","Spider","Swan","Tiger","Turtle","Unicorn","Viper","Vulture","Walrus","Wolf","Wolverine","Worm","Wyvern","Yeti"],adjective:["Aggressive","Almighty","Ancient","Beautiful","Benevolent","Big","Blind","Blond","Bloody","Brave","Broken","Brutal","Burning","Calm","Celestial","Cheerful","Crazy","Cruel","Dead","Deadly","Devastating","Distant","Disturbing","Divine","Dying","Eternal","Ethernal","Empyreal","Enigmatic","Enlightened","Evil","Explicit","Fair","Far","Fat","Fatal","Favorable","Flying","Friendly","Frozen","Giant","Good","Grateful","Great","Happy","High","Holy","Honest","Huge","Hungry","Illustrious","Immutable","Ineffable","Infallible","Inherent","Last","Latter","Lost","Loud","Lucky","Mad","Magical","Main","Major","Marine","Mythical","Mystical","Naval","New","Noble","Old","Otherworldly","Patient","Peaceful","Pregnant","Prime","Proud","Pure","Radiant","Resplendent","Sacred","Sacrosanct","Sad","Scary","Secret","Selected","Serene","Severe","Silent","Sleeping","Slumbering","Sovereign","Strong","Sunny","Superior","Supernatural","Sustainable","Transcendent","Transcendental","Troubled","Unearthly","Unfathomable","Unhappy","Unknown","Unseen","Waking","Wild","Wise","Worried","Young"],genitive:["Cold","Day","Death","Doom","Fate","Fire","Fog","Frost","Gates","Heaven","Home","Ice","Justice","Life","Light","Lightning","Love","Nature","Night","Pain","Snow","Springs","Summer","Thunder","Time","Victory","War","Winter"],theGenitive:["Abyss","Blood","Dawn","Earth","East","Eclipse","Fall","Harvest","Moon","North","Peak","Rainbow","Sea","Sky","South","Stars","Storm","Sun","Tree","Underworld","West","Wild","Word","World"],color:["Amber","Black","Blue","Bright","Bronze","Brown","Coral","Crimson","Dark","Emerald","Golden","Green","Grey","Indigo","Lavender","Light","Magenta","Maroon","Orange","Pink","Plum","Purple","Red","Ruby","Sapphire","Teal","Turquoise","White","Yellow"]},Xs={Folk:{Shamanism:4,Animism:4,Polytheism:4,"Ancestor Worship":2,"Nature Worship":1,Totemism:1},Organized:{Polytheism:7,Monotheism:7,Dualism:3,Pantheism:2,"Non-theism":2},Cult:{Cult:5,"Dark Cult":5,Sect:1},Heresy:{Heresy:1}},g6={Folk:{"Culture + type":1},Organized:{"Random + type":3,"Random + ism":1,"Supreme + ism":5,"Faith of + Supreme":5,"Place + ism":1,"Culture + ism":2,"Place + ian + type":6,"Culture + type":4},Cult:{"Burg + ian + type":2,"Random + ian + type":1,"Type + of the + meaning":2},Heresy:{"Burg + ian + type":3,"Random + ism":3,"Random + ian + type":2,"Type + of the + meaning":1}},m6={Shamanism:{Beliefs:3,Shamanism:2,Druidism:1,Spirits:1},Animism:{Spirits:3,Beliefs:1},Polytheism:{Deities:3,Faith:1,Gods:1,Pantheon:1},"Ancestor Worship":{Beliefs:1,Forefathers:2,Ancestors:2},"Nature Worship":{Beliefs:3,Druids:1},Totemism:{Beliefs:2,Totems:2,Idols:1},Monotheism:{Religion:2,Church:3,Faith:1},Dualism:{Religion:3,Faith:1,Cult:1},Pantheism:{Religion:1,Faith:1},"Non-theism":{Beliefs:3,Spirits:1},Cult:{Cult:4,Sect:2,Arcanum:1,Order:1,Worship:1},"Dark Cult":{Cult:2,Blasphemy:1,Circle:1,Coven:1,Idols:1,Occultism:1},Sect:{Sect:3,Society:1},Heresy:{Heresy:3,Sect:2,Apostates:1,Brotherhood:1,Circle:1,Dissent:1,Dissenters:1,Iconoclasm:1,Schism:1,Society:1}},Ff={Folk:()=>0,Organized:()=>Ze(5,3,0,10,1),Cult:()=>Ze(.5,.5,0,5,1),Heresy:()=>Ze(1,.5,0,5,1)};class p6{generate(){TIME&&console.time("generateReligions");const n=pack.religions?.filter(l=>l.i&&l.lock&&!l.removed)||[],t=this.generateFolkReligions(),a=this.generateOrganizedReligions(+religionsNumber.value,n),r=this.specifyReligions([...t,...a]),i=this.combineReligions(r,n),o=this.expandReligions(i),u=this.defineOrigins(o,i);pack.religions=u,pack.cells.religion=o,this.checkCenters(),TIME&&console.timeEnd("generateReligions")}generateFolkReligions(){return pack.cultures.filter(n=>n.i&&!n.removed).map(n=>({type:"Folk",form:le(Xs.Folk),culture:n.i,center:n.center}))}generateOrganizedReligions(n,t){const a=pack.cells,r=t.filter(({type:g})=>g!=="Folk").length||0,i=n-r;if(i<1)return[];const o=d(),u=s(),l=Math.floor(oe(1,4)/10*u.length),c=Math.floor(oe(0,3)/10*u.length),h=u.length-l-c,f=g=>g<h?"Organized":g<h+l?"Cult":"Heresy";return u.map((g,p)=>{const m=f(p),y=le(Xs[m]),k=a.culture[g];return{type:m,form:y,culture:k,center:g}});function s(){const g=[],p=gt();for(const{center:y}of t)p.add(a.p[y]);const m=(graphWidth+graphHeight)/2/n;for(const y of o){const[k,v]=a.p[y];if(p.find(k,v,m)===void 0&&(g.push(y),p.add([k,v]),g.length===i))return g}return WARN&&console.warn(`Placed only ${g.length} of ${i} religions`),g}function d(){const g=pack.burgs.filter(p=>p.i&&!p.removed);return g.length>=i?g.sort((p,m)=>m.population-p.population).map(p=>p.cell):a.i.filter(p=>a.s[p]>2).sort((p,m)=>a.s[m]-a.s[p])}}specifyReligions(n){const{cells:t,cultures:a}=pack;return n.map(({type:o,form:u,culture:l,center:c})=>{const h=this.getDeityName(l),f=u==="Non-theism"||u==="Animism"?null:h??null,s=t.state[c];let[d,g]=this.generateReligionName(o,u,h,c);g==="state"&&!s&&(g="global");const p=Ff[o](),m=i(a[l],o);return{name:d,type:o,form:u,culture:l,center:c,deity:f,expansion:g,expansionism:p,color:m}});function i(o,u){return o.i?u==="Folk"?o.color:u==="Heresy"?lt(o.color,.35,.2):u==="Cult"?lt(o.color,.5,0):lt(o.color,.25,.4):Ra()}}combineReligions(n,t){const a=[{name:"No religion",i:0}],{lockedReligionQueue:r,highestLockedIndex:i,codes:o,numberLockedFolk:u}=c(),l=Math.max(i,n.length+t.length+1-u);for(let f=1,s=0;f<l;f=a.length){if(f===r[0]?.i){const d=r.shift();a.push(d);continue}if(s<n.length){const d=n[s];if(s++,d.type==="Folk"&&t.some(({type:m,culture:y})=>m==="Folk"&&y===d.culture))continue;const g=h(d),p=Rr(g,o);o.push(p),a.push({...d,i:f,name:g,code:p});continue}a.push({i:f,type:"Folk",culture:0,name:"Removed religion",removed:!0})}return a;function c(){const f=t.map(p=>{let m=p.origins.filter(y=>t.some(({i:k})=>k===y));return m.length===0&&(m=[0]),{...p,origins:m}}).sort((p,m)=>p.i-m.i),s=Math.max(...t.map(p=>p.i),0),d=t.length>0?t.map(p=>p.code):[],g=t.filter(({type:p})=>p==="Folk").length;return{lockedReligionQueue:f,highestLockedIndex:s,codes:d,numberLockedFolk:g}}function h({name:f,type:s,culture:d}){return s!=="Folk"?f:(n.some(({type:p,culture:m,expansion:y})=>m===d&&p==="Organized"&&y==="culture")||t.some(({type:p,culture:m,expansion:y})=>m===d&&p==="Organized"&&y==="culture"))&&f.slice(0,3)!=="Old"?`Old ${f}`:f}}defineOrigins(n,t){const a={Organized:{clusterSize:100,maxReligions:2},Cult:{clusterSize:50,maxReligions:3},Heresy:{clusterSize:50,maxReligions:4}},r=t.map(({i,type:o,culture:u,expansion:l,center:c})=>{if(i===0)return null;if(o==="Folk")return[0];const h=t.find(({culture:p,type:m})=>m==="Folk"&&p===u);if(h&&u&&l==="culture"&&ut(2)(c))return[h.i];const{clusterSize:s,maxReligions:d}=a[o],g=h?.i||0;return this.getReligionsInRadius(pack.cells.c,c,n,i,s,d,g)});return t.map((i,o)=>({...i,origins:r[o]}))}getReligionsInRadius(n,t,a,r,i,o,u){const l=new Set,c=[t],h={};for(let f=0;c.length&&f<i;f++){const s=c.shift();h[s]=!0;for(const d of n[s]){if(h[d])continue;h[d]=!0;const g=a[d];if(g&&g<r&&l.add(g),l.size>=o)return[...l];c.push(d)}}return l.size?[...l]:[u]}expandReligions(n){const{cells:t}=pack,a=this.spreadFolkReligions(n),r=new FlatQueue,i=[],o=t.i.length/20*Ae("growthRate").valueAsNumber;n.filter(c=>c.i&&!c.lock&&c.type!=="Folk"&&!c.removed).forEach(c=>{a[c.center]=c.i,r.push({e:c.center,p:0,r:c.i,s:t.state[c.center]},0),i[c.center]=1});const u=new Map(n.map(c=>[c.i,c]));for(;r.length;){const{e:c,p:h,r:f,s}=r.pop(),d=u.get(f),{culture:g,expansion:p,expansionism:m}=d;t.c[c].forEach(y=>{if(p==="culture"&&g!==t.culture[y]||p==="state"&&s!==t.state[y]||u.get(a[y])?.lock)return;const k=g!==t.culture[y]?10:0,v=s!==t.state[y]?10:0,b=l(c,y),w=k+v+b,M=h+10+w/m;M>o||(!i[y]||M<i[y])&&(t.culture[y]&&(a[y]=f),i[y]=M,r.push({e:y,p:M,r:f,s},M))})}return a;function l(c,h){const f=Routes.getRoute(c,h);if(vc(c,pack))return f?50:500;const s=biomesData.cost[t.biome[h]];return f?f.group==="roads"?1:s/3:s}}spreadFolkReligions(n){const t=pack.cells,a=t.religion&&!0,r=new Uint16Array(t.i.length),i=n.filter(u=>u.type==="Folk"&&!u.removed),o=new Map(i.map(({i:u,culture:l})=>[l,u]));for(const u of t.i){const l=a&&t.religion[u]||0;if(l&&n[l]?.lock&&!n[l]?.removed){r[u]=l;continue}const c=t.culture[u];r[u]=o.get(c)||0}return r}checkCenters(){const n=pack.cells;pack.religions.forEach(t=>{if(!t.i||n.religion[t.center]===t.i)return;const a=n.i.find(i=>n.religion[i]===t.i),r=pack.cultures[t.culture]?.center;a?t.center=a:t.type==="Folk"&&r&&(t.center=r)})}recalculate(){const n=this.expandReligions(pack.religions);pack.cells.religion=n,this.checkCenters()}add(n){const{cells:t,cultures:a,religions:r}=pack,i=t.religion[n],o=r.length,u=t.culture[n],l=u!==0&&!r.some(({type:v,culture:b,removed:w})=>v==="Folk"&&b===u&&!w),c=l?a[u].color:lt(r[i].color,.3,0),h=l?"Folk":r[i].type==="Organized"?le({Organized:4,Cult:1,Heresy:2}):le({Organized:5,Cult:2}),f=le(Xs[h]),s=h==="Heresy"?r[i].deity:f==="Non-theism"||f==="Animism"?null:this.getDeityName(u),[d,g]=this.generateReligionName(h,f,s,n),p=h==="Heresy"?r[i].form:f,m=Rr(d,r.map(v=>v.code)),y=this.getReligionsInRadius(t.c,n,t.religion,o,25,3,0),k=h==="Folk"?[0]:y;r.push({i:o,name:d,color:c,culture:u,type:h,form:p,deity:s,expansion:g,expansionism:Ff[h](),center:n,cells:0,area:0,rural:0,urban:0,origins:k,code:m}),t.religion[n]=o}getDeityName(n){if(n===void 0){ERROR&&console.error("Please define a culture");return}const t=this.generateMeaning();return`${Names.getCulture(n)}, The ${t}`}generateReligionName(n,t,a,r){const{cells:i,cultures:o,burgs:u,states:l}=pack,c=()=>Names.getCulture(i.culture[r]),h=le(m6[t]),f=a.split(/[ ,]+/)[0],s=o[i.culture[r]].name,d=p=>{const m=i.burg[r],y=i.state[r],k=m?u[m].name:l[y].name,v=Ve(k.split(/[ ,]+/)[0]);return p?Fe(v):v},g=le(g6[n]);return g==="Random + type"?[`${c()} ${h}`,"global"]:g==="Random + ism"?[`${Ve(c())}ism`,"global"]:g==="Supreme + ism"&&a?[`${Ve(f)}ism`,"global"]:g==="Faith of + Supreme"&&a?[`${V(["Faith","Way","Path","Word","Witnesses"])} of ${f}`,"global"]:g==="Place + ism"?[`${d()}ism`,"state"]:g==="Culture + ism"?[`${Ve(s)}ism`,"culture"]:g==="Place + ian + type"?[`${d(!0)} ${h}`,"state"]:g==="Culture + type"?[`${s} ${h}`,"culture"]:g==="Burg + ian + type"?[`${d(!0)} ${h}`,"global"]:g==="Random + ian + type"?[`${Fe(c())} ${h}`,"global"]:g==="Type + of the + meaning"?[`${h} of the ${this.generateMeaning()}`,"global"]:[`${Ve(c())}ism`,"global"]}generateMeaning(){const n=V(Kp);return n==="Number"?V(fe.number):n==="Being"?V(fe.being):n==="Adjective"?V(fe.adjective):n==="Color + Animal"?`${V(fe.color)} ${V(fe.animal)}`:n==="Adjective + Animal"?`${V(fe.adjective)} ${V(fe.animal)}`:n==="Adjective + Being"?`${V(fe.adjective)} ${V(fe.being)}`:n==="Adjective + Genitive"?`${V(fe.adjective)} ${V(fe.genitive)}`:n==="Color + Being"?`${V(fe.color)} ${V(fe.being)}`:n==="Color + Genitive"?`${V(fe.color)} ${V(fe.genitive)}`:n==="Being + of + Genitive"?`${V(fe.being)} of ${V(fe.genitive)}`:n==="Being + of the + Genitive"?`${V(fe.being)} of the ${V(fe.theGenitive)}`:n==="Animal + of + Genitive"?`${V(fe.animal)} of ${V(fe.genitive)}`:n==="Adjective + Being + of + Genitive"?`${V(fe.adjective)} ${V(fe.being)} of ${V(fe.genitive)}`:n==="Adjective + Animal + of + Genitive"?`${V(fe.adjective)} ${V(fe.animal)} of ${V(fe.genitive)}`:(ERROR&&console.error("Unknown generation approach"),V(fe.being))}}window.Religions=new p6;class y6{forms={Monarchy:{County:22,Earldom:6,Shire:2,Landgrave:2,Margrave:2,Barony:2,Captaincy:1,Seneschalty:1},Republic:{Province:6,Department:2,Governorate:2,District:1,Canton:1,Prefecture:1},Theocracy:{Parish:3,Deanery:1},Union:{Province:1,State:1,Canton:1,Republic:1,County:1,Council:1},Anarchy:{Council:1,Commune:1,Community:1,Tribe:1},Wild:{Territory:10,Land:5,Region:2,Tribe:1,Clan:1,Dependency:1,Area:1}};generate(n=!1,t=!1){TIME&&console.time("generateProvinces");const a=n?xp():seed;Math.random=La(a);const{cells:r,states:i,burgs:o}=pack,u=[0],l=new Uint16Array(r.i.length),c=m=>m.lock||!t&&i[m.state]?.lock,h=m=>l[m]&&c(u[l[m]]);n&&pack.provinces.forEach(m=>{if(!m.i||m.removed||!c(m))return;const y=u.length;for(const k of r.i)r.province[k]===m.i&&(l[k]=y);m.i=y,u.push(m)});const f=Ae("provincesRatio").valueAsNumber,s=f===100?1e3:Ze(20,5,5,100)*f**.5;i.forEach(m=>{if(m.provinces=[],!m.i||m.removed||(u.length&&(m.provinces=u.filter(b=>b.state===m.i).map(b=>b.i)),m.lock&&!t))return;const y=o.filter(b=>b.state===m.i&&!b.removed&&!l[b.cell]).sort((b,w)=>w.population*Ze(1,.2,.5,1.5,3)-b.population).sort((b,w)=>w.capital-b.capital);if(y.length<2)return;const k=Math.max(Math.ceil(y.length*f/100),2),v=Object.assign({},this.forms[m.form]);for(let b=0;b<k;b++){const w=u.length,M=y[b].cell,x=y[b],S=y[b].culture,T=j(.5),_=T?y[b].name:Names.getState(Names.getCultureShort(S),S),A=le(v);v[A]+=10;const R=`${_} ${A}`,N=lt(m.color),z=T?.8:.4,E=Burgs.getType(M,x.port),C=COA.generate(y[b].coa,z,null,E);C.shield=COA.getShield(S,m.i),m.provinces.push(w),u.push({i:w,state:m.i,center:M,burg:x.i,name:_,formName:A,fullName:R,color:N,coa:C})}});const d=new FlatQueue,g=[];for(u.forEach(m=>{!m.i||m.removed||c(m)||(l[m.center]=m.i,d.push({e:m.center,province:m.i,state:m.state,p:0},0),g[m.center]=1)});d.length;){const{e:m,p:y,province:k,state:v}=d.pop();r.c[m].forEach(b=>{if(h(b))return;const w=r.h[b]>=20;if(!w&&!r.t[b]||w&&r.state[b]!==v)return;const M=r.h[b]>=70?100:r.h[b]>=50?30:r.h[b]>=20?10:100,x=y+M;x>s||(!g[b]||x<g[b])&&(w&&(l[b]=k),g[b]=x,d.push({e:b,province:k,state:v,p:x},x))})}for(const m of r.i){if(r.burg[m]||h(m))continue;const y=r.c[m].filter(M=>r.state[M]===r.state[m]&&!h(M)).map(M=>l[M]),k=y.filter(M=>M!==l[m]);if(k.length<2)continue;const v=y.filter(M=>M===l[m]).length;if(v>2)continue;const b=k.map(M=>k.reduce((x,S)=>S===M?x+1:x,0)),w=vn(b);v>=w||(l[m]=k[b.indexOf(w)])}const p=Array.from(r.i).filter(m=>r.state[m]&&!l[m]);i.forEach(m=>{if(!m.i||m.removed||m.lock&&!t||!m.provinces?.length)return;const y=m.provinces.map(w=>u[w]?.name),k=[m.name,...y].filter(w=>w&&!/new/i.test(w)),v=()=>{if(k.length<1)return null;const w=oe(k.length-1),M=k.splice(w,1);return M[0]?`New ${M[0]}`:null};let b=p.filter(w=>r.state[w]===m.i&&!l[w]);for(;b.length;){let w=function(q,ce){if(r.f[q]!==r.f[ce])return!1;const ee=[q],he=new Uint8Array(r.i.length),O=r.state[q];for(;ee.length;){const Y=ee.pop();if(Y===ce)return!0;r.c[Y].forEach(ne=>{he[ne]||r.h[ne]<20||r.state[ne]!==O||(ee.push(ne),he[ne]=1)})}return!1};const M=u.length,x=b.find(q=>r.burg[q]),S=x||b[0],T=x?r.burg[x]:0;l[S]=M;const _=[];for(_[S]=1,d.push({e:S,p:0},0);d.length;){const{e:q,p:ce}=d.pop();r.c[q].forEach(ee=>{if(l[ee])return;const he=r.h[ee]>=20;if(r.state[ee]&&r.state[ee]!==m.i)return;const O=he?r.state[ee]===m.i?3:20:r.t[ee]?10:30,Y=ce+O;Y>s||(!_[ee]||Y<_[ee])&&(he&&r.state[ee]===m.i&&(l[ee]=M),_[ee]=Y,d.push({e:ee,p:Y},Y))})}const A=r.culture[S],R=pack.features[r.f[S]],N=lt(m.color),z=b.filter(q=>l[q]===M),E=z.length===R.cells&&!z.find(q=>r.f[q]!==R.i),C=!E&&!z.find(q=>pack.features[r.f[q]].group!=="isle"),B=!E&&!C&&j(.5)&&!w(m.center,S),I=(()=>{const q=B&&j(.8)&&v();return q||(x&&j(.5)?o[T].name:Names.getState(Names.getCultureShort(A),A))})(),P=E?"Island":C?"Islands":B?"Colony":le(this.forms.Wild),D=`${I} ${P}`,H=j(B?.95:E||C?.7:.3),G=H?0:.4,W=Burgs.getType(S,o[T]?.port),Q=COA.generate(m.coa,G,H,W);Q.shield=COA.getShield(A,m.i),u.push({i:M,state:m.i,center:S,burg:T,name:I,formName:P,fullName:D,color:N,coa:Q}),m.provinces.push(M),b=p.filter(q=>r.state[q]===m.i&&!l[q])}}),r.province=l,pack.provinces=u,TIME&&console.timeEnd("generateProvinces")}getPoles(){const n=a=>pack.cells.province[a],t=bc(pack,n);pack.provinces.forEach(a=>{!a.i||a.removed||(a.pole=t[a.i]||[0,0])})}}window.Provinces=new y6;class b6{getNextId(){if(pack.ice.length===0)return 0;const n=pack.ice.map(t=>t.i).sort((t,a)=>t-a);for(let t=0;t<n[n.length-1];t++)if(!n.includes(t))return t;return n[n.length-1]+1}clear(){pack.ice=[]}generate(){this.clear();const{cells:n,features:t}=grid,{temp:a,h:r}=n;Math.random=La(seed);const i=0,o=-8,u=An(a);{const l="iceShield",c=f=>r[f]>=20&&a[f]<=o?l:null,h=yc(grid,c,{polygons:!0});h[l]?.polygons&&h[l].polygons.forEach(f=>{const s=Vr(f,graphWidth,graphHeight);pack.ice.push({i:this.getNextId(),points:s,type:"glacier"})})}for(const l of grid.cells.i){const c=a[l];if(r[l]>=20||c>i||t[n.f[l]].type==="lake"||j(.8))continue;const h=.8+oe()*.4;let f=(1-dr(c,u,1))*.8;n.t[l]===-1&&(f/=1.3);const s=Pe(L(f*h,2),.1,1),[d,g]=grid.points[l],p=hr(l,grid).map(([m,y])=>[L(ja(d,m,s),2),L(ja(g,y,s),2)]);pack.ice.push({i:this.getNextId(),points:p,type:"iceberg",cellId:l,size:s})}}addIceberg(n,t){const[a,r]=grid.points[n],i=hr(n,grid).map(([u,l])=>[L(ja(a,u,t),2),L(ja(r,l,t),2)]),o=this.getNextId();pack.ice.push({i:o,points:i,type:"iceberg",cellId:n,size:t}),redrawIceberg(o)}removeIce(n){const t=pack.ice.findIndex(a=>a.i===n);if(t!==-1){const a=pack.ice.find(r=>r.i===n).type;pack.ice.splice(t,1),a==="glacier"?redrawGlacier(n):redrawIceberg(n)}}randomizeIcebergShape(n){const t=pack.ice.find(f=>f.i===n);if(!t)return;const a=t.cellId,r=t.size,[i,o]=grid.points[a],u=V(grid.cells.i),l=grid.points[u],h=hr(u,grid).map(f=>[f[0]-l[0],f[1]-l[1]]).map(f=>[L(i+f[0]*r,2),L(o+f[1]*r,2)]);t.points=h}changeIcebergSize(n,t){const a=pack.ice.find(s=>s.i===n);if(!a)return;const r=a.cellId,[i,o]=grid.points[r],u=a.size,l=a.points.flat(),c=[];for(;l.length;)c.push(l.splice(0,2));const f=c.map(s=>[(s[0]-i)/u,(s[1]-o)/u]).map(s=>[L(i+s[0]*t,2),L(o+s[1]*t,2)]);a.points=f,a.size=t}}window.Ice=new b6;const v6=()=>{TIME&&console.time("drawBorders");const{cells:e,vertices:n}=pack,t=[],a=[],r={},i=l=>e.h[l]>=20;for(let l=0;l<e.i.length;l++){if(!e.state[l])continue;const c=e.province[l],h=e.state[l];if(c){const s=e.c[l].find(d=>{const g=e.province[d];return g&&c>g&&!r[`prov-${c}-${g}-${l}`]&&e.state[d]===h});if(s!==void 0){const g=o({type:"province",fromCell:l,toCell:s,addToChecked:p=>{r[`prov-${c}-${e.province[s]}-${p}`]=!0}});if(g){a.push(g),l--;continue}}}const f=e.c[l].find(s=>{const d=e.state[s];return i(s)&&h>d&&!r[`state-${h}-${d}-${l}`]});if(f!==void 0){const d=o({type:"state",fromCell:l,toCell:f,addToChecked:g=>{r[`state-${h}-${e.state[f]}-${g}`]=!0}});d&&(t.push(d),l--)}}svg.select("#borders").selectAll("path").remove(),svg.select("#stateBorders").append("path").attr("d",t.join(" ")),svg.select("#provinceBorders").append("path").attr("d",a.join(" "));function o({type:l,fromCell:c,toCell:h,addToChecked:f}){const s=k=>e[l][k],d=k=>k<e.i.length&&s(k)===s(c),g=k=>k<e.i.length&&s(k)===s(h);f(c);const p=e.v[c].find(k=>n.c[k].some(v=>i(v)&&g(v)));if(p===void 0)return null;const y=u({vertices:n,startingVertex:p,checkCell:d,checkVertex:k=>n.c[k].some(d)&&n.c[k].some(v=>i(v)&&g(v)),addToChecked:f});return y.length>1?`M${y.map(k=>n.p[k]).join(" ")}`:null}function u({vertices:l,startingVertex:c,checkCell:h,checkVertex:f,addToChecked:s}){let d=[],g=c;const p=l.c.length;for(let m=0;m<2;m++){d=[];for(let y=0;y<p;y++){const k=d.at(-1),v=g;d.push(v);const b=l.c[v];b.map(s);const[w,M,x]=b.map(h),[S,T,_]=l.v[v].map(f),[A,R,N]=l.v[v];if(S&&A!==k&&w!==M?g=A:T&&R!==k&&M!==x?g=R:_&&N!==k&&w!==x&&(g=N),g===v||g===c){g===c&&d.push(c),c=g;break}}}return d}TIME&&console.timeEnd("drawBorders")};window.drawBorders=v6;const k6=()=>{TIME&&console.time("drawBurgIcons"),M6();for(const{name:e}of options.burgs.groups){const n=pack.burgs.filter(o=>o.group===e&&!o.removed);if(!n.length)continue;const t=document.querySelector(`#burgIcons > g#${e}`);if(!t)continue;const a=t.dataset.icon||"#icon-circle";t.innerHTML=n.map(o=>`<use id="burg${o.i}" data-id="${o.i}" href="${a}" x="${o.x}" y="${o.y}"></use>`).join("");const r=n.filter(o=>o.port);if(!r.length)continue;const i=document.querySelector(`#anchors > g#${e}`);i&&(i.innerHTML=r.map(o=>`<use id="anchor${o.i}" data-id="${o.i}" href="#icon-anchor" x="${o.x}" y="${o.y}"></use>`).join(""))}TIME&&console.timeEnd("drawBurgIcons")},w6=e=>{const n=burgIcons.select(`#${e.group}`);if(n.empty()){drawBurgIcons();return}Dp(e.i);const t=n.attr("data-icon")||"#icon-circle";burgIcons.select(`#${e.group}`).append("use").attr("href",t).attr("id",`burg${e.i}`).attr("data-id",e.i).attr("x",e.x).attr("y",e.y),e.port&&anchors.select(`#${e.group}`).append("use").attr("href","#icon-anchor").attr("id",`anchor${e.i}`).attr("data-id",e.i).attr("x",e.x).attr("y",e.y)},Dp=e=>{const n=document.getElementById(`burg${e}`);n&&n.remove();const t=document.getElementById(`anchor${e}`);t&&t.remove()};function M6(){document.querySelectorAll("g#burgIcons > g").forEach(a=>{style.burgIcons[a.id]=Array.from(a.attributes).reduce((r,i)=>(r[i.name]=i.value,r),{}),a.remove()}),document.querySelectorAll("g#anchors > g").forEach(a=>{style.anchors[a.id]=Array.from(a.attributes).reduce((r,i)=>(r[i.name]=i.value,r),{}),a.remove()});const e=style.burgIcons.town||Object.values(style.burgIcons)[0]||{},n=style.anchors.town||Object.values(style.anchors)[0]||{},t=[...options.burgs.groups].sort((a,r)=>a.order-r.order);for(const{name:a}of t){const r=burgIcons.append("g"),i=style.burgIcons[a]||e;Object.entries(i).forEach(([l,c])=>{r.attr(l,c)}),r.attr("id",a);const o=anchors.append("g"),u=style.anchors[a]||n;Object.entries(u).forEach(([l,c])=>{o.attr(l,c)}),o.attr("id",a)}}window.drawBurgIcons=k6;window.drawBurgIcon=w6;window.removeBurgIcon=Dp;const S6=()=>{TIME&&console.time("drawBurgLabels"),A6();for(const{name:e}of options.burgs.groups){const n=pack.burgs.filter(i=>i.group===e&&!i.removed);if(!n.length)continue;const t=burgLabels.select(`#${e}`);if(t.empty())continue;const a=t.attr("data-dx")||0,r=t.attr("data-dy")||0;t.selectAll("text").data(n).enter().append("text").attr("text-rendering","optimizeSpeed").attr("id",i=>`burgLabel${i.i}`).attr("data-id",i=>i.i).attr("x",i=>i.x).attr("y",i=>i.y).attr("dx",`${a}em`).attr("dy",`${r}em`).text(i=>i.name)}TIME&&console.timeEnd("drawBurgLabels")},_6=e=>{const n=burgLabels.select(`#${e.group}`);if(n.empty()){drawBurgLabels();return}const t=n.attr("data-dx")||0,a=n.attr("data-dy")||0;Hp(e.i),n.append("text").attr("text-rendering","optimizeSpeed").attr("id",`burgLabel${e.i}`).attr("data-id",e.i).attr("x",e.x).attr("y",e.y).attr("dx",`${t}em`).attr("dy",`${a}em`).text(e.name)},Hp=e=>{const n=document.getElementById(`burgLabel${e}`);n&&n.remove()};function A6(){document.querySelectorAll("g#burgLabels > g").forEach(t=>{style.burgLabels[t.id]=Array.from(t.attributes).reduce((a,r)=>(a[r.name]=r.value,a),{}),t.remove()});const e=style.burgLabels.town||Object.values(style.burgLabels)[0]||{},n=[...options.burgs.groups].sort((t,a)=>t.order-a.order);for(const{name:t}of n){const a=burgLabels.append("g"),r=style.burgLabels[t]||e;Object.entries(r).forEach(([i,o])=>{a.attr(i,o)}),a.attr("id",t)}}window.drawBurgLabels=S6;window.drawBurgLabel=_6;window.removeBurgLabel=Hp;const x6=()=>{TIME&&console.time("drawEmblems");const{states:e,provinces:n,burgs:t}=pack,a=e.filter(y=>y.i&&!y.removed&&y.coa&&y.coa.size!==0),r=n.filter(y=>y.i&&!y.removed&&y.coa&&y.coa.size!==0),i=t.filter(y=>y.i&&!y.removed&&y.coa&&y.coa.size!==0),o=()=>{const y=Pe((graphHeight+graphWidth)/40,10,100),k=1+a.length/100-(15-a.length)/200,v=+emblems.select("#stateEmblems").attr("data-size")||1;return L(y/k*v)},u=()=>{const y=Pe((graphHeight+graphWidth)/100,5,70),k=1+r.length/1e3-(115-r.length)/1e3,v=+emblems.select("#provinceEmblems").attr("data-size")||1;return L(y/k*v)},c=(()=>{const y=Pe((graphHeight+graphWidth)/185,2,50),k=1+i.length/1e3-(450-i.length)/1e3,v=+emblems.select("#burgEmblems").attr("data-size")||1;return L(y/k*v)})(),h=i.map(y=>{const{x:k,y:v}=y,b=y.coa.size||1,w=c*b/2;return{type:"burg",i:y.i,x:y.coa.x||k,y:y.coa.y||v,size:b,shift:w}}),f=u(),s=r.map(y=>{const[k,v]=y.pole||pack.cells.p[y.center],b=y.coa.size||1,w=f*b/2;return{type:"province",i:y.i,x:y.coa.x||k,y:y.coa.y||v,size:b,shift:w}}),d=o(),g=a.map(y=>{const[k,v]=y.pole||pack.cells.p[y.center],b=y.coa.size||1,w=d*b/2;return{type:"state",i:y.i,x:y.coa.x||k,y:y.coa.y||v,size:b,shift:w}}),p=h.concat(s).concat(g),m=Sg(p).alphaMin(.6).alphaDecay(.2).velocityDecay(.6).force("collision",Mg().radius(y=>y.shift)).stop();qi(()=>{const y=Math.ceil(Math.log(m.alphaMin())/Math.log(1-m.alphaDecay()));for(let S=0;S<y;++S)m.tick();const v=p.filter(S=>S.type==="burg").map(S=>`<use data-i="${S.i}" x="${L(S.x-S.shift)}" y="${L(S.y-S.shift)}" width="${S.size}em" height="${S.size}em"/>`).join("");emblems.select("#burgEmblems").attr("font-size",c).html(v);const w=p.filter(S=>S.type==="province").map(S=>`<use data-i="${S.i}" x="${L(S.x-S.shift)}" y="${L(S.y-S.shift)}" width="${S.size}em" height="${S.size}em"/>`).join("");emblems.select("#provinceEmblems").attr("font-size",f).html(w);const x=p.filter(S=>S.type==="state").map(S=>`<use data-i="${S.i}" x="${L(S.x-S.shift)}" y="${L(S.y-S.shift)}" width="${S.size}em" height="${S.size}em"/>`).join("");emblems.select("#stateEmblems").attr("font-size",d).html(x),invokeActiveZooming()}),TIME&&console.timeEnd("drawEmblems")},T6=e=>{if(e==="burgEmblems")return[pack.burgs,"burg"];if(e==="provinceEmblems")return[pack.provinces,"province"];if(e==="stateEmblems")return[pack.states,"state"];throw new Error(`Unknown emblem type: ${e}`)},z6=async e=>{const[n,t]=T6(e.id);for(const a of e.children){const r=+a.dataset.i,i=`${t}COA${r}`;COArenderer.trigger(i,n[r].coa),a.setAttribute("href",`#${i}`)}};window.drawEmblems=x6;window.renderGroupCOAs=z6;const C6=()=>{TIME&&console.time("drawFeatures");const e={paths:[],landMask:[],waterMask:['<rect x="0" y="0" width="100%" height="100%" fill="white" />'],coastline:{},lakes:{}};for(const n of pack.features)if(!(!n||n.type==="ocean"))if(e.paths.push(`<path d="${Op(n)}" id="feature_${n.i}" data-f="${n.i}"></path>`),n.type==="lake"){e.landMask.push(`<use href="#feature_${n.i}" data-f="${n.i}" fill="black"></use>`);const t=n.group||"freshwater";e.lakes[t]||(e.lakes[t]=[]),e.lakes[t].push(`<use href="#feature_${n.i}" data-f="${n.i}"></use>`)}else{e.landMask.push(`<use href="#feature_${n.i}" data-f="${n.i}" fill="white"></use>`),e.waterMask.push(`<use href="#feature_${n.i}" data-f="${n.i}" fill="black"></use>`);const t=n.group==="lake_island"?"lake_island":"sea_island";e.coastline[t]||(e.coastline[t]=[]),e.coastline[t].push(`<use href="#feature_${n.i}" data-f="${n.i}"></use>`)}defs.select("#featurePaths").html(e.paths.join("")),defs.select("#land").html(e.landMask.join("")),defs.select("#water").html(e.waterMask.join("")),coastline.selectAll("g").each(function(){const n=e.coastline[this.id]||[];_e(this).html(n.join(""))}),lakes.selectAll("g").each(function(){const n=e.lakes[this.id]||[];_e(this).html(n.join(""))}),TIME&&console.timeEnd("drawFeatures")};function Op(e){const n=e.vertices.map(o=>pack.vertices.p[o]);if(n.some(o=>o===void 0))return ERROR&&console.error("Undefined point in getFeaturePath"),"";const t=simplify(n,.3),a=Vr(t,graphWidth,graphHeight,1),r=kn().curve(cs);return`${zn(r(a)||"")}Z`}window.drawFeatures=C6;window.getFeaturePath=Op;const E6=()=>{TIME&&console.time("drawHeightmap");const e=terrs.select("#oceanHeights"),n=terrs.select("#landHeights");e.selectAll("*").remove(),n.selectAll("*").remove();const t=new Array(101),{cells:a,vertices:r}=grid,i=new Uint8Array(a.i.length),o=Array.from(a.i).sort((h,f)=>a.h[h]-a.h[f]),u=!!+e.attr("data-render");if(u){const h=+e.attr("skip")+1||1,f=+e.attr("relax")||0,s=e.attr("curve")||"curveBasisClosed",d=kn().curve($f[s]);let g=0;for(const p of o){const m=a.h[p];if(m>g&&(g+=h),m<g)continue;if(g>=20)break;if(i[p]||!a.c[p].some(w=>a.h[w]<m))continue;const k=a.v[p].find(w=>r.c[w].some(M=>a.h[M]<m)),v=l(a,r,k,m,i);if(v.length<3)continue;const b=c(v,f).map(w=>r.p[w]);t[m]||(t[m]=""),t[m]+=zn(d(b)||"")}}{const h=+n.attr("skip")+1||1,f=+n.attr("relax")||0,s=n.attr("curve")||"curveBasisClosed",d=kn().curve($f[s]);let g=20;for(const p of o){const m=a.h[p];if(m>g&&(g+=h),m<g)continue;if(g>100)break;if(i[p]||!a.c[p].some(w=>a.h[w]<m))continue;const k=a.v[p].find(w=>r.c[w].some(M=>a.h[M]<m)),v=l(a,r,k,m,i);if(v.length<3)continue;const b=c(v,f).map(w=>r.p[w]);t[m]||(t[m]=""),t[m]+=zn(d(b)||"")}}for(const h of Oe(0,101)){const f=h<20?e:n,s=getColorScheme(f.attr("scheme"));if(h===0&&u&&f.append("rect").attr("x",0).attr("y",0).attr("width",graphWidth).attr("height",graphHeight).attr("fill",s(1)),h===20&&f.append("rect").attr("x",0).attr("y",0).attr("width",graphWidth).attr("height",graphHeight).attr("fill",s(.8)),t[h]&&t[h].length>=10){const d=+f.attr("terracing")/10||0,g=getColor(h,s);d&&f.append("path").attr("d",t[h]).attr("transform","translate(.7,1.4)").attr("fill",Ge(g).darker(d).toString()).attr("data-height",h),f.append("path").attr("d",t[h]).attr("fill",g).attr("data-height",h)}}function l(h,f,s,d,g){const p=f.c.length,m=h.i.length,y=[];for(let k=0,v=s;k===0||v!==s&&k<p;k++){const b=y[y.length-1];y.push(v);const w=f.c[v];w.filter(_=>h.h[_]===d).forEach(_=>{g[_]=1});const M=w[0]>=m||h.h[w[0]]<d,x=w[1]>=m||h.h[w[1]]<d,S=w[2]>=m||h.h[w[2]]<d,T=f.v[v];if(T[0]!==b&&M!==x?v=T[0]:T[1]!==b&&x!==S?v=T[1]:T[2]!==b&&M!==S&&(v=T[2]),v===y[y.length-1]){ERROR&&console.error("Next vertex is not found");break}}return y}function c(h,f){if(!f)return h;const s=f+1;return h.filter((d,g)=>g%s===0)}TIME&&console.timeEnd("drawHeightmap")};window.drawHeightmap=E6;const N6=()=>{TIME&&console.time("drawIce"),ice.selectAll("*").remove();let e="";pack.ice.forEach(n=>{n.type==="glacier"?e+=Gp(n):n.type==="iceberg"&&(e+=qp(n))}),ice.html(e),TIME&&console.timeEnd("drawIce")},R6=e=>{TIME&&console.time("redrawIceberg");const n=pack.ice.find(a=>a.i===e);let t=ice.selectAll(`polygon[data-id="${e}"]:not([type="glacier"])`);if(!n&&!t.empty())t.remove();else if(n){if(t.empty()){const a=qp(n);ice.node().insertAdjacentHTML("beforeend",a),t=ice.selectAll(`polygon[data-id="${e}"]:not([type="glacier"])`)}t.attr("points",n.points),t.attr("transform",n.offset?`translate(${n.offset[0]},${n.offset[1]})`:null)}TIME&&console.timeEnd("redrawIceberg")},B6=e=>{TIME&&console.time("redrawGlacier");const n=pack.ice.find(a=>a.i===e);let t=ice.selectAll(`polygon[data-id="${e}"][type="glacier"]`);if(!n&&!t.empty())t.remove();else if(n){if(t.empty()){const a=Gp(n);ice.node().insertAdjacentHTML("beforeend",a),t=ice.selectAll(`polygon[data-id="${e}"][type="glacier"]`)}t.attr("points",n.points),t.attr("transform",n.offset?`translate(${n.offset[0]},${n.offset[1]})`:null)}TIME&&console.timeEnd("redrawGlacier")};function Gp(e){return`<polygon points="${e.points}" type="glacier" data-id="${e.i}" ${e.offset?`transform="translate(${e.offset[0]},${e.offset[1]})"`:""}/>`}function qp(e){return`<polygon points="${e.points}" data-id="${e.i}" ${e.offset?`transform="translate(${e.offset[0]},${e.offset[1]})"`:""}/>`}window.drawIce=N6;window.redrawIceberg=R6;window.redrawGlacier=B6;const Uf={bubble:(e,n)=>`<path d="M6,19 l9,10 L24,19" fill="${n}" stroke="none" /><circle cx="15" cy="15" r="10" fill="${e}" stroke="${n}"/>`,pin:(e,n)=>`<path d="m 15,3 c -5.5,0 -9.7,4.09 -9.7,9.3 0,6.8 9.7,17 9.7,17 0,0 9.7,-10.2 9.7,-17 C 24.7,7.09 20.5,3 15,3 Z" fill="${e}" stroke="${n}"/>`,square:(e,n)=>`<path d="m 20,25 -5,4 -5,-4 z" fill="${n}"/><path d="M 5,5 H 25 V 25 H 5 Z" fill="${e}" stroke="${n}"/>`,squarish:(e,n)=>`<path d="m 5,5 h 20 v 20 h -6 l -4,4 -4,-4 H 5 Z" fill="${e}" stroke="${n}" />`,diamond:(e,n)=>`<path d="M 2,15 15,1 28,15 15,29 Z" fill="${e}" stroke="${n}" />`,hex:(e,n)=>`<path d="M 15,29 4.61,21 V 9 L 15,3 25.4,9 v 12 z" fill="${e}" stroke="${n}" />`,hexy:(e,n)=>`<path d="M 15,29 6,21 5,8 15,4 25,8 24,21 Z" fill="${e}" stroke="${n}" />`,shieldy:(e,n)=>`<path d="M 15,29 6,21 5,7 c 0,0 5,-3 10,-3 5,0 10,3 10,3 l -1,14 z" fill="${e}" stroke="${n}" />`,shield:(e,n)=>`<path d="M 4.6,5.2 H 25 v 6.7 A 20.3,20.4 0 0 1 15,29 20.3,20.4 0 0 1 4.6,11.9 Z" fill="${e}" stroke="${n}" />`,pentagon:(e,n)=>`<path d="M 4,16 9,4 h 12 l 5,12 -11,13 z" fill="${e}" stroke="${n}" />`,heptagon:(e,n)=>`<path d="M 15,29 6,22 4,12 10,4 h 10 l 6,8 -2,10 z" fill="${e}" stroke="${n}" />`,circle:(e,n)=>`<circle cx="15" cy="15" r="11" fill="${e}" stroke="${n}" />`,no:()=>""},P6=(e="bubble",n="#fff",t="#000")=>(Uf[e]||Uf.bubble)(n,t);function Fp(e,n=1){const{i:t,icon:a,x:r,y:i,dx:o=50,dy:u=50,px:l=12,size:c=30,pin:h,fill:f,stroke:s}=e,d=`marker${t}`,g=n?Math.max(L(c/5+24/scale,2),1):c,p=L(r-g/2,1),m=L(i-g,1),y=a.startsWith("http")||a.startsWith("data:image");return`
    <svg id="${d}" viewbox="0 0 30 30" width="${g}" height="${g}" x="${p}" y="${m}">
      <g>${P6(h,f,s)}</g>
      <text x="${o}%" y="${u}%" font-size="${l}px" >${y?"":a}</text>
      <image x="${o/2}%" y="${u/2}%" width="${l}px" height="${l}px" href="${y?a:""}" />
    </svg>`}const I6=()=>{TIME&&console.time("drawMarkers");const e=+markers.attr("rescale"),a=(+markers.attr("pinned")?pack.markers.filter(r=>r.pinned):pack.markers).map(r=>Fp(r,e));markers.html(a.join("")),TIME&&console.timeEnd("drawMarkers")};window.drawMarkers=I6;window.drawMarker=Fp;const $6=()=>{TIME&&console.time("drawMilitary"),armies.selectAll("g").remove(),pack.states.filter(e=>e.i&&!e.removed).forEach(e=>{drawRegiments(e.military||[],e.i)}),TIME&&console.timeEnd("drawMilitary")},L6=(e,n)=>{const t=+armies.attr("box-size"),a=s=>s.n?t*4:t*6,r=t*2,i=s=>L(s.x-a(s)/2,2),o=s=>L(s.y-t,2),u=pack.states[n]?.color,l=u&&u[0]==="#"?u:"#999",c=Ge(l).darker().formatHex(),f=armies.append("g").attr("id",`army${n}`).attr("fill",l).attr("color",c).selectAll("g").data(e).enter().append("g").attr("id",s=>`regiment${n}-${s.i}`).attr("data-name",s=>s.name).attr("data-state",n).attr("data-id",s=>s.i).attr("transform",s=>s.angle?`rotate(${s.angle})`:null).attr("transform-origin",s=>`${s.x}px ${s.y}px`);f.append("rect").attr("x",s=>i(s)).attr("y",s=>o(s)).attr("width",s=>a(s)).attr("height",r),f.append("text").attr("x",s=>s.x).attr("y",s=>s.y).attr("text-rendering","optimizeSpeed").text(s=>Military.getTotal(s)),f.append("rect").attr("fill","currentColor").attr("x",s=>i(s)-r).attr("y",s=>o(s)).attr("width",r).attr("height",r),f.append("text").attr("class","regimentIcon").attr("text-rendering","optimizeSpeed").attr("x",s=>i(s)-t).attr("y",s=>s.y).text(s=>s.icon.startsWith("http")||s.icon.startsWith("data:image")?"":s.icon),f.append("image").attr("class","regimentImage").attr("x",s=>i(s)-r).attr("y",s=>o(s)).attr("height",r).attr("width",r).attr("href",s=>s.icon.startsWith("http")||s.icon.startsWith("data:image")?s.icon:"")},K6=(e,n)=>{const t=+armies.attr("box-size"),a=e.n?t*4:t*6,r=t*2,i=L(e.x-a/2,2),o=L(e.y-t,2);let u=armies.select(`g#army${n}`);if(!u.size()){const c=pack.states[n]?.color,h=c&&c[0]==="#"?c:"#999",f=Ge(h).darker().formatHex();u=armies.append("g").attr("id",`army${n}`).attr("fill",h).attr("color",f)}const l=u.append("g").attr("id",`regiment${n}-${e.i}`).attr("data-name",e.name).attr("data-state",n).attr("data-id",e.i).attr("transform",`rotate(${e.angle||0})`).attr("transform-origin",`${e.x}px ${e.y}px`);l.append("rect").attr("x",i).attr("y",o).attr("width",a).attr("height",r),l.append("text").attr("x",e.x).attr("y",e.y).attr("text-rendering","optimizeSpeed").text(Military.getTotal(e)),l.append("rect").attr("fill","currentColor").attr("x",i-r).attr("y",o).attr("width",r).attr("height",r),l.append("text").attr("class","regimentIcon").attr("text-rendering","optimizeSpeed").attr("x",i-t).attr("y",e.y).text(e.icon.startsWith("http")||e.icon.startsWith("data:image")?"":e.icon),l.append("image").attr("class","regimentImage").attr("x",i-r).attr("y",o).attr("height",r).attr("width",r).attr("href",e.icon.startsWith("http")||e.icon.startsWith("data:image")?e.icon:"")},D6=(e,n,t)=>{const a=armies.select(`g#army${e.state}`).select(`g#regiment${e.state}-${e.i}`);if(!a.size())return;const r=Math.hypot(e.x-n,e.y-t)*8;e.x=n,e.y=t;const i=+armies.attr("box-size"),o=e.n?i*4:i*6,u=i*2,l=f=>L(f-o/2,2),c=f=>L(f-i,2),h=pl().duration(r).ease(fu);a.select("rect").transition(h).attr("x",l(n)).attr("y",c(t)),a.select("text").transition(h).attr("x",n).attr("y",t),a.selectAll("rect:nth-of-type(2)").transition(h).attr("x",l(n)-u).attr("y",c(t)),a.select(".regimentIcon").transition(h).attr("x",l(n)-i).attr("y",t).attr("height","6").attr("width","6"),a.select(".regimentImage").transition(h).attr("x",l(n)-u).attr("y",c(t)).attr("height","6").attr("width","6")};window.drawMilitary=$6;window.drawRegiments=L6;window.drawRegiment=K6;window.moveRegiment=D6;const H6=()=>{TIME&&console.time("drawRelief"),terrain.selectAll("*").remove();const e=pack.cells,n=Number(terrain.attr("density"))||.4,t=2*(Number(terrain.attr("size"))||1),a=.2*t,r=[];for(const h of e.i){let f=function(){const w=biomesData.iconsDensity[p]/100,M=2/w/n;if(!(Math.random()>w*10))for(const[x,S]of window.poissonDiscSampler(y,v,k,b,M)){if(!Fu(m,[x,S]))continue;let T=(4+Math.random())*t;const _=o(h,biomesData.icons[p]);_==="#relief-grass-1"&&(T*=1.2),r.push({i:_,x:L(x-T,2),y:L(S-T,2),s:L(T*2,2)})}},s=function(){const w=2/n,[M,x]=d(h,g);for(const[S,T]of window.poissonDiscSampler(y,v,k,b,w))Fu(m,[S,T])&&r.push({i:M,x:L(S-x,2),y:L(T-x,2),s:L(x*2,2)})},d=function(w,M){const x=grid.cells.temp[pack.cells.g[w]],S=M>70&&x<0?"mountSnow":M>70?"mount":"hill",T=M>70?(M-45)*a:Pe((M-40)*a,3,6);return[c(S),T]};const g=e.h[h];if(g<20||e.r[h])continue;const p=e.biome[h];if(g<50&&biomesData.iconsDensity[p]===0)continue;const m=getPackPolygon(h),[y,k]=Tt(m,w=>w[0]),[v,b]=Tt(m,w=>w[1]);g<50?f():s()}r.sort((h,f)=>h.y+h.s-(f.y+f.s));const i=[];for(const h of r)i.push(`<use href="${h.i}" x="${h.x}" y="${h.y}" width="${h.s}" height="${h.s}"/>`);terrain.html(i.join("")),TIME&&console.timeEnd("drawRelief");function o(h,f){let s=f[Math.floor(Math.random()*f.length)];const d=grid.cells.temp[pack.cells.g[h]];return s==="conifer"&&d<0&&(s="coniferSnow"),c(s)}function u(h){switch(h){case"mount":return oe(2,7);case"mountSnow":return oe(1,6);case"hill":return oe(2,5);case"conifer":return 2;case"coniferSnow":return 1;case"swamp":return oe(2,3);case"cactus":return oe(1,3);case"deadTree":return oe(1,2);default:return 2}}function l(h){switch(h){case"mountSnow":return"mount";case"vulcan":return"mount";case"coniferSnow":return"conifer";case"cactus":return"dune";case"deadTree":return"dune";default:return h}}function c(h){const f=terrain.attr("set")||"simple";return f==="simple"?`#relief-${l(h)}-1`:f==="colored"?`#relief-${h}-${u(h)}`:f==="gray"?`#relief-${h}-${u(h)}-bw`:`#relief-${l(h)}-1`}};window.drawReliefIcons=H6;const O6=(e,n)=>{if(!e.size()||e.style("display")==="none")return;const t=distanceUnitInput.value,a=+e.attr("data-bar-size"),r=G6(e,n);e.select("#scaleBarContent").remove();const i=e.append("g").attr("id","scaleBarContent"),o=i.append("g");o.append("line").attr("x1",.5).attr("y1",0).attr("x2",r+a-.5).attr("y2",0).attr("stroke-width",a).attr("stroke","white"),o.append("line").attr("x1",0).attr("y1",a).attr("x2",r+a).attr("y2",a).attr("stroke-width",a).attr("stroke","#3d3d3d"),o.append("line").attr("x1",0).attr("y1",0).attr("x2",r+a).attr("y2",0).attr("stroke-width",L(a*3,2)).attr("stroke-dasharray",`${a} ${L(r/5-a,2)}`).attr("stroke","#3d3d3d");const u=i.append("g").attr("text-anchor","middle").attr("font-family","var(--serif)");u.selectAll("text").data(Oe(0,6)).enter().append("text").attr("text-rendering","optimizeSpeed").attr("x",h=>L(h*r/5,2)).attr("y",0).attr("dy","-.6em").text(h=>L(h*r/5*distanceScale/n)+(h<5?"":` ${t}`));const l=e.attr("data-label");l&&u.append("text").attr("text-rendering","optimizeSpeed").attr("x",(r+1)/2).attr("dy",".6em").attr("dominant-baseline","text-before-edge").text(l);const c=e.select("#scaleBarBack");if(c.size()){const h=i.node().getBBox(),f=+c.attr("data-top")||0,s=+c.attr("data-left")||0,d=+c.attr("data-right")||0,g=+c.attr("data-bottom")||0;e.select("#scaleBarBack").attr("x",-s).attr("y",-f).attr("width",h.width+d).attr("height",h.height+g)}};function G6(e,n){let r=100*+e.attr("data-bar-size")*distanceScale/n;return r>900?r=L(r,-3):r>90?r=L(r,-2):r>9?r=L(r,-1):r=L(r),r*n/distanceScale}const q6=(e,n,t)=>{if(!e.select("rect").size()||e.style("display")==="none")return;const a=+e.attr("data-x")||99,r=+e.attr("data-y")||99,i=e.select("rect").node().getBBox(),o=L(n*a/100-i.width+10),u=L(t*r/100-i.height+20);e.attr("transform",`translate(${o},${u})`)};window.drawScaleBar=O6;window.fitScaleBar=q6;const F6=e=>{TIME&&console.time("drawStateLabels");const n=labels.style("display");labels.style("display",null);const{cells:t,states:a,features:r}=pack,i=t.state,u=y(9),l=5,c=5,h=300,f=d(),s=g();p(s),labels.style("display",n);function d(){const _=[];for(const A of a){if(!A.i||A.removed||A.lock||e&&!e.includes(A.i))continue;const R=m(A.cells),N=A.cells/20,[z,E]=A.pole,C=u.map(({angle:D,dx:H,dy:G})=>{const{length:W,x:Q,y:q}=k({stateId:A.i,x0:z,y0:E,dx:H,dy:G,maxLakeSize:N,offset:R});return{angle:D,length:W,x:Q,y:q}}),[B,I]=v(C),P=[[B.x,B.y],A.pole,[I.x,I.y]];B.x>I.x&&P.reverse(),DEBUG.stateLabels&&(ir(A.pole,{color:"black",radius:1}),Lp(P,{color:"black",width:.2})),_.push([A.i,P])}return _}function g(){const A=_e("g#labels > g#states").append("text").attr("x",0).attr("y",0).text("Example"),R=A.node().getComputedTextLength()/7;return A.remove(),R}function p(_){const A=options.stateLabelsMode||"auto",R=kn().curve(kp),N=_e("g#labels > g#states"),z=_e("defs > g#deftemp > g#textPaths");for(const[E,C]of f){const B=a[E];if(!B.i||B.removed)throw new Error("State must not be neutral or removed");if(C.length<2)throw new Error("Label path must have at least 2 points");N.select(`#stateLabel${E}`).remove(),z.select(`#textPath_stateLabel${E}`).remove();const I=z.append("path").attr("d",zn(R(C)||"")).attr("id",`textPath_stateLabel${E}`),P=I.node().getTotalLength()/_,[D,H]=S(A,B.name,B.fullName,P),G=vn(D.map(we=>we.length))||0;if(P&&P<G){const[we,Z]=C.at(0),[me,rt]=C.at(-1),[sn,Wr]=[(me-we)/2,(rt-Z)/2],Zr=G/P;C[0]=[we+sn-sn*Zr,Z+Wr-Wr*Zr],C[C.length-1]=[me-sn+sn*Zr,rt-Wr+Wr*Zr],I.attr("d",zn(R(C)||""))}const W=N.append("text").attr("text-rendering","optimizeSpeed").attr("id",`stateLabel${E}`).append("textPath").attr("startOffset","50%").attr("font-size",`${H}%`).node(),Q=(D.length-1)/-2,q=D.map((we,Z)=>`<tspan x="0" dy="${Z?1:Q}em">${we}</tspan>`);W.insertAdjacentHTML("afterbegin",q.join(""));const{width:ce,height:ee}=W.getBBox();if(W.setAttribute("href",`#textPath_stateLabel${E}`),A==="full"||D.length===1)continue;const[[he,O],[Y,ne]]=[C.at(0),C.at(-1)],K=Math.atan2(ne-O,Y-he);if(T(W,K,ce/2,ee/2,i,E))continue;const se=P>B.fullName.length*1.8?B.fullName:B.name;W.innerHTML=`<tspan x="0">${se}</tspan>`;const Be=Pe(L(P/se.length*50),50,130);W.setAttribute("font-size",`${Be}%`)}}function m(_){return _<40?0:_<200?5:10}function y(_){const A=[],R=Math.PI/180;for(let N=0;N<360;N+=_){const z=Math.cos(N*R),E=Math.sin(N*R);A.push({angle:N,dx:z,dy:E})}return A}function k({stateId:_,x0:A,y0:R,dx:N,dy:z,maxLakeSize:E,offset:C}){let B={length:0,x:A,y:R};for(let H=l;H<h;H+=c){const[G,W]=[A+H*N,R+H*z],Q=[G+-z*C,W+N*C],q=[G+z*C,W+-N*C];if(DEBUG.stateLabels&&(ir([G,W],{color:I(G,W)?"blue":"red",radius:.8}),ir(Q,{color:I(...Q)?"blue":"red",radius:.4}),ir(q,{color:I(...q)?"blue":"red",radius:.4})),!(I(G,W)&&I(...Q)&&I(...q)))break;B={length:H,x:G,y:W}}return B;function I(H,G){if(H<0||H>graphWidth||G<0||G>graphHeight)return!1;const W=Mo(H,G,void 0,pack),Q=r[t.f[W]];return Q.type==="lake"?P(Q)||D(Q):i[W]===_}function P(H){return H.shoreline.every(G=>i[G]===_)}function D(H){return H.cells<=E}}function v(_){let A=null,R=-1/0;for(let N=0;N<_.length;N++){const z=_[N].length*b(_[N].angle);for(let E=N+1;E<_.length;E++){const C=_[E].length*b(_[E].angle),B=(z+C)*w(_[N].angle,_[E].angle);B>R&&(R=B,A=[_[N],_[E]])}}return A}function b(_){const A=Math.abs(_%180),R=Math.abs(A-90)/90;return R===1?1:R>=.75?.9:R>=.5?.6:R>=.25?.5:R>=.15?.2:.1}function w(_,A){const R=M(_,A),N=x(_,A);return R===180?1:R<90?0:R<120?.6*N:R<140?.7*N:R<160?.8*N:N}function M(_,A){let R=Math.abs(_-A)%360;return R>180&&(R=360-R),R}function x(_,A){const R=Math.abs(_%180-90),N=Math.abs(A%180-90);return 1-Math.abs(R-N)/90}function S(_,A,R,N){if(_==="short")return z();if(N>R.length*2)return E();return C();function z(){const B=N/A.length;return[[A],Pe(L(B*60),50,150)]}function E(){const B=N/R.length;return[[R],Pe(L(B*70),70,170)]}function C(){const B=Rp(R),I=vn(B.map(D=>D.length))||0,P=N/I;return[B,Pe(L(P*60),70,150)]}}function T(_,A,R,N,z,E){const C=_.getBBox(),[B,I]=[C.x+C.width/2,C.y+C.height/2],P=[[-R,-N],[+R,-N],[+R,N],[-R,N],[0,N],[0,-N]],D=Math.sin(A),H=Math.cos(A),G=P.map(([Q,q])=>[B+Q*H-q*D,I+Q*D+q*H]);let W=0;for(const[Q,q]of G)if(z[Mo(Q,q,void 0,pack)]===E&&W++,W>4)return!0;return!1}TIME&&console.timeEnd("drawStateLabels")};window.drawStateLabels=F6;const U6=()=>{TIME&&console.time("drawTemperature"),temperature.selectAll("*").remove();const e=kn().curve(cs),n=Ur(Sm),t=+Ae("temperatureEquatorOutput").max,a=+Ae("temperatureEquatorOutput").min,r=t-a,{cells:i,vertices:o}=grid,u=i.i.length,l=new Uint8Array(u),c=b=>{l[b]=1},h=Number(An(i.temp))||0,f=Number(vn(i.temp))||0,s=Math.max(Math.round(Math.abs(h-f)/5),1),d=Oe(h+s,f,s),g=[],p=[];for(const b of i.i){const w=i.temp[b];if(l[b]||!d.includes(w))continue;const M=y(b,w);if(!M)continue;l[b]=1;const T=Yr({vertices:o,startingVertex:M,ofSameType:A=>i.temp[A]>=w,addToChecked:c}).filter((A,R)=>R%4===0||o.c[A].some(N=>N>=u));if(T.length<6)continue;const _=T.map(A=>o.p[A]);g.push([w,_]),k(_,w)}temperature.append("path").attr("d",`M0,0 h${graphWidth} v${graphHeight} h${-graphWidth} Z`).attr("fill",n(1-(h-a)/r)).attr("stroke","none");for(const b of d){const w=g.filter(S=>S[0]===b).map(S=>zn(e(S[1])||"")).join("");if(!w)continue;const M=n(1-(b-a)/r),x=Ge(M).darker(.2);temperature.append("path").attr("d",w).attr("fill",M).attr("stroke",x.toString())}temperature.append("g").attr("id","tempLabels").attr("fill-opacity",1).selectAll("text").data(p).enter().append("text").attr("x",b=>b[0]).attr("y",b=>b[1]).text(b=>Tp(b[2]));function y(b,w){return i.b[b]?i.v[b].find(M=>o.c[M].some(x=>x>=u)):i.v[b][i.c[b].findIndex(M=>i.temp[M]<w||!i.temp[M])]}function k(b,w){const M=svgWidth/2,x=pa(b,(T,_)=>T[1]-_[1]+(Math.abs(T[0]-M)-Math.abs(_[0]-M))/2),S=b[x];if(v(S[0],S[1],w),b.length>20){const T=pa(b,(R,N)=>N[1]-R[1]+(Math.abs(R[0]-M)-Math.abs(N[0]-M))/2),_=b[T];(S[1]-_[1])**2+(S[0]-_[0])**2>100&&v(_[0],_[1],w)}}function v(b,w,M){b<20||b>svgWidth-20||w<20||w>svgHeight-20||p.push([b,w,M])}TIME&&console.timeEnd("drawTemperature")};window.drawTemperature=U6;
