# Architecture Compendium

> **See also**: [VISION.md](./VISION.md) for the product philosophy and design principles underlying this architecture.

This document provides a high-level map of the Aralia codebase, organized by product domains. Each domain links to detailed documentation covering subcomponents, file ownership, and dependencies.

---

## Quick Reference

| Domain | Description | Entry Point |
|--------|-------------|-------------|
| [Glossary](./architecture/domains/glossary.md) | In-game reference system for rules, spells, items | `Glossary.tsx` |
| [World Map](./architecture/domains/world-map.md) | Region-level navigation and exploration | `MapPane.tsx` |
| [Submap](./architecture/domains/submap.md) | Tile-based exploration within regions | `SubmapPane.tsx` |
| [Town Map](./architecture/domains/town-map.md) | Village/town interior navigation | `TownCanvas.tsx` |
| [Battle Map](./architecture/domains/battle-map.md) | Tactical combat grid and tokens | `BattleMap.tsx` |
| [Combat](./architecture/domains/combat.md) | Combat mechanics, initiative, actions | `combatUtils.ts` |
| [Spells](./architecture/domains/spells.md) | Spell data, targeting, effects | Spell system |
| [Character Creator](./architecture/domains/character-creator.md) | Character generation wizard | `CharacterCreator.tsx` |
| [Character Sheet](./architecture/domains/character-sheet.md) | Character stats, equipment, abilities | `CharacterSheetModal.tsx` |
| [NPCs / Companions](./architecture/domains/npcs-companions.md) | NPC interactions and party members | Companion systems |
| [Items / Trade / Inventory](./architecture/domains/items-trade-inventory.md) | Item management and economy | `InventoryList.tsx` |
| [Planes / Travel](./architecture/domains/planes-travel.md) | Planar mechanics and travel systems | Planar systems |
| [Data Pipelines](./architecture/domains/data-pipelines.md) | Scripts, generators, validators | `scripts/` |

---

## Codebase Structure Overview

```
src/
  components/     # React UI components (organized by feature)
  hooks/          # React hooks (state, effects, logic)
  systems/        # Game mechanics (combat, spells, planar, etc.)
  services/       # Backend services (AI, generation, persistence)
  state/          # Redux-like state management
  data/           # Static game data (races, classes, items)
  types/          # TypeScript type definitions
  utils/          # Utility functions
  config/         # Configuration constants

scripts/          # Build-time tools and validators
public/data/      # Runtime JSON data (spells, glossary entries)
docs/             # Documentation (you are here)
```

---

## Dependency Graph

For detailed file-level dependencies, see the generated artifacts:

- [`_generated/deps.json`](./architecture/_generated/deps.json) - Full import graph
- [`_generated/file-inventory.json`](./architecture/_generated/file-inventory.json) - All tracked files

These are regenerated by running:
```bash
npx --no-install tsx scripts/generate-architecture-compendium.ts
```

---

## Maintenance

See [architecture/README.md](./architecture/README.md) for:
- How to add new domains
- How to update file ownership
- Domain document template
- Regenerating dependency graphs

---

## Related Documentation

- [VISION.md](./VISION.md) - Product philosophy and design principles
- [CODE_WALKTHROUGH.md](./CODE_WALKTHROUGH.md) - Execution flow documentation
- [@PROJECT-OVERVIEW.README.md](./@PROJECT-OVERVIEW.README.md) - Project summary
