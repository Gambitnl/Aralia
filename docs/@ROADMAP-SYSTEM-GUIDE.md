# @ROADMAP-SYSTEM-GUIDE.md

**Purpose**: Documentation for the Aralia "Elastic" Roadmap Visualizer and Knowledge Tree.

---

## üß≠ Overview

The **Aralia Chronicles Roadmap** is a high-fidelity, interactive visualization tool designed to track the project's history, current development pillars, and future milestones. Unlike static text roadmaps, it provides an "elastic" node-and-edge graph that represents dependencies and progress visually.

### Key Features
- **Elastic Interaction**: Drag nodes; the connecting SVG lines stretch and curve in real-time.
- **Dynamic Layouts**: Switch between `manual`, `timeline`, `categorical`, and `spiral` views.
- **Side-Panel Drill-down**: Click a node to see detailed historical context, goals, and the "Codebase Footprint."
- **Persistence**: Manual arrangements are saved to `localStorage` (Save/Reset buttons in HUD).
- **Auto-Sync**: Data is dynamically generated by scanning documentation and Conductor tracks.
- **Deep Linking**: Nodes link directly to specific documentation files (e.g., `docs/tasks/...`).

---

## üèóÔ∏è Architecture

The system consists of three main layers:

### 1. The Data Engine (`scripts/roadmap-server-logic.ts`)
The "Brain" of the roadmap. Instead of manual JSON entry, this script dynamically builds the graph:
- **Registry Parsing**: Scans `docs/@DOC-REGISTRY.md` to extract Projects and Tasks.
- **Metadata Extraction**: Reads individual task files to pull "Primary Goals" and "Codebase Footprint" (file paths).
- **Track Integration**: Automatically imports active **Conductor Tracks**.
- **Historical Chronicles**: Merges manual milestones from `.agent/roadmap/chronicles.json`.

### 2. The Visualizer (`src/components/debug/RoadmapVisualizer.tsx`)
A React component built for high performance:
- **Framer Motion**: Handles physics-based dragging and smooth transitions between layouts.
- **Motion Values**: Synchronizes HTML node positions with SVG line endpoints at 60fps.
- **Taxonomy Modes**: Color-code by `domain`, `status`, or `standard` branding.

### 3. Integration & API (`vite.config.ts`)
The roadmap is served via a custom Vite middleware:
- **Endpoint**: `/api/roadmap/data`
- **Entry Point**: `misc/roadmap.html` (which boots `src/roadmap-entry.tsx`).
- **Access**: URL param `?phase=roadmap_poc` or through the **Dev Hub**.

---

## üõ†Ô∏è How to Update

### For Humans
1. **Update the Registry**: Add tasks to `docs/@DOC-REGISTRY.md`. The roadmap will auto-detect them.
2. **Enrich Task Docs**: In your task `.md` files, use `- [ ]` for goals and `` `src/...` `` for file paths. The "Drill-down" panel will automatically extract these.
3. **Manual Milestones**: Add major historical events to `.agent/roadmap/chronicles.json`.

### For Agents
Agents can trigger a roadmap refresh by updating the registry or creating new Conductor tracks. The Roadmap Tool serves as the "Common Operating Picture" for multi-agent coordination.

---

## üîÆ Future Roadmap for the Roadmap
- [ ] **Position Persistence**: Save manual node arrangements to `localStorage` or a config file.
- [ ] **Auto-Sync**: Automatically update progress percentages based on `docs/@DOC-REGISTRY.md` or test results.
- [ ] **Multi-Select**: Drag groups of nodes simultaneously.
- [ ] **Thematic Skins**: Switch between "Arcane" (gold/blue) and "Terminal" (green/black) visual styles.

---

## üîó Related Documents
- [`docs/@DOC-REGISTRY.md`](./@DOC-REGISTRY.md) - The source for task numbering and status.
- [`scripts/roadmap-server-logic.ts`](../scripts/roadmap-server-logic.ts) - The data generation logic.
- [`src/components/debug/RoadmapVisualizer.tsx`](../src/components/debug/RoadmapVisualizer.tsx) - The visualizer source code.
